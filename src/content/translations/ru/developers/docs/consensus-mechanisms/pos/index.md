---
title: Доказательство владения (PoS)
description: Объяснение протокола доказательства владения и его роли в Ethereum.
lang: ru
incomplete: true
---

Ethereum переходит к механизму консенсуса, называемому доказательством владения (Proof-of-Stake, PoS), с консенсуса [доказательства работы (Proof-of-Work, PoW)](/developers/docs/consensus-mechanisms/pow/). Этот переход планировался, поскольку он — ключевая часть стратегии сообщества по масштабированию Ethereum с помощью [обновлений](/upgrades/). Однако переход к PoS является более сложной технической задачей, чем использование относительного простого PoW для достижения консенсуса в сети.

## Прежде чем начать {#prerequisites}

Чтобы лучше понять эту страницу, мы рекомендуем сначала ознакомиться с [механизмами консенсуса](/developers/docs/consensus-mechanisms/).

## Что такое доказательство владения (PoS)? {#what-is-pos}

Доказательство владения (proof-of-stake, PoS) — это [механизм консенсуса](/developers/docs/consensus-mechanisms/), используемый блокчейн-сетями для достижения консенсуса в распределенной системе.

PoS требует от пользователей вкладывать свои ETH, чтобы стать валидаторами в сети. Валидаторы несут ту же ответственность, что и майнеры в случае с [доказательством работы](/developers/docs/consensus-mechanisms/pow/): упорядочение транзакций и создание новых блоков, чтобы все узлы могли согласовать состояние сети.

У доказательства владения есть много преимуществ по сравнению с доказательством работы:

- Выше энергоэффективность: не нужно использовать много энергии для майнинга блоков
- Ниже порог для входа, уменьшение требований к оборудованию: нет необходимости в дорогом оборудовании, чтобы иметь возможность создавать новые блоки
- Больше защита от централизации: доказательство владения должно увеличить количество узлов в сети
- Больше поддержка [цепей-осколков](/upgrades/sharding/): ключевое улучшение для масштабирования сети Ethereum

## Доказательство владения, стейкинг и валидаторы {#pos-staking-validators}

Доказательство владения является базовым механизмом, который дает возможность стать валидатором при достаточном залоге. В Ethereum пользователи должны заложить 32 ETH, чтобы стать валидаторами. Валидаторы выбираются случайным образом для создания блоков и отвечают за проверку и подтверждение блоков, которые они не создавали. В качестве стимула для правильной проверки также используется залог пользователей. Например, пользователь может потерять часть своего залога, если будет вне сети (поскольку не сможет выполнять свою функцию — подтверждение блоков), или даже весь залог из-за преднамеренного сговора.

## Как работает доказательство владения в сети Ethereum? {#how-does-pos-work}

В отличие от доказательства работы валидатору в системе с доказательством владения не нужны большие вычислительные мощности, поскольку валидаторы, проверяющие очередной блок, выбираются случайно и между собой не конкурируют. Валидатор не добывает блок, а просто создает его, если он (случайно) был выбран проверяющим, в противном случае он проверяет созданный другим валидатором блок. Данная проверка называется аттестацией. Аттестация означает, что валидатор подтверждает правильность блока. Валидаторы получают вознаграждение за предложение новых блоков и за аттестацию прошлых.

За аттестацию неправильных, злонамеренных блоков вы будете терять свой залог.

### Beacon Chain {#the-beacon-chain}

При замене доказательства работы на доказательство владения возникнет дополнительная сложность с [цепочками осколков](/upgrades/sharding/). Это отдельные блокчейны, которым тоже нужны валидаторы для обработки транзакций и создания новых блоков. План состоит в том, чтоб будет 64 цепочки осколков, и у них у всех должно быть единое понимание состояния сети. В результате необходима дополнительная координация, которую будет выполнять [Beacon Chain](/upgrades/beacon-chain/).

Сеть Beacon Chain получает информацию о состоянии осколков и делает ее доступной для других цепочек осколков, чтобы сеть могла оставаться синхронизированной. Сеть Beacon также будет управлять валидаторами, начиная с регистрации поставленных ими депозитов до выдачи наград и штрафных санкций.

Вот как это все работает.

### Как происходит проверка {#how-does-validation-work}

Когда вы отправляете транзакцию в осколок, за добавление вашей транзакции в блок осколка будет отвечать валидатор. Валидаторы для предложения новых блоков выбираются алгоритмически сетью Beacon.

#### Аттестация {#attestation}

Если валидатор не выбран для предложения нового блока осколка, он должен аттестовать предложение другого валидатора. Это аттестация, записанная в сети Beacon, а не в самой транзакции.

Для аттестации каждого блока осколка требуется не менее 128 валидаторов. Это называется «комитетом».

У комитета есть срок, в который он должен предложить и утвердить блок осколка. Это называется «ячейкой». На одну ячейку создается только один действителньй блок, а 32 ячейки составляют «эпоху». После каждой эпохи, комитет распускается и пересоздается с участием различных случайных участников. Это помогает сохранить осколки в безопасности от комитетов из недобросовестных пользователей.

#### Кросс-ссылки {#rewards-and-penalties}

Как только предложение о новом блоке осколка получит достаточно аттестаций, создается «кросс-ссылка», которая подтверждает включение блока и вашей транзакции в сеть Beacon Chain.

Как только появится перекрестная ссылка, валидатор, предложивший блок, получает свою награду.

#### Финальность {#finality}

В распределенных сетях транзакция, которая является частью блока, является «финальной», потому что блок уже не может измениться.

Чтобы добиться этого в системе с доказательством владения, Casper, протокол финальности, заставляет валидаторов согласовывать стоятояние блока в определенных точках. Как только 2/3 валидаторов придут к согласию, блок становится окончательным и завершенным. Валидаторы потеряют все свои залоги, если попробуют это исправить позже с помощью атаки 51 %.

Как сказал Влад Замфир, это работает так же, как в случае с майнером, участвовавшим в атаке 51 %: его добыча немедленно сгорает.

## Доказательство владения и безопасность {#pos-and-security}

Угроза [атаки 51 %](https://www.investopedia.com/terms/1/51-attack.asp) в системе с доказательством владения остается, но для злоумышленников она несет еще больше рисков. Чтобы сделать это, вам нужно контролировать 51 % заложенных ETH. Это очень большая сумма денег, и ее контроль мог бы вызвать падение стоимости ETH. Существует мало причин, по которым вы захотите обвалить стоимость валюты, на большое количество которой вы претендуете. Есть куда более весомые стимулы для обеспечения безопасности сети и ее рабочего состояния.

Разделение доли, «выбрасывание» и другие санкции, координируемые сетью Beacon, призваны предотвращать недобросовестное поведение. Валидаторы также будут отвечать за помечание таких инцидентов.

## Преимущества и недостатки {#pros-and-cons}

| Преимущества                                                                                                                                                                                                                                                                              | Минусы                                                                                                                     |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| Стейкинг облегчает запуск узла. Это не требует крупных инвестиций в оборудование или электроэнергию, и вы можете присоединиться к стейкинговым пулам, если у вас недостаточно ETH для стейкинга.                                                                                          | Доказательство владения все еще находится на стадии развития и прошло гораздо меньше испытаний, чем доказательство работы. |
| Стейкинг более децентрализован. Он позволяет увеличивать количество узлов без процентного увеличения прибыли, как в случае с майнингом.                                                                                                                                                   |                                                                                                                            |
| Стейкинг обеспечивает безопасный шардинг. Цепочки осколков позволяют Ethereum создавать одновременно несколько блоков, что увеличивает пропускную способность транзакций. Шардинг сети в системе с доказательством работы просто уменьшил бы мощность, необходимую для взлома части сети. |                                                                                                                            |

## Дополнительные ресурсы {#further-reading}

- [Доказательство владения: часто задаваемые вопросы](https://vitalik.ca/general/2017/12/31/pos_faq.html) — _Виталик Бутерин_
- [Что такое доказательство владения](https://consensys.net/blog/blockchain-explained/what-is-proof-of-stake/) — _ConsenSys_
- [Что такое доказательство владения и почему это важно](https://bitcoinmagazine.com/culture/what-proof-of-stake-is-and-why-it-matters-1377531463) — _Виталик Бутерин_
- [Объяснение сети Beacon Chain Ethereum 2.0, которое вам нужно прочитать в первую очередь](https://ethos.dev/beacon-chain/) — _Ethos.dev_
- [Почему именно доказательство владения (ноябрь 2020 г.)](https://vitalik.ca/general/2020/11/06/pos2020.html) — _Виталик Бутерин_
- [Доказательство владения: как я научился любить слабую субъективность (Weak Subjectivity)](https://blog.ethereum.org/2014/11/25/proof-stake-learned-love-weak-subjectivity/) — _Виталик Бутерин_
- [Философия дизайна доказательства владения](https://medium.com/@VitalikButerin/a-proof-of-stake-design-philosophy-506585978d51) — _Виталик Бутерин_

## Похожие темы {#related-topics}

- [Доказательство работы (PoW)](/developers/docs/consensus-mechanisms/pow/)
