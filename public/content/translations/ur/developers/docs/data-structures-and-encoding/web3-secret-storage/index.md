---
title: "Web3 خفیہ اسٹوریج کی تعریف"
description: "web3 خفیہ اسٹوریج کے لیے رسمی تعریف"
lang: ur-in
sidebarDepth: 2
---

اپنی ایپ کو Ethereum پر کام کرنے کے قابل بنانے کے لیے، آپ web3.js لائبریری کے ذریعے فراہم کردہ web3 آبجیکٹ استعمال کر سکتے ہیں۔ اندرونی طور پر یہ RPC کالز کے ذریعے ایک مقامی نوڈ سے رابطہ کرتا ہے۔ [web3](https://github.com/ethereum/web3.js/) کسی بھی ایسے Ethereum نوڈ کے ساتھ کام کرتا ہے جو RPC لیئر کو ایکسپوز کرتا ہے۔

`web3` میں `eth` آبجیکٹ شامل ہے - web3.eth۔

```js
var fs = require("fs")
var recognizer = require("ethereum-keyfile-recognizer")

fs.readFile("keyfile.json", (err, data) => {
  var json = JSON.parse(data)
  var result = recognizer(json)
})

/** نتیجہ
 *               [ 'web3', 3 ]   web3 (v3) کلیدی فائل
 *  [ 'ethersale', undefined ]   Ethersale کلیدی فائل
 *                        null     غلط کلیدی فائل
 */
```

یہ دستاویز Web3 خفیہ اسٹوریج کی تعریف کا **ورژن 3** ہے۔

## تعریف {#definition}

فائل کی اصل انکوڈنگ اور ڈی کوڈنگ بڑی حد تک ورژن 1 سے غیر تبدیل شدہ ہے، سوائے اس کے کہ کرپٹو الگورتھم اب AES-128-CBC پر فکس نہیں ہے (AES-128-CTR اب کم از کم ضرورت ہے)۔ زیادہ تر معنی/الگورتھم ورژن 1 کی طرح ہیں، سوائے `mac` کے، جسے ماخوذ کلید کے دوسرے بائیں طرف کے 16 بائٹس اور مکمل `ciphertext` کے الحاق کے SHA3 (keccak-256) کے طور پر دیا گیا ہے۔

خفیہ کلیدی فائلیں براہ راست `~/.web3/keystore` (یونکس جیسے سسٹمز کے لیے) اور `~/AppData/Web3/keystore` (ونڈوز کے لیے) میں محفوظ کی جاتی ہیں۔ ان کا نام کچھ بھی رکھا جا سکتا ہے، لیکن ایک اچھا کنونشن `<uuid>.json` ہے، جہاں `<uuid>` خفیہ کلید کو دیا گیا 128 بٹ UUID ہے (خفیہ کلید کے ایڈریس کے لیے رازداری کو محفوظ رکھنے والی پراکسی)۔

ایسی تمام فائلوں کا ایک متعلقہ پاس ورڈ ہوتا ہے۔ کسی دی گئی `.json` فائل کی خفیہ کلید حاصل کرنے کے لیے، پہلے فائل کی انکرپشن کلید حاصل کریں؛ یہ فائل کا پاس ورڈ لے کر اور اسے کلیدی ڈیریویشن فنکشن کے ذریعے پاس کر کے کیا جاتا ہے جیسا کہ `kdf` کلید کے ذریعے بیان کیا گیا ہے۔ KDF فنکشن کے لیے KDF پر منحصر جامد اور متحرک پیرامیٹرز `kdfparams` کلید میں بیان کیے گئے ہیں۔

PBKDF2 کو تمام کم از کم تعمیل کرنے والے نفاذ کے ذریعے سپورٹ کیا جانا چاہیے، جس کی نشاندہی اس طرح کی گئی ہے:

- `kdf`: `pbkdf2`

PBKDF2 کے لیے، kdfparams میں شامل ہیں:

- `prf`: `hmac-sha256` ہونا چاہیے (مستقبل میں بڑھایا جا سکتا ہے)؛
- `c`: تکرار کی تعداد؛
- `salt`: PBKDF کو بھیجا گیا سالٹ؛
- `dklen`: ماخوذ کلید کی لمبائی۔ >= 32 ہونا چاہیے۔

ایک بار فائل کی کلید حاصل ہو جانے کے بعد، اسے MAC کے ڈیریویشن کے ذریعے تصدیق کی جانی چاہیے۔ MAC کا حساب بائٹ ارے کے SHA3 (keccak-256) ہیش کے طور پر کیا جانا چاہیے جو ماخوذ کلید کے دوسرے بائیں طرف کے 16 بائٹس اور `ciphertext` کلید کے مواد کے الحاق کے طور پر تشکیل دیا گیا ہے، یعنی:

```js
KECCAK(DK[16..31] ++ <ciphertext>)
```

(جہاں `++` الحاق آپریٹر ہے)

اس قدر کا موازنہ `mac` کلید کے مواد سے کیا جانا چاہیے؛ اگر وہ مختلف ہیں، تو ایک متبادل پاس ورڈ کی درخواست کی جانی چاہیے (یا آپریشن منسوخ کر دیا جائے)۔

فائل کی کلید کی تصدیق کے بعد، سائفر ٹیکسٹ (فائل میں `ciphertext` کلید) کو `cipher` کلید کے ذریعے متعین کردہ سمیٹرک انکرپشن الگورتھم کا استعمال کرتے ہوئے اور `cipherparams` کلید کے ذریعے پیرامیٹرائز کر کے ڈکرپٹ کیا جا سکتا ہے۔ اگر ماخوذ کلید کا سائز اور الگورتھم کی کلید کا سائز مماثل نہیں ہے، تو ماخوذ کلید کے صفر سے بھرے، دائیں جانب کے بائٹس کو الگورتھم کی کلید کے طور پر استعمال کیا جانا چاہیے۔

تمام کم از کم تعمیل کرنے والے نفاذ کو AES-128-CTR الگورتھم کو سپورٹ کرنا چاہیے، جس کی نشاندہی اس طرح کی گئی ہے:

- `cipher: aes-128-ctr`

یہ سائفر درج ذیل پیرامیٹرز لیتا ہے، جو cipherparams کلید کو کلیدوں کے طور پر دیے گئے ہیں:

- `iv`: سائفر کے لیے 128 بٹ ابتدائی ویکٹر۔

سائفر کی کلید ماخوذ کلید کے بائیں طرف کے 16 بائٹس ہے، یعنی، `DK[0..15]`

خفیہ کلید کی تخلیق/انکرپشن بنیادی طور پر ان ہدایات کے برعکس ہونی چاہیے۔ یقینی بنائیں کہ `uuid`، `salt` اور `iv` واقعی بے ترتیب ہیں۔

`version` فیلڈ کے علاوہ، جسے ورژن کے "سخت" شناخت کنندہ کے طور پر کام کرنا چاہیے، نفاذ فارمیٹ میں چھوٹی، غیر توڑنے والی تبدیلیوں کو ٹریک کرنے کے لیے `minorversion` کا بھی استعمال کر سکتے ہیں۔

## ٹیسٹ ویکٹرز {#test-vectors}

تفصیلات:

- `ایڈریس`: `008aeeda4d805471df9b2a5b0f38a0c3bcba786b`
- `ICAP`: `XE542A5PZHH8PYIZUBEJEO0MFWRAPPIL67`
- `UUID`: `3198bc9c-6672-5ab3-d9954942343ae5b6`
- `پاس ورڈ`: `testpassword`
- `خفیہ`: `7a28b5ba57c53603b0b07b56bba752f7784bf506fa95edc395f5cf6c7514fe9d`

### PBKDF2-SHA-256 {#PBKDF2-SHA-256}

`AES-128-CTR` اور `PBKDF2-SHA-256` کا استعمال کرتے ہوئے ٹیسٹ ویکٹر:

`~/.web3/keystore/3198bc9c-6672-5ab3-d9954942343ae5b6.json` کی فائل کا مواد:

```json
{
  "crypto": {
    "cipher": "aes-128-ctr",
    "cipherparams": {
      "iv": "6087dab2f9fdbbfaddc31a909735c1e6"
    },
    "ciphertext": "5318b4d5bcd28de64ee5559e671353e16f075ecae9f99c7a79a38af5f869aa46",
    "kdf": "pbkdf2",
    "kdfparams": {
      "c": 262144,
      "dklen": 32,
      "prf": "hmac-sha256",
      "salt": "ae3cd4e7013836a3df6bd7241b12db061dbe2c6785853cce422d148a624ce0bd"
    },
    "mac": "517ead924a9d0dc3124507e3393d175ce3ff7c1e96529c6c555ce9e51205e9b2"
  },
  "id": "3198bc9c-6672-5ab3-d995-4942343ae5b6",
  "version": 3
}
```

**انٹرمیڈیٹس**:

`ماخوذ کلید`: `f06d69cdc7da0faffb1008270bca38f5e31891a3a773950e6d0fea48a7188551`
`MAC باڈی`: `e31891a3a773950e6d0fea48a71885515318b4d5bcd28de64ee5559e671353e16f075ecae9f99c7a79a38af5f869aa46`
`MAC`: `517ead924a9d0dc3124507e3393d175ce3ff7c1e96529c6c555ce9e51205e9b2`
`سائفر کلید`: `f06d69cdc7da0faffb1008270bca38f5`

### Scrypt {#scrypt}

AES-128-CTR اور Scrypt کا استعمال کرتے ہوئے ٹیسٹ ویکٹر:

```json
{
  "crypto": {
    "cipher": "aes-128-ctr",
    "cipherparams": {
      "iv": "740770fce12ce862af21264dab25f1da"
    },
    "ciphertext": "dd8a1132cf57db67c038c6763afe2cbe6ea1949a86abc5843f8ca656ebbb1ea2",
    "kdf": "scrypt",
    "kdfparams": {
      "dklen": 32,
      "n": 262144,
      "p": 1,
      "r": 8,
      "salt": "25710c2ccd7c610b24d068af83b959b7a0e5f40641f0c82daeb1345766191034"
    },
    "mac": "337aeb86505d2d0bb620effe57f18381377d67d76dac1090626aa5cd20886a7c"
  },
  "id": "3198bc9c-6672-5ab3-d995-4942343ae5b6",
  "version": 3
}
```

**انٹرمیڈیٹس**:

`ماخوذ کلید`: `7446f59ecc301d2d79bc3302650d8a5cedc185ccbb4bf3ca1ebd2c163eaa6c2d`
`MAC باڈی`: `edc185ccbb4bf3ca1ebd2c163eaa6c2ddd8a1132cf57db67c038c6763afe2cbe6ea1949a86abc5843f8ca656ebbb1ea2`
`MAC`: `337aeb86505d2d0bb620effe57f18381377d67d76dac1090626aa5cd20886a7c`
`سائفر کلید`: `7446f59ecc301d2d79bc3302650d8a5c`

## ورژن 1 سے تبدیلیاں {#alterations-from-v2}

یہ ورژن [یہاں](https://github.com/ethereum/homestead-guide/blob/master/old-docs-for-reference/go-ethereum-wiki.rst/Passphrase-protected-key-store-spec.rst) شائع کردہ ورژن 1 کے ساتھ کئی تضادات کو ٹھیک کرتا ہے۔ مختصر میں یہ ہیں:

- کیپٹلائزیشن غیر منصفانہ اور متضاد ہے (scrypt چھوٹے حروف، Kdf مخلوط کیس، MAC بڑے حروف)۔
- ایڈریس غیر ضروری ہے اور رازداری سے سمجھوتہ کرتا ہے۔
- `Salt` بنیادی طور پر کلیدی ڈیریویشن فنکشن کا ایک پیرامیٹر ہے اور اس کے ساتھ منسلک ہونے کا مستحق ہے، نہ کہ عام طور پر کرپٹو کے ساتھ۔
- _SaltLen_ غیر ضروری ہے (صرف اسے Salt سے حاصل کریں)۔
- کلیدی ڈیریویشن فنکشن دیا گیا ہے، پھر بھی کرپٹو الگورتھم کو سختی سے متعین کیا گیا ہے۔
- `Version` بنیادی طور پر عددی ہے پھر بھی ایک سٹرنگ ہے (سٹرکچرڈ ورژننگ ایک سٹرنگ کے ساتھ ممکن ہوگی، لیکن اسے شاذ و نادر ہی تبدیل ہونے والی کنفیگریشن فائل فارمیٹ کے دائرہ کار سے باہر سمجھا جا سکتا ہے)۔
- `KDF` اور `cipher` تصوراتی طور پر بھائی بہن کے تصورات ہیں پھر بھی مختلف طریقے سے منظم ہیں۔
- `MAC` کا حساب ڈیٹا کے ایک وائٹ اسپیس اگنوسٹک ٹکڑے کے ذریعے کیا جاتا ہے (!)

فارمیٹ میں درج ذیل فائل دینے کے لیے تبدیلیاں کی گئی ہیں، جو پہلے سے منسلک صفحہ پر دی گئی مثال کے فعال طور پر مساوی ہے:

```json
{
  "crypto": {
    "cipher": "aes-128-cbc",
    "ciphertext": "07533e172414bfa50e99dba4a0ce603f654ebfa1ff46277c3e0c577fdc87f6bb4e4fe16c5a94ce6ce14cfa069821ef9b",
    "cipherparams": {
      "iv": "16d67ba0ce5a339ff2f07951253e6ba8"
    },
    "kdf": "scrypt",
    "kdfparams": {
      "dklen": 32,
      "n": 262144,
      "p": 1,
      "r": 8,
      "salt": "06870e5e6a24e183a5c807bd1c43afd86d573f7db303ff4853d135cd0fd3fe91"
    },
    "mac": "8ccded24da2e99a11d48cda146f9cc8213eb423e2ea0d8427f41c3be414424dd",
    "version": 1
  },
  "id": "0498f19a-59db-4d54-ac95-33901b4f1870",
  "version": 2
}
```

## ورژن 2 سے تبدیلیاں {#alterations-from-v2}

ورژن 2 ایک ابتدائی C++ نفاذ تھا جس میں بہت سے کیڑے تھے۔ اس سے تمام ضروری چیزیں غیر تبدیل شدہ رہتی ہیں۔
