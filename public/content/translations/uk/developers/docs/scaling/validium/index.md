---
title: Validium
description: "Вступ до Validium як рішення для масштабування, яке зараз використовується спільнотою Ethereum."
lang: uk
sidebarDepth: 3
---

Validium — це [рішення для масштабування](/developers/docs/scaling/), яке забезпечує цілісність транзакцій за допомогою доказів дійсності, як-от [ZK-ролапи](/developers/docs/scaling/zk-rollups/), але не зберігає дані транзакцій у головній мережі Ethereum. Хоча доступність даних поза мережею має свої компроміси, це може призвести до значного покращення масштабованості (Validium може обробляти [~9000 транзакцій або більше за секунду](https://blog.matter-labs.io/zkrollup-vs-validium-starkex-5614e38bc263)).

## Передумови {#prerequisites}

Вам слід було прочитати й зрозуміти нашу сторінку про [масштабування Ethereum](/developers/docs/scaling/) та [шар 2](/layer-2).

## Що таке Validium? {#what-is-validium}

Validium — це рішення для масштабування, які використовують доступність даних і обчислення поза мережею для підвищення пропускної здатності шляхом обробки транзакцій поза головною мережею Ethereum. Подібно до ролапів із нульовим розголошенням (ZK-ролапів), Validium публікує [докази з нульовим розголошенням](/glossary/#zk-proof) для перевірки транзакцій поза мережею в Ethereum. Це запобігає недійсним переходам стану та посилює гарантії безпеки ланцюжка Validium.

Ці «докази дійсності» можуть бути у формі ZK-SNARK (Zero-Knowledge Succinct Non-Interactive Argument of Knowledge) або ZK-STARK (Zero-Knowledge Scalable Transparent ARgument of Knowledge). Докладніше про [докази з нульовим розголошенням](https://consensys.net/blog/blockchain-explained/zero-knowledge-proofs-starks-vs-snarks/).

Кошти, що належать користувачам Validium, контролюються смарт-контрактом на Ethereum. Validium пропонує майже миттєве виведення коштів, подібно до ZK-ролапів; щойно доказ дійсності запиту на виведення буде перевірено в головній мережі, користувачі зможуть вивести кошти, надавши [докази Меркла](/developers/tutorials/merkle-proofs-for-offline-data-integrity/). Доказ Меркла підтверджує включення транзакції виведення коштів користувача в перевірений пакет транзакцій, що дозволяє контракту в мережі обробити виведення.

Однак кошти користувачів Validium можуть бути заморожені, а виведення — обмежене. Це може статися, якщо менеджери доступності даних у ланцюжку Validium приховують від користувачів дані про стан поза мережею. Без доступу до даних транзакцій користувачі не можуть обчислити доказ Меркла, необхідний для підтвердження права власності на кошти та виконання виведення.

Це основна відмінність між Validium і ZK-ролапами — їхнє положення в спектрі доступності даних. Обидва рішення по-різному підходять до зберігання даних, що впливає на безпеку та відсутність потреби в довірі.

## Як Validium взаємодіє з Ethereum? {#how-do-validiums-interact-with-ethereum}

Validium — це протоколи масштабування, побудовані на основі наявного ланцюжка Ethereum. Хоча Validium виконує транзакції поза мережею, ланцюжок Validium керується набором смарт-контрактів, розгорнутих у головній мережі, зокрема:

1. **Контракт-верифікатор**: Контракт-верифікатор перевіряє дійсність доказів, поданих оператором Validium під час оновлення стану. Сюди належать докази дійсності, що засвідчують правильність транзакцій поза мережею, і докази доступності даних, що підтверджують існування даних про транзакції поза мережею.

2. **Головний контракт**: Головний контракт зберігає зобов’язання щодо стану (корені Меркла), подані виробниками блоків, і оновлює стан Validium після перевірки доказу дійсності в мережі. Цей контракт також обробляє депозити та виведення коштів із ланцюжка Validium.

Validium також покладається на основний ланцюжок Ethereum для наступного:

### Розрахунок {#settlement}

Транзакції, виконані на Validium, не можуть бути повністю підтверджені, доки батьківський ланцюжок не перевірить їхню дійсність. Усі операції, що проводяться на Validium, повинні в кінцевому підсумку бути розраховані в головній мережі. Блокчейн Ethereum також надає «гарантії розрахунків» для користувачів Validium, що означає, що транзакції поза мережею не можуть бути скасовані або змінені після їх фіксації в мережі.

### Безпека {#security}

Ethereum, виступаючи як шар розрахунків, також гарантує дійсність переходів стану на Validium. Транзакції поза мережею, виконані в ланцюжку Validium, перевіряються за допомогою смарт-контракту на базовому шарі Ethereum.

Якщо контракт-верифікатор у мережі визнає доказ недійсним, транзакції відхиляються. Це означає, що оператори повинні задовольняти умови дійсності, що забезпечуються протоколом Ethereum, перш ніж оновлювати стан Validium.

## Як працює Validium? {#how-does-validium-work}

### Транзакції {#transactions}

Користувачі надсилають транзакції оператору — вузлу, відповідальному за виконання транзакцій у ланцюжку Validium. Деякі Validium'и можуть використовувати єдиного оператора для виконання ланцюжка або покладатися на механізм [доказу частки володіння (PoS)](/developers/docs/consensus-mechanisms/pos/) для ротації операторів.

Оператор об'єднує транзакції в пакет і надсилає його в схему доведення для створення доказу. Схема доведення приймає пакет транзакцій (та інші відповідні дані) як вхідні дані та видає доказ дійсності, що підтверджує правильність виконання операцій.

### Зобов'язання щодо стану {#state-commitments}

Стан Validium хешується як дерево Меркла, корінь якого зберігається в головному контракті на Ethereum. Корінь Меркла, також відомий як корінь стану, діє як криптографічне зобов’язання щодо поточного стану облікових записів і балансів на Validium.

Для виконання оновлення стану оператор повинен обчислити новий корінь стану (після виконання транзакцій) і надіслати його до контракту в мережі. Якщо доказ дійсності проходить перевірку, запропонований стан приймається, і Validium переходить на новий корінь стану.

### Депозити та виведення коштів {#deposits-and-withdrawals}

Користувачі переміщують кошти з Ethereum на Validium, вносячи ETH (або будь-який ERC-сумісний токен) у контракт у мережі. Контракт передає подію депозиту в Validium поза мережею, де на адресу користувача зараховується сума, що дорівнює його депозиту. Оператор також включає цю транзакцію депозиту в новий пакет.

Щоб повернути кошти в головну мережу, користувач Validium ініціює транзакцію виведення та надсилає її оператору, який перевіряє запит на виведення та включає його в пакет. Активи користувача в ланцюжку Validium також знищуються, перш ніж він зможе вийти з системи. Після перевірки доказу дійсності, пов'язаного з пакетом, користувач може викликати головний контракт, щоб вивести залишок свого початкового депозиту.

Як механізм проти цензури, протокол Validium дозволяє користувачам виводити кошти безпосередньо з контракту Validium, минаючи оператора. У цьому випадку користувачам необхідно надати доказ Меркла контракту-верифікатору, що показує включення облікового запису в корінь стану. Якщо доказ прийнято, користувач може викликати функцію виведення коштів головного контракту, щоб вивести свої кошти з Validium.

### Подання пакетів {#batch-submission}

Після виконання пакета транзакцій оператор подає пов'язаний доказ дійсності до контракту-верифікатора та пропонує новий корінь стану головному контракту. Якщо доказ дійсний, головний контракт оновлює стан Validium і фіналізує результати транзакцій у пакеті.

На відміну від ZK-ролапів, виробники блоків на Validium не зобов'язані публікувати дані транзакцій для пакетів транзакцій (лише заголовки блоків). Це робить Validium суто протоколом масштабування поза мережею, на відміну від «гібридних» протоколів масштабування (тобто [шару 2](/layer-2/)), які публікують дані про стан в основному ланцюжку Ethereum, використовуючи blob-дані, `calldata` або їх комбінацію.

### Доступність даних {#data-availability}

Як уже згадувалося, Validium використовує модель доступності даних поза мережею, за якої оператори зберігають усі дані транзакцій поза головною мережею Ethereum. Низький обсяг даних Validium у мережі покращує масштабованість (пропускна здатність не обмежується потужністю обробки даних Ethereum) і зменшує комісії для користувачів (вартість публікації даних у мережі нижча).

Однак доступність даних поза мережею створює проблему: дані, необхідні для створення або перевірки доказів Меркла, можуть бути недоступними. Це означає, що користувачі можуть не мати змоги вивести кошти з контракту в мережі, якщо оператори діятимуть зловмисно.

Різні рішення Validium намагаються вирішити цю проблему шляхом децентралізації зберігання даних про стан. Це передбачає примушення виробників блоків надсилати базові дані «менеджерам доступності даних», відповідальним за зберігання даних поза мережею та надання їх користувачам за запитом.

Менеджери доступності даних у Validium засвідчують доступність даних для транзакцій поза мережею, підписуючи кожен пакет Validium. Ці підписи є формою «доказу доступності», який перевіряє контракт-верифікатор у мережі перед затвердженням оновлень стану.

Validium'и відрізняються своїм підходом до управління доступністю даних. Деякі покладаються на довірені сторони для зберігання даних про стан, тоді як інші використовують для цього завдання випадково призначених валідаторів.

#### Комітет з доступності даних (DAC) {#data-availability-committee}

Щоб гарантувати доступність даних поза мережею, деякі рішення Validium призначають групу довірених організацій, відомих як комітет з доступності даних (DAC), для зберігання копій стану та надання доказів доступності даних. DAC легше впроваджувати, і вони вимагають меншої координації, оскільки кількість членів невелика.

Однак користувачі повинні довіряти DAC у тому, що він надасть дані за потреби (наприклад, для генерації доказів Меркла). Існує ймовірність того, що члени комітетів із доступності даних [будуть скомпрометовані зловмисником](https://notes.ethereum.org/DD7GyItYQ02d0ax_X-UbWg?view), який потім зможе приховати дані поза мережею.

[Докладніше про комітети з доступності даних у Validium](https://medium.com/starkware/data-availability-e5564c416424).

#### Доступність даних під заставу {#bonded-data-availability}

Інші Validium'и вимагають від учасників, відповідальних за зберігання даних поза мережею, робити стейкінг (тобто блокувати) токенів у смарт-контракті, перш ніж вони візьмуть на себе свої ролі. Цей стейкінг слугує «заставою» для гарантування чесної поведінки серед менеджерів доступності даних і зменшує припущення про довіру. Якщо ці учасники не зможуть довести доступність даних, застава буде скорочена (слешинг).

У схемі доступності даних під заставу будь-хто може бути призначений для зберігання даних поза мережею, щойно він надасть необхідний стейкінг. Це розширює пул відповідних менеджерів доступності даних, зменшуючи централізацію, яка впливає на комітети з доступності даних (DAC). Що важливіше, цей підхід покладається на криптоекономічні стимули для запобігання зловмисній діяльності, що є значно безпечнішим, ніж призначення довірених сторін для захисту даних поза мережею в Validium.

[Докладніше про доступність даних під заставу в Validium](https://blog.matter-labs.io/zkporter-a-breakthrough-in-l2-scaling-ed5e48842fbf).

## Volitions та Validium {#volitions-and-validium}

Validium пропонує багато переваг, але має і компроміси (зокрема, доступність даних). Але, як і багато рішень для масштабування, Validium підходить для конкретних випадків використання, тому і були створені Volitions.

Volitions поєднують у собі ланцюжок ZK-ролапу та Validium і дозволяють користувачам перемикатися між двома рішеннями для масштабування. Завдяки Volitions користувачі можуть скористатися перевагами доступності даних поза мережею Validium для певних транзакцій, зберігаючи при цьому свободу переключення на рішення доступності даних у мережі (ZK-ролап) за потреби. По суті, це дає користувачам свободу вибору компромісів залежно від їхніх унікальних обставин.

Децентралізована біржа (DEX) може віддати перевагу використанню масштабованої та приватної інфраструктури Validium для торгівлі з високою вартістю. Вона також може використовувати ZK-ролап для користувачів, які хочуть отримати вищі гарантії безпеки та відсутність довіри, що їх надає ZK-ролап.

## Validium та сумісність з EVM {#validiums-and-evm-compatibility}

Як і ZK-ролапи, Validium в основному підходить для простих застосунків, таких як обмін токенів і платежі. Підтримку загальних обчислень і виконання смарт-контрактів серед Validium важко реалізувати, враховуючи значні накладні витрати на доведення інструкцій [EVM](/developers/docs/evm/) у схемі доказу з нульовим розголошенням.

Деякі проєкти Validium намагаються обійти цю проблему, компілюючи EVM-сумісні мови (наприклад, Solidity, Vyper) у спеціальний байт-код, оптимізований для ефективного доведення. Недоліком цього підходу є те, що нові віртуальні машини, дружні до доказів із нульовим розголошенням, можуть не підтримувати важливі коди операцій EVM, і розробникам доводиться писати безпосередньо мовою високого рівня для оптимального досвіду. Це створює ще більше проблем: змушує розробників створювати dApps з абсолютно новим стеком розробки та порушує сумісність із поточною інфраструктурою Ethereum.

Однак деякі команди намагаються оптимізувати наявні коди операцій EVM для схем доведення ZK. Це призведе до розробки віртуальної машини Ethereum з нульовим розголошенням (zkEVM), EVM-сумісної віртуальної машини, яка створює докази для перевірки правильності виконання програм. З zkEVM ланцюжки Validium можуть виконувати смарт-контракти поза мережею та надсилати докази дійсності для перевірки обчислень поза мережею (без необхідності їх повторного виконання) на Ethereum.

[Докладніше про zkEVM](https://www.alchemy.com/overviews/zkevm).

## Як Validium масштабує Ethereum? {#scaling-ethereum-with-validiums}

### 1. Зберігання даних поза мережею {#offchain-data-storage}

Проєкти масштабування шару 2, такі як optimistic rollups та ZK-ролапи, обмінюють нескінченну масштабованість суто протоколів масштабування поза мережею (наприклад, [Plasma](/developers/docs/scaling/plasma/)) на безпеку, публікуючи деякі дані транзакцій на L1. Але це означає, що властивості масштабованості ролапів обмежуються пропускною здатністю даних у головній мережі Ethereum (з цієї причини [сегментація даних](/roadmap/danksharding/) пропонує покращити ємність зберігання даних Ethereum).

Validium досягає масштабованості, зберігаючи всі дані транзакцій поза мережею та публікуючи лише зобов'язання щодо стану (і докази дійсності) під час передачі оновлень стану до основного ланцюжка Ethereum. Однак наявність доказів дійсності дає Validium вищі гарантії безпеки, ніж інші суто рішення для масштабування поза мережею, включно з Plasma та [сайдчейнами](/developers/docs/scaling/sidechains/). Зменшуючи обсяг даних, які Ethereum має обробити перед перевіркою транзакцій поза мережею, конструкції Validium значно розширюють пропускну здатність у головній мережі.

### 2. Рекурсивні докази {#recursive-proofs}

Рекурсивний доказ — це доказ дійсності, який перевіряє дійсність інших доказів. Ці «докази доказів» генеруються шляхом рекурсивного агрегування кількох доказів, доки не буде створено один остаточний доказ, що перевіряє всі попередні докази. Рекурсивні докази масштабують швидкість обробки блокчейну, збільшуючи кількість транзакцій, які можна перевірити за один доказ дійсності.

Зазвичай кожен доказ дійсності, який оператор Validium надсилає в Ethereum для перевірки, підтверджує цілісність одного блоку. Тоді як один рекурсивний доказ можна використовувати для одночасного підтвердження дійсності кількох блоків Validium — це можливо, оскільки схема доведення може рекурсивно агрегувати кілька доказів блоків в один остаточний доказ. Якщо контракт-верифікатор у мережі приймає рекурсивний доказ, усі базові блоки негайно фіналізуються.

## Переваги та недоліки Validium {#pros-and-cons-of-validium}

| Переваги                                                                                                                                                                      | Недоліки                                                                                                                                                                                         |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Докази дійсності забезпечують цілісність транзакцій поза мережею та не дозволяють операторам фіналізувати недійсні оновлення стану.                           | Створення доказів дійсності вимагає спеціального обладнання, що створює ризик централізації.                                                                                     |
| Підвищує ефективність капіталу для користувачів (немає затримок при виведенні коштів назад в Ethereum)                                                     | Обмежена підтримка загальних обчислень/смарт-контрактів; для розробки потрібні спеціалізовані мови.                                                                              |
| Не вразливий до певних економічних атак, з якими стикаються системи, засновані на шахрайстві, у високоцінних додатках.                                        | Висока обчислювальна потужність, необхідна для створення доказів ZK; неефективно з точки зору витрат для застосунків із низькою пропускною здатністю.                            |
| Зменшує плату за газ для користувачів, не публікуючи calldata в головній мережі Ethereum.                                                                     | Повільніший суб'єктивний час фіналізації (10-30 хвилин для створення доказу ZK), але швидший до повної фіналізації, оскільки немає затримки на час суперечки. |
| Підходить для конкретних випадків використання, таких як торгівля або ігри на блокчейні, які надають пріоритет конфіденційності транзакцій і масштабованості. | Користувачам може бути заборонено виводити кошти, оскільки для створення доказів Меркла про право власності потрібна постійна доступність даних поза мережею.                    |
| Доступність даних поза мережею забезпечує вищий рівень пропускної здатності та підвищує масштабованість.                                                      | Модель безпеки покладається на припущення про довіру та криптоекономічні стимули, на відміну від ZK-ролапів, які покладаються виключно на криптографічні механізми безпеки.      |

### Використовуйте Validium/Volitions {#use-validium-and-volitions}

Кілька проєктів надають реалізації Validium та Volitions, які ви можете інтегрувати у свої dApps:

**StarkWare StarkEx** — _StarkEx — це рішення для масштабування шару 2 (L2) Ethereum, яке базується на доказах дійсності. Він може працювати в режимах доступності даних ZK-Rollup або Validium._

- [Документація](https://docs.starkware.co/starkex-v4/starkex-deep-dive/data-availability-modes#validium)
- [Вебсайт](https://starkware.co/starkex/)

**Matter Labs zkPorter** — _zkPorter — це протокол масштабування шару 2, який вирішує проблему доступності даних за допомогою гібридного підходу, що поєднує ідеї zkRollup і шардингу. Він може підтримувати довільну кількість сегментів, кожен зі своєю політикою доступності даних._

- [Блог](https://blog.matter-labs.io/zkporter-a-breakthrough-in-l2-scaling-ed5e48842fbf)
- [Документація](https://docs.zksync.io/zksync-protocol/rollup/data-availability)
- [Вебсайт](https://zksync.io/)

## Для подальшого читання {#further-reading}

- [Validium та матриця два на два для шару 2 — випуск № 99](https://www.buildblockchain.tech/newsletter/issues/no-99-validium-and-the-layer-2-two-by-two)
- [ZK-ролапи проти Validium](https://blog.matter-labs.io/zkrollup-vs-validium-starkex-5614e38bc263)
- [Volition та спектр доступності даних, що з'являється](https://medium.com/starkware/volition-and-the-emerging-data-availability-spectrum-87e8bfa09bb)
- [Ролапи, Validium та Volitions: дізнайтеся про найгарячіші рішення для масштабування Ethereum](https://www.defipulse.com/blog/rollups-validiums-and-volitions-learn-about-the-hottest-ethereum-scaling-solutions)
- [Практичний посібник зі зведень Ethereum](https://web.archive.org/web/20241108192208/https://research.2077.xyz/the-practical-guide-to-ethereum-rollups)
