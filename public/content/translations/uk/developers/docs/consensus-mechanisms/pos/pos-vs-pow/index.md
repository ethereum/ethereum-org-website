---
title: "Доказ частки проти підтвердження роботи"
description: "Порівняння механізмів консенсусу Ethereum на основі доказу частки та підтвердження роботи"
lang: uk
---

Коли Ethereum був запущений, механізм доказу частки все ще потребував багато досліджень і розробок, перш ніж його можна було б використовувати для захисту Ethereum. Підтвердження роботи було простішим механізмом, який уже був доведений Bitcoin, тобто основні розробники могли негайно його реалізувати, щоб запустити Ethereum. Щоб розробити доказ частки до рівня, коли його можна було б запровадити, знадобилося ще вісім років.

На цій сторінці пояснюється причина переходу Ethereum з механізму підтвердження роботи на доказ частки та пов'язані з цим компроміси.

## Безпека {#security}

Дослідники Ethereum вважають доказ частки більш безпечним, ніж підтвердження роботи. Однак він був реалізований для реальної основної мережі Ethereum лише нещодавно, і він менш перевірений часом, ніж підтвердження роботи. У наступних розділах обговорюються плюси та мінуси моделі безпеки доказу частки в порівнянні з підтвердженням роботи.

### Вартість атаки {#cost-to-attack}

У механізмі доказу частки валідатори зобов'язані депонувати («внести в стейкінг») щонайменше 32 ETH у смарт-контракт. Ethereum може знищити етер у стейкінгу, щоб покарати валідаторів, які поводяться неправильно. Щоб досягти консенсусу, щонайменше 66 % усього етеру в стейкінгу має проголосувати за певний набір блоків. Блоки, за які проголосувало >=66% частки, стають «фіналізованими», тобто їх неможливо видалити або реорганізувати.

Атака на мережу може означати перешкоджання фіналізації ланцюга або забезпечення певної організації блоків у канонічному ланцюзі, яка якимось чином приносить користь зловмиснику. Для цього зловмиснику потрібно змінити шлях чесного консенсусу, або накопичивши велику кількість етеру та проголосувавши ним безпосередньо, або обманом змусивши чесних валідаторів голосувати певним чином. Якщо не брати до уваги складні, малоймовірні атаки, які обманюють чесних валідаторів, вартість атаки на Ethereum — це вартість частки, яку зловмисник має накопичити, щоб вплинути на консенсус на свою користь.

Найнижча вартість атаки становить >33 % від загальної частки. Зловмисник, який володіє >33% загальної частки, може спричинити затримку завершення, просто перейшовши в автономний режим. Це відносно незначна проблема для мережі, оскільки існує механізм, відомий як «витік через неактивність», який виводить частку з офлайн-валідаторів, доки онлайн-більшість не становитиме 66% частки й не зможе знову фіналізувати ланцюг. Теоретично зловмисник також може спричинити подвійне завершення, маючи трохи більше 33% від загальної частки, створивши два блоки замість одного, коли його попросять стати виробником блоку, а потім двічі проголосувати всіма своїми валідаторами. Кожен форк вимагає лише, щоб 50 % чесних валідаторів, що залишилися, спершу побачили кожен блок, тому, якщо їм вдасться точно розрахувати час своїх повідомлень, вони зможуть фіналізувати обидва форки. Це має низьку ймовірність успіху, але якби зловмисник зміг спричинити подвійне завершення, спільноті Ethereum довелося б вирішити слідувати одному форку, і в цьому випадку валідатори зловмисника обов’язково зазнали б слешингу на іншому.

Маючи >33% від загальної частки, зловмисник має шанс здійснити незначний (затримка завершення) або більш серйозний (подвійне завершення) вплив на мережу Ethereum. Маючи понад 14 000 000 ETH у стейкінгу в мережі та репрезентативну ціну 1000 доларів США/ETH, мінімальна вартість проведення цих атак становить `1000 x 14 000 000 x 0,33 = 4 620 000 000 доларів США`. Зловмисник втратив би ці гроші через слешинг і був би виключений із мережі. Щоб атакувати знову, їм доведеться накопичити >33 % частки (знову) і спалити її (знову). Кожна спроба атакувати мережу коштуватиме >4,6 мільярда доларів США (за ціною 1000 доларів США/ETH і 14 мільйонів ETH у стейкінгу). Зловмисника також виключають із мережі, коли він зазнає слешингу, і він мусить приєднатися до черги активації, щоб знову приєднатися. Це означає, що швидкість повторної атаки обмежується не лише швидкістю, з якою зловмисник може накопичити >33% загальної частки, але й часом, необхідним для підключення всіх своїх валідаторів до мережі. Щоразу, коли зловмисник атакує, він стає набагато біднішим, а решта спільноти стає багатшою завдяки шоку пропозиції, що виникає в результаті.

Інші атаки, такі як атаки 51% або скасування завершення з 66% від загальної частки, вимагають значно більше ETH і є набагато дорожчими для зловмисника.

Порівняйте це з підтвердженням роботи. Вартість запуску атаки на Ethereum з механізмом підтвердження роботи дорівнювала вартості постійного володіння >50% від загального хешрейту мережі. Це дорівнювало витратам на обладнання та експлуатаційним витратам на достатню обчислювальну потужність, щоб випередити інших майнерів і постійно обчислювати рішення для підтвердження роботи. Майнінг Ethereum в основному здійснювався за допомогою графічних процесорів, а не ASIC, що дозволяло знизити витрати (хоча якби Ethereum залишився на механізмі підтвердження роботи, майнінг на ASIC міг би стати більш популярним). Супротивнику довелося б придбати багато обладнання та заплатити за електроенергію для його роботи, щоб атакувати мережу Ethereum з механізмом підтвердження роботи, але загальна вартість була б меншою за вартість, необхідну для накопичення достатньої кількості ETH для початку атаки. Атака 51% приблизно ~[у 20 разів дешевша](https://youtu.be/1m12zgJ42dI?t=1562) на механізмі підтвердження роботи, ніж на механізмі доказу частки. Якби атака була виявлена і для видалення їхніх змін був би проведений хард-форк ланцюга, зловмисник міг би неодноразово використовувати те саме обладнання для атаки на новий форк.

### Складність {#complexity}

Доказ частки набагато складніший, ніж підтвердження роботи. Це може бути аргументом на користь підтвердження роботи, оскільки в простіші протоколи важче випадково внести помилки або непередбачені ефекти. Однак складність вдалося приборкати роками досліджень і розробок, симуляцій та впроваджень у тестових мережах. Протокол доказу частки був незалежно реалізований п’ятьма окремими командами (на кожному з шарів виконання та консенсусу) п’ятьма мовами програмування, що забезпечує стійкість до помилок клієнта.

Щоб безпечно розробити та протестувати логіку консенсусу доказу частки, Beacon Chain було запущено за два роки до того, як доказ частки було реалізовано в основній мережі Ethereum. Beacon Chain діяв як пісочниця для тестування доказу частки, оскільки це був живий блокчейн, що реалізовував логіку консенсусу доказу частки, але не торкався реальних транзакцій Ethereum — по суті, просто досягаючи консенсусу щодо себе. Після того, як він був стабільним і без помилок протягом достатнього часу, Beacon Chain було «об’єднано» з основною мережею Ethereum. Все це сприяло приборканню складності доказу частки до такого рівня, що ризик непередбачених наслідків або помилок клієнта став дуже низьким.

### Поверхня атаки {#attack-surface}

Доказ частки складніший за підтвердження роботи, що означає, що є більше потенційних векторів атак, з якими потрібно боротися. Замість однієї однорангової мережі, що з’єднує клієнтів, є дві, кожна з яких реалізує окремий протокол. Наявність одного конкретного валідатора, попередньо обраного для пропозиції блоку в кожному слоті, створює потенціал для відмови в обслуговуванні, коли великі обсяги мережевого трафіку виводять цього конкретного валідатора з мережі.

Існують також способи, якими зловмисники можуть ретельно розраховувати час випуску своїх блоків або атестацій, щоб вони були отримані певною частиною чесної мережі, впливаючи на них, щоб голосувати певним чином. Нарешті, зловмисник може просто накопичити достатньо ETH для стейкінгу та домінувати в механізмі консенсусу. Кожен із цих [векторів атак має відповідні засоби захисту](/developers/docs/consensus-mechanisms/pos/attack-and-defense), але їх не потрібно захищати в механізмі підтвердження роботи.

## Децентралізація {#decentralization}

Доказ частки є більш децентралізованим, ніж підтвердження роботи, оскільки гонка озброєнь обладнання для майнінгу, як правило, витісняє приватних осіб і невеликі організації. Хоча технічно будь-хто може почати майнінг зі скромним обладнанням, імовірність отримання будь-якої винагороди є мізерно малою порівняно з інституційними майнінговими операціями. Завдяки доказу частки вартість стейкінгу та відсотковий дохід від цієї частки є однаковими для всіх. Зараз для запуску валідатора потрібно 32 ETH.

З іншого боку, винахід деривативів ліквідного стейкінгу викликав занепокоєння щодо централізації, оскільки кілька великих провайдерів керують великими обсягами ETH у стейкінгу. Це проблематично і потребує якнайшвидшого виправлення, але це також більш тонке питання, ніж здається. Централізовані провайдери стейкінгу не обов’язково мають централізований контроль над валідаторами — часто це просто спосіб створити центральний пул ETH, який багато незалежних операторів вузлів можуть вносити в стейкінг без необхідності, щоб кожен учасник мав 32 власних ETH.

Найкращий варіант для Ethereum — це коли валідатори запускаються локально на домашніх комп’ютерах, що максимізує децентралізацію. Ось чому Ethereum протистоїть змінам, які підвищують вимоги до обладнання для запуску вузла/валідатора.

## Сталість {#sustainability}

Доказ частки — це дешевий з точки зору викидів вуглецю спосіб захисту блокчейну. У механізмі підтвердження роботи майнери змагаються за право майнити блок. Майнери є більш успішними, коли вони можуть виконувати обчислення швидше, що стимулює інвестиції в обладнання та споживання енергії. Це спостерігалося для Ethereum до переходу на доказ частки. Незадовго до переходу на доказ частки Ethereum споживав приблизно 78 ТВт·год/рік — стільки ж, скільки невелика країна. Однак перехід на доказ частки зменшив ці витрати енергії на ~99,98%. Доказ частки зробив Ethereum енергоефективною платформою з низьким рівнем викидів вуглецю.

[Більше про споживання енергії Ethereum](/energy-consumption)

## Емісія {#issuance}

Ethereum з механізмом доказу частки може платити за свою безпеку, випускаючи набагато менше монет, ніж Ethereum з механізмом підтвердження роботи, оскільки валідаторам не потрібно платити високі рахунки за електроенергію. В результаті ETH може знизити свою інфляцію або навіть стати дефляційним, коли спалюється велика кількість ETH. Нижчі рівні інфляції означають, що безпека Ethereum є дешевшою, ніж за часів підтвердження роботи.

## Цікавить наочний матеріал? Для тих, хто навчається візуально {#visual-learner}

Подивіться, як Джастін Дрейк пояснює переваги доказу частки над підтвердженням роботи:

<YouTube id="1m12zgJ42dI" />

## Для подальшого читання {#further-reading}

- [Філософія дизайну доказу частки Віталіка](https://medium.com/@VitalikButerin/a-proof-of-stake-design-philosophy-506585978d51)
- [Поширені запитання Віталіка про доказ частки](https://vitalik.eth.limo/general/2017/12/31/pos_faq.html#what-is-proof-of-stake)
- [Відео «Просто пояснено» про PoS проти PoW](https://www.youtube.com/watch?v=M3EFi_POhps)
