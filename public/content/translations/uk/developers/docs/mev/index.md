---
title: "Максимальна видобута цінність (MEV)"
description: "Знайомство з максимальною видобутою цінністю (MEV)"
lang: uk
---

Максимально видобута цінність (MEV) означає максимальну цінність, яку можна отримати в результаті створення блоків понад стандартну винагороду за блок та комісії за газ шляхом включення, виключення та зміни порядку транзакцій у блоці.

## Максимально видобута цінність {#maximal-extractable-value}

Максимально видобута цінність уперше була застосована в контексті [доказу роботи](/developers/docs/consensus-mechanisms/pow/) й спочатку називалася «видобута майнером цінність». Це пояснюється тим, що при доказі роботи майнери контролюють включення, виключення та замовлення транзакцій. Однак після переходу на доказ частки володіння через [The Merge](/roadmap/merge) за ці ролі відповідають валідатори, а майнінг більше не є частиною протоколу Ethereum. Проте методи видобутку цінності досі існують, тому тепер натомість використовується термін «максимально видобута цінність».

## Передумови {#prerequisites}

Переконайтеся, що ви знайомі з [транзакціями](/developers/docs/transactions/), [блоками](/developers/docs/blocks/), [доказом частки володіння](/developers/docs/consensus-mechanisms/pos) та [газом](/developers/docs/gas/). Ознайомлення з [dapps](/apps/) та [DeFi](/defi/) також буде корисним.

## Видобуток MEV {#mev-extraction}

Теоретично MEV повністю нараховується валідаторам, оскільки вони є єдиною стороною, яка може гарантувати реалізацію прибуткової можливості MEV. Однак на практиці, велика частина MEV видобувається незалежними учасниками мережі, яких називають "шукачами." Пошукачі запускають складні алгоритми на основі даних блокчейн для виявлення вигідних можливостей MEV і мають ботів, які автоматично надсилають ці прибуткові транзакції до мережі.

Валідатори все одно отримують частину повної суми MEV, оскільки шукачі готові платити високу комісію за газ (яка йде валідатору) в обмін на вищу ймовірність включення їхніх прибуткових транзакцій у блок. Якщо припустити, що шукачі - економічно раціональні, плата за газ, яку він готовий платити, становитиме суму до 100% від MEV шукача (тому що, якщо плата за газ буде вищою, він просто потратить гроші).

При цьому для деяких висококонкурентних можливостей MEV, як-от [арбітраж DEX](#mev-examples-dex-arbitrage), шукачам, можливо, доведеться сплачувати 90% або навіть більше свого загального доходу від MEV у вигляді комісії за газ валідатору, оскільки багато людей хочуть здійснити таку ж прибуткову арбітражну операцію. Це все тому, що коли вони подають угоду з найвищою ціною на газ, то це буде єдиним способом гарантуватії виконання їх арбітражної операції.

### Газ-гольфінг {#mev-extraction-gas-golfing}

Ця динаміка зробила успішним програмування транзакцій з "газ-гольфингу", щоб вони використовували найменшу кількість газу, що є конкурентною перевагою, оскільки це дозволяє користувачам встановлювати вищу ціну на газ, зберігаючи при цьому загальну плату за газ постійною (оскільки плата за газ = ціна газу \* використаний газ).

Кілька відомих технік газ-гольфінгу включають: використання адрес, що починаються з довгого рядка нулів (наприклад, [0x0000000000C521824EaFf97Eac7B73B084ef9306](https://eth.blockscout.com/address/0x0000000000C521824EaFf97Eac7B73B084ef9306)), оскільки вони займають менше місця (а отже, і газу) для зберігання; і залишення невеликих балансів токенів [ERC-20](/developers/docs/standards/tokens/erc-20/) у контрактах, оскільки ініціалізація слота зберігання (у випадку, якщо баланс дорівнює 0) коштує більше газу, ніж оновлення слота зберігання. Виявлення нових методів зменшення споживання газу є активною сферою досліджень серед пошукачів.

### Узагальнені фронтранери {#mev-extraction-generalized-frontrunners}

Замість того, щоб програмувати складні алгоритми для виявлення вигідних можливостей MEV, деякі пошукачі запускають випереджальних ботів. Випереджальні боти - це боти, які стежать за мемпулом для виявлення прибуткових транзакцій. Цей бот буде копіювати код потенційно прибуткової транзакції, замінювати адреси адресою бота і запускати транзакцію локально, щоб двічі перевірити, чи змінена транзакція приносить прибуток на адресу даного бота. Якщо транзакція дійсно приносить прибуток, бот подає змінену транзакцію із заміненою адресою та вищою ціною на газ, "випереджаючи" початкову транзакцію та отримуючи MEV початкового шукача.

### Flashbots {#mev-extraction-flashbots}

Flashbots — це незалежний проєкт, який розширює клієнти виконання службою, що дозволяє шукачам надсилати транзакції MEV валідаторам, не розкриваючи їх у загальнодоступному мемпулі. Це заважає транзакціям бути передовими за допомогою випереджальних ботів.

## Приклади MEV {#mev-examples}

MEV виникає в блокчейні кількома способами.

### Арбітраж DEX {#mev-examples-dex-arbitrage}

Арбітраж на [децентралізованих біржах](/glossary/#dex) (DEX) — це найпростіша та найвідоміша можливість MEV. В результаті він також є найбільш конкурентоспроможним.

Це працює так: якщо два DEX пропонують токен за двома різними цінами, хтось може купити токен за дешевшим DEX і продати його за більш дорогим DEX за одну атомну транзакцію. Завдяки цій механіці блокчейна це справжній, безризиковий арбітраж.

[Ось приклад](https://eth.blockscout.com/tx/0x5e1657ef0e9be9bc72efefe59a2528d0d730d478cfc9e6cdd09af9f997bb3ef4) прибуткової арбітражної транзакції, де шукач перетворив 1000 ETH на 1045 ETH, скориставшись різними цінами пари ETH/DAI на Uniswap та Sushiswap.

### Ліквідації {#mev-examples-liquidations}

Ліквідація протоколу кредитування є ще однією відомою можливістю MEV.

Протоколи кредитування, такі як Maker і Aave, вимагають від користувачів внесення певного забезпечення (наприклад, ETH). Потім це внесене забезпечення використовується для надання позик іншим користувачам.

Потім користувачі можуть позичати активи та токени в інших залежно від своїх потреб (наприклад, ви можете позичити MKR, якщо хочете проголосувати за пропозицію щодо управління в MakerDAO) до певного відсотка від внесеного ними забезпечення. Наприклад, якщо сума позики становить максимум 30%, користувач, який вносить 100 DAI у протокол, може позичити інший актив на суму до 30 DAI. Протокол визначає точний відсоток кредитоспроможності.

Зі зміною вартості застави позичальника змінюється і їх позикова здатність. Якщо через ринкові коливання вартість позичених активів перевищує, скажімо, 30% вартості їхнього забезпечення (знову ж таки, точний відсоток визначається протоколом), протокол зазвичай дозволяє будь-кому ліквідувати забезпечення, миттєво розраховуючись із кредиторами (це схоже на те, як працюють [маржин-коли](https://www.investopedia.com/terms/m/margincall.asp) у традиційних фінансах). У разі ліквідації позичальник, як правило, повинен сплачувати значний збір за ліквідацію, частина з яких надходить до ліквідатора - саме там і з’являється можливість введення MEV-доступу.

Пошукачі змагаються за те, щоб аналізувати дані блокчейна якнайшвидше, щоб визначити, яких позичальників можна ліквідувати, і першими подати ліквідаційну операцію та стягнути для себе кошти за неї.

### Сендвіч-трейдинг {#mev-examples-sandwich-trading}

Сандвіч-торгівля - це ще один поширений метод видобутку MEV.

Щоб скористатися цим методом, шукач буде спостерігати за мемпулом для великих торгів DEX. Наприклад, припустимо, що хтось хоче купити 10 000 UNI за DAI на Uniswap. Операція такого масштабу матиме значний вплив на пару UNI/DAI, потенційно значно підвищивши ціну UNI відносно DAI.

Шукач може розрахувати приблизний ціновий ефект від цієї великої операції на пару UNI/DAI і виконати оптимальний ордер на купівлю безпосередньо _перед_ великою операцією, дешево купивши UNI, а потім виконати ордер на продаж безпосередньо _після_ великої операції, продавши її за вищою ціною, спричиненою великим ордером.

Сендвічинг, однак, є більш ризикованим, оскільки він не є атомарним (на відміну від арбітражу DEX, як описано вище) і схильний до [атаки сальмонелою](https://github.com/Defi-Cartel/salmonella).

### NFT MEV {#mev-examples-nfts}

MEV у просторі NFT - це явище, яке може виникати, і не обов’язково є прибутковим.

Однак, оскільки транзакції NFT відбуваються у тому самому блокчейні, яким користуються всі інші транзакції Ethereum, пошукачі можуть використовувати подібні методи, які використовуються в традиційних можливостях MEV на ринку NFT.

Наприклад, якщо популярне падіння є в NFT і шукач хоче певного NFT або його набору, вони можуть запрограмувати транзакцію таким чином, що вони будуть першими в черзі, щоб купити NFT, або вони зможуть купити весь набір NFT через разову транзакцію. Або якщо NFT [помилково виставлено за низькою ціною](https://www.theblockcrypto.com/post/113546/mistake-sees-69000-cryptopunk-sold-for-less-than-a-cent), шукач може випередити інших покупців і придбати його дешево.

Один яскравий приклад NFT MEV трапився, коли шукач витратив 7 мільйонів доларів, щоб [купити](https://eth.blockscout.com/address/0x650dCdEB6ecF05aE3CAF30A70966E2F395d5E9E5?tab=txs) кожен Cryptopunk за мінімальною ціною. Дослідник блокчейну [пояснив у Twitter](https://twitter.com/IvanBogatyy/status/1422232184493121538), як покупець співпрацював з провайдером MEV, щоб зберегти свою покупку в таємниці.

### Довгий хвіст {#mev-examples-long-tail}

DEX арбітраж, ліквідація та сандвіч-торгівля - це дуже відомі можливості MEV і навряд чи вони будуть прибутковими для нових шукачів. Однак існує довга заключна частина менш відомих можливостей MEV (NFT MEV, мабуть, одна з таких можливостей).

Шукачі, які тільки починають роботу, можуть досягти більшого успіху, шукаючи MEV у цій довгій заключній частині. На [дошці вакансій MEV](https://github.com/flashbots/mev-job-board) від Flashbot перелічені деякі нові можливості.

## Наслідки MEV {#effects-of-mev}

MEV не несе за собою тільки все погане - є й позитивні, і негативні наслідки для MEV на Ethereum.

### Позитивні сторони {#effects-of-mev-the-good}

Багато проектів DeFi спираються на економічно раціональні суб'єкти для забезпечення корисності та стабільності своїх протоколів. Наприклад, арбітраж DEX гарантує, що користувачі отримуватимуть найкращі та найбільш сприятливі ціни на свої токени, а протоколи кредитування спиратимуться на швидку ліквідацію, коли позичальники опускатимуться нижче коефіцієнтів застави, щоб гарантувати повернення для позичальників.

Без раціональних шукачів, які шукають і виправляють економічну неефективність та користуються економічними стимулами протоколів, протоколи DeFi та програми загалом могли би бути не такими надійними, як сьогодні.

### Негативні сторони {#effects-of-mev-the-bad}

На рівні додатків деякі форми MEV, наприклад, сандвіч-торгівля, однозначно погіршують досвід користувачів. Користувачі, які використовують метод сандвічу, стикаються із збільшенням неуспішності та погіршенням виконання своїх угод.

На мережевому рівні загальні передові компанії та аукціони з цінами на газ, в яких вони часто беруть участь (коли два або більше лідерів змагаються за те, щоб їх транзакція була включена до наступного блоку шляхом поступового підвищення ціни на газ власних транзакцій), призводять до перевантаження мережі та високої ціни на газ для всіх, хто намагається здійснювати регулярні операції.

Окрім того, що відбувається _в межах_ блоків, MEV може мати шкідливі наслідки _між_ блоками. Якщо MEV, доступний у блоці, значно перевищує стандартну винагороду за блок, валідатори можуть бути зацікавлені в реорганізації блоків і захопленні MEV для себе, що спричинить реорганізацію блокчейну та нестабільність консенсусу.

Ця можливість реорганізації блокчейну [раніше досліджувалася на блокчейні Bitcoin](https://dl.acm.org/doi/10.1145/2976749.2978408). Оскільки половина винагороди за блок Bitcoin і комісії за транзакції становлять все більшу та більшу частину блочної винагороди, виникають ситуації, коли майнерам краще економічно-раціонально відмовлятися від винагороди за наступний блок і замість цього замінити минулі блоки з вищою
оплатою. З ростом MEV така сама ситуація може виникнути в Ethereum, що загрожує цілісності блокчейна.

## Стан MEV {#state-of-mev}

Видобуток MEV збільшився на початку 2021 року, що призвело до надзвичайно високих цін на газ у перші кілька місяців року. Поява ретранслятора MEV від Flashbots знизила ефективність узагальнених фронтранерів і вивела аукціони цін на газ за межі мережі, знизивши ціни на газ для звичайних користувачів.

Хоча багато шукачів досі добре заробляють на MEV, у міру того як можливості стають більш відомими, і все більше шукачів конкурують за одну й ту ж можливість, валідатори будуть захоплювати все більшу частину загального доходу від MEV (оскільки ті ж самі аукціони газу, що були описані вище, також відбуваються у Flashbots, хоч і приватно, і валідатори будуть отримувати дохід від газу). MEV також не є унікальним для Ethereum, і оскільки ці здатності стають більш конкурентоспроможними в Ethereum, шукачі переходять на альтернативні блокчейни, такі як Binance Smart Chain, де подібні можливості MEV, як і в Ethereum, які існують з меншою конкуренцією.

З іншого боку, перехід від доказу роботи до доказу частки володіння та постійні зусилля з масштабування Ethereum за допомогою ролапів змінюють ландшафт MEV усе ще не до кінця зрозумілими способами. Ще невідомо, як наявність гарантованих пропонувачів блоків, відомих заздалегідь, змінює динаміку видобутку MEV порівняно з імовірнісною моделлю в доказі роботи, або як це буде порушено, коли будуть реалізовані [вибори єдиного таємного лідера](https://ethresear.ch/t/secret-non-single-leader-election/11789) та [технологія розподілених валідаторів](/staking/dvt/). Аналогічно, ще належить з'ясувати, які можливості MEV існують, коли більша частина активності користувачів буде перенесена з Ethereum на ролапи та шарди 2-го рівня.

## MEV в Ethereum Proof-of-Stake (PoS) {#mev-in-ethereum-proof-of-stake}

Як уже пояснювалося, MEV має негативні наслідки для загального користувацького досвіду та безпеки на рівні консенсусу. Але перехід Ethereum на консенсус доказу частки володіння (названий «The Merge») потенційно створює нові ризики, пов'язані з MEV:

### Централізація валідаторів {#validator-centralization}

В Ethereum після The Merge валідатори (які зробили гарантійні депозити в розмірі 32 ETH) досягають консенсусу щодо дійсності блоків, доданих до Beacon Chain. Оскільки 32 ETH можуть бути недоступними для багатьох, [приєднання до пулу для стейкінгу](/staking/pools/) може бути більш реальним варіантом. Тим не менш, здоровий розподіл [соло-стейкерів](/staking/solo/) є ідеальним, оскільки це зменшує централізацію валідаторів і підвищує безпеку Ethereum.

Однак вважається, що видобуток MEV здатний прискорити централізацію валідаторів. Частково це пов'язано з тим, що, оскільки валідатори [заробляють менше за пропонування блоків](/roadmap/merge/issuance/#how-the-merge-impacts-ETH-supply), ніж раніше майнери, видобуток MEV значно [вплинув на заробіток валідаторів](https://github.com/flashbots/eth2-research/blob/main/notebooks/mev-in-eth2/eth2-mev-calc.ipynb) після [The Merge](/roadmap/merge/).

Більші пули для стейкінгу, ймовірно, матимуть більше ресурсів для інвестування в необхідні оптимізації для захоплення можливостей MEV. Чим більше MEV видобувають ці пули, тим більше ресурсів вони мають для вдосконалення своїх можливостей видобутку MEV (і збільшення загального доходу), по суті створюючи [економію від масштабу](https://www.investopedia.com/terms/e/economiesofscale.asp#).

Маючи менше ресурсів у своєму розпорядженні, соло-стейкери можуть бути не в змозі отримувати прибуток від можливостей MEV. Це може посилити тиск на незалежних валідаторів, змушуючи їх приєднуватися до потужних пулів для стейкінгу, щоб збільшити свої заробітки, зменшуючи децентралізацію в Ethereum.

### Дозволені мемпули {#permissioned-mempools}

У відповідь на сендвіч-атаки та фронтранінг трейдери можуть почати укладати офчейн-угоди з валідаторами для забезпечення конфіденційності транзакцій. Замість того щоб відправляти потенційну транзакцію MEV до публічного мемпулу, трейдер надсилає її безпосередньо валідатору, який включає її в блок і ділить прибуток з трейдером.

«Темні пули» — це більша версія цієї схеми, вони функціонують як дозволені мемпули з обмеженим доступом, відкриті для користувачів, готових платити певні комісії. Ця тенденція зменшить бездозвільність і бездовірність Ethereum і потенційно перетворить блокчейн на механізм «плати, щоб грати», який віддає перевагу тому, хто запропонує найвищу ціну.

Дозволені мемпули також прискорять ризики централізації, описані в попередньому розділі. Великі пули, що керують кількома валідаторами, ймовірно, отримають вигоду від пропонування конфіденційності транзакцій трейдерам і користувачам, збільшуючи свої доходи від MEV.

Боротьба з цими проблемами, пов'язаними з MEV, в Ethereum після The Merge є основною сферою досліджень. На сьогодні запропоновано два рішення для зменшення негативного впливу MEV на децентралізацію та безпеку Ethereum після The Merge: [**розподіл ролей пропонувача та конструктора (PBS)**](/roadmap/pbs/) та [**API конструктора**](https://github.com/ethereum/builder-specs).

### Розподіл ролей пропонувача та конструктора {#proposer-builder-separation}

Як у доказі роботи, так і в доказі частки володіння, вузол, який створює блок, пропонує його для додавання в ланцюг іншим вузлам, що беруть участь у консенсусі. Новий блок стає частиною канонічного ланцюга після того, як інший майнер будує на його основі (в PoW) або він отримує атестації від більшості валідаторів (в PoS).

Поєднання ролей виробника блоків і пропонувача блоків є причиною більшості проблем, пов'язаних з MEV, описаних раніше. Наприклад, вузли консенсусу стимулюються до запуску реорганізацій ланцюга в [атаках «часового бандита»](https://www.mev.wiki/attack-examples/time-bandit-attack) для максимізації заробітку на MEV.

[Розподіл ролей пропонувача та конструктора](https://ethresear.ch/t/proposer-block-builder-separation-friendly-fee-market-designs/9725) (PBS) призначений для пом'якшення впливу MEV, особливо на рівні консенсусу. Головною особливістю PBS є розподіл правил виробника блоків та пропонувача блоків. Валідатори все ще відповідають за пропонування блоків і голосування за них, але новий клас спеціалізованих суб'єктів, що називаються **конструкторами блоків**, має завдання впорядковувати транзакції та створювати блоки.

У рамках PBS конструктор блоків створює пакет транзакцій і робить ставку на його включення до блоку Beacon Chain (як «корисне навантаження для виконання»). Валідатор, обраний для пропонування наступного блоку, потім перевіряє різні ставки та обирає пакет з найвищою комісією. По суті, PBS створює аукціонний ринок, де конструктори домовляються з валідаторами, що продають простір у блоках.

Поточні проєкти PBS використовують [схему commit-reveal](https://gitcoin.co/blog/commit-reveal-scheme-on-ethereum/), у якій конструктори публікують лише криптографічне зобов'язання щодо вмісту блоку (заголовок блоку) разом зі своїми ставками. Прийнявши виграшну ставку, пропонувач створює підписану пропозицію блоку, яка включає заголовок блоку. Очікується, що конструктор блоків опублікує повне тіло блоку після того, як побачить підписану пропозицію блоку, і він також повинен отримати достатньо [атестацій](/glossary/#attestation) від валідаторів, перш ніж буде фіналізований.

#### Як розподіл ролей пропонувача та конструктора пом'якшує вплив MEV? Чи впливає це оновлення на всі вузли та валідаторів Ethereum? {#how-does-pbs-curb-mev-impact}

Внутрішньопротокольний розподіл ролей пропонувача та конструктора зменшує вплив MEV на консенсус, виводячи видобуток MEV з компетенції валідаторів. Натомість надалі можливості MEV будуть захоплювати конструктори блоків, що працюють на спеціалізованому обладнанні.

Однак це не виключає валідаторів повністю з доходу, пов'язаного з MEV, оскільки конструктори повинні робити високі ставки, щоб їхні блоки були прийняті валідаторами. Проте, оскільки валідатори більше не зосереджені безпосередньо на оптимізації доходу від MEV, загроза атак «часового бандита» зменшується.

Розподіл ролей пропонувача та конструктора також зменшує ризики централізації MEV. Наприклад, використання схеми commit-reveal усуває необхідність для конструкторів довіряти валідаторам, що ті не вкрадуть можливість MEV або не розкриють її іншим конструкторам. Це знижує бар'єр для соло-стейкерів, щоб отримати вигоду від MEV, інакше конструктори схилялися б до надання переваги великим пулам з офчейн-репутацією та укладання з ними офчейн-угод.

Аналогічно, валідаторам не потрібно довіряти конструкторам, що ті не будуть утримувати тіла блоків або публікувати недійсні блоки, оскільки оплата є безумовною. Комісія валідатора все одно обробляється, навіть якщо запропонований блок недоступний або оголошений недійсним іншими валідаторами. В останньому випадку блок просто відкидається, що змушує конструктора блоків втратити всі комісії за транзакції та дохід від MEV.

### API конструктора {#builder-api}

Хоча розподіл ролей пропонувача та конструктора обіцяє зменшити наслідки видобутку MEV, його реалізація вимагає змін у протоколі консенсусу. Зокрема, правило [вибору форку](/developers/docs/consensus-mechanisms/pos/#fork-choice) на Beacon Chain потребуватиме оновлення. [API конструктора](https://github.com/ethereum/builder-specs) є тимчасовим рішенням, спрямованим на забезпечення робочої реалізації розподілу ролей пропонувача та конструктора, хоча й з вищими припущеннями щодо довіри.

API конструктора — це модифікована версія [API рушія](https://github.com/ethereum/execution-apis/blob/main/src/engine/common.md), що використовується клієнтами рівня консенсусу для запиту корисних навантажень для виконання від клієнтів рівня виконання. Як зазначено в [специфікації чесного валідатора](https://github.com/ethereum/consensus-specs/blob/dev/specs/bellatrix/validator.md), валідатори, обрані для виконання обов'язків пропонування блоків, запитують пакет транзакцій у підключеного клієнта виконання, який вони включають у запропонований блок Beacon Chain.

API конструктора також діє як проміжне програмне забезпечення між валідаторами та клієнтами рівня виконання; але він відрізняється, оскільки дозволяє валідаторам на Beacon Chain отримувати блоки від зовнішніх суб'єктів (замість того, щоб створювати блок локально за допомогою клієнта виконання).

Нижче наведено огляд роботи API конструктора:

1. API конструктора підключає валідатор до мережі конструкторів блоків, що використовують клієнти рівня виконання. Як і в PBS, конструктори є спеціалізованими сторонами, які інвестують у ресурсомістке створення блоків і використовують різні стратегії для максимізації доходу, отриманого від MEV + пріоритетних чайових.

2. Валідатор (що використовує клієнт рівня консенсусу) запитує корисні навантаження для виконання разом зі ставками від мережі конструкторів. Ставки від конструкторів міститимуть заголовок корисного навантаження для виконання — криптографічне зобов'язання щодо вмісту навантаження — і комісію, що сплачується валідатору.

3. Валідатор переглядає вхідні ставки та вибирає корисне навантаження для виконання з найвищою комісією. Використовуючи API конструктора, валідатор створює «засліплену» пропозицію блоку Beacon, яка містить лише їхній підпис і заголовок корисного навантаження для виконання, і надсилає її конструктору.

4. Очікується, що конструктор, який використовує API конструктора, відповість повним корисним навантаженням для виконання, побачивши засліплену пропозицію блоку. Це дозволяє валідатору створити «підписаний» блок Beacon, який вони поширюють по всій мережі.

5. Очікується, що валідатор, який використовує API конструктора, все одно створить блок локально на випадок, якщо конструктор блоків не відповість оперативно, щоб не пропустити винагороду за пропозицію блоку. Однак валідатор не може створити інший блок, використовуючи або щойно розкриті транзакції, або інший набір, оскільки це буде розцінено як _двозначність_ (підписання двох блоків в одному слоті), що є порушенням, яке карається слешингом.

Прикладом реалізації API конструктора є [MEV Boost](https://github.com/flashbots/mev-boost) — удосконалення [механізму аукціону Flashbots](https://docs.flashbots.net/Flashbots-auction/overview), розроблене для стримування негативних зовнішніх ефектів MEV на Ethereum. Аукціон Flashbots дозволяє валідаторам у доказі частки володіння передавати роботу зі створення прибуткових блоків спеціалізованим сторонам, що називаються **шукачами**.
![Діаграма, що детально показує потік MEV](./mev.png)

Шукачі шукають прибуткові можливості MEV і надсилають пакети транзакцій пропонувачам блоків разом із [ставкою в запечатаному конверті](https://en.wikipedia.org/wiki/First-price_sealed-bid_auction) для включення в блок. Валідатору, що використовує mev-geth, форкнуту версію клієнта go-ethereum (Geth), потрібно лише вибрати пакет з найбільшим прибутком і включити його як частину нового блоку. Для захисту пропонувачів блоків (валідаторів) від спаму та недійсних транзакцій, пакети транзакцій проходять через **ретранслятори** для перевірки, перш ніж потрапити до пропонувача.

MEV Boost зберігає ті ж принципи роботи, що й оригінальний аукціон Flashbots, хоча й з новими функціями, розробленими для переходу Ethereum на доказ частки володіння. Шукачі все ще знаходять прибуткові транзакції MEV для включення в блоки, але новий клас спеціалізованих сторін, що називаються **конструкторами**, відповідає за агрегування транзакцій і пакетів у блоки. Конструктор приймає ставки в запечатаних конвертах від шукачів і запускає оптимізації для пошуку найбільш прибуткового порядку.

Ретранслятор усе ще відповідає за перевірку пакетів транзакцій перед передачею їх пропонувачу. Однак MEV Boost вводить **ескроу-сервіси**, відповідальні за забезпечення [доступності даних](/developers/docs/data-availability/) шляхом зберігання тіл блоків, надісланих конструкторами, і заголовків блоків, надісланих валідаторами. Тут валідатор, підключений до ретранслятора, запитує доступні корисні навантаження для виконання та використовує алгоритм упорядкування MEV Boost для вибору заголовка корисного навантаження з найвищою ставкою + чайовими MEV.

#### Як API конструктора пом'якшує вплив MEV? {#how-does-builder-api-curb-mev-impact}

Основною перевагою API конструктора є його потенціал демократизувати доступ до можливостей MEV. Використання схем commit-reveal усуває припущення про довіру та знижує бар'єри входу для валідаторів, які прагнуть отримати вигоду від MEV. Це має зменшити тиск на соло-стейкерів, щоб вони інтегрувалися з великими пулами для стейкінгу для збільшення прибутку від MEV.

Широке впровадження API конструктора сприятиме більшій конкуренції серед конструкторів блоків, що підвищує стійкість до цензури. Оскільки валідатори переглядають ставки від кількох конструкторів, конструктор, який має намір цензурувати одну або кілька транзакцій користувачів, повинен перебити ставки всіх інших конструкторів, що не цензурують, щоб досягти успіху. Це значно збільшує вартість цензури користувачів і перешкоджає такій практиці.

Деякі проєкти, такі як MEV Boost, використовують API конструктора як частину загальної структури, розробленої для забезпечення конфіденційності транзакцій для певних сторін, наприклад, трейдерів, які намагаються уникнути атак фронтранінгу/сендвічингу. Це досягається шляхом надання приватного каналу зв'язку між користувачами та конструкторами блоків. На відміну від дозволених мемпулів, описаних раніше, цей підхід є вигідним з наступних причин:

1. Існування кількох конструкторів на ринку робить цензуру непрактичною, що приносить користь користувачам. Навпаки, існування централізованих і заснованих на довірі темних пулів сконцентрувало б владу в руках кількох конструкторів блоків і збільшило б можливість цензури.

2. Програмне забезпечення API конструктора є відкритим, що дозволяє будь-кому пропонувати послуги конструктора блоків. Це означає, що користувачі не змушені використовувати якогось конкретного конструктора блоків, і це покращує нейтральність і бездозвільність Ethereum. Більше того, трейдери, що шукають MEV, не будуть ненавмисно сприяти централізації, використовуючи приватні канали транзакцій.

## Пов’язані ресурси {#related-resources}

- [Документація Flashbots](https://docs.flashbots.net/)
- [Flashbots GitHub](https://github.com/flashbots/pm)
- [mevboost.org](https://www.mevboost.org/) — _трекер зі статистикою в реальному часі для ретрансляторів MEV-Boost і конструкторів блоків_

## Для подальшого читання {#further-reading}

- [Що таке видобута майнером цінність (MEV)?](https://blog.chain.link/what-is-miner-extractable-value-mev/)
- [MEV і я](https://www.paradigm.xyz/2021/02/mev-and-me)
- [Ethereum — це темний ліс](https://www.paradigm.xyz/2020/08/ethereum-is-a-dark-forest/)
- [Втеча з темного лісу](https://samczsun.com/escaping-the-dark-forest/)
- [Flashbots: випереджаючи кризу MEV](https://medium.com/flashbots/frontrunning-the-mev-crisis-40629a613752)
- [Теми про MEV від @bertcmiller](https://twitter.com/bertcmiller/status/1402665992422047747)
- [MEV-Boost: архітектура Flashbots, готова до The Merge](https://ethresear.ch/t/mev-boost-merge-ready-flashbots-architecture/11177)
- [Що таке MEV Boost](https://www.alchemy.com/overviews/mev-boost)
- [Навіщо запускати mev-boost?](https://writings.flashbots.net/writings/why-run-mevboost/)
- [Путівник автостопом по Ethereum](https://members.delphidigital.io/reports/the-hitchhikers-guide-to-ethereum)
