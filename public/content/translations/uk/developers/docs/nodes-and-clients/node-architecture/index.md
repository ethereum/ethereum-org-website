---
title: "Архітектура вузла"
description: "Вступ до того, як організовані вузли Ethereum."
lang: uk
---

Вузол Ethereum складається з двох клієнтів: [клієнта виконання](/developers/docs/nodes-and-clients/#execution-clients) та [клієнта консенсусу](/developers/docs/nodes-and-clients/#consensus-clients). Щоб вузол міг запропонувати новий блок, він також має запустити [клієнт-валідатор](#validators).

Коли Ethereum використовував [підтвердження роботи](/developers/docs/consensus-mechanisms/pow/), клієнта виконання було достатньо для запуску повного вузла Ethereum. Однак після впровадження [доказу частки](/developers/docs/consensus-mechanisms/pow/), клієнт виконання має використовуватися разом з іншим програмним забезпеченням, що називається [клієнт консенсусу](/developers/docs/nodes-and-clients/#consensus-clients).

Діаграма нижче показує відношення між двома клієнтами Ethereum. Два клієнти підключаються до своїх власних відповідних однорангових (P2P) мереж. Окремі P2P-мережі потрібні, оскільки клієнти виконання поширюють транзакції через свою P2P-мережу, що дозволяє їм керувати своїм локальним пулом транзакцій, тоді як клієнти консенсусу поширюють блоки через свою P2P-мережу, забезпечуючи консенсус і зростання ланцюга.

![](Чи впливає це оновлення на всі вузли та валідаторів Ethereum? node-architecture-text-background.png)

_Існує кілька варіантів клієнтів виконання, зокрема Erigon, Nethermind та Besu_.

Щоб ця структура з двох клієнтів працювала, клієнти консенсусу повинні передавати пакети транзакцій клієнту виконання. Клієнт виконання виконує транзакції локально, щоб перевірити, що транзакції не порушують жодних правил Ethereum і що запропоноване оновлення стану Ethereum є правильним. Коли вузол обирається для створення блоку, його екземпляр клієнта консенсусу запитує пакети транзакцій у клієнта виконання, щоб включити їх до нового блоку та виконати для оновлення глобального стану. Клієнт консенсусу керує клієнтом виконання через локальне RPC-з’єднання за допомогою [Engine API](https://github.com/ethereum/execution-apis/blob/main/src/engine/common.md).

## Що робить клієнт виконання? {#execution-client}

Клієнт виконання відповідає за перевірку, обробку та поширення транзакцій, а також за керування станом і підтримку віртуальної машини Ethereum ([EVM](/developers/docs/evm/)). Він **не** відповідає за створення блоків, їх поширення чи обробку логіки консенсусу. Це входить до компетенції клієнта консенсусу.

Клієнт виконання створює корисні навантаження виконання — список транзакцій, оновлене дерево стану та інші дані, пов’язані з виконанням. Клієнти консенсусу включають корисне навантаження виконання в кожен блок. Клієнт виконання також відповідає за повторне виконання транзакцій у нових блоках, щоб переконатися в їхній дійсності. Виконання транзакцій відбувається на вбудованому комп’ютері клієнта виконання, відомому як [віртуальна машина Ethereum (EVM)](/developers/docs/evm).

Клієнт виконання також пропонує інтерфейс користувача для Ethereum через [методи RPC](/developers/docs/apis/json-rpc), які дозволяють користувачам надсилати запити до блокчейну Ethereum, подавати транзакції та розгортати смарт-контракти. Зазвичай виклики RPC обробляються бібліотекою, як-от [Web3js](https://docs.web3js.org/), [Web3py](https://web3py.readthedocs.io/en/v5/), або інтерфейсом користувача, наприклад, браузерним гаманцем.

Отже, клієнт виконання — це:

- шлюз користувача до Ethereum
- місце, де знаходиться віртуальна машина Ethereum, стан Ethereum і пул транзакцій.

## Що робить клієнт консенсусу? {#consensus-client}

Клієнт консенсусу обробляє всю логіку, яка дозволяє вузлу залишатися синхронізованим із мережею Ethereum. Це включає отримання блоків від пірів і запуск алгоритму вибору форку, щоб гарантувати, що вузол завжди слідує за ланцюгом із найбільшим накопиченням атестацій (зважених за ефективними балансами валідаторів). Подібно до клієнта виконання, клієнти консенсусу мають власну P2P-мережу, через яку вони обмінюються блоками та атестаціями.

Клієнт консенсусу не бере участі в атестації або пропозиції блоків — це робить валідатор, необов’язковий додаток до клієнта консенсусу. Клієнт консенсусу без валідатора лише відстежує верхівку ланцюга, дозволяючи вузлу залишатися синхронізованим. Це дозволяє користувачеві здійснювати транзакції з Ethereum за допомогою свого клієнта виконання, будучи впевненим, що він знаходиться на правильному ланцюгу.

## Валідатори {#validators}

Стейкінг і запуск програмного забезпечення валідатора дають вузлу право бути обраним для пропозиції нового блоку. Оператори вузлів можуть додати валідатора до своїх клієнтів консенсусу, внісши 32 ETH на депозитний контракт. Клієнт-валідатор постачається в комплекті з клієнтом консенсусу і може бути доданий до вузла в будь-який час. Валідатор обробляє атестації та пропозиції блоків. Це також дозволяє вузлу отримувати винагороди або втрачати ETH через штрафи чи слешинг.

[Докладніше про стейкінг](/staking/).

## Порівняння компонентів вузла {#node-comparison}

| Клієнт виконання                            | Клієнт консенсусу                                                                                                                                                   | Валідатор                   |
| ------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------- |
| Поширює транзакції через свою P2P-мережу    | Поширює блоки та атестації через свою P2P-мережу                                                                                                                    | Пропонує блоки              |
| Виконує/повторно виконує транзакції         | Запускає алгоритм вибору форку                                                                                                                                      | Нараховує винагороди/штрафи |
| Перевіряє вхідні зміни стану                | Відстежує верхівку ланцюга                                                                                                                                          | Створює атестації           |
| Керує деревами стану та квитанцій           | Керує станом Beacon Chain (містить інформацію про консенсус та виконання)                                                                        | Вимагає стейкінгу 32 ETH    |
| Створює корисне навантаження виконання      | Відстежує накопичену випадковість у RANDAO (алгоритм, що забезпечує перевірену випадковість для вибору валідаторів та інших операцій консенсусу) | Може бути підданий слешингу |
| Надає JSON-RPC API для взаємодії з Ethereum | Відстежує обґрунтування та фіналізацію                                                                                                                              |                             |

## Для подальшого читання {#further-reading}

- [Доказ частки](/developers/docs/consensus-mechanisms/pos)
- [Пропозиція блоку](/developers/docs/consensus-mechanisms/pos/block-proposal)
- [Винагороди та штрафи валідатора](/developers/docs/consensus-mechanisms/pos/rewards-and-penalties)
