---
title: "–ü–æ—Å—ñ–±–Ω–∏–∫ Waffle ¬´–ü—Ä–∏–≤—ñ—Ç, —Å–≤—ñ—Ç–µ¬ª –∑ Hardhat —Ç–∞ Ethers"
description: –°—Ç–≤–æ—Ä—ñ—Ç—å —Å–≤—ñ–π –ø–µ—Ä—à–∏–π –ø—Ä–æ—î–∫—Ç Waffle –∑ Hardhat —Ç–∞ ethers.js
author: "MiZiet"
tags:
  [
    "waffle",
    "–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏",
    "–º–æ–≤–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è",
    "—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è",
    "hardhat",
    "ethers.js"
  ]
skill: beginner
lang: uk
published: 2020-10-16
---

–£ —Ü—å–æ–º—É –ø–æ—Å—ñ–±–Ω–∏–∫—É –∑ [Waffle](https://ethereum-waffle.readthedocs.io) –º–∏ –¥—ñ–∑–Ω–∞—î–º–æ—Å—è, —è–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ—Å—Ç–∏–π –ø—Ä–æ—î–∫—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—É ¬´–ü—Ä–∏–≤—ñ—Ç, —Å–≤—ñ—Ç–µ¬ª, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ [hardhat](https://hardhat.org/) —Ç–∞ [ethers.js](https://docs.ethers.io/v5/). –ü–æ—Ç—ñ–º –º–∏ –¥—ñ–∑–Ω–∞—î–º–æ—Å—è, —è–∫ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –¥–æ –Ω–∞—à–æ–≥–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—É —Ç–∞ —è–∫ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –π–æ–≥–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Waffle.

–î–∞–≤–∞–π—Ç–µ —Ä–æ–∑–ø–æ—á–Ω–µ–º–æ –∑—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É:

```bash
yarn init
```

–∞–±–æ

```bash
npm init
```

—Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤:

```bash
yarn add -D hardhat @nomiclabs/hardhat-ethers ethers @nomiclabs/hardhat-waffle ethereum-waffle chai
```

–∞–±–æ

```bash
npm install -D hardhat @nomiclabs/hardhat-ethers ethers @nomiclabs/hardhat-waffle ethereum-waffle chai
```

–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫ ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑—Ä–∞–∑–∫–∞ –ø—Ä–æ—î–∫—Ç—É Hardhat –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–º–∞–Ω–¥–∏ `npx hardhat`.

```bash
888    888                      888 888               888
888    888                      888 888               888
888    888                      888 888               888
8888888888  8888b.  888d888 .d88888 88888b.   8888b.  888888
888    888     "88b 888P"  d88" 888 888 "88b     "88b 888
888    888 .d888888 888    888  888 888  888 .d888888 888
888    888 888  888 888    Y88b 888 888  888 888  888 Y88b.
888    888 "Y888888 888     "Y88888 888  888 "Y888888  "Y888

üë∑ –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ Hardhat v2.0.3 üë∑‚Äç

? –©–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏? ‚Ä¶
‚ùØ –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑—Ä–∞–∑–æ–∫ –ø—Ä–æ—î–∫—Ç—É
–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–π hardhat.config.js
–í–∏–π—Ç–∏
```

–í–∏–±–µ—Ä—ñ—Ç—å `–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑—Ä–∞–∑–æ–∫ –ø—Ä–æ—î–∫—Ç—É`

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—à–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É –º–∞—î –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–∞–∫:

```
MyWaffleProject
‚îú‚îÄ‚îÄ contracts
‚îÇ   ‚îî‚îÄ‚îÄ Greeter.sol
‚îú‚îÄ‚îÄ node_modules
‚îú‚îÄ‚îÄ scripts
‚îÇ   ‚îî‚îÄ‚îÄ sample-script.js
‚îú‚îÄ‚îÄ test
‚îÇ   ‚îî‚îÄ‚îÄ sample-test.js
‚îú‚îÄ‚îÄ .gitattributes
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ hardhat.config.js
‚îî‚îÄ‚îÄ package.json
```

### –¢–µ–ø–µ—Ä –ø–æ–≥–æ–≤–æ—Ä–∏–º–æ –ø—Ä–æ –¥–µ—è–∫—ñ –∑ —Ü–∏—Ö —Ñ–∞–π–ª—ñ–≤: {#now-lets-talk}

- Greeter.sol ‚Äî –Ω–∞—à —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç, –Ω–∞–ø–∏—Å–∞–Ω–∏–π –º–æ–≤–æ—é Solidity;

```solidity
contract Greeter {
string greeting;

constructor(string memory _greeting) public {
console.log("–†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è Greeter –∑ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è–º:", _greeting);
greeting = _greeting;
}

function greet() public view returns (string memory) {
return greeting;
}

function setGreeting(string memory _greeting) public {
console.log("–ó–º—ñ–Ω–∞ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –∑ '%s' –Ω–∞ '%s'", greeting, _greeting);
greeting = _greeting;
}
}
```

–ù–∞—à —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –º–æ–∂–Ω–∞ —Ä–æ–∑–¥—ñ–ª–∏—Ç–∏ –Ω–∞ —Ç—Ä–∏ —á–∞—Å—Ç–∏–Ω–∏:

1. –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä ‚Äî —É –Ω—å–æ–º—É –º–∏ –æ–≥–æ–ª–æ—à—É—î–º–æ –∑–º—ñ–Ω–Ω—É —Ç–∏–ø—É string –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `greeting`,
2. —Ñ—É–Ω–∫—Ü—ñ—è greet ‚Äî —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–ª–∏–∫—É –ø–æ–≤–µ—Ä—Ç–∞—î `greeting`,
3. —Ñ—É–Ω–∫—Ü—ñ—è setGreeting ‚Äî —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –¥–∞—î –∑–º–æ–≥—É –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è `greeting`.

- sample-test.js ‚Äî –Ω–∞—à —Ñ–∞–π–ª —Ç–µ—Å—Ç—ñ–≤

```js
describe("Greeter", function () {
  it("–ú–∞—î –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –Ω–æ–≤–µ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –ø—ñ—Å–ª—è –π–æ–≥–æ –∑–º—ñ–Ω–∏", async function () {
    const Greeter = await ethers.getContractFactory("Greeter")
    const greeter = await Greeter.deploy("Hello, world!")

    await greeter.deployed()
    expect(await greeter.greet()).to.equal("Hello, world!")

    await greeter.setGreeting("Hola, mundo!")
    expect(await greeter.greet()).to.equal("Hola, mundo!")
  })
})
```

### –ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫ ‚Äî –∫–æ–º–ø—ñ–ª—è—Ü—ñ—è –Ω–∞—à–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É —Ç–∞ –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤: {#compiling-and-testing}

–¢–µ—Å—Ç–∏ Waffle –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å Mocha (—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è) –∑ Chai (–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ —Ç–≤–µ—Ä–¥–∂–µ–Ω—å). –í—Å–µ, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏, —Ü–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ `npx hardhat test` —ñ –¥–æ—á–µ–∫–∞—Ç–∏—Å—è –ø–æ—è–≤–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.

```bash
‚úì –ú–∞—î –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –Ω–æ–≤–µ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –ø—ñ—Å–ª—è –π–æ–≥–æ –∑–º—ñ–Ω–∏
```

### –ü–æ–∫–∏ —â–æ –≤—Å–µ —á—É–¥–æ–≤–æ, –¥–æ–¥–∞–º–æ —Ç—Ä–æ—Ö–∏ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –¥–æ –Ω–∞—à–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É <Emoji text=":slightly_smiling_face:" size={1}/> {#adding-complexity}

–£—è–≤—ñ—Ç—å —Å–∏—Ç—É–∞—Ü—ñ—é, –∫–æ–ª–∏ —Ö—Ç–æ—Å—å –¥–æ–¥–∞—î –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫ —è–∫ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è. –¶–µ –±—É–ª–æ –± –Ω–µ –¥—É–∂–µ —Ç–µ–ø–ª–µ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è, —á–∏ –Ω–µ —Ç–∞–∫?  
–ü–µ—Ä–µ–∫–æ–Ω–∞—î–º–æ—Å—è, —â–æ —Ü—å–æ–≥–æ –Ω–µ —Å—Ç–∞–Ω–µ—Ç—å—Å—è:

–ú–∏ —Ö–æ—á–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `revert` –∑ Solidity, –∫–æ–ª–∏ —Ö—Ç–æ—Å—å –ø–µ—Ä–µ–¥–∞—î –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫. –î–æ–±—Ä–µ, —â–æ –º–∏ –º–æ–∂–µ–º–æ –ª–µ–≥–∫–æ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ü—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∑—ñ—Å—Ç–∞–≤–ª–µ–Ω–Ω—è `to.be.revertedWith()` –∑ Chai –≤—ñ–¥ Waffle.

```js
it("–ú–∞—î —Å–∫–∞—Å–æ–≤—É–≤–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—é –≤ —Ä–∞–∑—ñ –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—Ä–æ–∂–Ω—å–æ–≥–æ —Ä—è–¥–∫–∞", async () => {
  const Greeter = await ethers.getContractFactory("Greeter")
  const greeter = await Greeter.deploy("Hello, world!")

  await greeter.deployed()
  await expect(greeter.setGreeting("")).to.be.revertedWith(
    "–ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –Ω–µ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º"
  )
})
```

–°—Ö–æ–∂–µ, –Ω–∞—à –Ω–æ–≤–∏–π —Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ–π—à–æ–≤:

```bash
–†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è Greeter –∑ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è–º: Hello, world!
–ó–º—ñ–Ω–∞ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –∑ 'Hello, world!' –Ω–∞ 'Hola, mundo!'
    ‚úì –ú–∞—î –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –Ω–æ–≤–µ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –ø—ñ—Å–ª—è –π–æ–≥–æ –∑–º—ñ–Ω–∏ (1514ms)
–†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è Greeter –∑ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è–º: Hello, world!
–ó–º—ñ–Ω–∞ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –∑ 'Hello, world!' –Ω–∞ ''
    1) –ú–∞—î —Å–∫–∞—Å–æ–≤—É–≤–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—é –≤ —Ä–∞–∑—ñ –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—Ä–æ–∂–Ω—å–æ–≥–æ —Ä—è–¥–∫–∞


  1 –ø—Ä–æ–π–¥–µ–Ω–æ (2—Å)
  1 –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–æ
```

–†–µ–∞–ª—ñ–∑—É–π–º–æ —Ü—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å —É –Ω–∞—à–æ–º—É —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ:

```solidity
require(bytes(_greeting).length > 0, "–ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –Ω–µ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º");
```

–¢–µ–ø–µ—Ä –Ω–∞—à–∞ —Ñ—É–Ω–∫—Ü—ñ—è setGreeting –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–∫:

```solidity
function setGreeting(string memory _greeting) public {
require(bytes(_greeting).length > 0, "–ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –Ω–µ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º");
console.log("–ó–º—ñ–Ω–∞ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –∑ '%s' –Ω–∞ '%s'", greeting, _greeting);
greeting = _greeting;
}
```

–ó–∞–ø—É—Å—Ç—ñ–º–æ —Ç–µ—Å—Ç–∏ –∑–Ω–æ–≤—É:

```bash
‚úì –ú–∞—î –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –Ω–æ–≤–µ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –ø—ñ—Å–ª—è –π–æ–≥–æ –∑–º—ñ–Ω–∏ (1467ms)
‚úì –ú–∞—î —Å–∫–∞—Å–æ–≤—É–≤–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—é –≤ —Ä–∞–∑—ñ –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è –ø–æ—Ä–æ–∂–Ω—å–æ–≥–æ —Ä—è–¥–∫–∞ (276ms)

2 –ø—Ä–æ–π–¥–µ–Ω–æ (2—Å)
```

–í—ñ—Ç–∞—î–º–æ! –í–∏ –≤–ø–æ—Ä–∞–ª–∏—Å—è :)

### –í–∏—Å–Ω–æ–≤–æ–∫ {#conclusion}

–ú–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ –ø—Ä–æ—Å—Ç–∏–π –ø—Ä–æ—î–∫—Ç –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Waffle, Hardhat —Ç–∞ ethers.js. –ú–∏ –¥—ñ–∑–Ω–∞–ª–∏—Å—è, —è–∫ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ—î–∫—Ç, –¥–æ–¥–∞–≤–∞—Ç–∏ —Ç–µ—Å—Ç —ñ —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å.

–©–æ–± –∑–Ω–∞–π—Ç–∏ –±—ñ–ª—å—à–µ —á—É–¥–æ–≤–∏—Ö –∑—ñ—Å—Ç–∞–≤–ª–µ–Ω—å Chai –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∞—à–∏—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤, –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ [–æ—Ñ—ñ—Ü—ñ–π–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é Waffle](https://ethereum-waffle.readthedocs.io/en/latest/matchers.html).
