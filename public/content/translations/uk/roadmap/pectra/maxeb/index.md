---
title: Pectra MaxEB
description: Дізнайтеся більше про MaxEB у випуску Pectra
lang: uk
---

# MaxEB {#maxeb}

_tl;dr:_ Жорсткий форк Pectra дозволяє валідаторам Ethereum обирати вищий максимальний ефективний баланс і накопичення шляхом перетворення облікових даних для виведення коштів з **Типу 1** на **Тип 2**. Офіційним інструментом для цього є Стартова платформа. Цю операцію не можна скасувати.

## Огляд {#overview}

### Кого це стосується? {#who-is-affected}

Будь-хто, хто керує валідатором, — це, ймовірно, хтось, хто знає індекс (наприклад, [Валідатор № 12345](https://beaconcha.in/validator/12345)) валідатора, яким він керує. Якщо ви використовуєте протокол для запуску валідатора (наприклад, Lido CSM або Rocket Pool), вам потрібно буде уточнити в них, чи підтримують вони maxEB і коли.

Якщо ви займаєтеся стейкінгом за допомогою токена ліквідного стейкінгу (наприклад, rETH або stETH), жодних дій не потрібно і не рекомендується.

### Що таке "maxEB"? {#what-is-maxeb}

maxEB = МАКСимальний ефективний баланс валідатора. До жорсткого форку Pectra кожен валідатор заробляє на максимальній сумі в 32 ETH. Після Pectra валідатори матимуть можливість заробляти на будь-якому балансі від 32 до 2048 ETH з кроком в 1 ETH, погодившись на цю зміну.

### Як валідатору погодитися? Чи впливає це оновлення на всі вузли та валідаторів Ethereum? {#how-does-a-validator-opt-in}

Валідатор погоджується на зміну maxEB, конвертуючи облікові дані для виведення коштів з **Типу 1** на **Тип 2**. Це можна зробити на [Стартовій платформі (Дії валідатора)](https://launchpad.ethereum.org/validator-actions) після запуску жорсткого форку Pectra. Як і у випадку з **Тип 0** → **Тип 1**, перетворення з **Типу 1** → **Тип 2** є незворотнім процесом.

### Що таке облікові дані для виведення коштів? {#whats-a-withdrawal-credential}

Коли ви запускаєте валідатор, у вас є набір облікових даних для виведення коштів. Їх можна знайти у вашому файлі JSON з даними про депозит, або ви можете переглянути їх на сторінці вашого валідатора на beaconcha.in у [вкладці депозитів](https://beaconcha.in/validator/12345#deposits).

1. **Облікові дані для виведення коштів типу 0**: якщо облікові дані для виведення коштів вашого валідатора починаються з `0x00...`, ви зробили депозит до жорсткого форку Shapella і ще не встановили адресу для виведення коштів.

![Облікові дані для виведення коштів типу 0](./0x00-wd.png)

2. **Облікові дані для виведення коштів типу 1**: якщо облікові дані для виведення коштів вашого валідатора починаються з `0x01...`, ви зробили депозит після жорсткого форку Shapella або вже перетворили свої облікові дані **типу 0** на облікові дані **типу 1**.

![Облікові дані для виведення коштів типу 1](./0x01-wd.png)

3. **Облікові дані для виведення коштів типу 2**: цей новий тип облікових даних для виведення коштів починатиметься з `0x02...` і буде ввімкнений після Pectra. Валідаторів з обліковими даними для виведення коштів **типу 2** іноді називають "**накопичувальними валідаторами**"

| **Дозволено**   | **Не дозволено** |
| --------------- | ---------------- |
| ✅ Тип 0 → Тип 1 | ❌ Тип 0 → Тип 2  |
| ✅ Тип 1 → Тип 2 | ❌ Тип 1 → Тип 0  |
|                 | ❌ Тип 2 → Тип 1  |
|                 | ❌ Тип 2 → Тип 0  |

### Ризики {#risks}

MaxEB дозволяє валідатору надсилати весь свій баланс іншому валідатору. Користувачі, які надсилають запит на консолідацію, повинні перевірити джерело та вміст транзакції, яку вони підписують. Офіційним інструментом для використання функцій maxEB є Стартова платформа. Якщо ви все ж вирішили скористатися стороннім інструментом, вам слід переконатися, що:

- Публічний ключ і адреса для виведення коштів вихідного валідатора збігаються з валідатором, яким вони керують
- Публічний ключ цільового валідатора є правильним і належить їм
- Запит є конвертацією, а не консолідацією, якщо вони не мають наміру надсилати кошти іншому валідатору
- Транзакція підписується правильною адресою для виведення коштів

Ми **наполегливо рекомендуємо** обговорити будь-який сторонній інструмент, який ви плануєте використовувати, зі [спільнотою EthStaker](https://ethstaker.org/about). Це корисне місце, щоб перевірити ваш підхід на адекватність і уникнути помилок. Якщо ви використовуєте зловмисний або неправильно налаштований інструмент, **весь баланс вашого валідатора може бути надісланий валідатору, яким ви не керуєте**, — без можливості повернути його.

## Технічні деталі {#technical-details}

### Послідовність дій {#the-flow}

Операція `ConsolidationRequest` матиме два застосування:

1. Перетворення існуючого валідатора **типу 1** на валідатор **типу 2**
2. Консолідація інших валідаторів в існуючий валідатор **типу 2**

При перетворенні валідатора **типу 1** на валідатор **типу 2** і _вихідним_, і _цільовим_ буде валідатор, який ви конвертуєте. Операція вимагатиме плати за газ і буде поставлена в чергу за іншими запитами на консолідацію. Ця черга **окрема** від черги депозитів, на неї не впливають нові депозити валідаторів, і її можна переглянути на [pectrified.com](https://pectrified.com/).

Щоб консолідувати валідаторів, ви повинні мати _цільового валідатора_ з обліковими даними для виведення коштів **типу 2**. Це місце призначення будь-яких балансів валідаторів, що консолідуються, та індекс, що зберігається.

### Вимоги до перетворення на тип 2 {#requirements-for-converting-to-type-2}

Це буде потрібно для першого валідатора, який ви конвертуєте на **тип 2**. Індекс цього валідатора зберігається й залишається активним. Для конвертації _вихідний валідатор_ == _цільовий валідатор._

Валідатор повинен...

- бути активним
- мати облікові дані для виведення коштів **типу 1**
- не перебувати у стані виходу (або не бути підданим слешингу)
- не мати незавершених, ініційованих вручну, виведень коштів (не стосується автоматичних виведень)

![ілюстрація перетворення](./conversion.png)

### Вимоги до консолідації {#requirements-for-consolidating}

Це _та сама операція_, що й конвертація, але вона відбувається, коли _вихідний валідатор_ відрізняється від _цільового валідатора_. Індекс цільового валідатора зберігається, і він приймає баланс від вихідного валідатора. Індекс вихідного валідатора переводиться в стан `EXITED`.

У цьому випадку до вихідного валідатора застосовуються всі ті ж вимоги, що й вище, а також:

- бути активним щонайменше ~27,3 години (один `SHARD_COMMITTEE_PERIOD`)

Цільовий валідатор повинен

- мати облікові дані для виведення коштів **типу 2**
- не перебувати в стані виходу.

![ілюстрація консолідації](./consolidation.png)

### Запит на консолідацію {#the-consolidation-request}

Запит на консолідацію буде підписаний адресою виведення коштів, пов'язаною з вихідним валідатором, і міститиме:

1. Адреса вихідного валідатора (наприклад, `0x15F4B914A0cCd14333D850ff311d6DafbFbAa32b`)
2. Публічний ключ вихідного валідатора (наприклад, `0xa1d1ad0714035353258038e964ae9675dc0252ee22cea896825c01458e1807bfad2f9969338798548d9858a571f7425c`)
3. Публічний ключ цього цільового валідатора

При конвертації пункти 2 і 3 будуть однаковими. Цю операцію можна виконати на [Стартовій платформі](https://launchpad.ethereum.org/).

### Вимоги до підписання {#signing-requirements}

Щоб надіслати `ConsolidationRequest`, **адреса виведення коштів вихідного валідатора** повинна підписати запит. Це доводить контроль над коштами валідатора.

### Що підписується? {#what-is-signed}

Використовується відокремлений за доменом [корінь для підпису](https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/beacon-chain.md#compute_signing_root) об'єкта `ConsolidationRequest`.

- **Домен:** `DOMAIN_CONSOLIDATION_REQUEST`
- **Поля кореня для підпису:**
  - `source_pubkey`: `BLSPubkey`
  - `target_pubkey`: `BLSPubkey`
  - `source_address`: `ExecutionAddress`

Отриманий **BLS-підпис** надсилається разом із запитом.

Примітка: підписання виконується за допомогою адреси для виведення коштів, а не ключа валідатора.

### Часткове виведення коштів {#partial-withdrawals}

Валідатори з обліковими даними **типу 1** отримують автоматичне виведення (sweeps) свого надлишкового балансу (все, що перевищує 32 ETH) на свою адресу для виведення коштів без плати за газ. Оскільки **тип 2** дозволяє валідатору накопичувати баланс із кроком в 1 ETH, він не буде автоматично виводити кошти, доки баланс не досягне 2048 ETH. Часткове виведення коштів на валідаторах **типу 2** має ініціюватися вручну і вимагатиме плати за газ.

## Інструментарій для консолідації {#consolidation-tooling}

Існує кілька інструментів для керування консолідаціями. Офіційним інструментом, створеним Ethereum Foundation, є [Стартова платформа](https://launchpad.ethereum.org/en/validator-actions). Існують також сторонні інструменти, створені учасниками спільноти стейкінгу, які можуть пропонувати функції, не передбачені Стартовою платформою. Хоча представлені тут інструменти не пройшли аудит і не схвалені Ethereum Foundation, нижче наведено інструменти з відкритим кодом від відомих членів спільноти.

| Інструмент                      | Сайт                                                                                                      | Відкрите джерело коду           | Автор                                          | Перевірено                                                                                                                                              | Інтерфейс                                                                       | Примітні особливості                                                      |
| ------------------------------- | --------------------------------------------------------------------------------------------------------- | ------------------------------- | ---------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- | ------------------------------------------------------------------------- |
| Pectra Staking Manager          | pectrastaking.com                                                                         | Так, Apache 2.0 | [Pier Two](https://piertwo.com/)               | Ні                                                                                                                                                      | Веб-інтерфейс                                                                   | Wallet Connect, працює з SAFE                                             |
| Pectra Validator Ops CLI Tool   | [GitHub](https://github.com/Luganodes/Pectra-Batch-Contract)                                              | Так, MIT                        | [Luganodes](https://www.luganodes.com/)        | Так, Quantstamp [травень 2025](https://certificate.quantstamp.com/full/luganodes-pectra-batch-contract/23f0765f-969a-4798-9edd-188d276c4a2b/index.html) | Командний рядок                                                                 | Пакетна обробка для багатьох валідаторів одночасно                        |
| Ethereal                        | [GitHub](https://github.com/wealdtech/ethereal)                                                           | Так, Apache 2.0 | [Jim McDonald](https://www.attestant.io/team/) | Ні                                                                                                                                                      | Командний рядок                                                                 | Повний набір функцій для керування валідаторами та вузлами                |
| Siren                           | [GitHub](https://github.com/sigp/siren)                                                                   | Так, Apache 2.0 | [Sigma Prime](https://sigmaprime.io/)          | Ні                                                                                                                                                      | Частково командний рядок, але переважно веб-інтерфейс                           | Працює лише якщо ви використовуєте клієнт консенсусу Lighthouse           |
| Consolideth.app | https://consolideth.app/ [GitHub](https://github.com/Stakely/consolideth) | Так, ліцензії MIT               | [Stakely](https://stakely.io/)                 | Ні                                                                                                                                                      | Веб-інтерфейс, розміщений Stakely і готовий до вільного самостійного розміщення | Підтримує основні підключення до гаманців, включаючи safe з walletconnect |

## Часті запитання {#faq}

### Чи впливає згода на мої шанси на створення блоку або на винагороди? {#change-luck-or-rewards}

Ні. Згода не зменшує ваших шансів на створення блоку — ваші обов’язки та вибір для створення блоку залишаються незмінними. Наприклад, якщо у вас є два валідатори по 32 ETH проти одного валідатора на 64 ETH, ви матимете однакові загальні шанси бути обраним для створення блоку та отримання винагород.

### Чи впливає згода на ризик слешингу? {#change-slashing-risk}

Для невеликих або непрофесійних операторів коротка відповідь — ні. Довша відповідь полягає в тому, що для професійних операторів, які запускають багато валідаторів на одному вузлі зі швидким сповіщенням, консолідація в меншу кількість валідаторів може зменшити їхню здатність реагувати на слешинг і запобігати каскадним подіям. Початковий _штраф_ за слешинг для всіх валідаторів було значно зменшено з 1 ETH (на 32 ETH) до 0,0078125 ETH (на 32 ETH), щоб компенсувати цей ризик.

### Чи потрібно мені виводити свого валідатора для конвертації? {#exit-validator}

Ні. Ви можете конвертувати на місці без виходу.

### Скільки часу займе конвертація / консолідація? {#how-long}

Мінімум 27,3 години, але консолідації також залежать від черги. Ця черга не залежить від черг на депозит і виведення коштів і не піддається їхньому впливу.

### Чи можу я зберегти індекс свого валідатора? {#keep-validator-index}

Так. Конвертація на місці зберігає той самий індекс валідатора. Якщо ви консолідуєте кілька валідаторів, ви зможете зберегти лише індекс _цільового валідатора_.

### Чи буду я пропускати атестації? {#miss-attestations}

Під час консолідації в інший валідатор, вихідний валідатор виводиться, і настає період очікування близько 27 годин, перш ніж баланс стане активним на цільовому валідаторі. Цей період **не впливає на показники продуктивності**.

### Чи буду я нести штрафи? {#incur-penalties}

Ні. Поки ваш валідатор онлайн, ви не будете нести штрафи.

### Чи повинні збігатися адреси виведення коштів валідаторів, що консолідуються? {#withdrawal-addresses-match}

Ні. Але _вихідний_ валідатор повинен авторизувати запит зі своєї власної адреси.

### Чи будуть мої винагороди накопичуватися після конвертації? {#rewards-compound}

Так. З обліковими даними **типу 2** винагороди понад 32 ETH автоматично рестейкуються, але не миттєво. Через невеликий буфер (який називається [_гістерезис_](https://eth2book.info/capella/part2/incentives/balances/#hysteresis)), ваш баланс повинен досягти **приблизно на 1,25 ETH більше**, перш ніж надлишок буде рестейкований. Тож замість накопичення на 33,0 ETH, це відбувається на 33,25 (ефективний баланс = 33 ETH), потім 34,25 (ефективний баланс = 34 ETH) і так далі.

### Чи зможу я й надалі отримувати автоматичне виведення коштів після конвертації? {#automatic-sweep}

Автоматичне виведення коштів відбуватиметься лише з надлишковими балансами понад 2048. Для всіх інших часткових виведень коштів вам потрібно буде ініціювати їх вручну.

### Чи можу я передумати і повернутися з типу 2 на тип 1? {#go-back-to-type1}

Ні. Перетворення на **тип 2** є незворотнім.

### Якщо я хочу консолідувати кілька валідаторів, чи потрібно мені спочатку конвертувати кожен з них на тип 2? Чи впливає це оновлення на всі вузли та валідаторів Ethereum? {#consolidate-multiple-validators}

Ні! Конвертуйте один валідатор на тип 2, а потім використовуйте його як цільовий. Усі інші валідатори, консолідовані в цей цільовий валідатор типу 2, можуть бути типу 1 або типу 2

### Мій валідатор офлайн або має менше 32 ETH — чи можу я все ще його конвертувати? {#offline-or-below-32eth}

Так. Поки він активний (не виведений) і ви можете підписати транзакцію з його адреси для виведення коштів, ви можете його конвертувати.

## Ресурси {#resources}

- [Специфікації консенсусу Electra](https://github.com/ethereum/consensus-specs/blob/dev/specs/electra/beacon-chain.md): це «найправдивіша» версія, на яку ви повинні покладатися. Якщо є сумніви, читайте специфікації
- Не всім зручно розбиратися в коді, тому [цей maxEB-GPT](https://chatgpt.com/g/g-67f1650fb48081918f555e0c8d1c2ae9-maxeb-gpt) може допомогти інтерпретувати специфікації. _Відмова від відповідальності: слід покладатися на специфікації як на істину, а не на ШІ, оскільки ШІ може неправильно інтерпретувати інформацію або вигадувати відповіді_
- [pectrified.com](https://pectrified.com/): переглядайте стан консолідацій, депозитів і час очікування в черзі
- [Ethereal](https://github.com/wealdtech/ethereal): створений спільнотою інструмент командного рядка (CLI) для керування поширеними завданнями валідатора
- [batch-validator-depositor](https://github.com/attestantio/batch-validator-depositor): створений спільнотою контракт, який дозволяє робити депозити для кількох валідаторів Ethereum в одній транзакції
