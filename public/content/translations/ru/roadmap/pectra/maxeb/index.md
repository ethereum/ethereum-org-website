---
title: Pectra MaxEB
description: Узнайте больше о MaxEB в релизе Pectra
lang: ru
---

# MaxEB {#maxeb}

_Вкратце:_ хард-форк Pectra позволяет валидаторам Ethereum выбрать более высокий максимальный эффективный баланс и компаундинг путем преобразования учетных данных для вывода средств с **Типа 1** на **Тип 2**. Официальный инструмент для этого — Лаунчпад. Эта операция необратима.

## Обзор {#overview}

### Кого это затрагивает? {#who-is-affected}

Любой, кто запускает валидатор, — это, скорее всего, тот, кто знает индекс (например, [Валидатор № 12345](https://beaconcha.in/validator/12345)) валидатора, которым он управляет. Если вы используете протокол для запуска валидатора (например, Lido CSM или Rocket Pool), вам нужно будет уточнить у них, поддерживают ли они maxEB и когда.

Если вы занимаетесь стейкингом с использованием ликвидного токена стейкинга (например, rETH или stETH), никаких действий не требуется и не рекомендуется.

### Что такое «maxEB»? {#what-is-maxeb}

maxEB = МАКСимальный эффективный баланс валидатора. До хард-форка Pectra каждый валидатор зарабатывает на максимальном балансе в 32 ETH. После Pectra у валидаторов появится возможность зарабатывать на любом балансе от 32 до 2048 ETH с шагом в 1 ETH, согласившись на это изменение.

### Как валидатор может принять участие? {#how-does-a-validator-opt-in}

Валидатор принимает участие в изменении maxEB, преобразуя учетные данные для вывода средств с **типа 1** на **тип 2**. Это можно будет сделать на [Лаунчпад (Действия валидатора)](https://launchpad.ethereum.org/validator-actions) после активации хард-форка Pectra. Как и в случае с переходом **Тип 0** → **Тип 1**, переход **Тип 1** → **Тип 2** является необратимым процессом.

### Что такое учетные данные для вывода средств? {#whats-a-withdrawal-credential}

Когда вы запускаете валидатор, у вас есть набор учетных данных для вывода средств. Их можно найти в вашем файле JSON с данными о депозите, или вы можете просмотреть их на beaconcha.in во [вкладке депозитов](https://beaconcha.in/validator/12345#deposits) вашего валидатора.

1. **Учетные данные для вывода средств типа 0**: если учетные данные для вывода средств вашего валидатора начинаются с `0x00...`, вы внесли депозит до хард-форка Shapella и у вас еще не установлен адрес для вывода средств.

![Учетные данные для вывода средств типа 0](./0x00-wd.png)

2. **Учетные данные для вывода средств типа 1**: если учетные данные для вывода средств вашего валидатора начинаются с `0x01...`, вы внесли депозит после хард-форка Shapella или уже преобразовали свои учетные данные **типа 0** в учетные данные **типа 1**.

![Учетные данные для вывода средств типа 1](./0x01-wd.png)

3. **Учетные данные для вывода средств типа 2**: этот новый тип учетных данных для вывода средств будет начинаться с `0x02...` и будет включен после Pectra. Валидаторы с учетными данными для вывода средств **типа 2** иногда называют «**компаундинговыми валидаторами**»

| **Разрешено**    | **Не разрешено** |
| ---------------- | ---------------- |
| ✅  Тип 0 → Тип 1 | ❌  Тип 0 → Тип 2 |
| ✅  Тип 1 → Тип 2 | ❌  Тип 1 → Тип 0 |
|                  | ❌  Тип 2 → Тип 1 |
|                  | ❌  Тип 2 → Тип 0 |

### Риски {#risks}

MaxEB позволяет валидатору отправлять весь свой баланс другому валидатору. Пользователи, отправляющие запрос на консолидацию, должны проверять источник и содержимое транзакции, которую они подписывают. Официальным инструментом для использования функций maxEB является Лаунчпад. Если вы решите использовать сторонний инструмент, вам следует убедиться, что:

- Публичный ключ и адрес для вывода средств исходного валидатора соответствуют валидатору, которым они управляют
- Публичный ключ целевого валидатора правильный и принадлежит им
- Запрос является преобразованием, а не консолидацией, если они не намерены отправлять средства другому валидатору
- Транзакция подписывается правильным адресом для вывода средств

Мы **настоятельно рекомендуем** обсуждать любой сторонний инструмент, который вы планируете использовать, с [сообществом EthStaker](https://ethstaker.org/about). Это полезное место, чтобы проверить правильность вашего подхода и избежать ошибок. Если вы используете вредоносный или неправильно настроенный инструмент, **весь баланс вашего валидатора может быть отправлен валидатору, которого вы не контролируете**, — без возможности вернуть его.

## Технические детали {#technical-details}

### Процесс {#the-flow}

Будет два варианта использования операции `ConsolidationRequest`:

1. Преобразование существующего валидатора из валидатора **типа 1** в валидатор **типа 2**
2. Консолидация других валидаторов в существующий валидатор **типа 2**

При преобразовании валидатора **типа 1** в валидатор **типа 2** и _источник_, и _цель_ будут соответствовать преобразуемому вами валидатору. Операция потребует газа и будет поставлена в очередь за другими запросами на консолидацию. Эта очередь **отделена** от очереди депозитов, на нее не влияют новые депозиты валидаторов, и ее можно посмотреть на [pectrified.com](https://pectrified.com/).

Для консолидации валидаторов у вас должен быть _целевой валидатор_, у которого есть учетные данные для вывода средств **типа 2**. Это место назначения для всех консолидируемых балансов валидаторов и индекс, который сохраняется.

### Требования для преобразования в Тип 2 {#requirements-for-converting-to-type-2}

Это потребуется для первого валидатора, которого вы преобразуете в **Тип 2**. Индекс этого валидатора сохраняется и остается активным. Для преобразования _исходный валидатор_ == _целевой валидатор_.

Валидатор должен...

- быть активным
- иметь учетные данные для вывода средств **Типа 1**
- не находиться в состоянии выхода (или быть перечеркнутым)
- не иметь ожидающих вывода средств, запущенных вручную (не относится к автоматическому выводу)

![иллюстрация преобразования](./conversion.png)

### Требования для консолидации {#requirements-for-consolidating}

Это _та же операция_, что и преобразование, но _исходный валидатор_ отличается от _целевого валидатора_. Индекс целевого валидатора сохраняется, и он принимает баланс от исходного валидатора. Индекс исходного валидатора переводится в состояние `EXITED`.

В этом случае к исходному валидатору применяются все те же требования, что и выше, плюс:

- активен не менее ~27,3 часов (один `SHARD_COMMITTEE_PERIOD`)

Целевой валидатор должен

- иметь учетные данные для вывода средств **Типа 2**
- не находиться в состоянии выхода.

![иллюстрация консолидации](./consolidation.png)

### Запрос на консолидацию {#the-consolidation-request}

Запрос на консолидацию будет подписан адресом вывода средств, связанным с исходным валидатором, и содержать:

1. Адрес исходного валидатора (например, `0x15F4B914A0cCd14333D850ff311d6DafbFbAa32b`)
2. Публичный ключ исходного валидатора (например, `0xa1d1ad0714035353258038e964ae9675dc0252ee22cea896825c01458e1807bfad2f9969338798548d9858a571f7425c`)
3. Публичный ключ этого целевого валидатора

При преобразовании 2 и 3 будут одинаковыми. Эту операцию можно выполнить на [Лаунчпад](https://launchpad.ethereum.org/).

### Требования к подписи {#signing-requirements}

Чтобы отправить `ConsolidationRequest`, **адрес вывода средств исходного валидатора** должен подписать запрос. Это доказывает контроль над средствами валидатора.

### Что подписывается? {#what-is-signed}

Используется [корень подписи](https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/beacon-chain.md#compute_signing_root) с разделением доменов объекта `ConsolidationRequest`.

- **Домен:** `DOMAIN_CONSOLIDATION_REQUEST`
- **Поля корня подписи:**
  - `source_pubkey`: `BLSPubkey`
  - `target_pubkey`: `BLSPubkey`
  - `source_address`: `ExecutionAddress`

Полученная **BLS-подпись** отправляется вместе с запросом.

Примечание: подпись выполняется адресом для вывода средств, а не ключом валидатора.

### Частичный вывод средств {#partial-withdrawals}

Валидаторы с учетными данными **типа 1** получают автоматический вывод избыточного баланса (всего, что превышает 32 ETH) на свой адрес для вывода средств без уплаты газа. Поскольку **тип 2** позволяет валидатору накапливать (компаундировать) баланс с шагом в 1 ETH, он не будет автоматически выводить баланс, пока тот не достигнет 2048 ETH. Частичный вывод средств на валидаторах **типа 2** должен запускаться вручную и потребует газа.

## Инструменты для консолидации {#consolidation-tooling}

Существует несколько доступных инструментов для управления консолидациями. Официальный инструмент, созданный Ethereum Foundation, — это [Лаунчпад](https://launchpad.ethereum.org/en/validator-actions). Также существуют сторонние инструменты, созданные участниками стейкинг-сообщества, которые могут предлагать функции, не предоставляемые Лаунчпадом. Хотя представленные здесь инструменты не были проверены или одобрены Ethereum Foundation, ниже перечислены инструменты с открытым исходным кодом от известных членов сообщества.

| Инструмент                      | Сайт                                                                                                      | Открытый исходный код          | Создатель                                      | Проверено                                                                                                                                          | Интерфейс                                                                               | Примечательные особенности                                                |
| ------------------------------- | --------------------------------------------------------------------------------------------------------- | ------------------------------ | ---------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- | ------------------------------------------------------------------------- |
| Pectra Staking Manager          | pectrastaking.com                                                                         | Да, Apache 2.0 | [Pier Two](https://piertwo.com/)               | Нет                                                                                                                                                | Веб-интерфейс                                                                           | Wallet Connect, работает с SAFE                                           |
| Pectra Validator Ops CLI Tool   | [GitHub](https://github.com/Luganodes/Pectra-Batch-Contract)                                              | Да, MIT                        | [Luganodes](https://www.luganodes.com/)        | Да, Quantstamp [май 2025](https://certificate.quantstamp.com/full/luganodes-pectra-batch-contract/23f0765f-969a-4798-9edd-188d276c4a2b/index.html) | Командная строка                                                                        | Пакетная обработка, для многих валидаторов одновременно                   |
| Ethereal                        | [GitHub](https://github.com/wealdtech/ethereal)                                                           | Да, Apache 2.0 | [Jim McDonald](https://www.attestant.io/team/) | Нет                                                                                                                                                | Командная строка                                                                        | Полный набор функций для управления валидаторами и узлами                 |
| Siren                           | [GitHub](https://github.com/sigp/siren)                                                                   | Да, Apache 2.0 | [Sigma Prime](https://sigmaprime.io/)          | Нет                                                                                                                                                | Частично командная строка, но в основном веб-интерфейс                                  | Работает только, если вы используете клиент консенсуса Lighthouse         |
| Consolideth.app | https://consolideth.app/ [GitHub](https://github.com/Stakely/consolideth) | Да, лицензии MIT               | [Stakely](https://stakely.io/)                 | Нет                                                                                                                                                | Веб-интерфейс, размещенный на Stakely и готовый к бесплатному самостоятельному хостингу | Поддерживает основные подключения кошельков, включая Safe с WalletConnect |

## Часто задаваемые вопросы {#faq}

### Изменит ли мое участие шансы на создание блока или вознаграждения? {#change-luck-or-rewards}

Нет. Участие не уменьшает ваши шансы на создание блока — ваши обязанности и выбор для создания блока остаются прежними. Например, если у вас два валидатора по 32 ETH против одного валидатора на 64 ETH, у вас будут одинаковые общие шансы быть выбранным для предложения блока и получения вознаграждений.

### Изменяет ли мое участие риск слэшинга? {#change-slashing-risk}

Для небольших или непрофессиональных операторов короткий ответ — нет. Более развернутый ответ заключается в том, что для профессиональных операторов, запускающих много валидаторов на узел с быстрыми оповещениями, консолидация в меньшее количество валидаторов может снизить их способность реагировать на слэшинг и предотвращать каскадные события. Начальный _штраф_ за слэшинг для всех валидаторов был значительно снижен с 1 ETH (за 32 ETH) до 0,0078125 ETH (за 32 ETH), чтобы компенсировать этот риск.

### Нужно ли мне выходить из валидатора для преобразования? {#exit-validator}

Нет. Вы можете выполнить преобразование на месте, без выхода.

### Сколько времени займет преобразование/консолидация? {#how-long}

Минимум 27,3 часа, но консолидации также подлежат очереди. Эта очередь не зависит от очередей на пополнение и вывод средств и не подвержена их влиянию.

### Могу ли я сохранить свой индекс валидатора? {#keep-validator-index}

Да. Преобразование на месте сохраняет тот же индекс валидатора. Если вы консолидируете несколько валидаторов, вы сможете сохранить только индекс _целевого валидатора_.

### Пропущу ли я аттестации? {#miss-attestations}

Во время консолидации в другой валидатор исходный валидатор выходит, и существует ~27-часовой период ожидания, прежде чем баланс станет активным на целевом валидаторе. Этот период **не влияет на показатели производительности**.

### Будут ли мне начислены штрафы? {#incur-penalties}

Нет. Пока ваш валидатор находится в сети, вы не будете подвергаться штрафам.

### Должны ли совпадать адреса вывода средств консолидируемых валидаторов? {#withdrawal-addresses-match}

Нет. Но _источник_ должен авторизовать запрос со своего собственного адреса.

### Будут ли мои вознаграждения накапливаться после преобразования? {#rewards-compound}

Да. С учетными данными **типа 2** вознаграждения свыше 32 ETH автоматически рестейкаются, но не мгновенно. Из-за небольшого буфера (называемого [_гистерезисом_](https://eth2book.info/capella/part2/incentives/balances/#hysteresis)) ваш баланс должен достичь **примерно на 1,25 ETH больше**, прежде чем излишек будет рестейкнут. Так что вместо компаундинга при 33,0 ETH это происходит при 33,25 (эффективный баланс = 33 ETH), затем при 34,25 (эффективный баланс = 34 ETH) и так далее.

### Смогу ли я по-прежнему получать автоматический вывод средств после преобразования? {#automatic-sweep}

Автоматический вывод средств будет происходить только с избыточным балансом свыше 2048. Для всех остальных частичных выводов средств вам потребуется запускать их вручную.

### Могу ли я передумать и вернуться с Типа 2 на Тип 1? {#go-back-to-type1}

Нет. Переход на **Тип 2** необратим.

### Если я хочу консолидировать несколько валидаторов, нужно ли мне сначала преобразовать каждый из них в Тип 2? {#consolidate-multiple-validators}

Нет! Преобразуйте один валидатор в Тип 2, а затем используйте его в качестве цели. Все остальные валидаторы, консолидируемые в этот целевой валидатор типа 2, могут быть типа 1 или типа 2

### Мой валидатор не в сети или его баланс ниже 32 ETH — могу ли я все равно его преобразовать? {#offline-or-below-32eth}

Да. Пока он активен (не вышел) и вы можете подписывать транзакции с его адреса вывода средств, вы можете его преобразовать.

## Ресурсы {#resources}

- [Спецификации консенсуса Electra](https://github.com/ethereum/consensus-specs/blob/dev/specs/electra/beacon-chain.md): это «самая верная» версия, на которую вам следует полагаться. Если сомневаетесь, читайте спецификации
- Не всем удобно разбираться в коде, поэтому [этот maxEB-GPT](https://chatgpt.com/g/g-67f1650fb48081918f555e0c8d1c2ae9-maxeb-gpt) может помочь в интерпретации спецификаций. _Отказ от ответственности: спецификации, а не ИИ, должны считаться истиной, поскольку ИИ может неверно истолковать информацию или сгенерировать вымышленные ответы_
- [pectrified.com](https://pectrified.com/): просмотр состояния консолидаций, депозитов и времени ожидания в очереди
- [Ethereal](https://github.com/wealdtech/ethereal): созданный сообществом инструмент командной строки для управления общими задачами валидатора
- [batch-validator-depositor](https://github.com/attestantio/batch-validator-depositor): созданный сообществом контракт, который позволяет вносить депозиты для нескольких валидаторов Ethereum в одной транзакции
