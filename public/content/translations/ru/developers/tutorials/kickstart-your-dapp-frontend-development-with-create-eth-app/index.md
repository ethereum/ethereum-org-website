---
title: Начните разработку интерфейса для вашего децентрализованного приложения с помощью create-eth-app
description: Обзор использования create-eth-app и его возможностей
author: "Markus Waas"
tags:
  [
    "интерфейс",
    "javascript",
    "ethers.js",
    "the graph",
    "defi"
  ]
skill: beginner
lang: ru
published: 2020-04-27
source: soliditydeveloper.com
sourceUrl: https://soliditydeveloper.com/create-eth-app
---

В прошлый раз мы рассмотрели [общую картину Solidity](https://soliditydeveloper.com/solidity-overview-2020) и уже упоминали [create-eth-app](https://github.com/PaulRBerg/create-eth-app). Теперь вы узнаете, как его использовать, какие функции интегрированы, а также дополнительные идеи по его расширению. Это приложение, созданное Полом Разваном Бергом, основателем [Sablier](http://sablier.com/), ускорит разработку вашего интерфейса и поставляется с несколькими дополнительными интеграциями на выбор.

## Установка {#installation}

Для установки требуется Yarn 0.25 или выше (`npm install yarn --global`). Это так же просто, как запустить:

```bash
yarn create eth-app my-eth-app
cd my-eth-app
yarn react-app:start
```

Под капотом используется [create-react-app](https://github.com/facebook/create-react-app). Чтобы увидеть свое приложение, откройте `http://localhost:3000/`. Когда вы будете готовы к развертыванию в производственной среде, создайте минимизированный пакет с помощью yarn build. Один из простых способов разместить его — [Netlify](https://www.netlify.com/). Вы можете создать репозиторий GitHub, добавить его в Netlify, настроить команду сборки, и все готово! Ваше приложение будет размещено и доступно для всех. И все это бесплатно.

## Возможности {#features}

### React и create-react-app {#react--create-react-app}

Прежде всего, сердце приложения: React и все дополнительные возможности, которые предоставляет _create-react-app_. Использование только этого — отличный вариант, если вы не хотите интегрировать Ethereum. Сам [React](https://react.dev/) значительно упрощает создание интерактивных пользовательских интерфейсов. Он может быть не таким дружелюбным для новичков, как [Vue](https://vuejs.org/), но он все еще наиболее широко используется, имеет больше возможностей и, что наиболее важно, тысячи дополнительных библиотек на выбор. _create-react-app_ также очень упрощает начало работы и включает в себя:

- Поддержка синтаксиса React, JSX, ES6, TypeScript, Flow.
- Дополнительные языковые возможности помимо ES6, такие как оператор расширения объекта.
- Автоматически добавляемые префиксы в CSS, поэтому вам не понадобятся `-webkit-` или другие префиксы.
- Быстрое интерактивное средство для запуска модульных тестов со встроенной поддержкой отчетов о покрытии.
- Сервер для разработки в реальном времени, который предупреждает о распространенных ошибках.
- Скрипт сборки для объединения JS, CSS и изображений для производственной среды с хэшами и картами исходного кода.

В частности, _create-eth-app_ использует новые [эффекты хуков](https://legacy.reactjs.org/docs/hooks-effect.html). Это метод для написания мощных, но очень маленьких так называемых функциональных компонентов. См. раздел об Apollo ниже, чтобы узнать, как они используются в _create-eth-app_.

### Yarn Workspaces {#yarn-workspaces}

[Yarn Workspaces](https://classic.yarnpkg.com/en/docs/workspaces/) позволяют иметь несколько пакетов, но при этом управлять ими всеми из корневой папки и устанавливать зависимости для всех сразу с помощью `yarn install`. Это особенно полезно для небольших дополнительных пакетов, таких как управление адресами/ABI умных контрактов (информация о том, где вы развернули какие умные контракты и как с ними взаимодействовать) или интеграция с The Graph, которые являются частью `create-eth-app`.

### ethers.js {#ethersjs}

Хотя [Web3](https://docs.web3js.org/) все еще используется чаще всего, [ethers.js](https://docs.ethers.io/) в последний год набирает популярность в качестве альтернативы, и именно он интегрирован в _create-eth-app_. Вы можете работать с ним, заменить его на Web3 или рассмотреть возможность обновления до [ethers.js v5](https://docs.ethers.org/v5/), который почти вышел из бета-версии.

### The Graph {#the-graph}

[GraphQL](https://graphql.org/) — это альтернативный способ обработки данных по сравнению с [RESTful API](https://restfulapi.net/). У них есть несколько преимуществ перед RESTful API, особенно для децентрализованных данных блокчейна. Если вас интересуют причины, ознакомьтесь со статьей [GraphQL Will Power the Decentralized Web](https://medium.com/graphprotocol/graphql-will-power-the-decentralized-web-d7443a69c69a).

Обычно вы получаете данные напрямую из своего умного контракта. Хотите узнать время последней сделки? Просто вызовите `MyContract.methods.latestTradeTime().call()`, который получает данные из узла Ethereum в ваше децентрализованное приложение. Но что, если вам нужны сотни разных точек данных? Это приведет к сотням запросов данных к узлу, каждый из которых требует [RTT](https://wikipedia.org/wiki/Round-trip_delay_time), что делает ваше децентрализованное приложение медленным и неэффективным. Одним из обходных путей может быть функция в вашем контракте, которая возвращает сразу несколько данных. Однако это не всегда идеально.

Кроме того, вас могут заинтересовать исторические данные. Вы хотите знать не только время последней сделки, но и время всех сделок, которые вы когда-либо совершали сами. Используйте пакет подграфа _create-eth-app_, прочтите [документацию](https://thegraph.com/docs/en/subgraphs/developing/creating/starting-your-subgraph) и адаптируйте его к своим собственным контрактам. Если вы ищете популярные умные контракты, для них уже может существовать подграф. Ознакомьтесь с [обозревателем подграфов](https://thegraph.com/explorer/).

Как только у вас появится подграф, вы сможете написать в своем децентрализованном приложении один простой запрос, который извлекает все важные данные блокчейна, включая исторические, и для этого потребуется всего один запрос.

### Apollo {#apollo}

Благодаря интеграции [Apollo Boost](https://www.apollographql.com/docs/react/get-started/) вы можете легко интегрировать The Graph в свое децентрализованное приложение на React. Особенно при использовании [хуков React и Apollo](https://www.apollographql.com/blog/apollo-client-now-with-react-hooks) получение данных сводится к написанию одного GraphQL-запроса в вашем компоненте:

```js
const { loading, error, data } = useQuery(myGraphQlQuery)

React.useEffect(() => {
  if (!loading && !error && data) {
    console.log({ data })
  }
}, [loading, error, data])
```

## Шаблоны {#templates}

Кроме того, вы можете выбрать один из нескольких различных шаблонов. На данный момент вы можете использовать интеграцию с Aave, Compound, UniSwap или Sablier. Все они добавляют важные адреса умных контрактов сервисов вместе с готовыми интеграциями подграфов. Просто добавьте шаблон в команду создания, например: `yarn create eth-app my-eth-app --with-template aave`.

### Aave {#aave}

[Aave](https://aave.com/) — это децентрализованный рынок денежного кредитования. Вкладчики предоставляют ликвидность рынку для получения пассивного дохода, в то время как заемщики могут брать займы под залог. Одной из уникальных особенностей Aave являются [срочные займы](https://aave.com/docs/developers/flash-loans), которые позволяют вам брать деньги в долг без какого-либо залога, при условии, что вы вернете заем в рамках одной транзакции. Это может быть полезно, например, для получения дополнительных денежных средств при арбитражной торговле.

Торгуемые токены, которые приносят вам проценты, называются _aTokens_.

Когда вы решите интегрировать Aave с _create-eth-app_, вы получите [интеграцию подграфа](https://docs.aave.com/developers/getting-started/using-graphql). Aave использует The Graph и уже предоставляет несколько готовых к использованию подграфов в сетях [Ropsten](https://thegraph.com/explorer/subgraph/aave/protocol-ropsten) и [Mainnet](https://thegraph.com/explorer/subgraph/aave/protocol) в [необработанном](https://thegraph.com/explorer/subgraph/aave/protocol-raw) или [отформатированном](https://thegraph.com/explorer/subgraph/aave/protocol) виде.

![Мем про срочный заем Aave — «Дааа, было бы здорово, если бы я мог держать свой срочный заем дольше, чем 1 транзакцию»](./flashloan-meme.png)

### Compound {#compound}

[Compound](https://compound.finance/) похож на Aave. Интеграция уже включает в себя новый [подграф Compound v2](https://medium.com/graphprotocol/https-medium-com-graphprotocol-compound-v2-subgraph-highlight-a5f38f094195). Токены, приносящие проценты, здесь, как ни странно, называются _cTokens_.

### Uniswap {#uniswap}

[Uniswap](https://uniswap.exchange/) — это децентрализованная биржа (DEX). Поставщики ликвидности могут зарабатывать комиссии, предоставляя необходимые токены или эфир для обеих сторон сделки. Она широко используется и поэтому имеет одну из самых высоких ликвидностей для очень широкого спектра токенов. Вы можете легко интегрировать ее в свое децентрализованное приложение, чтобы, например, позволить пользователям обменивать свои ETH на DAI.

К сожалению, на момент написания этой статьи интеграция доступна только для Uniswap v1, а не для [только что выпущенной v2](https://uniswap.org/blog/uniswap-v2/).

### Sablier {#sablier}

[Sablier](https://sablier.com/) позволяет пользователям осуществлять потоковые денежные платежи. Вместо одного дня выплаты вы фактически получаете деньги постоянно без дополнительного администрирования после первоначальной настройки. Интеграция включает в себя [собственный подграф](https://thegraph.com/explorer/subgraph/sablierhq/sablier).

## Что дальше? {#whats-next}

Если у вас есть вопросы о _create-eth-app_, зайдите на [сервер сообщества Sablier](https://discord.gg/bsS8T47), где вы сможете связаться с авторами _create-eth-app_. В качестве следующих шагов вы можете интегрировать фреймворк пользовательского интерфейса, например [Material UI](https://mui.com/material-ui/), написать GraphQL-запросы для данных, которые вам действительно нужны, и настроить развертывание.
