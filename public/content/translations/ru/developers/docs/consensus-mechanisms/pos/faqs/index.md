---
title: Часто задаваемые вопросы
description: Часто задаваемые вопросы о доказательстве доли владения Ethereum.
lang: ru
---

## Что такое доказательство доли владения {#what-is-proof-of-stake}

Proof-of-stake - это класс алгоритма, который обеспечивает безопасность блокчейна, гарантируя, что активы не будут потеряны из-за действий злоумышленников, действующих недобросовестно. Системы Proof-of-stake требуют, чтобы набор валидаторов предоставил некоторый актив, который будет уничтожен, если валидатор совершит какое-то нечестное действие. Ethereum использует механизм proof-of-stake для защиты блокчейна.

## Чем proof-of-stake отличается от proof-of-work? {#comparison-to-proof-of-work}

И доказательство работы, и доказательство доли владения — это механизмы, которые экономически препятствуют злоумышленникам рассылать спам или обманывать сеть. В обоих случаях узлы, активно участвующие в консенсусе, вносят в сеть некий актив, который они потеряют, если будут плохо себя вести.

В механизме доказательства работы этим активом является энергия. Узел, известный как майнер, запускает алгоритм, цель которого - вычислить значение быстрее, чем любой другой узел. Самый быстрый узел имеет право предложить блок для добавления в цепь. Чтобы изменить историю цепи или доминировать в предложении блоков, майнер должен обладать такой большой вычислительной мощностью, чтобы всегда побеждать в гонке. Это непомерно дорого и трудновыполнимо, что защищает цепь от атак. Энергия, необходимая для «майнинга» с использованием доказательства работы, — это реальный актив, за который платят майнеры.

Доказательство доли владения требует, чтобы узлы, известные как валидаторы, явно отправляли криптоактив в смарт-контракт. Если валидатор поведет себя ненадлежащим образом, этот криптоактив может быть уничтожен, потому что он «ставит» свои активы непосредственно в цепь, а не косвенно через затраты энергии.

Доказательство работы намного более энергозатратно, потому что в процессе майнинга сжигается электричество. Доказательство доли владения, с другой стороны, требует очень малого количества энергии — валидаторы Ethereum могут работать даже на маломощных устройствах, таких как Raspberry Pi. Считается, что механизм доказательства доли владения Ethereum более безопасен, чем доказательство работы, потому что стоимость атаки выше, а последствия для атакующего более серьезны.

Доказательство работы в сравнении с доказательством доли владения — это спорная тема. [Блог Виталика Бутерина](https://vitalik.eth.limo/general/2017/12/31/pos_faq.html#what-are-the-benefits-of-proof-of-stake-as-opposed-to-proof-of-work) и дебаты между Джастином Дрейком и Лин Олден дают хорошее резюме аргументов.

<YouTube id="1m12zgJ42dI" />

## Является ли доказательство доли владения энергоэффективным? {#is-pos-energy-efficient}

Да. Узлы в сети с доказательством доли владения используют незначительное количество энергии. Стороннее исследование пришло к выводу, что вся сеть Ethereum с доказательством доли владения потребляет около 0,0026 ТВтч/год, что примерно в 13 000 раз меньше, чем потребляют видеоигры только в США.

[Подробнее об энергопотреблении Ethereum](/energy-consumption/).

## Безопасно ли доказательство доли владения? {#is-pos-secure}

Доказательство доли владения Ethereum очень безопасно. Механизм тщательно исследовался, разрабатывался и тестировался на протяжении восьми лет, прежде чем был запущен в работу. Гарантии безопасности отличаются от блокчейнов на основе доказательства работы. В механизме доказательства доли владения злонамеренные валидаторы могут быть активно наказаны («подвергнуты слэшингу») и исключены из набора валидаторов, что будет стоить им значительной суммы ETH. В рамках доказательства работы атакующий может повторять свою атаку, пока у него достаточно хэш-мощности. Также дороже проводить эквивалентные атаки на Ethereum с доказательством доли владения, чем на Ethereum с доказательством работы. Чтобы повлиять на жизнеспособность цепи, требуется не менее 33% от общего количества поставленного эфира в сети (за исключением случаев очень сложных атак с чрезвычайно низкой вероятностью успеха). Для контроля над содержимым будущих блоков требуется не менее 51 % от общего количества поставленных ETH, а для переписывания истории — более 66 % от общей доли. Протокол Ethereum уничтожит эти активы в сценариях атаки 33% или 51% и по социальному консенсусу в сценарии атаки 66%.

- [Подробнее о защите Ethereum с доказательством доли владения от злоумышленников](/developers/docs/consensus-mechanisms/pos/attack-and-defense)
- [Подробнее о дизайне доказательства доли владения](https://medium.com/@VitalikButerin/a-proof-of-stake-design-philosophy-506585978d51)

## Делает ли доказательство доли владения Ethereum дешевле? {#does-pos-make-ethereum-cheaper}

Нет. Стоимость отправки транзакции (комиссия за газ) определяется динамическим рынком комиссий, который растет с увеличением спроса в сети. Механизм консенсуса не оказывает на это прямого влияния.

[Подробнее о газе](/developers/docs/gas).

## Кто такие узлы, клиенты и валидаторы? {#what-are-nodes-clients-and-validators}

Узлы - это компьютеры, подключенные к сети Ethereum. Клиенты - это программное обеспечение, которое они запускают, чтобы превратить свой компьютер в узел. Существует два типа клиентов: клиенты исполнения и клиенты консенсуса. Оба необходимы, чтобы создать узел. Валидатор — это дополнительный компонент клиента консенсуса, который позволяет узлу участвовать в консенсусе на основе доказательства доли владения. Это означает создание и предложение блоков при выборе, а также аттестацию блоков, о которых они узнают в сети. Чтобы запустить валидатор, оператор узла должен внести 32 ETH в депозитный контракт.

- [Подробнее об узлах и клиентах](/developers/docs/nodes-and-clients)
- [Подробнее о стейкинге](/staking)

## Является ли доказательство доли владения новой идеей? {#is-pos-new}

Нет. В 2011 году пользователь на форуме BitcoinTalk [предложил базовую идею доказательства доли владения](https://bitcointalk.org/index.php?topic=27787.0) в качестве обновления для Bitcoin. Прошло одиннадцать лет, прежде чем он был готов к внедрению в основной сети Ethereum. Некоторые другие цепи внедрили доказательство доли владения раньше, чем Ethereum, но не специфичный механизм Ethereum (известный как Gasper).

## В чем особенность доказательства доли владения в Ethereum? {#why-is-ethereum-pos-special}

Механизм доказательства доли владения Ethereum уникален по своей конструкции. Это был не первый механизм доказательства доли владения, который был разработан и внедрен, но он является самым надежным. Механизм доказательства доли владения известен как «Casper». Casper определяет, как выбираются валидаторы для предложения блоков, как и когда делаются аттестации, как подсчитываются аттестации, вознаграждения и штрафы для валидаторов, условия слэшинга, отказоустойчивые механизмы, такие как утечка из-за неактивности, и условия для «финальности». Финальность — это условие, согласно которому для того, чтобы блок считался постоянной частью канонической цепи, за него должны проголосовать не менее 66% от общего количества поставленных ETH в сети. Исследователи разработали Casper специально для Ethereum, и Ethereum — это первый и единственный блокчейн, который его внедрил.

В дополнение к Casper, доказательство доли владения Ethereum использует алгоритм выбора форка под названием LMD-GHOST. Это необходимо на случай возникновения ситуации, когда для одного и того же слота существуют два блока. Это создает два форка блокчейна. LMD-GHOST выбирает тот, у которого наибольший «вес» аттестаций. Вес — это количество аттестаций, взвешенное по эффективному балансу валидаторов. LMD-GHOST уникален для Ethereum.

Сочетание Casper и LMD_GHOST известно как Gasper.

[Подробнее о Gasper](/developers/docs/consensus-mechanisms/pos/gasper/)

## Что такое слэшинг? {#what-is-slashing}

Слэшинг — это термин, обозначающий уничтожение части доли валидатора и его исключение из сети. Сумма ETH, теряемая при слэшинге, масштабируется в зависимости от количества подвергшихся слэшингу валидаторов — это означает, что вступившие в сговор валидаторы наказываются строже, чем отдельные лица.

[Подробнее о слэшинге](/developers/docs/consensus-mechanisms/pos/rewards-and-penalties#slashing)

## Зачем валидаторам 32 ETH? {#why-32-eth}

Валидаторы должны ставить ETH в стейкинг, чтобы им было что терять в случае неправомерных действий. Причина, по которой они должны ставить в стейкинг именно 32 ETH, заключается в том, чтобы позволить узлам работать на скромном оборудовании. Если бы минимальное количество ETH на валидатора было ниже, то количество валидаторов и, следовательно, количество сообщений, которые необходимо обрабатывать в каждом слоте, увеличилось бы, что означало бы, что для запуска узла потребовалось бы более мощное оборудование.

## Как выбирают валидаторов? {#how-are-validators-selected}

Единственный валидатор выбирается псевдослучайно для предложения блока в каждом слоте с помощью алгоритма под названием RANDAO, который смешивает хэш от предлагающего блок с начальным числом, которое обновляется каждый блок. Это значение используется для выбора определённого валидатора из общего их набора. Выбор валидатора фиксируется за две эпохи вперед.

[Подробнее о выборе валидаторов](/developers/docs/consensus-mechanisms/pos/block-proposal)

## Что такое стейк-грайндинг? {#what-is-stake-grinding}

Стейк-грайндинг — это категория атаки на сети с доказательством доли владения, при которой злоумышленник пытается повлиять на алгоритм выбора валидаторов в пользу своих собственных валидаторов. Атаки стейк-грайндинга на RANDAO требуют около половины от общего количества поставленных ETH.

[Подробнее о стейк-грайндинге](https://eth2book.info/altair/part2/building_blocks/randomness/#randao-biasability)

## Что такое социальный слэшинг? {#what-is-social-slashing}

Социальный слэшинг — это способность сообщества координировать форк блокчейна в ответ на атаку. Это позволяет сообществу восстановиться после того, как злоумышленник финализировал нечестную цепь. Социальный слэшинг также может использоваться против атак цензуры.

- [Подробнее о социальном слэшинге](https://ercwl.medium.com/the-case-for-social-slashing-59277ff4d9c7)
- [Виталик Бутерин о социальном слэшинге](https://vitalik.eth.limo/general/2017/12/31/pos_faq.html#what-is-proof-of-stake)

## Подвергнусь ли я слэшингу? {#will-i-get-slashed}

Как валидатору, очень трудно подвергнуться слэшингу, если вы намеренно не совершаете злонамеренных действий. Слэшинг применяется только в очень специфических сценариях, когда валидаторы предлагают несколько блоков для одного и того же слота или противоречат сами себе в своих аттестациях — возникновение таких ситуаций случайно очень маловероятно.

[Подробнее об условиях слэшинга](https://eth2book.info/altair/part2/incentives/slashing)

## Что такое проблема отсутствия доли? {#what-is-nothing-at-stake-problem}

Проблема отсутствия доли — это концептуальная проблема некоторых механизмов доказательства доли владения, где есть только вознаграждения и нет штрафов. Если на кону ничего не стоит, прагматичный валидатор с одинаковым удовольствием будет аттестовать любой или даже несколько форков блокчейна, так как это увеличивает его вознаграждения. Ethereum обходит эту проблему, используя условия финальности и слэшинг для обеспечения одной канонической цепи.

[Подробнее о проблеме отсутствия доли](https://vitalik.eth.limo/general/2017/12/31/pos_faq.html#what-is-the-nothing-at-stake-problem-and-how-can-it-be-fixed)

## Что такое алгоритм выбора форка? {#what-is-a-fork-choice-algorithm}

Алгоритм выбора форка реализует правила, определяющие, какая цепь является канонической. В оптимальных условиях нет необходимости в правиле выбора форка, потому что на каждый слот приходится только один предлагающий блок и один блок для выбора. Однако иногда несколько блоков для одного и того же слота или поздно поступившая информация приводят к нескольким вариантам организации блоков в начале цепи. В этих случаях все клиенты должны одинаково реализовывать некоторые правила, чтобы убедиться, что все они выбирают правильную последовательность блоков. Алгоритм выбора форка кодирует эти правила.

Алгоритм выбора форка Ethereum называется LMD-GHOST. Он выбирает форк с наибольшим весом аттестаций, то есть тот, за который проголосовало большинство поставленных ETH.

[Подробнее о LMD-GHOST](/developers/docs/consensus-mechanisms/pos/gasper/#fork-choice)

## Что такое финальность в доказательстве доли владения? {#what-is-finality}

Финальность в доказательстве доли владения — это гарантия того, что данный блок является постоянной частью канонической цепи и не может быть отменен, если не произойдет сбой консенсуса, при котором злоумышленник сожжет 33% от общего количества поставленного эфира. Это «криптоэкономическая» финальность, в отличие от «вероятностной финальности», которая актуальна для блокчейнов с доказательством работы. При вероятностной финальности для блоков нет явных финализированных/нефинализированных состояний — просто становится все менее и менее вероятным, что блок может быть удален из цепи по мере его старения, и пользователи сами определяют, когда они достаточно уверены, что блок «безопасен». При криптоэкономической финальности за пары контрольных блоков должны проголосовать 66% поставленного эфира. Если это условие выполнено, блоки между этими контрольными точками явно «финализируются».

[Подробнее о финальности](/developers/docs/consensus-mechanisms/pos/#finality)

## Что такое «слабая субъективность»? {#what-is-weak-subjectivity}

Слабая субъективность — это особенность сетей с доказательством доли владения, где социальная информация используется для подтверждения текущего состояния блокчейна. Новым узлам или узлам, возвращающимся в сеть после длительного отсутствия, может быть предоставлено недавнее состояние, чтобы узел мог немедленно увидеть, находится ли он на правильной цепи. Эти состояния известны как «контрольные точки слабой субъективности», и их можно получить от других операторов узлов по внешним каналам, из обозревателей блоков или из нескольких общедоступных конечных точек.

[Подробнее о слабой субъективности](/developers/docs/consensus-mechanisms/pos/weak-subjectivity)

## Устойчиво ли доказательство доли владения к цензуре? {#is-pos-censorship-resistant}

Устойчивость к цензуре в настоящее время трудно доказать. Однако, в отличие от доказательства работы, доказательство доли владения предлагает возможность координировать слэшинги для наказания валидаторов, применяющих цензуру. Грядут изменения в протоколе, которые разделяют создателей блоков и предлагающих блоки и вводят списки транзакций, которые создатели должны включать в каждый блок. Это предложение известно как разделение предлагающего и создателя и помогает предотвратить цензуру транзакций со стороны валидаторов.

[Подробнее о разделении предлагающего и создателя](https://notes.ethereum.org/@fradamt/H1TsYRfJc#Original-basic-scheme)

## Может ли система доказательства доли владения Ethereum подвергнуться атаке 51%? {#pos-51-attack}

Да. Доказательство доли владения уязвимо для атак 51%, так же как и доказательство работы. Вместо того чтобы требовать 51% хэш-мощности сети, злоумышленнику требуется 51% от общего количества поставленных ETH. Злоумышленник, накопивший 51% от общей доли, получает контроль над алгоритмом выбора форка. Это позволяет злоумышленнику цензурировать определенные транзакции, проводить краткосрочные реорганизации и извлекать MEV, переупорядочивая блоки в свою пользу.

[Подробнее об атаках на доказательство доли владения](/developers/docs/consensus-mechanisms/pos/attack-and-defense)

## Что такое социальная координация и зачем она нужна? {#what-is-social-coordination}

Социальная координация — это последняя линия защиты для Ethereum, которая позволила бы восстановить честную цепь после атаки, финализировавшей нечестные блоки. В этом случае сообществу Ethereum пришлось бы координироваться «по внешним каналам» и договориться об использовании честного миноритарного форка, подвергнув при этом слэшингу валидаторов злоумышленника. Это также потребует от приложений и бирж признания честного форка.

[Подробнее о социальной координации](/developers/docs/consensus-mechanisms/pos/attack-and-defense#people-the-last-line-of-defense)

## Становятся ли богатые богаче при доказательстве доли владения? {#do-rich-get-richer}

Чем больше ETH кто-то может поставить в стейкинг, тем больше валидаторов он может запустить и тем больше вознаграждений может получить. Вознаграждения масштабируются линейно с суммой поставленных ETH, и каждый получает одинаковый процентный доход. Доказательство работы обогащает богатых больше, чем доказательство доли владения, потому что более богатые майнеры, покупающие оборудование в больших масштабах, выигрывают от экономии на масштабе, что означает, что связь между богатством и вознаграждением нелинейна.

## Является ли доказательство доли владения более централизованным, чем доказательство работы? {#is-pos-decentralized}

Нет, доказательство работы стремится к централизации, потому что затраты на майнинг растут и вытесняют сначала отдельных лиц, затем небольшие компании и так далее. Текущая проблема с доказательством доли владения — это влияние деривативов ликвидного стейкинга (LSD). Это токены, представляющие ETH, поставленные некоторым провайдером, которые любой может обменять на вторичных рынках без фактического вывода ETH из стейкинга. LSD позволяют пользователям делать ставки менее чем на 32 ETH, но они также создают риск централизации, когда несколько крупных организаций могут в конечном итоге контролировать большую часть доли. Вот почему [соло-стейкинг](/staking/solo) — лучший вариант для Ethereum.

[Подробнее о централизации долей в LSD](https://notes.ethereum.org/@djrtwo/risks-of-lsd)

## Почему я могу ставить в стейкинг только ETH? {#why-can-i-only-stake-eth}

ETH – это внутренняя валюта Ethereum. Крайне важно иметь единую валюту, в которой номинированы все доли, как для учета эффективных балансов для взвешивания голосов, так и для безопасности. Сам ETH является фундаментальным компонентом Ethereum, а не смарт-контрактом. Включение других валют значительно увеличило бы сложность и снизило бы безопасность стейкинга.

## Является ли Ethereum единственным блокчейном с доказательством доли владения? {#is-ethereum-the-only-pos-blockchain}

Нет, существует несколько блокчейнов с доказательством доли владения. Ни один из них не идентичен Ethereum; механизм доказательства доли владения Ethereum уникален.

## Что такое слияние? {#what-is-the-merge}

Слияние — это момент, когда Ethereum отключил свой механизм консенсуса на основе доказательства работы и включил механизм консенсуса на основе доказательства доли владения. Слияние произошло 15 сентября 2022 года.

[Подробнее о Слиянии](/roadmap/merge)

## Что такое жизнеспособность и безопасность? {#what-are-liveness-and-safety}

Жизнеспособность и безопасность — это две фундаментальные проблемы безопасности для блокчейна. Жизнеспособность — это доступность финализирующей цепи. Если цепь перестает финализироваться или пользователи не могут легко получить к ней доступ, это сбои жизнеспособности. Чрезвычайно высокая стоимость доступа также может считаться сбоем жизнеспособности. Безопасность относится к тому, насколько сложно атаковать цепь, т. е. финализировать конфликтующие контрольные точки.

[Читайте подробнее в документе Casper](https://arxiv.org/pdf/1710.09437.pdf)
