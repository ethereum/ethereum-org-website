---
title: Доказательство работы (PoW)
description: Объяснение протокола доказательства работы и его роли в Ethereum.
lang: ru
---

Сеть Ethereum начала работу с механизмом консенсуса, который подразумевал **[доказательство выполнения работы (Proof-of-work, PoW)](/developers/docs/consensus-mechanisms/pow)**. Это позволило узлам сети Ethereum договариваться о состоянии всех информационных записей в блокчейне Ethereum и предотвратило определенные виды экономических атак. Однако в 2022 году Ethereum отказался от доказательства выполнения работы и вместо этого начал использовать [доказательство доли владения](/developers/docs/consensus-mechanisms/pos).

<Alert variant="update">
<AlertEmoji text=":wave:"/>
<AlertContent>
<AlertDescription>
    Proof-of-work теперь устарел. Ethereum больше не использует proof-of-work как часть своего механизма консенсуса. Вместо него он использует proof-of-stake. /developers/docs/consensus-mechanisms/po/developers/docs/consensus-mechanisms/pos.
</AlertDescription>
</AlertContent>
</Alert>

## Предварительные условия {#prerequisites}

Чтобы лучше понять эту страницу, мы рекомендуем предварительно прочесть, что такое [транзакции](/developers/docs/transactions/), [блоки](/developers/docs/blocks/), и [механизмы консенсуса](/developers/docs/consensus-mechanisms/).

## Что такое доказательство работы (PoW)? {#what-is-pow}

Консенсус Накамото, использующий доказательство выполнения работы, — это механизм, который в свое время позволял децентрализованной сети Ethereum достигать консенсуса (т. е. согласия всех узлов) по таким вопросам, как балансы счетов и порядок транзакций. Это позволило пользователям избежать "двойных расходов" и гарантировало, что цепочку Ethereum чрезвычайно сложно атаковать или манипулировать ею. Теперь эти свойства безопасности обеспечиваются доказательством доли владения с использованием механизма консенсуса, известного как [Gasper](/developers/docs/consensus-mechanisms/pos/gasper/).

## Доказательство выполнения работы и майнинг {#pow-and-mining}

Proof-of-work - это базовый алгоритм, который устанавливает сложность и правила работы майнеров в блокчейнах proof-of-work. Майнинг – это и есть сама «работа». А именно — добавление правильных блоков в блокчейн. Это важно, потому что длина цепочки помогает сети следовать правильному ответвлению блокчейна. Чем больше «работы» было завершено, тем длиннее цепочка и больше номер блока и тем более определенным становится текущее состояние сети.

[Подробнее о майнинге](/developers/docs/consensus-mechanisms/pow/mining/)

## Как работает Ethereum proof-of-work? {#how-it-works}

Транзакции в Ethereum обрабатываются в блоках. В устаревшем сейчас proof-of-work Ethereum, каждый блок содержал:

- Сложность блока, например: 3 324 092 183 262 715
- mixHash — например: `0x44bca881b07a6a09f83b130798072441705d9a665c5ac8bdf2f39a3cdf3bee29`
- nonce — например: `0xd3ee432b4fb3d26b`

Эти данные блока были непосредственно связаны с proof-of-work.

### Работа в доказательстве выполнения работы {#the-work}

Протокол proof-of-Work, Ethash, требует от майнеров пройти интенсивную гонку проб и ошибок, чтобы найти одноразовый номер для блока. Только блоки с действительными одноразовыми номерами могут быть добавлены в цепочку.

При попытке создать блок майнер повторно вводит набор данных, который может быть получен только путем загрузки и запуска всей цепочки (что и делает майнер), с помощью математической функции. Набор данных использовался для генерации смешанного хеша, меньшего, чем целевой хеш, что продиктовано сложностью блока. Лучший способ найти mixHash — это метод проб и ошибок.

Сложность определяет целевое значение хеша. Чем ниже целевое значение, тем меньше набор допустимых хэшей. Как только хэш сгенерирован, другим майнерам и клиентам невероятно легко проверить его. Даже если изменена будет одна транзакция, хеш окажется совершенно другим, тем самым сигнализируя о мошенничестве.

Хеширование позволяет легко обнаружить мошенничество. Кроме того, proof-of-work, как процесс также был большим сдерживающим фактором для атаки на цепочку.

### Доказательство выполнения работы и безопасность {#security}

Майнеры были заинтересованы в выполнении этой работы в основной цепочке Ethereum. У подмножества майнеров было мало стимулов создавать свою собственную цепочку — она подрывает систему. Блокчейны полагаются на то, что есть только одно верное состояние системы.

Целью proof-of-work было расширение цепочки. Наиболее вероятно, что самая длинная цепочка была верной, потому что для ее создания была проделана большая часть вычислительной работы. В системе Ethereum PoW было почти невозможно создать новые блоки, которые стирают транзакции, создают поддельные или поддерживают вторую цепочку. Это потому, что злонамеренным майнерам всегда нужно разгадывать одноразовое число блока быстрее, чем кому-либо еще.

Чтобы продолжать создавать вредоносные, но эффективные блоки, злонамеренным майнерам потребуется более 51% вычислительной мощности сетевого майнинга, чтобы победить других. Такой объем “работы” требует больших вычислительных мощностей, а потребляемая энергия может даже превышать успехи, достигнутые в атаке.

### Экономика доказательства выполнения работы {#economics}

Proof-of-work также отвечал за выпуск новой валюты в систему и стимулирование майнеров к выполнению работ.

После [обновления Constantinople](/ethereum-forks/#constantinople) майнеры, успешно создавшие блок, получали в качестве вознаграждения два свежевыпущенных ETH и часть комиссий за транзакции. Блоки Ommer также компенсировали 1.75 ETH. Блоки Ommer были действительными блоками, созданными майнером практически в то же время, как и другой майнер создал канонический блок, который в конечном счете определялся тем, какая цепочка была построена поверх первой. Ommer блоки обычно появляются из-за задержки сети.

## Финальность {#finality}

Транзакция имеет «финальность» в Ethereum, когда она является частью блока, который не может быть изменен.

Поскольку майнеры работали децентрализованно, два действительных блока могут быть созданы в одно и то же время. Это на время создает ветвление. В конце концов, когда последующие блоки будут добыты и добавлены в одну из цепочек, сделав ее длиннее, эта цепочка станет принятой цепочкой.

Чтобы еще больше усложнить ситуацию, транзакции, отклоненные во временном ответвлении, возможно, не были включены в принятую цепочку. Это означает, что блок может быть отменен. Таким образом, финальность означает время, которое вы должны подождать, прежде чем считать транзакцию необратимой. В предыдущей версии Ethereum, работавшей на доказательстве выполнения работы, чем больше блоков майнилось поверх определенного блока `N`, тем выше была уверенность в том, что транзакции в `N` были успешными и не будут отменены. Сейчас, с proof-of-stake, завершение является явным, а не вероятностным, свойством блока.

## Энергопотребление при доказательстве выполнения работы {#energy}

Основной аспект критики доказательства работы — это количество энергии, необходимое для обеспечения безопасности сети. Для поддержания безопасности и децентрализации Ethereum на proof-of-work потребляет большое количество энергии. Незадолго до перехода на доказательство доли владения майнеры Ethereum в совокупности потребляли около 70 ТВт·ч/год (примерно столько же, сколько Чешская Республика, по данным [digiconomist](https://digiconomist.net/) на 18 июля 2022 года).

## Преимущества и недостатки {#pros-and-cons}

| Преимущества                                                                                                                                                                                                                                                                                                       | Недостатки                                                                                                                                                                  |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Доказательство работы нейтрально. Вам не нужен ETH, чтобы начать, а вознаграждения за блок позволяют вам перейти от 0 ETH к положительному балансу. Для [доказательства доли владения](/developers/docs/consensus-mechanisms/pos/) для начала вам понадобятся ETH. | Доказательство работы потребляет много энергии, что вредно для окружающей среды.                                                                            |
| Доказательство работы — это испытанный и проверенный механизм консенсуса, который на протяжении многих лет обеспечивает безопасность и децентрализацию Bitcoin и Ethereum.                                                                                                                         | Если вы хотите майнить, вам нужно специальное оборудование, а это большие инвестиции.                                                                       |
| По сравнению с доказательством доли довольно легко внедрить.                                                                                                                                                                                                                                       | Из-за растущих потребностей в вычислениях майнинговые пулы потенциально могут доминировать среди майнеров, что ведет к централизации и рискам безопасности. |

## Сравнение с доказательством доли владения {#compared-to-pos}

В конечном счете доказательство владения имеет ту же цель, что и доказательство работы: безопасно помочь децентрализованной сети в достижении консенсуса. Но есть некоторые различия в процессе и персонале.

- Доказательство владения устраняет важность вычислительной мощности для стейкинга ETH.
- Доказательство владения заменяет майнеров валидаторами. Валидаторы поставляют ETH для активации способности создавать новые блоки.
- Валидаторы не участвуют в создании блоков, вместо этого они выбираются произвольно с помощью алгоритма.
- Финальность более ясна: если на определенных контрольных точках 2/3 валидаторов соглашаются с состоянием блока, это считается окончательным. Валидаторы должны поставить на это все свои ставки, поэтому попытка мошенничать приведет к потере всей своей ставки.

[Подробнее о доказательстве доли владения](/developers/docs/consensus-mechanisms/pos/)

## Больше увлекаетесь визуализацией? {#visual-learner}

<YouTube id="3EUAcxhuoU4" />

## Дополнительные материалы {#further-reading}

- [Атака большинства](https://en.bitcoin.it/wiki/Majority_attack)
- [Об окончательности расчетов](https://blog.ethereum.org/2016/05/09/on-settlement-finality/)

### Видео {#videos}

- [Техническое объяснение протоколов доказательства выполнения работы](https://youtu.be/9V1bipPkCTU)

## Связанные темы {#related-topics}

- [Майнинг](/developers/docs/consensus-mechanisms/pow/mining/)
- [Доказательство владения](/developers/docs/consensus-mechanisms/pos/)
- [Доказательство полномочий](/developers/docs/consensus-mechanisms/poa/)
