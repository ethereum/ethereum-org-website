---
title: "Введение в умные контракты"
description: "Обзор смарт-контрактов с акцентом на их уникальные характеристики и ограничения."
lang: ru
---

## Что такое смарт-контракт? {#what-is-a-smart-contract}
«Смарт-контракт» — это просто программа, работающая на блокчейне Ethereum. Это набор кода (его функции) и данных (его состояние), который находится по определенному адресу в цепочке блоков Ethereum.

Смарт-контракты — это тип [аккаунта Ethereum](/developers/docs/accounts/). Это значит, что они имеют баланс и могут быть целью транзакций. Однако они не контролируются пользователем, вместо этого они развертываются в сети и работают в соответствии с программой. Учетные записи пользователей могут затем взаимодействовать со смарт-контрактом, отправляя транзакции, которые выполняют функцию, определенную в смарт-контракте. Смарт-контракты могут определять правила, как обычный контракт, и автоматически обеспечивать их соблюдение с помощью кода. Смарт-контракты нельзя просто так удалить, а взаимодействие с ними необратимо.

## Предварительные условия {#prerequisites}

Если вы только начинаете или ищете менее техническое введение, мы рекомендуем наше [введение в смарт-контракты](/smart-contracts/).

Прежде чем погрузиться в мир смарт-контрактов, убедитесь, что вы ознакомились с [аккаунтами](/developers/docs/accounts/), [транзакциями](/developers/docs/transactions/) и [виртуальной машиной Ethereum](/developers/docs/evm/).

## Цифровой торговый автомат {#a-digital-vending-machine}

Возможно, лучшей метафорой для смарт-контракта является торговый автомат, как его описал [Ник Сабо](https://unenumerated.blogspot.com/). При правильном вводе гарантирован определенный результат.

Чтобы купить закуску в торговом автомате:

```
money + snack selection = snack dispensed
```

Эта логика запрограммирована в торговый автомат.

В смарт-контракт, как в торговый автомат, заложена логика. Вот простой пример того, как этот торговый автомат мог бы выглядеть, если его запустить с помощью Solidity:

```solidity
pragma solidity 0.8.7;

contract VendingMachine {

    // Объявление переменных состояния контракта
    address public owner;
    mapping (address => uint) public cupcakeBalances;

    // Когда контракт 'VendingMachine' развернут:
    // 1. установить адрес развертывания как владельца контракта
    // 2. установить баланс кексов развернутого смарт-контракта на 100
    constructor() {
        owner = msg.sender;
        cupcakeBalances[address(this)] = 100;
    }

    // Разрешить владельцу увеличивать баланс кексов смарт-контракта
    function refill(uint amount) public {
        require(msg.sender == owner, "Только владелец может пополнять.");
        cupcakeBalances[address(this)] += amount;
    }

    // Разрешить любому покупать кексы
    function purchase(uint amount) public payable {
        require(msg.value >= amount * 1 ether, "Вы должны заплатить не менее 1 ETH за кекс");
        require(cupcakeBalances[address(this)] >= amount, "Недостаточно кексов на складе для совершения этой покупки");
        cupcakeBalances[address(this)] -= amount;
        cupcakeBalances[msg.sender] += amount;
    }
}
```

Подобно тому, как торговый автомат устраняет необходимость в продавце, смарт-контракты могут заменить посредников во многих отраслях.

## Без разрешений {#permissionless}

Кто угодно может написать смарт-контракт и развернуть его в сети. Вам просто нужно научиться программировать на [языке смарт-контрактов](/developers/docs/smart-contracts/languages/) и иметь достаточно ETH для развертывания вашего контракта. Развертывание смарт-контракта технически является транзакцией, поэтому вам нужно платить за [газ](/developers/docs/gas/) так же, как вы платите за газ для простого перевода ETH. Однако стоимость газа для развертывания контракта намного выше.

В Ethereum есть удобные для разработчиков языки для написания смарт-контрактов:

- Solidity
- Vyper

[Подробнее о языках](/developers/docs/smart-contracts/languages/)

Однако перед развертыванием они должны быть скомпилированы, чтобы виртуальная машина Ethereum могла интерпретировать и хранить контракт. [Подробнее о компиляции](/developers/docs/smart-contracts/compiling/)

## Компонуемость {#composability}

Смарт-контракты общедоступны в Ethereum и могут рассматриваться как открытые API. Это означает, что вы можете вызывать другие смарт-контракты в своем собственном смарт-контракте, чтобы значительно расширить его возможности. Контракты могут даже использовать другие контракты.

Узнайте больше о [компонуемости смарт-контрактов](/developers/docs/smart-contracts/composability/).

## Ограничения {#limitations}

Смарт-контракты сами по себе не могут получать информацию о событиях из "реального мира", так как они не могут извлекать данные из оффчейн-источников. Это означает, что они не могут реагировать на события в реальном мире. Так задумано по проекту. Зависимость от внешней информации может поставить под угрозу консенсус, который важен для безопасности и децентрализации.

Однако для блокчейн-приложений важно иметь возможность использовать оффчейн-данные. Решением являются [оракулы](/developers/docs/oracles/) — инструменты, которые принимают оффчейн-данные и делают их доступными для смарт-контрактов.

Еще одним ограничением смарт-контрактов является максимальный размер контракта. Смарт-контракт может быть размером не более 24 Кб, иначе у него закончится газ. Эту проблему можно обойти, используя [The Diamond Pattern](https://eips.ethereum.org/EIPS/eip-2535).

## Контракты с мультиподписью {#multisig}

Мультиподписные контракты (контракты с несколькими подписями) - это учетные записи смарт-контрактов, которые для выполнения транзакции требуют несколько действительных подписей. Это очень полезно, чтобы избежать единичных точек отказа для контрактов, содержащих существенное количество Эфира или других токенов. Мультиподписи также разделяют ответственность за выполнение контракта и управление ключами между многими сторонами и предотвращают потерю одного закрытого ключа, ведущую к необратимой потере денежных средств. По этим причинам мультиподписные контракты могут быть использованы для простого управления DAO. Мультиподписи требуют N подписей из M возможных приемлемых подписей (где N ≤ M и M > 1) для выполнения. Часто используются `N = 3, M = 5` и `N = 4, M = 7`. Мультиподпись 4/7 требует четыре из семи возможных действительных подписей. Это значит, что денежные средства всё ещё можно восстановить, даже если три подписи потеряны. В этом случае это также означает, что большинство держателей ключей должны согласиться и подписать контракт, чтобы он выполнился.

## Ресурсы по смарт-контрактам {#smart-contract-resources}

**OpenZeppelin Contracts —** **_Библиотека для безопасной разработки смарт-контрактов._**

- [openzeppelin.com/contracts/](https://openzeppelin.com/contracts/)
- [GitHub](https://github.com/OpenZeppelin/openzeppelin-contracts)
- [Форум сообщества](https://forum.openzeppelin.com/c/general/16)

## Дополнительные материалы {#further-reading}

- [Coinbase: Что такое смарт-контракт?](https://www.coinbase.com/learn/crypto-basics/what-is-a-smart-contract)
- [Chainlink: Что такое смарт-контракт?](https://chain.link/education/smart-contracts)
- [Видео: Смарт-контракты простыми словами](https://youtu.be/ZE2HxTmxfrI)
- [Cyfrin Updraft: Платформа для обучения и аудита в Web3](https://updraft.cyfrin.io)
