---
title: "Максимальная извлекаемая ценность (MEV)"
description: "Введение в максимальную извлекаемую ценность (MEV)"
lang: ru
---

Maximal extractable value (MEV) — это максимальное значение, которое может быть извлечено сверх стандартного вознаграждения за производство блока и платы за газ, путем включения, исключения и изменения порядка транзакций в блоке.

## Максимальная извлекаемая ценность {#maximal-extractable-value}

Максимальная извлекаемая ценность была впервые применена в контексте [доказательства работы](/developers/docs/consensus-mechanisms/pow/) и изначально называлась «извлекаемая майнером ценность». Это связано с тем, что при Proof-of-Work, майнеры контролируют включение, исключение и порядок транзакций. Однако после перехода на доказательство владения в результате [«Слияния»](/roadmap/merge) эти роли стали выполнять валидаторы, а майнинг больше не является частью протокола Ethereum. Однако методы извлечения ценности все еще существуют, поэтому теперь вместо этого используется термин "Максимальная извлекаемая ценность".

## Предварительные условия {#prerequisites}

Убедитесь, что вы знакомы с [транзакциями](/developers/docs/transactions/), [блоками](/developers/docs/blocks/), [доказательством владения](/developers/docs/consensus-mechanisms/pos) и [газом](/developers/docs/gas/). Также будет полезно знакомство с [децентрализованными приложениями](/apps/) и [DeFi](/defi/).

## Извлечение MEV {#mev-extraction}

Теоретически MEV полностью начисляется валидаторам, поскольку они являются единственной стороной, которая может гарантировать реализацию прибыльной возможности MEV. На практике, однако, большая часть MEV извлекается независимыми участниками сети, называемыми "искателями". Поиски используют сложные алгоритмы по данным блокчейна для выявления выгодных возможностей MEV и обеспечения ботов для автоматической передачи этих прибыльных транзакций в сеть.

Валидаторы в любом случае получают часть от полной суммы MEV, потому что искатели готовы платить высокие комиссии за газ (которые достаются валидатору) в обмен на более высокую вероятность включения их прибыльных транзакций в блок. Если предположить, что искатели экономически рациональны, то комиссия за газ, которую искатель готов заплатить, составит сумму до 100% от MEV искателя (потому что если комиссия за газ будет выше, искатель понесет убытки).

При этом для некоторых высококонкурентных возможностей MEV, таких как [арбитраж на DEX](#mev-examples-dex-arbitrage), искателям, возможно, придется заплатить 90% или даже больше своего общего дохода от MEV в виде платы за газ валидатору, поскольку многие хотят провести ту же прибыльную арбитражную сделку. Это связано с тем, что единственный способ гарантировать выполнение их арбитражной транзакции — это отправить транзакцию с самой высокой ценой на газ.

### Газовый гольф {#mev-extraction-gas-golfing}

Эта динамика сделала умение "играть в газовый гольф" — программирование транзакций таким образом, чтобы они использовали наименьшее количество газа — конкурентным преимуществом, поскольку это позволяет искателям устанавливать более высокую цену на газ, сохраняя при этом общую комиссию за газ постоянной (поскольку комиссия за газ = цена газа \* использованный газ).

Некоторые известные методы газового гольфа включают в себя: использование адресов, начинающихся с длинной строки нулей (например, [0x0000000000C521824EaFf97Eac7B73B084ef9306](https://eth.blockscout.com/address/0x0000000000C521824EaFf97Eac7B73B084ef9306)), поскольку они занимают меньше места (и, следовательно, газа) для хранения; и оставление небольших балансов токенов [ERC-20](/developers/docs/standards/tokens/erc-20/) в контрактах, поскольку инициализация слота хранения (в случае, если баланс равен 0) стоит больше газа, чем обновление слота хранения. Поиск новых методов снижения расхода газа — активная область исследований среди искателей.

### Обобщенные опережающие боты {#mev-extraction-generalized-frontrunners}

Вместо программирования сложных алгоритмов для обнаружения прибыльных возможностей MEV некоторые искатели запускают обобщенных опережающих ботов. Обобщенные опережающие боты — это боты, которые отслеживают мемпул для обнаружения прибыльных транзакций. Опережающий бот скопирует код потенциально прибыльной транзакции, заменит адреса на адрес опережающего бота и запустит транзакцию локально, чтобы перепроверить, что измененная транзакция приносит прибыль на адрес опережающего бота. Если транзакция действительно прибыльна, опережающий бот отправит измененную транзакцию с замененным адресом и более высокой ценой на газ, "опережая" исходную транзакцию и получая MEV первоначального искателя.

### Flashbots {#mev-extraction-flashbots}

Flashbots — это независимый проект, который расширяет клиенты исполнения сервисом, позволяющим искателям отправлять MEV-транзакции валидаторам, не раскрывая их в публичном мемпуле. Это предотвращает опережение транзакций обобщенными опережающими ботами.

## Примеры MEV {#mev-examples}

MEV появляется в блокчейне несколькими способами.

### Арбитраж на DEX {#mev-examples-dex-arbitrage}

Арбитраж на [децентрализованных биржах](/glossary/#dex) (DEX) — это самая простая и наиболее известная возможность MEV. В результате он также является наиболее конкурентоспособным.

Это работает так: если две DEX предлагают токен по двум разным ценам, кто-то может купить токен на DEX с более низкой ценой и продать его на DEX с более высокой ценой в одной, атомарной транзакции. Благодаря механике блокчейна это настоящий безрисковый арбитраж.

[Вот пример](https://eth.blockscout.com/tx/0x5e1657ef0e9be9bc72efefe59a2528d0d730d478cfc9e6cdd09af9f997bb3ef4) прибыльной арбитражной транзакции, в которой искатель превратил 1000 ETH в 1045 ETH, воспользовавшись разницей в ценах на пару ETH/DAI на Uniswap и Sushiswap.

### Ликвидации {#mev-examples-liquidations}

Ликвидации в протоколах кредитования представляют собой еще одну известную возможность MEV.

Протоколы кредитования, такие как Maker и Aave, требуют от пользователей внесения некоторого залога (например, ETH). Затем этот внесенный залог используется для предоставления займов другим пользователям.

Затем пользователи могут заимствовать активы и токены у других в зависимости от своих потребностей (например, вы можете занять MKR, если хотите проголосовать за предложение по управлению в MakerDAO) в пределах определенного процента от внесенного ими залога. Например, если сумма займа составляет максимум 30%, пользователь, который вносит в протокол 100 DAI, может занять другой актив на сумму до 30 DAI. Протокол определяет точный процент покупательной способности.

По мере колебания стоимости залога заемщика, меняется и его покупательная способность. Если из-за рыночных колебаний стоимость заимствованных активов превышает, скажем, 30 % от стоимости их залога (опять же, точный процент определяется протоколом), протокол обычно позволяет любому ликвидировать залог, мгновенно расплачиваясь с кредиторами (это похоже на то, как работают [маржинальные требования](https://www.investopedia.com/terms/m/margincall.asp) в традиционных финансах). В случае ликвидации заемщик обычно должен заплатить крупную комиссию за ликвидацию, часть которой достается ликвидатору — именно здесь и появляется возможность MEV.

Искатели соревнуются в том, чтобы как можно быстрее проанализировать данные блокчейна, чтобы определить, каких заемщиков можно ликвидировать, и первыми отправить транзакцию ликвидации и забрать комиссию за ликвидацию себе.

### Сэндвич-атаки {#mev-examples-sandwich-trading}

Сэндвич-атаки — это еще один распространенный метод извлечения MEV.

Для сэндвич-атаки искатель будет отслеживать мемпул на предмет крупных сделок на DEX. Например, предположим, кто-то хочет купить 10 000 UNI за DAI на Uniswap. Сделка такого масштаба окажет существенное влияние на пару UNI/DAI, потенциально значительно повысив цену UNI по отношению к DAI.

Искатель может рассчитать приблизительный эффект от этой крупной сделки на цену пары UNI/DAI и исполнить оптимальный ордер на покупку непосредственно _перед_ крупной сделкой, дешево купив UNI, а затем исполнить ордер на продажу сразу _после_ крупной сделки, продав UNI по более высокой цене, вызванной крупным ордером.

Однако сэндвич-атаки более рискованны, поскольку они не являются атомарными (в отличие от арбитража на DEX, описанного выше) и подвержены [атаке сальмонеллой](https://github.com/Defi-Cartel/salmonella).

### MEV в NFT {#mev-examples-nfts}

MEV в NFT — новое явление, и оно не всегда приносит прибыль.

Однако, поскольку транзакции NFT происходят в том же блокчейне, который используется для всех остальных транзакций Ethereum, искатели могут использовать на рынке NFT те же методы, что и для традиционных возможностей MEV.

Например, если происходит популярный дроп NFT и искатель хочет получить определенный NFT или набор NFT, он может запрограммировать транзакцию так, чтобы быть первым в очереди на покупку NFT, или он может купить весь набор NFT за одну транзакцию. Или, если NFT [ошибочно выставлен по низкой цене](https://www.theblockcrypto.com/post/113546/mistake-sees-69000-cryptopunk-sold-for-less-than-a-cent), искатель может опередить других покупателей и приобрести его по дешевке.

Один из ярких примеров NFT MEV произошел, когда искатель потратил 7 миллионов долларов, чтобы [купить](https://eth.blockscout.com/address/0x650dCdEB6ecF05aE3CAF30A70966E2F395d5E9E5?tab=txs) каждый Cryptopunk по минимальной цене. Исследователь блокчейна [объяснил в Твиттере](https://twitter.com/IvanBogatyy/status/1422232184493121538), как покупатель работал с поставщиком MEV, чтобы сохранить свою покупку в тайне.

### Длинный хвост {#mev-examples-long-tail}

Арбитраж на DEX, ликвидации и сэндвич-атаки — все это очень известные возможности MEV, которые вряд ли будут прибыльными для новых искателей. Однако существует длинный хвост менее известных возможностей MEV (NFT MEV, возможно, является одной из таких возможностей).

Искатели, которые только начинают, могут добиться большего успеха, ища MEV в этом длинном хвосте. [Доска вакансий MEV](https://github.com/flashbots/mev-job-board) от Flashbots перечисляет некоторые новые возможности.

## Последствия MEV {#effects-of-mev}

MEV не так уж плох — у MEV есть как положительные, так и отрицательные последствия для Ethereum.

### Положительные стороны {#effects-of-mev-the-good}

Многие проекты DeFi полагаются на экономически рациональных участников для обеспечения полезности и стабильности своих протоколов. Например, арбитраж на DEX гарантирует, что пользователи получают лучшие и самые правильные цены на свои токены, а протоколы кредитования полагаются на быстрые ликвидации, когда заемщики опускаются ниже коэффициентов обеспечения, чтобы кредиторы получили свои деньги обратно.

Без рациональных искателей, которые ищут и исправляют экономические неэффективности и используют экономические стимулы протоколов, протоколы DeFi и децентрализованные приложения в целом могут быть не такими надежными, как сегодня.

### Отрицательные стороны {#effects-of-mev-the-bad}

На уровне приложений некоторые формы MEV, такие как сэндвич-атаки, однозначно ухудшают пользовательский опыт. Пользователи, подвергшиеся сэндвич-атаке, сталкиваются с повышенным проскальзыванием и худшим исполнением своих сделок.

На сетевом уровне обобщенные опережающие боты и аукционы цен на газ, в которых они часто участвуют (когда два или более опережающих бота конкурируют за включение своей транзакции в следующий блок, постепенно повышая цену на газ для своих транзакций), приводят к перегрузке сети и высоким ценам на газ для всех остальных, кто пытается выполнить обычные транзакции.

Помимо того, что происходит _внутри_ блоков, MEV может иметь пагубные последствия и _между_ блоками. Если MEV, доступный в блоке, значительно превышает стандартную награду за блок, валидаторы могут быть заинтересованы в реорганизации блоков и захвате MEV для себя, что вызовет реорганизацию блокчейна и нестабильность консенсуса.

Эта возможность реорганизации блокчейна была [ранее исследована на блокчейне Bitcoin](https://dl.acm.org/doi/10.1145/2976749.2978408). По мере того как награда за блок Bitcoin уменьшается вдвое, а комиссии за транзакции составляют все большую часть награды за блок, возникают ситуации, когда для майнеров становится экономически рациональным отказаться от награды за следующий блок и вместо этого перемайнить прошлые блоки с более высокими комиссиями. С ростом MEV подобная ситуация может возникнуть и в Ethereum, угрожая целостности блокчейна.

## Состояние MEV {#state-of-mev}

Извлечение MEV резко возросло в начале 2021 года, что привело к чрезвычайно высоким ценам на газ в первые несколько месяцев года. Появление MEV-ретранслятора от Flashbots снизило эффективность обобщенных опережающих ботов и вывело аукционы цен на газ в офчейн, снизив цены на газ для обычных пользователей.

Хотя многие искатели по-прежнему хорошо зарабатывают на MEV, по мере того как возможности становятся более известными и все больше искателей конкурируют за одну и ту же возможность, валидаторы будут получать все большую и большую долю от общего дохода MEV (потому что те же самые аукционы газа, что и описанные выше, также происходят во Flashbots, хотя и в частном порядке, и валидаторы будут получать полученный доход от газа). MEV также не является уникальным для Ethereum, и по мере того, как возможности на Ethereum становятся более конкурентными, искатели переходят на альтернативные блокчейны, такие как Binance Smart Chain, где существуют аналогичные возможности MEV, как и на Ethereum, но с меньшей конкуренцией.

С другой стороны, переход от доказательства работы к доказательству владения и продолжающиеся усилия по масштабированию Ethereum с использованием роллапов меняют ландшафт MEV таким образом, который все еще не совсем ясен. Пока не до конца понятно, как наличие гарантированных создателей блоков, известных заранее, меняет динамику извлечения MEV по сравнению с вероятностной моделью в proof-of-work, или как это будет нарушено, когда будут реализованы [выборы единственного секретного лидера](https://ethresear.ch/t/secret-non-single-leader-election/11789) и [технология распределенных валидаторов](/staking/dvt/). Аналогичным образом, еще предстоит выяснить, какие возможности MEV будут существовать, когда большая часть активности пользователей будет перенесена с Ethereum на его роллапы и шарды уровня 2.

## MEV в Ethereum с Proof-of-Stake (PoS) {#mev-in-ethereum-proof-of-stake}

Как уже объяснялось, MEV имеет негативные последствия для общего пользовательского опыта и безопасности уровня консенсуса. Но переход Ethereum на консенсус proof-of-stake (получивший название "Слияние") потенциально несет в себе новые риски, связанные с MEV:

### Централизация валидаторов {#validator-centralization}

В Ethereum после «Слияния» валидаторы (внесшие залог в размере 32 ETH) достигают консенсуса относительно действительности блоков, добавляемых в Beacon Chain. Поскольку 32 ETH могут быть недоступны для многих, [присоединение к пулу для стейкинга](/staking/pools/) может быть более реальным вариантом. Тем не менее, здоровое распределение [одиночных стейкеров](/staking/solo/) является идеальным, поскольку это смягчает централизацию валидаторов и повышает безопасность Ethereum.

Однако считается, что извлечение MEV способно ускорить централизацию валидаторов. Частично это связано с тем, что, поскольку валидаторы [зарабатывают меньше за предложение блоков](/roadmap/merge/issuance/#how-the-merge-impacts-ETH-supply), чем раньше майнеры, извлечение MEV сильно [повлияло на доходы валидаторов](https://github.com/flashbots/eth2-research/blob/main/notebooks/mev-in-eth2/eth2-mev-calc.ipynb) после [«Слияния»](/roadmap/merge/).

У более крупных пулов для стейкинга, вероятно, будет больше ресурсов для инвестирования в необходимые оптимизации для получения возможностей MEV. Чем больше MEV извлекают эти пулы, тем больше у них ресурсов для улучшения своих возможностей по извлечению MEV (и увеличения общего дохода), что по сути создает [экономию от масштаба](https://www.investopedia.com/terms/e/economiesofscale.asp#).

При меньшем количестве ресурсов в их распоряжении одиночные стейкеры могут оказаться не в состоянии получать прибыль от возможностей MEV. Это может усилить давление на независимых валидаторов, чтобы они присоединялись к мощным пулам для стейкинга для увеличения своих доходов, снижая децентрализацию в Ethereum.

### Закрытые мемпулы {#permissioned-mempools}

В ответ на сэндвич-атаки и опережающие атаки трейдеры могут начать заключать офчейн-сделки с валидаторами для обеспечения конфиденциальности транзакций. Вместо того чтобы отправлять потенциальную MEV-транзакцию в публичный мемпул, трейдер отправляет ее напрямую валидатору, который включает ее в блок и делит прибыль с трейдером.

"Темные пулы" — это более крупная версия этой схемы, которая функционирует как закрытые мемпулы с ограниченным доступом, открытые для пользователей, готовых платить определенные сборы. Эта тенденция уменьшит открытость и отсутствие необходимости в доверии в Ethereum и потенциально превратит блокчейн в механизм "плати, чтобы играть", который отдает предпочтение тому, кто больше заплатит.

Закрытые мемпулы также ускорят риски централизации, описанные в предыдущем разделе. Крупные пулы, управляющие несколькими валидаторами, скорее всего, получат выгоду от предложения конфиденциальности транзакций трейдерам и пользователям, увеличивая свои доходы от MEV.

Борьба с этими проблемами, связанными с MEV, в Ethereum после «Слияния» является основной областью исследований. На сегодняшний день два предложенных решения для уменьшения негативного влияния MEV на децентрализацию и безопасность Ethereum после «Слияния» — это [**разделение создателя и предложившего блок (PBS)**](/roadmap/pbs/) и [**API для создателей блоков**](https://github.com/ethereum/builder-specs).

### Разделение предложившего и создателя блока {#proposer-builder-separation}

Как в proof-of-work, так и в proof-of-stake, узел, который строит блок, предлагает его для добавления в цепь другим узлам, участвующим в консенсусе. Новый блок становится частью канонической цепи после того, как другой майнер построит блок поверх него (в PoW) или он получит аттестации от большинства валидаторов (в PoS).

Сочетание ролей производителя блока и предложившего блок является причиной большинства проблем, связанных с MEV, описанных ранее. Например, узлы консенсуса заинтересованы в запуске реорганизаций цепи в [атаках «бандита времени»](https://www.mev.wiki/attack-examples/time-bandit-attack) для максимизации доходов от MEV.

[Разделение предложившего и создателя блока](https://ethresear.ch/t/proposer-block-builder-separation-friendly-fee-market-designs/9725) (PBS) предназначено для смягчения влияния MEV, особенно на уровне консенсуса. Главной особенностью PBS является разделение ролей производителя блока и предложившего блок. Валидаторы по-прежнему несут ответственность за предложение и голосование по блокам, но новый класс специализированных субъектов, называемых **создателями блоков**, отвечает за упорядочивание транзакций и создание блоков.

В рамках PBS создатель блока создает пакет транзакций и делает ставку на его включение в блок Beacon Chain (в качестве "полезной нагрузки исполнения"). Валидатор, выбранный для предложения следующего блока, затем проверяет различные ставки и выбирает пакет с самой высокой комиссией. PBS по сути создает аукционный рынок, на котором создатели блоков ведут переговоры с валидаторами, продающими пространство в блоках.

Текущие проекты PBS используют [схему фиксации-раскрытия](https://gitcoin.co/blog/commit-reveal-scheme-on-ethereum/), в которой создатели блоков публикуют только криптографическое обязательство по содержимому блока (заголовок блока) вместе со своими ставками. После принятия выигрышной ставки предложивший блок создает подписанное предложение блока, которое включает заголовок блока. Ожидается, что создатель блока опубликует полное тело блока после того, как увидит подписанное предложение блока, и оно также должно получить достаточное количество [аттестаций](/glossary/#attestation) от валидаторов, прежде чем будет финализировано.

#### Как разделение предложившего и создателя блока смягчает влияние MEV? {#how-does-pbs-curb-mev-impact}

Внутрипротокольное разделение предложившего и создателя блока уменьшает влияние MEV на консенсус, выводя извлечение MEV из сферы деятельности валидаторов. Вместо этого создатели блоков, использующие специализированное оборудование, будут в дальнейшем использовать возможности MEV.

Однако это не исключает валидаторов полностью из доходов, связанных с MEV, поскольку создатели блоков должны делать высокие ставки, чтобы их блоки были приняты валидаторами. Тем не менее, поскольку валидаторы больше не сосредоточены напрямую на оптимизации дохода от MEV, угроза атак «бандита времени» снижается.

Разделение предложившего и создателя блока также снижает риски централизации MEV. Например, использование схемы фиксации-раскрытия устраняет необходимость для создателей блоков доверять валидаторам в том, что они не украдут возможность MEV и не раскроют ее другим создателям блоков. Это снижает барьер для одиночных стейкеров для получения выгоды от MEV, в противном случае создатели блоков будут склоняться к предпочтению крупных пулов с офчейн-репутацией и заключению с ними офчейн-сделок.

Аналогично, валидаторам не нужно доверять создателям блоков в том, что они не будут скрывать тела блоков или публиковать недействительные блоки, поскольку оплата является безусловной. Комиссия валидатора все равно обрабатывается, даже если предложенный блок недоступен или объявлен недействительным другими валидаторами. В последнем случае блок просто отбрасывается, что заставляет создателя блока терять все комиссии за транзакции и доход от MEV.

### API для создателей блоков {#builder-api}

Хотя разделение предложившего и создателя блока обещает уменьшить последствия извлечения MEV, его реализация требует изменений в протоколе консенсуса. В частности, необходимо будет обновить правило [выбора форка](/developers/docs/consensus-mechanisms/pos/#fork-choice) в Beacon Chain. [API для создателей блоков](https://github.com/ethereum/builder-specs) — это временное решение, направленное на предоставление рабочей реализации разделения предложившего и создателя блока, хотя и с более высокими допущениями о доверии.

API для создателей блоков — это модифицированная версия [API движка](https://github.com/ethereum/execution-apis/blob/main/src/engine/common.md), используемая клиентами уровня консенсуса для запроса полезных нагрузок исполнения у клиентов уровня исполнения. Как указано в [спецификации честного валидатора](https://github.com/ethereum/consensus-specs/blob/dev/specs/bellatrix/validator.md), валидаторы, выбранные для выполнения обязанностей по предложению блоков, запрашивают пакет транзакций у подключенного клиента исполнения, который они включают в предлагаемый блок Beacon Chain.

API для создателей блоков также действует как промежуточное ПО между валидаторами и клиентами уровня исполнения; но оно отличается тем, что позволяет валидаторам на Beacon Chain получать блоки от внешних субъектов (вместо того чтобы создавать блок локально с помощью клиента исполнения).

Ниже представлен обзор того, как работает API для создателей блоков:

1. API для создателей блоков подключает валидатора к сети создателей блоков, работающих с клиентами уровня исполнения. Как и в PBS, создатели блоков — это специализированные стороны, которые инвестируют в ресурсоемкое создание блоков и используют различные стратегии для максимизации дохода, получаемого от MEV и приоритетных вознаграждений.

2. Валидатор (работающий с клиентом уровня консенсуса) запрашивает полезные нагрузки исполнения вместе со ставками из сети создателей блоков. Ставки от создателей блоков будут содержать заголовок полезной нагрузки исполнения — криптографическое обязательство по содержимому полезной нагрузки — и комиссию, подлежащую уплате валидатору.

3. Валидатор просматривает входящие ставки и выбирает полезную нагрузку исполнения с самой высокой комиссией. Используя API для создателей блоков, валидатор создает "слепое" предложение блока Beacon, которое включает только его подпись и заголовок полезной нагрузки исполнения, и отправляет его создателю блоков.

4. Ожидается, что создатель блоков, использующий API для создателей блоков, ответит полной полезной нагрузкой исполнения, увидев слепое предложение блока. Это позволяет валидатору создать "подписанный" блок Beacon, который они распространяют по сети.

5. Ожидается, что валидатор, использующий API для создателей блоков, все равно будет создавать блок локально на случай, если создатель блока не ответит вовремя, чтобы не упустить награду за предложение блока. Однако валидатор не может создать другой блок, используя либо уже раскрытые транзакции, либо другой набор, поскольку это будет равносильно _двойной подписи_ (подписанию двух блоков в одном и том же слоте), что является нарушением, наказуемым слэшингом.

Примером реализации API для создателей блоков является [MEV Boost](https://github.com/flashbots/mev-boost) — усовершенствование [аукционного механизма Flashbots](https://docs.flashbots.net/Flashbots-auction/overview), предназначенное для сдерживания негативных внешних эффектов MEV в Ethereum. Аукцион Flashbots позволяет валидаторам в proof-of-stake передавать работу по созданию прибыльных блоков специализированным сторонам, называемым **искателями**.
![Диаграмма, подробно показывающая поток MEV](./mev.png)

Искатели ищут выгодные возможности MEV и отправляют пакеты транзакций предложившим блок вместе с [закрытой ценовой ставкой](https://en.wikipedia.org/wiki/First-price_sealed-bid_auction) для включения в блок. Валидатору, работающему на mev-geth, форкнутой версии клиента go-ethereum (Geth), нужно только выбрать пакет с наибольшей прибылью и включить его в новый блок. Для защиты предложивших блок (валидаторов) от спама и недействительных транзакций пакеты транзакций проходят через **ретрансляторы** для проверки, прежде чем попасть к предложившему.

MEV Boost сохраняет тот же принцип работы, что и оригинальный аукцион Flashbots, хотя и с новыми функциями, разработанными для перехода Ethereum на proof-of-stake. Искатели по-прежнему находят прибыльные MEV-транзакции для включения в блоки, но новый класс специализированных сторон, называемых **создателями**, отвечает за агрегирование транзакций и пакетов в блоки. Создатель блоков принимает закрытые ценовые ставки от искателей и запускает оптимизации для поиска наиболее прибыльного порядка.

Ретранслятор по-прежнему отвечает за проверку пакетов транзакций перед их передачей предложившему. Однако MEV Boost вводит **эскроу**, отвечающие за обеспечение [доступности данных](/developers/docs/data-availability/), храня тела блоков, отправленные создателями, и заголовки блоков, отправленные валидаторами. Здесь валидатор, подключенный к ретранслятору, запрашивает доступные полезные нагрузки исполнения и использует алгоритм упорядочивания MEV Boost для выбора заголовка полезной нагрузки с самой высокой ставкой и вознаграждениями за MEV.

#### Как API для создателей блоков смягчает влияние MEV? {#how-does-builder-api-curb-mev-impact}

Основное преимущество API для создателей блоков заключается в его потенциале демократизировать доступ к возможностям MEV. Использование схем фиксации-раскрытия устраняет допущения о доверии и снижает барьеры входа для валидаторов, стремящихся извлечь выгоду из MEV. Это должно снизить давление на одиночных стейкеров, вынуждающее их интегрироваться с крупными пулами для стейкинга с целью увеличения прибыли от MEV.

Широкое внедрение API для создателей блоков будет способствовать большей конкуренции среди создателей блоков, что повышает устойчивость к цензуре. Поскольку валидаторы рассматривают ставки от нескольких создателей блоков, создатель блоков, намеревающийся цензурировать одну или несколько транзакций пользователей, должен перебить ставки всех остальных нецензурирующих создателей блоков, чтобы добиться успеха. Это резко увеличивает стоимость цензурирования пользователей и препятствует такой практике.

Некоторые проекты, такие как MEV Boost, используют API для создателей блоков как часть общей структуры, предназначенной для обеспечения конфиденциальности транзакций для определенных сторон, например, для трейдеров, пытающихся избежать атак с опережением или сэндвич-атак. Это достигается путем предоставления частного канала связи между пользователями и создателями блоков. В отличие от ранее описанных закрытых мемпулов, этот подход выгоден по следующим причинам:

1. Наличие на рынке нескольких создателей блоков делает цензуру непрактичной, что выгодно пользователям. В отличие от этого, существование централизованных и основанных на доверии темных пулов сконцентрировало бы власть в руках нескольких создателей блоков и увеличило бы возможность цензуры.

2. Программное обеспечение API для создателей блоков является открытым, что позволяет любому предлагать услуги по созданию блоков. Это означает, что пользователи не вынуждены использовать какого-либо конкретного создателя блоков, и это улучшает нейтралитет и открытость Ethereum. Более того, трейдеры, ищущие MEV, не будут непреднамеренно способствовать централизации, используя частные каналы транзакций.

## Связанные ресурсы {#related-resources}

- [Документация Flashbots](https://docs.flashbots.net/)
- [GitHub Flashbots](https://github.com/flashbots/pm)
- [mevboost.org](https://www.mevboost.org/) - _Трекер со статистикой в реальном времени для ретрансляторов MEV-Boost и создателей блоков_

## Дополнительные материалы {#further-reading}

- [Что такое извлекаемая майнером ценность (MEV)?](https://blog.chain.link/what-is-miner-extractable-value-mev/)
- [MEV и я](https://www.paradigm.xyz/2021/02/mev-and-me)
- [Ethereum — темный лес](https://www.paradigm.xyz/2020/08/ethereum-is-a-dark-forest/)
- [Побег из темного леса](https://samczsun.com/escaping-the-dark-forest/)
- [Flashbots: опережая кризис MEV](https://medium.com/flashbots/frontrunning-the-mev-crisis-40629a613752)
- [Темы о MEV от @bertcmiller](https://twitter.com/bertcmiller/status/1402665992422047747)
- [MEV-Boost: архитектура Flashbots, готовая к «Слиянию»](https://ethresear.ch/t/mev-boost-merge-ready-flashbots-architecture/11177)
- [Что такое MEV Boost](https://www.alchemy.com/overviews/mev-boost)
- [Зачем запускать mev-boost?](https://writings.flashbots.net/writings/why-run-mevboost/)
- [Автостопом по Ethereum](https://members.delphidigital.io/reports/the-hitchhikers-guide-to-ethereum)
