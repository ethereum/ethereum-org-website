---
title: "최대 추출 가능 값(MEV)"
description: "최대 추출 가능 값(MEV)에 대한 소개"
lang: ko
---

최대 추출 가능 가치(MEV)는 블록 내 트랜잭션의 포함, 제외 및 순서 변경을 통해 표준 블록 보상 및 가스 수수료를 초과하여 블록 생성에서 추출할 수 있는 최대 가치를 의미합니다.

## 최대 추출 가능 가치 {#maximal-extractable-value}

최대 추출 가능 가치는 [작업 증명](/developers/docs/consensus-mechanisms/pow/)의 맥락에서 처음 적용되었으며, 처음에는 "채굴자 추출 가능 가치"라고 불렸습니다. 작업 증명에서는 채굴자가 트랜잭션 포함, 제외, 순서를 제어하기 때문입니다. 하지만 [병합](/roadmap/merge)을 통한 지분 증명으로의 전환 이후, 검증자가 이러한 역할을 담당하게 되었으며 채굴은 더 이상 이더리움 프로토콜의 일부가 아닙니다. 그러나 가치 추출 방법은 여전히 존재하므로, 이제는 "최대 추출 가능 가치"라는 용어가 대신 사용됩니다.

## 필수 구성 요소 {#prerequisites}

[트랜잭션](/developers/docs/transactions/), [블록](/developers/docs/blocks/), [지분 증명](/developers/docs/consensus-mechanisms/pos), [가스](/developers/docs/gas/)에 대해 숙지하시기 바랍니다. [디앱스](/apps/)와 [디파이](/defi/)에 익숙하다면 도움이 될 것입니다.

## MEV 추출 {#mev-extraction}

이론적으로 수익성 있는 MEV 기회의 실행을 보장할 수 있는 유일한 주체는 검증자이므로 MEV는 전적으로 검증자에게 귀속됩니다. 하지만 실제로는 MEV의 상당 부분이 "검색자"라고 불리는 독립적인 네트워크 참여자에 의해 추출됩니다. 검색자는 블록체인 데이터에 복잡한 알고리즘을 실행하여 수익성 있는 MEV 기회를 감지하고, 해당 수익성 트랜잭션을 네트워크에 자동으로 제출하는 봇을 보유하고 있습니다.

검색자는 수익성 있는 트랜잭션이 블록에 포함될 가능성을 높이는 대가로 높은 가스 수수료(검증자에게 지급됨)를 기꺼이 지불하기 때문에, 검증자는 어쨌든 전체 MEV 금액의 일부를 받게 됩니다. 검색자가 경제적으로 합리적이라고 가정하면, 검색자가 기꺼이 지불하려는 가스 수수료는 검색자 MEV의 최대 100%에 달하는 금액이 될 것입니다(가스 수수료가 더 높으면 검색자는 손해를 보기 때문입니다).

따라서 [DEX 차익거래](#mev-examples-dex-arbitrage)와 같이 경쟁이 치열한 일부 MEV 기회의 경우, 많은 사람이 동일한 수익성 있는 차익거래를 실행하기를 원하기 때문에 검색자는 총 MEV 수익의 90% 이상을 검증자에게 가스 수수료로 지불해야 할 수도 있습니다. 자신의 차익거래 트랜잭션 실행을 보장할 수 있는 유일한 방법은 가장 높은 가스 가격으로 트랜잭션을 제출하는 것이기 때문입니다.

### 가스 골핑 {#mev-extraction-gas-golfing}

이러한 역학 관계는 "가스 골핑", 즉 트랜잭션을 프로그래밍하여 최소한의 가스를 사용하도록 하는 능력을 경쟁 우위로 만들었습니다. 이를 통해 검색자는 총 가스 수수료를 일정하게 유지하면서 더 높은 가스 가격을 설정할 수 있기 때문입니다(가스 수수료 = 가스 가격 \* 사용된 가스).

잘 알려진 가스 골프 기술 몇 가지는 다음과 같습니다. 0으로 시작하는 긴 문자열의 주소([0x0000000000C521824EaFf97Eac7B73B084ef9306](https://eth.blockscout.com/address/0x0000000000C521824EaFf97Eac7B73B084ef9306) 등)를 사용하면 저장 공간(따라서 가스)이 덜 들기 때문에 이를 사용하고, 저장 공간 슬롯을 업데이트하는 것보다 초기화(잔액이 0인 경우)하는 데 더 많은 가스가 들기 때문에 계약에 소량의 [ERC-20](/developers/docs/standards/tokens/erc-20/) 토큰 잔액을 남겨두는 것 등이 있습니다. 가스 사용량을 줄이기 위한 더 많은 기술을 찾는 것은 검색자들 사이에서 활발한 연구 분야입니다.

### 일반화된 프론트러너 {#mev-extraction-generalized-frontrunners}

일부 검색자는 수익성 있는 MEV 기회를 감지하기 위해 복잡한 알고리즘을 프로그래밍하는 대신 일반화된 프론트러너를 실행합니다. 일반화된 프론트러너는 멤풀을 감시하여 수익성 있는 트랜잭션을 감지하는 봇입니다. 프론트러너는 잠재적으로 수익성이 있는 트랜잭션의 코드를 복사하고, 주소를 프론트러너의 주소로 교체한 다음, 트랜잭션을 로컬에서 실행하여 수정된 트랜잭션이 프론트러너의 주소에 이익을 가져다주는지 다시 한번 확인합니다. 트랜잭션이 실제로 수익성이 있는 경우, 프론트러너는 교체된 주소와 더 높은 가스 가격으로 수정된 트랜잭션을 제출하여 원래 트랜잭션을 "선행매매"하고 원래 검색자의 MEV를 획득합니다.

### Flashbots {#mev-extraction-flashbots}

Flashbots는 실행 클라이언트를 확장하여 검색자가 공개 멤풀에 노출하지 않고도 검증자에게 MEV 트랜잭션을 제출할 수 있는 서비스를 제공하는 독립 프로젝트입니다. 이를 통해 일반화된 프론트러너에 의한 트랜잭션 선행매매를 방지할 수 있습니다.

## MEV 예시 {#mev-examples}

MEV는 몇 가지 방식으로 블록체인에서 나타납니다.

### DEX 차익거래 {#mev-examples-dex-arbitrage}

[탈중앙화 거래소](/glossary/#dex)(DEX) 차익거래는 가장 간단하고 가장 잘 알려진 MEV 기회입니다. 결과적으로, 가장 경쟁이 치열하기도 합니다.

작동 방식은 다음과 같습니다. 두 개의 DEX가 토큰을 서로 다른 가격으로 제공하는 경우, 누군가는 가격이 낮은 DEX에서 토큰을 구매하고 가격이 높은 DEX에서 단일 원자적 트랜잭션으로 판매할 수 있습니다. 블록체인의 메커니즘 덕분에 이것은 진정한 무위험 차익거래입니다.

Uniswap과 Sushiswap에서 ETH/DAI 페어의 다른 가격 책정을 활용하여 검색자가 1,000 ETH를 1,045 ETH로 바꾼 수익성 있는 차익거래 트랜잭션의 [예시](https://eth.blockscout.com/tx/0x5e1657ef0e9be9bc72efefe59a2528d0d730d478cfc9e6cdd09af9f997bb3ef4)입니다.

### 청산 {#mev-examples-liquidations}

대출 프로토콜 청산은 또 다른 잘 알려진 MEV 기회를 제공합니다.

Maker나 Aave와 같은 대출 프로토콜은 사용자가 담보(예: ETH)를 예치하도록 요구합니다. 이 예치된 담보는 다른 사용자에게 대출해 주는 데 사용됩니다.

그런 다음 사용자는 예치된 담보의 특정 비율까지 필요한 것에 따라 다른 사람으로부터 자산과 토큰을 빌릴 수 있습니다(예: MakerDAO 거버넌스 제안에 투표하려면 MKR을 빌릴 수 있습니다). 예를 들어, 대출 금액이 최대 30%인 경우, 프로토콜에 100 DAI를 예치한 사용자는 다른 자산으로 최대 30 DAI 상당을 빌릴 수 있습니다. 프로토콜이 정확한 대출 능력 비율을 결정합니다.

차용인의 담보 가치가 변동함에 따라 대출 능력도 변동합니다. 만약 시장 변동으로 인해 빌린 자산의 가치가 담보 가치의 30%(다시 말하지만, 정확한 비율은 프로토콜에 의해 결정됨)를 초과하면, 프로토콜은 일반적으로 누구나 담보를 청산하여 즉시 대출자에게 상환할 수 있도록 허용합니다(이는 전통적인 금융에서 [마진 콜](https://www.investopedia.com/terms/m/margincall.asp)이 작동하는 방식과 유사합니다). 청산될 경우, 차용인은 보통 막대한 청산 수수료를 지불해야 하며, 그 중 일부는 청산인에게 돌아갑니다. 바로 여기서 MEV 기회가 발생합니다.

검색자들은 블록체인 데이터를 최대한 빨리 분석하여 어떤 차용인이 청산될 수 있는지 파악하고, 가장 먼저 청산 트랜잭션을 제출하여 청산 수수료를 챙기기 위해 경쟁합니다.

### 샌드위치 거래 {#mev-examples-sandwich-trading}

샌드위치 거래는 MEV 추출의 또 다른 일반적인 방법입니다.

샌드위치 거래를 하기 위해, 검색자는 멤풀에서 대규모 DEX 거래를 주시합니다. 예를 들어, 누군가 Uniswap에서 DAI로 10,000 UNI를 구매하고 싶다고 가정해 봅시다. 이 정도 규모의 거래는 UNI/DAI 페어에 상당한 영향을 미쳐 DAI 대비 UNI의 가격을 크게 상승시킬 수 있습니다.

검색자는 이 대규모 거래가 UNI/DAI 페어에 미치는 대략적인 가격 효과를 계산하고 대규모 거래 직전에 최적의 매수 주문을 실행하여 UNI를 저렴하게 구매한 다음, 대규모 거래 직후에 매도 주문을 실행하여 대규모 주문으로 인해 높아진 가격에 판매할 수 있습니다.

그러나 샌드위치 거래는 (위에서 설명한 DEX 차익거래와 달리) 원자적이지 않고 [살모넬라 공격](https://github.com/Defi-Cartel/salmonella)에 취약하기 때문에 더 위험합니다.

### NFT MEV {#mev-examples-nfts}

NFT 분야의 MEV는 새로운 현상이며, 반드시 수익성이 있는 것은 아닙니다.

하지만 NFT 트랜잭션은 다른 모든 이더리움 트랜잭션과 공유되는 동일한 블록체인에서 발생하므로, 검색자는 기존 MEV 기회에서 사용된 것과 유사한 기술을 NFT 시장에서도 사용할 수 있습니다.

예를 들어, 인기 있는 NFT 드롭이 있고 검색자가 특정 NFT 또는 NFT 세트를 원하는 경우, NFT를 가장 먼저 구매하도록 트랜잭션을 프로그래밍하거나 단일 트랜잭션으로 전체 NFT 세트를 구매할 수 있습니다. 또는 NFT가 [실수로 낮은 가격에 등록](https://www.theblockcrypto.com/post/113546/mistake-sees-69000-cryptopunk-sold-for-less-than-a-cent)된 경우, 검색자는 다른 구매자를 선행매매하여 저렴하게 구매할 수 있습니다.

NFT MEV의 한 가지 두드러진 예는 한 검색자가 700만 달러를 들여 모든 크립토펑크(Cryptopunk)를 최저가에 [구매](https://eth.blockscout.com/address/0x650dCdEB6ecF05aE3CAF30A70966E2F395d5E9E5?tab=txs)했을 때 발생했습니다. 한 블록체인 연구원은 [트위터에서](https://twitter.com/IvanBogatyy/status/1422232184493121538) 구매자가 MEV 제공업체와 협력하여 구매를 비밀로 유지한 방법을 설명했습니다.

### 롱테일 {#mev-examples-long-tail}

DEX 차익거래, 청산, 샌드위치 거래는 모두 매우 잘 알려진 MEV 기회이며 새로운 검색자에게는 수익성이 없을 가능성이 높습니다. 그러나 덜 알려진 MEV 기회의 롱테일이 있습니다(NFT MEV가 바로 그러한 기회 중 하나라고 할 수 있습니다).

이제 막 시작하는 검색자들은 이 롱테일에서 MEV를 검색함으로써 더 많은 성공을 거둘 수 있습니다. Flashbot의 [MEV 채용 게시판](https://github.com/flashbots/mev-job-board)에는 몇 가지 새로운 기회가 나열되어 있습니다.

## MEV의 효과 {#effects-of-mev}

MEV가 모두 나쁜 것은 아닙니다. 이더리움의 MEV에는 긍정적인 결과와 부정적인 결과가 모두 있습니다.

### 장점 {#effects-of-mev-the-good}

많은 디파이 프로젝트는 프로토콜의 유용성과 안정성을 보장하기 위해 경제적으로 합리적인 행위자에게 의존합니다. 예를 들어, DEX 차익거래는 사용자가 자신의 토큰에 대해 가장 정확하고 최고의 가격을 받을 수 있도록 보장하고, 대출 프로토콜은 차용인이 담보 비율 아래로 떨어졌을 때 신속한 청산에 의존하여 대출자가 상환받을 수 있도록 보장합니다.

경제적 비효율성을 찾아 수정하고 프로토콜의 경제적 인센티브를 활용하는 합리적인 검색자가 없다면, 디파이 프로토콜과 디앱스 전반이 오늘날처럼 견고하지 못할 수 있습니다.

### 단점 {#effects-of-mev-the-bad}

애플리케이션 레이어에서 샌드위치 거래와 같은 일부 MEV 형태는 사용자에게 명백히 더 나쁜 경험을 초래합니다. 샌드위치 공격을 당한 사용자는 거래에서 슬리피지 증가와 실행 악화에 직면하게 됩니다.

네트워크 레이어에서 일반화된 프론트러너와 이들이 종종 참여하는 가스 가격 경매(둘 이상의 프론트러너가 다음 블록에 자신의 트랜잭션을 포함시키기 위해 점진적으로 자신의 트랜잭션 가스 가격을 올리며 경쟁하는 경우)는 네트워크 혼잡과 일반 트랜잭션을 실행하려는 다른 모든 사람들에게 높은 가스 가격을 초래합니다.

블록 _내부_에서 일어나는 일 외에도, MEV는 블록 _간_에 해로운 영향을 미칠 수 있습니다. 블록에서 사용 가능한 MEV가 표준 블록 보상을 크게 초과하면, 검증자는 블록을 재구성하여 MEV를 자신을 위해 캡처하도록 장려될 수 있으며, 이는 블록체인 재구성과 합의 불안정성을 유발합니다.

이러한 블록체인 재구성 가능성은 [이전에 비트코인 블록체인에서 탐구된 바 있습니다](https://dl.acm.org/doi/10.1145/2976749.2978408). 비트코인의 블록 보상이 반감되고 거래 수수료가 블록 보상에서 차지하는 비중이 점점 더 커짐에 따라, 채굴자들이 다음 블록의 보상을 포기하고 대신 더 높은 수수료를 가진 과거 블록을 재채굴하는 것이 경제적으로 합리적인 상황이 발생합니다. MEV의 성장으로 이더리움에서도 동일한 종류의 상황이 발생하여 블록체인의 무결성을 위협할 수 있습니다.

## MEV 현황 {#state-of-mev}

MEV 추출은 2021년 초에 급증하여 연초 몇 달 동안 극도로 높은 가스 가격을 초래했습니다. Flashbots의 MEV 릴레이의 출현은 일반화된 프론트러너의 효율성을 감소시켰고 가스 가격 경매를 오프 체임으로 가져와 일반 사용자의 가스 가격을 낮췄습니다.

많은 검색자가 여전히 MEV로 좋은 수익을 내고 있지만, 기회가 더 잘 알려지고 점점 더 많은 검색자가 동일한 기회를 놓고 경쟁함에 따라 검증자는 점점 더 많은 총 MEV 수익을 차지하게 될 것입니다(원래 설명된 것과 동일한 종류의 가스 경매가 Flashbots에서도 비공개로 발생하며, 검증자가 그에 따른 가스 수익을 차지하기 때문입니다). MEV는 이더리움에만 국한된 것이 아니며, 이더리움에서 기회 경쟁이 치열해짐에 따라 검색자들은 바이낸스 스마트 체인과 같은 대체 블록체인으로 이동하고 있습니다. 그곳에는 이더리움과 유사한 MEV 기회가 경쟁이 덜한 상태로 존재합니다.

반면에 작업 증명에서 지분 증명으로의 전환과 롤업을 사용하여 이더리움을 확장하려는 지속적인 노력은 모두 아직 다소 불분명한 방식으로 MEV 환경을 변화시킵니다. 보장된 블록 제안자를 약간 미리 아는 것이 작업 증명의 확률적 모델에 비해 MEV 추출의 역학을 어떻게 변화시키는지, 또는 [단일 비밀 리더 선출](https://ethresear.ch/t/secret-non-single-leader-election/11789) 및 [분산 검증자 기술](/staking/dvt/)이 구현될 때 이것이 어떻게 중단될지는 아직 잘 알려져 있지 않습니다. 마찬가지로, 대부분의 사용자 활동이 이더리움에서 레이어 2 롤업 및 샤드로 이전될 때 어떤 MEV 기회가 존재하는지는 아직 지켜봐야 합니다.

## 이더리움 지분 증명(PoS)에서의 MEV {#mev-in-ethereum-proof-of-stake}

설명한 바와 같이, MEV는 전반적인 사용자 경험과 합의 레이어 보안에 부정적인 영향을 미칩니다. 그러나 이더리움의 지분 증명 합의로의 전환("병합"이라고 불림)은 잠재적으로 새로운 MEV 관련 위험을 초래합니다.

### 검증자 중앙화 {#validator-centralization}

병합 후 이더리움에서는 검증자(32 ETH의 보안 예치금을 예치한)가 비콘 체인에 추가된 블록의 유효성에 대해 합의에 도달합니다. 32 ETH는 많은 사람에게 부담스러운 금액일 수 있으므로 [스테이킹 풀에 참여](/staking/pools/)하는 것이 더 실현 가능한 옵션일 수 있습니다. 그럼에도 불구하고, [단독 스테이커](/staking/solo/)의 건전한 분포는 검증자의 중앙화를 완화하고 이더리움의 보안을 향상시키므로 이상적입니다.

그러나 MEV 추출은 검증자 중앙화를 가속화할 수 있는 것으로 여겨집니다. 이는 부분적으로 검증자가 이전에 채굴자가 했던 것보다 [블록 제안에 대해 더 적은 수입을 얻게 되면서](/roadmap/merge/issuance/#how-the-merge-impacts-ETH-supply), [병합](/roadmap/merge/) 이후 MEV 추출이 [검증자 수입에 큰 영향](https://github.com/flashbots/eth2-research/blob/main/notebooks/mev-in-eth2/eth2-mev-calc.ipynb)을 미쳤기 때문입니다.

더 큰 스테이킹 풀은 MEV 기회를 포착하기 위해 필요한 최적화에 투자할 더 많은 자원을 가질 가능성이 높습니다. 이러한 풀이 더 많은 MEV를 추출할수록 MEV 추출 능력을 향상시키고 전체 수익을 늘릴 수 있는 더 많은 자원을 갖게 되어 본질적으로 [규모의 경제](https://www.investopedia.com/terms/e/economiesofscale.asp#)를 창출합니다.

가용 자원이 적은 단독 스테이커는 MEV 기회로부터 이익을 얻지 못할 수 있습니다. 이로 인해 독립 검증자들이 수입을 늘리기 위해 강력한 스테이킹 풀에 가입하라는 압력이 증가하여 이더리움의 탈중앙화를 감소시킬 수 있습니다.

### 허가형 멤풀 {#permissioned-mempools}

샌드위치 및 선행매매 공격에 대응하여 거래자들은 트랜잭션 개인 정보 보호를 위해 검증자와 오프 체임 거래를 시작할 수 있습니다. 잠재적인 MEV 트랜잭션을 공개 멤풀로 보내는 대신, 거래자는 이를 검증자에게 직접 보내고, 검증자는 이를 블록에 포함시키고 거래자와 이익을 나눕니다.

"다크 풀"은 이러한 협의의 더 큰 버전이며 특정 수수료를 지불할 의사가 있는 사용자에게 개방된 허가형, 접근 전용 멤풀로 기능합니다. 이러한 추세는 이더리움의 무허가성과 무신뢰성을 감소시키고 잠재적으로 블록체인을 가장 높은 입찰자를 선호하는 "pay-to-play" 메커니즘으로 변형시킬 수 있습니다.

허가형 멤풀은 또한 이전 섹션에서 설명한 중앙화 위험을 가속화할 것입니다. 여러 검증자를 운영하는 대규모 풀은 거래자와 사용자에게 트랜잭션 개인 정보 보호를 제공하여 MEV 수익을 늘리는 이점을 얻을 가능성이 높습니다.

병합 후 이더리움에서 이러한 MEV 관련 문제를 해결하는 것은 핵심 연구 분야입니다. 현재까지, 병합 이후 이더리움의 탈중앙화 및 보안에 대한 MEV의 부정적인 영향을 줄이기 위해 제안된 두 가지 해결책은 [**제안자-빌더 분리(PBS)**](/roadmap/pbs/)와 [**빌더 API**](https://github.com/ethereum/builder-specs)입니다.

### 제안자-빌더 분리 {#proposer-builder-separation}

작업 증명과 지분 증명 모두에서, 블록을 생성하는 노드는 합의에 참여하는 다른 노드에게 체인에 추가할 것을 제안합니다. 새로운 블록은 다른 채굴자가 그 위에 빌드하거나(PoW에서) 또는 과반수의 검증자로부터 인증을 받은 후(지분 증명에서) 정식 체인의 일부가 됩니다.

블록 생산자와 블록 제안자 역할의 조합이 이전에 설명한 대부분의 MEV 관련 문제를 야기합니다. 예를 들어, 합의 노드는 MEV 수익을 극대화하기 위해 [타임 밴딧 공격](https://www.mev.wiki/attack-examples/time-bandit-attack)에서 체인 재구성을 유발하도록 장려됩니다.

[제안자-빌더 분리](https://ethresear.ch/t/proposer-block-builder-separation-friendly-fee-market-designs/9725)(PBS)는 특히 합의 레이어에서 MEV의 영향을 완화하도록 설계되었습니다. PBS의 주요 특징은 블록 생산자와 블록 제안자 역할의 분리입니다. 검증자는 여전히 블록을 제안하고 투표할 책임이 있지만, **블록 빌더**라고 불리는 새로운 종류의 전문화된 주체가 트랜잭션을 정렬하고 블록을 생성하는 임무를 맡습니다.

PBS 하에서, 블록 빌더는 트랜잭션 번들을 생성하고 비콘 체인 블록에 포함시키기 위한 입찰을 합니다("실행 페이로드"로서). 다음 블록을 제안하도록 선택된 검증자는 여러 입찰을 확인하고 가장 높은 수수료를 가진 번들을 선택합니다. PBS는 본질적으로 빌더가 블록 공간을 판매하는 검증자와 협상하는 경매 시장을 만듭니다.

현재 PBS 설계는 빌더가 입찰과 함께 블록 내용물(블록 헤더)에 대한 암호화된 커밋먼트만 게시하는 [커밋-리빌 체계](https://gitcoin.co/blog/commit-reveal-scheme-on-ethereum/)를 사용합니다. 낙찰된 입찰을 수락한 후, 제안자는 블록 헤더를 포함하는 서명된 블록 제안을 생성합니다. 블록 빌더는 서명된 블록 제안을 본 후 전체 블록 본문을 게시해야 하며, 최종 확정되기 전에 검증자로부터 충분한 [인증](/glossary/#attestation)을 받아야 합니다.

#### 제안자-빌더 분리는 MEV의 영향을 어떻게 완화합니까? {#how-does-pbs-curb-mev-impact}

프로토콜 내 제안자-빌더 분리는 검증자의 권한에서 MEV 추출을 제거함으로써 합의에 대한 MEV의 영향을 줄입니다. 대신, 전문 하드웨어를 실행하는 블록 빌더가 앞으로 MEV 기회를 포착할 것입니다.

그러나 빌더가 검증자에게 블록을 수락받기 위해 높은 가격으로 입찰해야 하므로, 이것이 검증자를 MEV 관련 수입에서 완전히 배제하는 것은 아닙니다. 그럼에도 불구하고, 검증자가 더 이상 MEV 수입 최적화에 직접적으로 집중하지 않게 됨에 따라 타임 밴딧 공격의 위협이 줄어듭니다.

제안자-빌더 분리는 또한 MEV의 중앙화 위험을 줄입니다. 예를 들어, 커밋-리빌 체계를 사용하면 빌더가 검증자가 MEV 기회를 훔치거나 다른 빌더에게 노출하지 않을 것이라고 신뢰할 필요가 없어집니다. 이는 단독 스테이커가 MEV로부터 이익을 얻기 위한 장벽을 낮춥니다. 그렇지 않으면 빌더는 오프 체임 평판을 가진 대규모 풀을 선호하고 그들과 오프 체임 거래를 하는 경향이 있을 것입니다.

마찬가지로, 지불이 무조건적이기 때문에 검증자는 빌더가 블록 본문을 보류하거나 유효하지 않은 블록을 게시하지 않을 것이라고 신뢰할 필요가 없습니다. 제안된 블록을 사용할 수 없거나 다른 검증자에 의해 유효하지 않다고 선언되더라도 검증자의 수수료는 여전히 처리됩니다. 후자의 경우, 블록은 단순히 폐기되어 블록 빌더가 모든 거래 수수료와 MEV 수익을 잃게 됩니다.

### 빌더 API {#builder-api}

제안자-빌더 분리는 MEV 추출의 영향을 줄일 것을 약속하지만, 이를 구현하려면 합의 프로토콜을 변경해야 합니다. 구체적으로, 비콘 체인의 [포크 선택](/developers/docs/consensus-mechanisms/pos/#fork-choice) 규칙을 업데이트해야 합니다. [빌더 API](https://github.com/ethereum/builder-specs)는 더 높은 신뢰 가정을 수반하지만, 제안자-빌더 분리의 작동 구현을 제공하기 위한 임시 해결책입니다.

빌더 API는 합의 레이어 클라이언트가 실행 레이어 클라이언트로부터 실행 페이로드를 요청하는 데 사용되는 [엔진 API](https://github.com/ethereum/execution-apis/blob/main/src/engine/common.md)의 수정된 버전입니다. [정직한 검증자 사양](https://github.com/ethereum/consensus-specs/blob/dev/specs/bellatrix/validator.md)에 설명된 대로, 블록 제안 의무를 위해 선택된 검증자는 연결된 실행 클라이언트로부터 트랜잭션 번들을 요청하고, 이를 제안된 비콘 체인 블록에 포함시킵니다.

빌더 API는 또한 검증자와 실행 레이어 클라이언트 간의 미들웨어 역할을 합니다. 그러나 비콘 체인의 검증자가 외부 주체로부터 블록을 소싱할 수 있도록 허용한다는 점에서 다릅니다(실행 클라이언트를 사용하여 로컬에서 블록을 생성하는 대신).

다음은 빌더 API의 작동 방식에 대한 개요입니다.

1. 빌더 API는 검증자를 실행 레이어 클라이언트를 실행하는 블록 빌더 네트워크에 연결합니다. PBS에서와 같이, 빌더는 자원 집약적인 블록 생성에 투자하고 MEV + 우선순위 팁에서 얻는 수익을 극대화하기 위해 다양한 전략을 사용하는 전문 주체입니다.

2. 검증자(합의 레이어 클라이언트를 실행 중인)는 빌더 네트워크로부터 입찰과 함께 실행 페이로드를 요청합니다. 빌더의 입찰에는 실행 페이로드 헤더(페이로드 내용에 대한 암호화된 커밋먼트)와 검증자에게 지불할 수수료가 포함됩니다.

3. 검증자는 들어오는 입찰을 검토하고 가장 높은 수수료를 가진 실행 페이로드를 선택합니다. 빌더 API를 사용하여 검증자는 자신의 서명과 실행 페이로드 헤더만 포함하는 "블라인드" 비콘 블록 제안을 생성하여 빌더에게 보냅니다.

4. 빌더 API를 실행하는 빌더는 블라인드 블록 제안을 보면 전체 실행 페이로드로 응답해야 합니다. 이를 통해 검증자는 "서명된" 비콘 블록을 생성하여 네트워크 전체에 전파할 수 있습니다.

5. 빌더 API를 사용하는 검증자는 블록 빌더가 신속하게 응답하지 않을 경우를 대비해 로컬에서 블록을 생성하여 블록 제안 보상을 놓치지 않도록 해야 합니다. 그러나 검증자는 이제 공개된 트랜잭션이나 다른 세트를 사용하여 또 다른 블록을 생성할 수 없습니다. 이는 _이중 서명_(동일한 슬롯 내에서 두 개의 블록에 서명하는 것)에 해당하며, 이는 슬래싱 대상 범죄입니다.

빌더 API의 구현 예로는 이더리움에 대한 MEV의 부정적인 외부 효과를 억제하기 위해 설계된 [Flashbots 경매 메커니즘](https://docs.flashbots.net/Flashbots-auction/overview)의 개선 사항인 [MEV Boost](https://github.com/flashbots/mev-boost)가 있습니다. Flashbots 경매를 통해 지분 증명 검증자는 수익성 있는 블록을 구축하는 작업을 **검색자**라는 전문 당사자에게 아웃소싱할 수 있습니다.
![MEV 흐름을 자세히 보여주는 다이어그램](./mev.png)

검색자는 수익성 있는 MEV 기회를 찾아 블록에 포함시키기 위해 [밀봉 가격 입찰](https://en.wikipedia.org/wiki/First-price_sealed-bid_auction)과 함께 트랜잭션 번들을 블록 제안자에게 보냅니다. go-ethereum(Geth) 클라이언트의 포크 버전인 mev-geth를 실행하는 검증자는 가장 수익성이 높은 번들을 선택하여 새 블록의 일부로 포함시키기만 하면 됩니다. 블록 제안자(검증자)를 스팸 및 유효하지 않은 트랜잭션으로부터 보호하기 위해 트랜잭션 번들은 제안자에게 도달하기 전에 검증을 위해 **릴레이어**를 통과합니다.

MEV Boost는 이더리움의 지분 증명 전환을 위해 설계된 새로운 기능을 갖추고 있지만, 원래 Flashbots 경매의 동일한 작동 방식을 유지합니다. 검색자는 여전히 블록에 포함할 수익성 있는 MEV 트랜잭션을 찾지만, **빌더**라고 불리는 새로운 종류의 전문 당사자가 트랜잭션과 번들을 블록으로 집계하는 책임을 집니다. 빌더는 검색자로부터 밀봉 가격 입찰을 수락하고 최적화를 실행하여 가장 수익성 있는 순서를 찾습니다.

릴레이어는 여전히 트랜잭션 번들을 제안자에게 전달하기 전에 검증할 책임이 있습니다. 그러나 MEV Boost는 빌더가 보낸 블록 본문과 검증자가 보낸 블록 헤더를 저장하여 [데이터 가용성](/developers/docs/data-availability/)을 제공하는 **에스크로**를 도입합니다. 여기서 릴레이에 연결된 검증자는 사용 가능한 실행 페이로드를 요청하고 MEV Boost의 정렬 알고리즘을 사용하여 가장 높은 입찰가 + MEV 팁이 있는 페이로드 헤더를 선택합니다.

#### 빌더 API는 MEV의 영향을 어떻게 완화합니까? {#how-does-builder-api-curb-mev-impact}

빌더 API의 핵심 이점은 MEV 기회에 대한 접근을 민주화할 수 있는 잠재력입니다. 커밋-리빌 체계를 사용하면 신뢰 가정이 제거되고 MEV로부터 이익을 얻으려는 검증자의 진입 장벽이 낮아집니다. 이는 단독 스테이커가 MEV 이익을 늘리기 위해 대규모 스테이킹 풀과 통합해야 하는 압력을 줄여야 합니다.

빌더 API의 광범위한 구현은 블록 빌더 간의 경쟁을 더욱 촉진하여 검열 저항성을 높일 것입니다. 검증자가 여러 빌더의 입찰을 검토함에 따라, 하나 이상의 사용자 트랜잭션을 검열하려는 빌더는 성공하기 위해 다른 모든 비검열 빌더보다 높은 가격을 제시해야 합니다. 이는 사용자를 검열하는 비용을 극적으로 증가시키고 그러한 행위를 억제합니다.

MEV Boost와 같은 일부 프로젝트는 선행매매/샌드위치 공격을 피하려는 거래자와 같은 특정 당사자에게 트랜잭션 개인 정보 보호를 제공하도록 설계된 전체 구조의 일부로 빌더 API를 사용합니다. 이는 사용자와 블록 빌더 간의 비공개 통신 채널을 제공함으로써 달성됩니다. 앞서 설명한 허가형 멤풀과 달리 이 접근 방식은 다음과 같은 이유로 유익합니다.

1. 시장에 여러 빌더가 존재하면 검열이 비현실적이 되어 사용자에게 이익이 됩니다. 대조적으로, 중앙화되고 신뢰 기반의 다크 풀이 존재하면 소수의 블록 빌더 손에 권력이 집중되고 검열 가능성이 높아질 것입니다.

2. 빌더 API 소프트웨어는 오픈 소스이므로 누구나 블록 빌더 서비스를 제공할 수 있습니다. 이는 사용자가 특정 블록 빌더를 강제로 사용하지 않아도 되며 이더리움의 중립성과 무허가성을 향상시킵니다. 또한, MEV를 추구하는 거래자들은 비공개 거래 채널을 사용함으로써 의도치 않게 중앙화에 기여하지 않게 됩니다.

## 관련 자료 {#related-resources}

- [Flashbots 문서](https://docs.flashbots.net/)
- [Flashbots GitHub](https://github.com/flashbots/pm)
- [mevboost.org](https://www.mevboost.org/) - _MEV-Boost 릴레이 및 블록 빌더에 대한 실시간 통계 추적기_

## 더 읽어보기 {#further-reading}

- [채굴자 추출 가능 가치(MEV)란 무엇인가?](https://blog.chain.link/what-is-miner-extractable-value-mev/)
- [MEV와 나](https://www.paradigm.xyz/2021/02/mev-and-me)
- [이더리움은 어두운 숲이다](https://www.paradigm.xyz/2020/08/ethereum-is-a-dark-forest/)
- [어두운 숲 탈출하기](https://samczsun.com/escaping-the-dark-forest/)
- [Flashbots: MEV 위기 선행매매](https://medium.com/flashbots/frontrunning-the-mev-crisis-40629a613752)
- [@bertcmiller의 MEV 스레드](https://twitter.com/bertcmiller/status/1402665992422047747)
- [MEV-Boost: 병합 준비가 된 Flashbots 아키텍처](https://ethresear.ch/t/mev-boost-merge-ready-flashbots-architecture/11177)
- [MEV Boost란 무엇인가](https://www.alchemy.com/overviews/mev-boost)
- [왜 mev-boost를 실행해야 하는가?](https://writings.flashbots.net/writings/why-run-mevboost/)
- [이더리움을 위한 히치하이커 안내서](https://members.delphidigital.io/reports/the-hitchhikers-guide-to-ethereum)
