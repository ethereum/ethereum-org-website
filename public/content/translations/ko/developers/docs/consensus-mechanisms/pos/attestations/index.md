---
title: "인증"
description: "지분 증명 이더리움의 인증에 대한 설명입니다."
lang: ko
---

검증자는 매 에폭마다 인증을 생성, 서명 및 브로드캐스트해야 합니다. 이 페이지에서는 이러한 인증의 형태와 합의 클라이언트 간에 처리되고 통신되는 방식에 대해 간략히 설명합니다.

## 인증이란 무엇인가요? {#what-is-an-attestation}

매 [에폭](/glossary/#epoch)(6.4분)마다 검증자는 네트워크에 인증을 제안합니다. 인증은 에폭의 특정 슬롯에 대한 것입니다. 인증의 목적은 검증자의 체인에 대한 관점, 특히 가장 최근에 정당화된 블록과 현재 에폭의 첫 번째 블록(`소스` 및 `타깃` 체크포인트라고 함)에 찬성하여 투표하는 것입니다. 이 정보는 참여하는 모든 검증자에 대해 결합되어 네트워크가 블록체인의 상태에 대한 합의에 도달할 수 있도록 합니다.

인증에는 다음 구성 요소가 포함됩니다.

- `aggregation_bits`: 검증자들의 비트 리스트로, 위치는 위원회 내 검증자 인덱스에 매핑됩니다. 값(0/1)은 검증자가 `data`에 서명했는지 여부(즉, 활성 상태이고 블록 제안자에 동의하는지 여부)를 나타냅니다.
- `data`: 아래에 정의된 인증 관련 세부 정보
- `signature`: 개별 검증자의 서명을 집계하는 BLS 서명

인증하는 검증자의 첫 번째 작업은 `data`를 구축하는 것입니다. `data`에는 다음 정보가 포함됩니다.

- `slot`: 인증이 참조하는 슬롯 번호
- `index`: 주어진 슬롯에서 검증자가 속한 위원회를 식별하는 번호
- `beacon_block_root`: 검증자가 체인의 헤드에서 보는 블록의 루트 해시(포크 선택 알고리즘을 적용한 결과)
- `source`: 검증자가 가장 최근에 정당화된 블록으로 보는 것을 나타내는 최종성 투표의 일부
- `target`: 검증자가 현재 에폭의 첫 번째 블록으로 보는 것을 나타내는 최종성 투표의 일부

`data`가 구축되면 검증자는 자신의 검증자 인덱스에 해당하는 `aggregation_bits`의 비트를 0에서 1로 뒤집어 참여했음을 표시할 수 있습니다.

마지막으로 검증자는 인증에 서명하고 네트워크에 브로드캐스트합니다.

### 집계된 인증 {#aggregated-attestation}

모든 검증자에 대해 이 데이터를 네트워크를 통해 전달하는 데 상당한 오버헤드가 있습니다. 따라서 개별 검증자의 인증은 더 광범위하게 브로드캐스트되기 전에 서브넷 내에서 집계됩니다. 여기에는 서명을 함께 집계하여 브로드캐스트되는 인증에 합의 `data`와 해당 `data`에 동의하는 모든 검증자의 서명을 결합하여 형성된 단일 서명이 포함되도록 하는 작업이 포함됩니다. `aggregation_bits`를 사용하여 이를 확인할 수 있습니다. 왜냐하면 이는 위원회에 있는 각 검증자의 인덱스(ID는 `data`에 제공됨)를 제공하며, 이를 사용하여 개별 서명을 쿼리할 수 있기 때문입니다.

각 에폭에서 각 서브넷의 16개 검증자가 `수집자`로 선택됩니다. 수집자는 가십 네트워크를 통해 들은 모든 인증 중 자신의 `data`와 동일한 `data`를 가진 인증을 수집합니다. 일치하는 각 인증의 발신자는 `aggregation_bits`에 기록됩니다. 그런 다음 수집자는 인증 집계를 더 넓은 네트워크에 브로드캐스트합니다.

검증자가 블록 제안자로 선택되면 서브넷의 집계 인증을 새 블록의 최신 슬롯까지 패키징합니다.

### 인증 포함 라이프사이클 {#attestation-inclusion-lifecycle}

1. 생성
2. 전파
3. 집계
4. 전파
5. 포함

인증 라이프사이클은 아래 도식에 요약되어 있습니다.

![인증 라이프사이클](./attestation_schematic.png)

## 보상 {#rewards}

검증자는 인증을 제출하면 보상을 받습니다. 인증 보상은 참여 플래그(소스, 타깃 및 헤드), 기본 보상 및 참여율에 따라 달라집니다.

각 참여 플래그는 제출된 인증 및 포함 지연에 따라 참 또는 거짓이 될 수 있습니다.

세 플래그가 모두 참일 때 최상의 시나리오가 발생하며, 이 경우 검증자는 (올바른 플래그당) 다음과 같이 보상을 받습니다.

`보상 += 기본 보상 * 플래그 가중치 * 플래그 인증 비율 / 64`

플래그 인증 비율은 주어진 플래그에 대한 모든 인증 검증자의 유효 잔액 합계를 총 활성 유효 잔액과 비교하여 측정됩니다.

### 기본 보상 {#base-reward}

기본 보상은 인증 검증자의 수와 이들의 유효 스테이킹 이더 잔액에 따라 계산됩니다.

`기본 보상 = 검증자 유효 잔액 x 2^6 / SQRT(모든 활성 검증자의 유효 잔액)`

#### 포함 지연 {#inclusion-delay}

검증자가 체인의 헤드(`블록 n`)에 투표할 때 `블록 n+1`은 아직 제안되지 않았습니다. 따라서 인증은 자연스럽게 **한 블록 후에** 포함되므로 체인 헤드가 `블록 n`이라고 투표한 모든 인증은 `블록 n+1`에 포함되며, **포함 지연**은 1이 됩니다. 포함 지연이 두 슬롯으로 두 배가 되면 인증 보상은 절반으로 줄어듭니다. 왜냐하면 인증 보상을 계산하기 위해 기본 보상에 포함 지연의 역수를 곱하기 때문입니다.

### 인증 시나리오 {#attestation-scenarios}

#### 투표 검증자 누락 {#missing-voting-validator}

검증자는 인증을 제출하기까지 최대 1 에폭의 시간이 있습니다. 에폭 0에서 인증을 놓친 경우, 에폭 1에서 포함 지연과 함께 제출할 수 있습니다.

#### 수집자 누락 {#missing-aggregator}

에폭당 총 16개의 수집자가 있습니다. 또한, 무작위 검증자들은 **256 에폭 동안 두 개의 서브넷에** 구독하여 수집자가 누락될 경우 백업 역할을 합니다.

#### 블록 제안자 누락 {#missing-block-proposer}

경우에 따라 운 좋은 수집자가 블록 제안자가 될 수도 있다는 점에 유의하세요. 블록 제안자가 누락되어 인증이 포함되지 않은 경우, 다음 블록 제안자가 집계된 인증을 선택하여 다음 블록에 포함시킵니다. 그러나 **포함 지연**은 1만큼 증가합니다.

## 더 읽어보기 {#further-reading}

- [Vitalik의 주석이 달린 합의 사양의 인증](https://github.com/ethereum/annotated-spec/blob/master/phase0/beacon-chain.md#attestationdata)
- [eth2book.info의 인증](https://eth2book.info/capella/part3/containers/dependencies/#attestationdata)

_도움이 되었던 커뮤니티 참고 자료를 알고 계신가요? 이 페이지를 편집해서 추가하세요!_
