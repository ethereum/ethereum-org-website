---
title: "단일 슬롯 최종 승인"
description: "단일 슬롯 최종 승인에 대한 설명"
lang: ko
---

# 단일 슬롯 최종 승인 {#single-slot-finality}

이더리움 블록이 최종 승인되기까지 약 15분이 소요됩니다. 하지만 이더리움의 합의 메커니즘이 블록을 더 효율적으로 검증하고 최종 승인까지의 시간을 획기적으로 줄일 수 있습니다. 15분을 기다리는 대신, 블록은 같은 슬롯에서 제안되고 최종 승인될 수 있습니다. 이 개념은 \*\*단일 슬롯 최종 승인(SSF)\*\*으로 알려져 있습니다.

## 최종 승인이란 무엇인가요? {#what-is-finality}

이더리움의 지분 증명 기반 합의 메커니즘에서 최종 승인이란 전체 스테이킹된 ETH의 최소 33%를 소각하지 않고는 블록체인에서 블록을 변경하거나 제거할 수 없다는 보장을 의미합니다. 이는 '암호 경제학적' 보안입니다. 합리적인 경제 주체가 시도하지 못하도록 체인의 순서나 내용을 변경하는 데 엄청난 비용이 들기 때문에 신뢰가 보장됩니다.

## 더 빠른 최종 승인을 목표로 하는 이유는 무엇인가요? {#why-aim-for-quicker-finality}

현재 최종 승인까지의 시간은 너무 긴 것으로 밝혀졌습니다. 대부분의 사용자는 최종 승인을 위해 15분을 기다리고 싶어 하지 않으며, 높은 트랜잭션 처리량을 원하는 앱과 거래소의 경우 트랜잭션이 영구적임을 확신하기 위해 그렇게 오래 기다려야 하는 것이 불편합니다. 블록 제안과 최종 승인 사이에 지연이 있으면 공격자가 특정 블록을 검열하거나 MEV를 추출하는 데 사용할 수 있는 짧은 재구성(reorg)의 기회가 생깁니다. 단계적으로 블록 업그레이드를 처리하는 메커니즘 또한 매우 복잡하며 보안 취약점을 해결하기 위해 여러 번 패치되었기 때문에, 미묘한 버그가 발생할 가능성이 더 높은 이더리움 코드베이스의 일부가 되었습니다. 이러한 문제는 최종 승인까지의 시간을 단일 슬롯으로 줄임으로써 모두 제거할 수 있습니다.

## 탈중앙화/시간/오버헤드 절충 {#the-decentralization-time-overhead-tradeoff}

최종 승인 보장은 새로운 블록의 즉각적인 속성이 아니며, 새로운 블록이 최종 승인되기까지는 시간이 걸립니다. 그 이유는 네트워크에 스테이킹된 전체 ETH의 2/3 이상을 대표하는 검증자들이 해당 블록에 투표('증명')해야 최종 승인된 것으로 간주되기 때문입니다. 네트워크의 각 검증 노드는 블록이 2/3 임계값을 달성했는지 여부를 알기 위해 다른 노드의 증명을 처리해야 합니다.

최종 승인에 도달하는 데 허용되는 시간이 짧을수록 증명 처리가 더 빨라져야 하므로 각 노드에 더 많은 컴퓨팅 성능이 필요합니다. 또한 네트워크에 검증 노드가 많을수록 각 블록에 대해 처리해야 하는 증명이 많아져 필요한 처리 능력이 추가됩니다. 필요한 처리 능력이 많을수록 각 검증 노드를 실행하는 데 더 비싼 하드웨어가 필요하기 때문에 참여할 수 있는 사람이 줄어듭니다. 블록 간의 시간을 늘리면 각 노드에 필요한 컴퓨팅 성능은 줄어들지만 증명이 더 느리게 처리되므로 최종 승인까지의 시간도 길어집니다.

따라서 오버헤드(컴퓨팅 성능), 탈중앙화(체인 검증에 참여할 수 있는 노드 수), 최종 승인까지의 시간 사이에는 절충 관계가 있습니다. 이상적인 시스템은 최소한의 컴퓨팅 성능, 최대한의 탈중앙화, 최소한의 최종 승인까지의 시간 사이에서 균형을 맞춥니다.

이더리움의 현재 합의 메커니즘은 다음을 통해 이 세 가지 매개변수의 균형을 맞췄습니다.

- **최소 스테이킹 금액을 32 ETH로 설정**합니다. 이는 개별 노드에서 처리해야 하는 검증자 증명의 수에 대한 상한을 설정하고, 따라서 각 노드의 계산 요구 사항에 대한 상한을 설정합니다.
- **최종 승인까지의 시간을 약 15분으로 설정**합니다. 이렇게 하면 일반 가정용 컴퓨터에서 실행되는 검증자가 각 블록에 대한 증명을 안전하게 처리할 수 있는 충분한 시간이 주어집니다.

현재 메커니즘 설계에서는 최종 승인까지의 시간을 줄이려면 네트워크의 검증자 수를 줄이거나 각 노드의 하드웨어 요구 사항을 높여야 합니다. 그러나 각 노드의 오버헤드를 추가하지 않고도 더 많은 증명을 계산할 수 있도록 증명 처리 방식을 개선할 수 있습니다. 더 효율적인 처리를 통해 두 에폭에 걸쳐서가 아니라 단일 슬롯 내에서 최종 승인을 결정할 수 있습니다.

## SSF로 가는 길 {#routes-to-ssf}

<ExpandableCard title= "왜 지금 SSF를 도입할 수 없나요?" eventCategory="/roadmap/single-slot-finality" eventName="clicked Why can't we hear SSF today?">

현재 합의 메커니즘은 위원회로 알려진 여러 검증자의 증명을 결합하여 각 검증자가 블록을 검증하기 위해 처리해야 하는 메시지 수를 줄입니다. 모든 검증자는 각 에폭(32 슬롯)에서 증명할 기회가 있지만, 각 슬롯에서는 '위원회'로 알려진 일부 검증자만 증명합니다. 그들은 서브넷으로 분할하여 일부 검증자를 '애그리게이터'로 선택함으로써 이를 수행합니다. 각 애그리게이터는 서브넷의 다른 검증자로부터 받은 모든 서명을 단일 집계 서명으로 결합합니다. 가장 많은 개별 기여를 포함하는 애그리게이터는 집계 서명을 블록 제안자에게 전달하며, 블록 제안자는 이를 다른 위원회의 집계 서명과 함께 블록에 포함합니다.

이 프로세스는 각 에폭에서 모든 검증자가 투표할 수 있는 충분한 용량을 제공합니다. 왜냐하면 `슬롯 32개 * 위원회 64개 * 위원회당 검증자 256명 = 에폭당 검증자 524,288명`이기 때문입니다. 이 글을 쓰는 시점(2023년 2월)에는 약 513,000명의 활성 검증자가 있습니다.

이 방식에서는 전체 에폭에 걸쳐 증명을 배포해야만 모든 검증자가 블록에 투표할 수 있습니다. 하지만 _모든 검증자가 모든 슬롯에서 증명할 기회를 가질 수 있도록_ 메커니즘을 개선할 수 있는 잠재적인 방법이 있습니다.
</ExpandableCard>

이더리움 합의 메커니즘이 설계된 이후, 서명 집계 방식(BLS)은 처음에 생각했던 것보다 훨씬 더 확장성이 뛰어난 것으로 밝혀졌으며, 클라이언트가 서명을 처리하고 확인하는 능력도 향상되었습니다. 수많은 검증자의 증명을 단일 슬롯 내에서 처리하는 것이 실제로 가능하다는 것이 밝혀졌습니다. 예를 들어, 백만 명의 검증자가 각 슬롯에서 두 번씩 투표하고 슬롯 시간이 16초로 조정된 경우, 슬롯 내에서 백만 개의 증명을 모두 처리하려면 노드는 초당 최소 125,000개의 집계 속도로 서명을 확인해야 합니다. 실제로 일반 컴퓨터에서 한 번의 서명 확인을 수행하는 데 약 500나노초가 걸리며, 이는 125,000번의 확인을 약 62.5ms에 완료할 수 있음을 의미합니다. 이는 1초 임계값보다 훨씬 낮은 수치입니다.

슬롯당 125,000명의 무작위로 선택된 검증자로 구성된 슈퍼위원회를 만들어 효율성을 더욱 높일 수 있습니다. 이러한 검증자만이 블록에 투표할 수 있으므로 이 검증자 하위 집합만이 블록의 최종 승인 여부를 결정합니다. 이것이 좋은 생각인지 아닌지는 커뮤니티가 이더리움에 대한 성공적인 공격에 얼마의 비용을 선호하는지에 달려 있습니다. 이는 전체 스테이킹된 이더의 2/3가 필요한 대신, 공격자가 _해당 슈퍼위원회의_ 스테이킹된 이더 2/3로 부정직한 블록을 최종 승인할 수 있기 때문입니다. 이는 아직 활발한 연구 분야이지만, 애초에 슈퍼위원회를 필요로 할 만큼 충분히 큰 검증자 집합의 경우, 해당 하위위원회 중 하나를 공격하는 비용이 매우 높을 것이라는 점은 타당해 보입니다(예: ETH로 표시된 공격 비용은 `2/3 * 125,000 * 32 = ~260만 ETH`가 됩니다). 공격 비용은 검증자 집합의 크기를 늘려서 조정할 수 있습니다(예: 공격 비용이 100만 이더, 400만 이더, 1,000만 이더 등이 되도록 검증자 크기 조정). 커뮤니티의 [예비 설문조사](https://youtu.be/ojBgyFl6-v4?t=755)에 따르면 100만~200만 이더가 수용 가능한 공격 비용으로 보이며, 이는 슈퍼위원회당 약 65,536~97,152명의 검증자를 의미합니다.

그러나 검증이 진정한 병목 현상은 아니며, 검증자 노드에 실제로 부담을 주는 것은 서명 집계입니다. 서명 집계를 확장하려면 각 서브넷의 검증자 수를 늘리거나 서브넷 수를 늘리거나 추가 집계 레이어를 추가해야 할 것입니다(즉, 위원회의 위원회 구현). 솔루션의 일부는 제안자-빌더 분리(PBS) 및 댕크샤딩에 따라 블록 구축 및 롤업 데이터에 대한 약속 생성이 전문 블록 빌더에게 아웃소싱되는 방식과 유사하게 전문 애그리게이터를 허용하는 것일 수 있습니다.

## SSF에서 포크 선택 규칙의 역할은 무엇인가요? {#role-of-the-fork-choice-rule}

오늘날의 합의 메커니즘은 최종 승인 가젯(검증자의 2/3가 특정 체인을 증명했는지 여부를 결정하는 알고리즘)과 포크 선택 규칙(여러 옵션이 있을 때 어떤 체인이 올바른 체인인지 결정하는 알고리즘) 간의 긴밀한 결합에 의존합니다. 포크 선택 알고리즘은 마지막으로 최종 승인된 블록 _이후_의 블록만 고려합니다. SSF에서는 블록이 제안되는 것과 동일한 슬롯에서 최종 승인이 발생하기 때문에 포크 선택 규칙이 고려할 블록이 없습니다. 이는 SSF 하에서는 언제든지 포크 선택 알고리즘 _또는_ 최종 승인 가젯이 활성화됨을 의미합니다. 최종 승인 가젯은 검증자의 2/3가 온라인 상태에서 정직하게 증명하는 블록을 최종 승인합니다. 블록이 2/3 임계값을 초과할 수 없는 경우 포크 선택 규칙이 작동하여 따라야 할 체인을 결정합니다. 이는 또한 몇 가지 추가적인 뉘앙스가 있기는 하지만, 1/3 이상의 검증자가 오프라인 상태가 되는 체인을 복구하는 비활성 누출 메커니즘을 유지할 기회를 만듭니다.

## 미해결 문제 {#outstanding-issues}

서브넷당 검증자 수를 늘려 집계를 확장하는 것의 문제점은 P2P 네트워크에 더 큰 부하를 유발한다는 것입니다. 집계 레이어를 추가하는 것의 문제점은 엔지니어링이 매우 복잡하고 대기 시간이 추가된다는 것입니다(즉, 블록 제안자가 모든 서브넷 애그리게이터로부터 소식을 듣는 데 더 오랜 시간이 걸릴 수 있음). BLS 서명 집계를 사용하더라도 각 슬롯에서 실현 가능하게 처리할 수 있는 것보다 더 많은 활성 검증자가 네트워크에 있는 시나리오를 처리하는 방법도 명확하지 않습니다. 한 가지 잠재적인 해결책은 SSF 하에서는 모든 검증자가 모든 슬롯에서 증명하고 위원회가 없기 때문에 유효 잔액에 대한 32 ETH 상한을 완전히 제거할 수 있다는 것입니다. 이는 여러 검증자를 관리하는 운영자가 스테이킹을 통합하고 더 적은 수의 검증자를 실행하여 전체 검증자 집합을 처리하기 위해 검증 노드가 처리해야 하는 메시지 수를 줄일 수 있음을 의미합니다. 이는 대규모 스테이커가 검증자를 통합하는 데 동의하는 것에 달려 있습니다. 언제든지 검증자 수나 스테이킹된 ETH 금액에 고정 상한을 부과하는 것도 가능합니다. 그러나 이를 위해서는 어떤 검증자가 참여할 수 있고 어떤 검증자가 참여할 수 없는지를 결정하는 메커니즘이 필요하며, 이는 원치 않는 부작용을 일으킬 수 있습니다.

## 현재 진행 상황 {#current-progress}

SSF는 연구 단계에 있습니다. [버클 트리](/roadmap/verkle-trees/) 및 [댕크샤딩](/roadmap/danksharding/)과 같은 다른 실질적인 업그레이드 이후 몇 년 동안은 출시되지 않을 것으로 예상됩니다.

## 더 읽어보기 {#further-reading}

- [EDCON 2022에서 SSF에 대한 비탈릭의 발표](https://www.youtube.com/watch?v=nPgUKNPWXNI)
- [비탈릭의 노트: 단일 슬롯 최종 승인으로 가는 길](https://notes.ethereum.org/@vbuterin/single_slot_finality)
