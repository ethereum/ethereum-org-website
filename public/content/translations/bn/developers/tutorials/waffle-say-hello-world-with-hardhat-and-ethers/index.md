---
title: "Hardhat ржПржмржВ ethers рж╕рж╣ Waffle рж╣рзНржпрж╛рж▓рзЛ ржУржпрж╝рж╛рж░рзНрж▓рзНржб ржЯрж┐ржЙржЯрзЛрж░рж┐ржпрж╝рж╛рж▓"
description: hardhat ржПржмржВ ethers.js ржжрж┐ржпрж╝рзЗ ржЖржкржирж╛рж░ ржкрзНрж░ржержо Waffle ржкрзНрж░ржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи
author: "MiZiet"
tags:
  [
    "waffle",
    "рж╕рзНржорж╛рж░рзНржЯ ржХржирзНржЯрзНрж░рзНржпрж╛ржХрзНржЯ",
    "рж╕рж▓рж┐ржбрж┐ржЯрж┐",
    "ржкрж░рзАржХрзНрж╖рж╛",
    "hardhat",
    "ethers.js"
  ]
skill: beginner
lang: bn
published: 2020-10-16
---

ржПржЗ [Waffle](https://ethereum-waffle.readthedocs.io) ржЯрж┐ржЙржЯрзЛрж░рж┐ржпрж╝рж╛рж▓рзЗ, ржЖржорж░рж╛ рж╢рж┐ржЦржм ржХрж┐ржнрж╛ржмрзЗ [hardhat](https://hardhat.org/) ржПржмржВ [ethers.js](https://docs.ethers.io/v5/) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ рж╕рж╣ржЬ "рж╣рзНржпрж╛рж▓рзЛ ржУржпрж╝рж╛рж░рзНрж▓рзНржб" рж╕рзНржорж╛рж░рзНржЯ ржХржирзНржЯрзНрж░рзНржпрж╛ржХрзНржЯ ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕рзЗржЯ ржЖржк ржХрж░рждрзЗ рж╣ржпрж╝ред рждрж╛рж░ржкрж░ ржЖржорж░рж╛ рж╢рж┐ржЦржм ржХрж┐ржнрж╛ржмрзЗ ржЖржорж╛ржжрзЗрж░ рж╕рзНржорж╛рж░рзНржЯ ржХржирзНржЯрзНрж░рзНржпрж╛ржХрзНржЯрзЗ ржПржХржЯрж┐ ржирждрзБржи ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ ржпрзЛржЧ ржХрж░рждрзЗ рж╣ржпрж╝ ржПржмржВ ржХрж┐ржнрж╛ржмрзЗ Waffle ржжрж┐ржпрж╝рзЗ ржПржЯрж┐ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рждрзЗ рж╣ржпрж╝ред

ржЪрж▓рзБржи ржПржХржЯрж┐ ржирждрзБржи ржкрзНрж░ржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзЗ рж╢рзБрж░рзБ ржХрж░рж╛ ржпрж╛ржХ:

```bash
yarn init
```

ржЕржержмрж╛

```bash
npm init
```

ржПржмржВ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржи:

```bash
yarn add -D hardhat @nomiclabs/hardhat-ethers ethers @nomiclabs/hardhat-waffle ethereum-waffle chai
```

ржЕржержмрж╛

```bash
npm install -D hardhat @nomiclabs/hardhat-ethers ethers @nomiclabs/hardhat-waffle ethereum-waffle chai
```

ржкрж░ржмрж░рзНрждрзА ржзрж╛ржкржЯрж┐ рж╣рж▓рзЛ `npx hardhat` рж░рж╛ржи ржХрж░рзЗ ржПржХржЯрж┐ рж╕рзНржпрж╛ржорзНржкрж▓ hardhat ржкрзНрж░ржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рж╛ред

```bash
888    888                      888 888               888
888    888                      888 888               888
888    888                      888 888               888
8888888888  8888b.  888d888 .d88888 88888b.   8888b.  888888
888    888     "88b 888P"  d88" 888 888 "88b     "88b 888
888    888 .d888888 888    888  888 888  888 .d888888 888
888    888 888  888 888    Y88b 888 888  888 888  888 Y88b.
888    888 "Y888888 888     "Y88888 888  888 "Y888888  "Y888

ЁЯС╖ Hardhat v2.0.3-ржП рж╕рзНржмрж╛ржЧрждржо ЁЯС╖тАН

? ржЖржкржирж┐ ржХрж┐ ржХрж░рждрзЗ ржЪрж╛ржи? тАж
тЭп ржПржХржЯрж┐ рж╕рзНржпрж╛ржорзНржкрж▓ ржкрзНрж░ржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи
ржПржХржЯрж┐ ржЦрж╛рж▓рж┐ hardhat.config.js рждрзИрж░рж┐ ржХрж░рзБржи
ржкрзНрж░рж╕рзНржерж╛ржи ржХрж░рзБржи
```

`Create a sample project` ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи

ржЖржорж╛ржжрзЗрж░ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржХрж╛ржарж╛ржорзЛржЯрж┐ ржПржЗрж░ржХржо ржжрзЗржЦрждрзЗ рж╣ржмрзЗ:

```
MyWaffleProject
тФЬтФАтФА contracts
тФВ   тФФтФАтФА Greeter.sol
тФЬтФАтФА node_modules
тФЬтФАтФА scripts
тФВ   тФФтФАтФА sample-script.js
тФЬтФАтФА test
тФВ   тФФтФАтФА sample-test.js
тФЬтФАтФА .gitattributes
тФЬтФАтФА .gitignore
тФЬтФАтФА hardhat.config.js
тФФтФАтФА package.json
```

### ржПржЦржи ржПржЗ ржлрж╛ржЗрж▓ржЧрзБрж▓рж┐рж░ ржХрж┐ржЫрзБ рж╕ржорзНржкрж░рзНржХрзЗ ржЖрж▓рзЛржЪржирж╛ ржХрж░рж╛ ржпрж╛ржХ: {#now-lets-talk}

- Greeter.sol - рж╕рж▓рж┐ржбрж┐ржЯрж┐рждрзЗ рж▓рзЗржЦрж╛ ржЖржорж╛ржжрзЗрж░ рж╕рзНржорж╛рж░рзНржЯ ржХржирзНржЯрзНрж░рзНржпрж╛ржХрзНржЯ;

```solidity
contract Greeter {
string greeting;

constructor(string memory _greeting) public {
console.log("ржПржХржЯрж┐ ржЧрзНрж░рж┐ржЯрж╛рж░ ржбрж┐ржкрзНрж▓рзЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ ржПржЗ ржЧрзНрж░рж┐ржЯрж┐ржВ рж╕рж╣:", _greeting);
greeting = _greeting;
}

function greet() public view returns (string memory) {
return greeting;
}

function setGreeting(string memory _greeting) public {
console.log("ржЧрзНрж░рж┐ржЯрж┐ржВ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ '%s' ржерзЗржХрзЗ '%s'-ржП", greeting, _greeting);
greeting = _greeting;
}
}
```

ржЖржорж╛ржжрзЗрж░ рж╕рзНржорж╛рж░рзНржЯ ржХржирзНржЯрзНрж░рзНржпрж╛ржХрзНржЯржХрзЗ рждрж┐ржиржЯрж┐ ржнрж╛ржЧрзЗ ржнрж╛ржЧ ржХрж░рж╛ ржпрж╛ржпрж╝:

1. constructor - ржпрзЗржЦрж╛ржирзЗ ржЖржорж░рж╛ `greeting` ржирж╛ржорзЗ ржПржХржЯрж┐ рж╕рзНржЯрзНрж░рж┐ржВ ржЯрж╛ржЗржк ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░рж┐,
2. function greet - ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи ржпрж╛ ржХрж▓ ржХрж░рж╛ рж╣рж▓рзЗ `greeting` рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗ,
3. function setGreeting - ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи ржпрж╛ ржЖржорж╛ржжрзЗрж░ `greeting` ржнрзНржпрж╛рж▓рзБ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛рж░ ржЕржирзБржорждрж┐ ржжрзЗржпрж╝ред

- sample-test.js - ржЖржорж╛ржжрзЗрж░ ржЯрзЗрж╕рзНржЯ ржлрж╛ржЗрж▓

```js
describe("Greeter", function () {
  it("ржирждрзБржи ржЧрзНрж░рж┐ржЯрж┐ржВ ржкрж░рж┐ржмрж░рзНрждржи рж╣ржпрж╝рзЗ ржЧрзЗрж▓рзЗ рждрж╛ ржлрзЗрж░ржд ржжрзЗржУржпрж╝рж╛ ржЙржЪрж┐ржд", async function () {
    const Greeter = await ethers.getContractFactory("Greeter")
    const greeter = await Greeter.deploy("Hello, world!")

    await greeter.deployed()
    expect(await greeter.greet()).to.equal("Hello, world!")

    await greeter.setGreeting("Hola, mundo!")
    expect(await greeter.greet()).to.equal("Hola, mundo!")
  })
})
```

### ржкрж░ржмрж░рзНрждрзА ржзрж╛ржкрзЗ ржЖржорж╛ржжрзЗрж░ ржХржирзНржЯрзНрж░рзНржпрж╛ржХрзНржЯ ржХржорзНржкрж╛ржЗрж▓ ржХрж░рж╛ ржПржмржВ ржЯрзЗрж╕рзНржЯ ржЪрж╛рж▓рж╛ржирзЛ ржЕржирзНрждрж░рзНржнрзБржХрзНржд: {#compiling-and-testing}

Waffle ржЯрзЗрж╕рзНржЯ Mocha (ржПржХржЯрж┐ ржЯрзЗрж╕рзНржЯ ржлрзНрж░рзЗржоржУржпрж╝рж╛рж░рзНржХ) ржПржмржВ Chai (ржПржХржЯрж┐ ржЕрзНржпрж╛рж╕рж╛рж░рж╢ржи рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред ржЖржкржирж╛ржХрзЗ рж╢рзБржзрзБ `npx hardhat test` рж░рж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗ ржПржмржВ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржмрж╛рж░рзНрждрж╛ржЯрж┐ ржЖрж╕рж╛рж░ ржЬржирзНржп ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рждрзЗ рж╣ржмрзЗред

```bash
тЬУ ржирждрзБржи ржЧрзНрж░рж┐ржЯрж┐ржВ ржкрж░рж┐ржмрж░рзНрждржи рж╣ржпрж╝рзЗ ржЧрзЗрж▓рзЗ рждрж╛ ржлрзЗрж░ржд ржжрзЗржУржпрж╝рж╛ ржЙржЪрж┐ржд
```

### ржПржЦржи ржкрж░рзНржпржирзНржд рж╕ржмржХрж┐ржЫрзБ ржжрзБрж░рзНржжрж╛ржирзНржд ржжрзЗржЦрж╛ржЪрзНржЫрзЗ, ржЖрж╕рзБржи ржЖржорж╛ржжрзЗрж░ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржЖрж░ржУ ржХрж┐ржЫрзБ ржЬржЯрж┐рж▓рждрж╛ ржпрзЛржЧ ржХрж░рж╛ ржпрж╛ржХ <Emoji text=":slightly_smiling_face:" size={1}/> {#adding-complexity}

ржПржоржи ржПржХржЯрж┐ ржкрж░рж┐рж╕рзНржерж┐рждрж┐рж░ ржХржерж╛ ржнрж╛ржмрзБржи ржпрзЗржЦрж╛ржирзЗ ржХрзЗржЙ ржЧрзНрж░рж┐ржЯрж┐ржВ рж╣рж┐рж╕рзЗржмрзЗ ржПржХржЯрж┐ ржЦрж╛рж▓рж┐ рж╕рзНржЯрзНрж░рж┐ржВ ржпрзЛржЧ ржХрж░рзЗред ржПржЯрж┐ ржПржХржЯрж┐ ржЙрж╖рзНржг ржЕржнрзНржпрж░рзНржержирж╛ рж╣ржмрзЗ ржирж╛, рждрж╛ржЗ ржирж╛?  
ржЪрж▓рзБржи ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж┐ ржпрзЗ ржПржЯрж┐ ржпрзЗржи ржирж╛ ржШржЯрзЗ:

ржЖржорж░рж╛ solidity-рж░ `revert` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржЪрж╛ржЗ ржпржЦржи ржХрзЗржЙ ржПржХржЯрж┐ ржЦрж╛рж▓рж┐ рж╕рзНржЯрзНрж░рж┐ржВ ржкрж╛рж╕ ржХрж░рзЗред ржПржХржЯрж┐ ржнрж╛рж▓рзЛ ржжрж┐ржХ рж╣рж▓ ржЖржорж░рж╛ Waffle-ржПрж░ chai ржорзНржпрж╛ржЪрж╛рж░ `to.be.revertedWith()` ржжрж┐ржпрж╝рзЗ рж╕рж╣ржЬрзЗржЗ ржПржЗ ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ржЯрж┐ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

```js
it("ржЦрж╛рж▓рж┐ рж╕рзНржЯрзНрж░рж┐ржВ ржкрж╛рж╕ ржХрж░рж╛рж░ рж╕ржоржпрж╝ рж░рж┐ржнрж╛рж░рзНржЯ ржХрж░рж╛ ржЙржЪрж┐ржд", async () => {
  const Greeter = await ethers.getContractFactory("Greeter")
  const greeter = await Greeter.deploy("Hello, world!")

  await greeter.deployed()
  await expect(greeter.setGreeting("")).to.be.revertedWith(
    "ржЧрзНрж░рж┐ржЯрж┐ржВ ржЦрж╛рж▓рж┐ рж╣ржУржпрж╝рж╛ ржЙржЪрж┐ржд ржиржпрж╝"
  )
})
```

ржоржирзЗ рж╣ржЪрзНржЫрзЗ ржЖржорж╛ржжрзЗрж░ ржирждрзБржи ржЯрзЗрж╕рзНржЯржЯрж┐ ржкрж╛рж╕ рж╣ржпрж╝ржирж┐:

```bash
ржПржХржЯрж┐ ржЧрзНрж░рж┐ржЯрж╛рж░ ржбрж┐ржкрзНрж▓рзЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ ржПржЗ ржЧрзНрж░рж┐ржЯрж┐ржВ рж╕рж╣: Hello, world!
ржЧрзНрж░рж┐ржЯрж┐ржВ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ 'Hello, world!' ржерзЗржХрзЗ 'Hola, mundo!'-ржП
    тЬУ ржирждрзБржи ржЧрзНрж░рж┐ржЯрж┐ржВ ржкрж░рж┐ржмрж░рзНрждржи рж╣ржпрж╝рзЗ ржЧрзЗрж▓рзЗ рждрж╛ ржлрзЗрж░ржд ржжрзЗржУржпрж╝рж╛ ржЙржЪрж┐ржд (1514ms)
ржПржХржЯрж┐ ржЧрзНрж░рж┐ржЯрж╛рж░ ржбрж┐ржкрзНрж▓рзЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ ржПржЗ ржЧрзНрж░рж┐ржЯрж┐ржВ рж╕рж╣: Hello, world!
ржЧрзНрж░рж┐ржЯрж┐ржВ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ 'Hello, world!' ржерзЗржХрзЗ ''-ржП
    1) ржЦрж╛рж▓рж┐ рж╕рзНржЯрзНрж░рж┐ржВ ржкрж╛рж╕ ржХрж░рж╛рж░ рж╕ржоржпрж╝ рж░рж┐ржнрж╛рж░рзНржЯ ржХрж░рж╛ ржЙржЪрж┐ржд


  1ржЯрж┐ ржкрж╛рж╕рж┐ржВ (2s)
  1ржЯрж┐ ржлрзЗржЗрж▓рж┐ржВ
```

ржЪрж▓рзБржи ржЖржорж╛ржжрзЗрж░ рж╕рзНржорж╛рж░рзНржЯ ржХржирзНржЯрзНрж░рзНржпрж╛ржХрзНржЯрзЗ ржПржЗ ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ржЯрж┐ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░рж╛ ржпрж╛ржХ:

```solidity
require(bytes(_greeting).length > 0, "ржЧрзНрж░рж┐ржЯрж┐ржВ ржЦрж╛рж▓рж┐ рж╣ржУржпрж╝рж╛ ржЙржЪрж┐ржд ржиржпрж╝");
```

ржПржЦржи, ржЖржорж╛ржжрзЗрж░ setGreeting ржлрж╛ржВрж╢ржиржЯрж┐ ржПржЗрж░ржХржо ржжрзЗржЦрж╛ржЪрзНржЫрзЗ:

```solidity
function setGreeting(string memory _greeting) public {
require(bytes(_greeting).length > 0, "ржЧрзНрж░рж┐ржЯрж┐ржВ ржЦрж╛рж▓рж┐ рж╣ржУржпрж╝рж╛ ржЙржЪрж┐ржд ржиржпрж╝");
console.log("ржЧрзНрж░рж┐ржЯрж┐ржВ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ '%s' ржерзЗржХрзЗ '%s'-ржП", greeting, _greeting);
greeting = _greeting;
}
```

ржЪрж▓рзБржи ржЖржмрж╛рж░ ржЯрзЗрж╕рзНржЯ ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛ржХ:

```bash
тЬУ ржирждрзБржи ржЧрзНрж░рж┐ржЯрж┐ржВ ржкрж░рж┐ржмрж░рзНрждржи рж╣ржпрж╝рзЗ ржЧрзЗрж▓рзЗ рждрж╛ ржлрзЗрж░ржд ржжрзЗржУржпрж╝рж╛ ржЙржЪрж┐ржд (1467ms)
тЬУ ржЦрж╛рж▓рж┐ рж╕рзНржЯрзНрж░рж┐ржВ ржкрж╛рж╕ ржХрж░рж╛рж░ рж╕ржоржпрж╝ рж░рж┐ржнрж╛рж░рзНржЯ ржХрж░рж╛ ржЙржЪрж┐ржд (276ms)

2ржЯрж┐ ржкрж╛рж╕рж┐ржВ (2s)
```

ржЕржнрж┐ржиржирзНржжржи! ржЖржкржирж┐ ржПржЯрж┐ ржХрж░рзЗ ржжрзЗржЦрж┐ржпрж╝рзЗржЫрзЗржи :)

### ржЙржкрж╕ржВрж╣рж╛рж░ {#conclusion}

ржЖржорж░рж╛ Waffle, Hardhat ржПржмржВ ethers.js ржжрж┐ржпрж╝рзЗ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржкрзНрж░ржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзЗржЫрж┐ред ржЖржорж░рж╛ рж╢рж┐ржЦрзЗржЫрж┐ ржХрж┐ржнрж╛ржмрзЗ ржПржХржЯрж┐ ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕рзЗржЯ ржЖржк ржХрж░рждрзЗ рж╣ржпрж╝, ржПржХржЯрж┐ ржЯрзЗрж╕рзНржЯ ржпрзЛржЧ ржХрж░рждрзЗ рж╣ржпрж╝ ржПржмржВ ржирждрзБржи ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░рждрзЗ рж╣ржпрж╝ред

ржЖржкржирж╛рж░ рж╕рзНржорж╛рж░рзНржЯ ржХржирзНржЯрзНрж░рзНржпрж╛ржХрзНржЯ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржЖрж░ржУ ржжрзБрж░рзНржжрж╛ржирзНржд chai ржорзНржпрж╛ржЪрж╛рж░рзЗрж░ ржЬржирзНржп, [Waffle-ржПрж░ ржЕржлрж┐рж╕рж┐ржпрж╝рж╛рж▓ ржбржХрзНрж╕](https://ethereum-waffle.readthedocs.io/en/latest/matchers.html) ржжрзЗржЦрзБржиред
