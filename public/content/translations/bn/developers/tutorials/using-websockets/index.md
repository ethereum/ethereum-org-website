---
title: WebSockets ব্যবহার
description: JSON-RPC রিকোয়েস্ট করতে এবং ইভেন্টগুলিতে সাবস্ক্রাইব করার জন্য WebSockets এবং Alchemy ব্যবহারের নির্দেশিকা।
author: "Elan Halpern"
lang: bn
tags: [ "alchemy", "websockets", "querying", "javascript" ]
skill: beginner
source: Alchemy ডক্স
sourceUrl: https://www.alchemy.com/docs/reference/best-practices-for-using-websockets-in-web3
published: 2020-12-01
---

ইথেরিয়াম ব্লকচেইনে রিকোয়েস্ট পাঠানোর জন্য WebSockets এবং Alchemy ব্যবহার করার এটি একটি এন্ট্রি-লেভেল নির্দেশিকা।

## WebSockets বনাম HTTP {#websockets-vs-http}

HTTP-এর থেকে ভিন্ন, WebSockets-এর সাথে, আপনি যখন নির্দিষ্ট তথ্য চান তখন আপনাকে ক্রমাগত রিকোয়েস্ট করতে হবে না। WebSockets আপনার জন্য একটি নেটওয়ার্ক সংযোগ বজায় রাখে (যদি সঠিকভাবে করা হয়) এবং পরিবর্তনগুলি শোনে।

যেকোনো নেটওয়ার্ক সংযোগের মতো, আপনার এটি ধরে নেওয়া উচিত নয় যে একটি WebSocket কোনো বাধা ছাড়াই চিরকালের জন্য খোলা থাকবে, তবে সঠিকভাবে ড্রপড সংযোগগুলি এবং নিজে থেকে পুনরায় সংযোগ স্থাপন করা বেশ কঠিন হতে পারে। WebSockets-এর আরেকটি অসুবিধা হল আপনি রেসপন্সে HTTP স্ট্যাটাস কোড পাবেন না, শুধুমাত্র এরর মেসেজ পাবেন।

​[Alchemy Web3](https://docs.alchemy.com/reference/api-overview) কোনো কনফিগারেশনের প্রয়োজন ছাড়াই স্বয়ংক্রিয়ভাবে WebSocket ব্যর্থতা এবং পুনরায় প্রচেষ্টার জন্য হ্যান্ডলিং যোগ করে।

## এটি চেষ্টা করুন {#try-it-out}

WebSockets পরীক্ষা করার সবচেয়ে সহজ উপায় হল [wscat](https://github.com/websockets/wscat) এর মতো WebSocket রিকোয়েস্ট করার জন্য একটি কমান্ড লাইন টুল ইনস্টল করা। wscat ব্যবহার করে, আপনি নিম্নলিখিতভাবে রিকোয়েস্ট পাঠাতে পারেন:

_দ্রষ্টব্য: যদি আপনার একটি Alchemy অ্যাকাউন্ট থাকে তবে আপনি আপনার নিজের API কী দিয়ে `demo` প্রতিস্থাপন করতে পারেন।_ [এখানে একটি বিনামূল্যে Alchemy অ্যাকাউন্টের জন্য সাইন আপ করুন!](https://auth.alchemy.com/signup)_

```
wscat -c wss://eth-mainnet.ws.alchemyapi.io/ws/demo

>  {"jsonrpc":  "2.0", "id": 0, "method":  "eth_gasPrice"}

<  {"jsonrpc":  "2.0", "result":  "0xb2d05e00", "id": 0}

```

## কীভাবে WebSockets ব্যবহার করবেন {#how-to-use-websockets}

শুরু করার জন্য, আপনার অ্যাপের জন্য WebSocket URL ব্যবহার করে একটি WebSocket খুলুন। আপনি [আপনার ড্যাশবোর্ডে](https://dashboard.alchemy.com/) অ্যাপের পৃষ্ঠাটি খুলে এবং "View Key"-তে ক্লিক করে আপনার অ্যাপের WebSocket URL খুঁজে পেতে পারেন। মনে রাখবেন যে WebSockets-এর জন্য আপনার অ্যাপের URL HTTP রিকোয়েস্টের জন্য এর URL থেকে ভিন্ন, কিন্তু উভয়ই "View Key"-তে ক্লিক করে পাওয়া যাবে।

![আপনার Alchemy ড্যাশবোর্ডে আপনার WebSocket URL কোথায় পাবেন](./use-websockets.gif)

[Alchemy API রেফারেন্সে](https://www.alchemy.com/docs/reference/api-overview)-এ তালিকাভুক্ত যেকোনো API WebSocket-এর মাধ্যমে ব্যবহার করা যেতে পারে। এটি করার জন্য, একই পেলোড ব্যবহার করুন যা একটি HTTP POST রিকোয়েস্টের বডি হিসেবে পাঠানো হবে, কিন্তু তার পরিবর্তে সেই পেলোডটি WebSocket-এর মাধ্যমে পাঠান।

## Web3-এর সাথে {#with-web3}

Web3-এর মতো একটি ক্লায়েন্ট লাইব্রেরি ব্যবহার করার সময় WebSockets-এ রূপান্তর করা সহজ। আপনার Web3 ক্লায়েন্ট ইনস্ট্যানশিয়েট করার সময় কেবল HTTP URL-এর পরিবর্তে WebSocket URL পাস করুন। উদাহরণস্বরূপ:

```js
const web3 = new Web3("wss://eth-mainnet.ws.alchemyapi.io/ws/your-api-key")

web3.eth.getBlockNumber().then(console.log) // -> 7946893
```

## সাবস্ক্রিপশন API {#subscription-api}

একটি WebSocket-এর মাধ্যমে সংযুক্ত থাকাকালীন, আপনি দুটি অতিরিক্ত পদ্ধতি ব্যবহার করতে পারেন: `eth_subscribe` এবং `eth_unsubscribe`। এই পদ্ধতিগুলি আপনাকে নির্দিষ্ট ইভেন্টগুলি শুনতে এবং অবিলম্বে অবহিত হতে দেবে।

### `eth_subscribe` {#eth-subscribe}

নির্দিষ্ট ইভেন্টের জন্য একটি নতুন সাবস্ক্রিপশন তৈরি করে। [`eth_subscribe` সম্পর্কে আরও জানুন](https://docs.alchemy.com/reference/eth-subscribe)।

#### প্যারামিটার {#parameters}

1. সাবস্ক্রিপশনের প্রকার
2. ঐচ্ছিক প্যারাম

প্রথম আর্গুমেন্টটি কোন ধরনের ইভেন্টের জন্য শুনতে হবে তা নির্দিষ্ট করে। দ্বিতীয় আর্গুমেন্টে অতিরিক্ত বিকল্প রয়েছে যা প্রথম আর্গুমেন্টের উপর নির্ভর করে। বিভিন্ন বর্ণনার প্রকার, তাদের বিকল্প এবং তাদের ইভেন্ট পেলোডগুলি নীচে বর্ণনা করা হয়েছে।

#### রিটার্ন {#returns}

সাবস্ক্রিপশন আইডি: এই আইডিটি যে কোনো প্রাপ্ত ইভেন্টের সাথে সংযুক্ত করা হবে, এবং `eth_unsubscribe` ব্যবহার করে সাবস্ক্রিপশন বাতিল করতেও ব্যবহার করা যেতে পারে।

#### সাবস্ক্রিপশন ইভেন্ট {#subscription-events}

সাবস্ক্রিপশন সক্রিয় থাকাকালীন, আপনি ইভেন্টগুলি পাবেন যা নিম্নলিখিত ক্ষেত্রগুলি সহ অবজেক্ট:

- `jsonrpc`: সর্বদা "2.0"
- `method`: সর্বদা "eth_subscription"
- `params`: নিম্নলিখিত ক্ষেত্রগুলি সহ একটি অবজেক্ট:
  - `subscription`: `eth_subscribe` কল দ্বারা প্রত্যাবর্তিত সাবস্ক্রিপশন আইডি যা এই সাবস্ক্রিপশনটি তৈরি করেছে।
  - `result`: একটি অবজেক্ট যার বিষয়বস্তু সাবস্ক্রিপশনের প্রকারের উপর নির্ভর করে পরিবর্তিত হয়।

#### সাবস্ক্রিপশনের প্রকার {#subscription-types}

1. `alchemy_newFullPendingTransactions`

পেন্ডিং স্টেটে যোগ করা সমস্ত ট্রানজ্যাকশনের জন্য ট্রানজ্যাকশনের তথ্য রিটার্ন করে। এই সাবস্ক্রিপশন প্রকারটি পেন্ডিং ট্রানজ্যাকশনের জন্য সাবস্ক্রাইব করে, যা স্ট্যান্ডার্ড Web3 কল `web3.eth.subscribe("pendingTransactions")` এর অনুরূপ, কিন্তু এটি শুধু ট্রানজ্যাকশন হ্যাসের পরিবর্তে _সম্পূর্ণ ট্রানজ্যাকশনের তথ্য_ নির্গত করে, এই দিক থেকে এটি ভিন্ন।

উদাহরণ:

```json
>  {"jsonrpc":  "2.0",  "id":  1,  "method":  "eth_subscribe",  "params":  ["alchemy_newFullPendingTransactions"]}

<  {"id":1,"result":"0x9a52eeddc2b289f985c0e23a7d8427c8","jsonrpc":"2.0"}
<  {
      "jsonrpc":"2.0",
      "method":"eth_subscription",
      "params":{
          "result":{
          "blockHash":null,
          "blockNumber":null,
          "from":"0xa36452fc31f6f482ad823cd1cf5515177d57667f",
          "gas":"0x1adb0",
          "gasPrice":"0x7735c4d40",
          "hash":"0x50bff0736c713458c92dd1848d12f3354149be1363123dae35e94e0f2a9d56bf",
"input":"0xa9059cbb0000000000000000000000000d0707963952f2fba59dd06f2b425ace40b492fe00000000000000000000000000000000000000000000015b1111266cfca100000",
          "nonce":"0x0",
          "to":"0xea38eaa3c86c8f9b751533ba2e562deb9acded40",
          "transactionIndex":null,
          "value":"0x0",
          "v":"0x26",
          "r":"0x195c2c1ed126088e12d290aa93541677d3e3b1d10f137e11f86b1b9227f01e3b",
          "s":"0x60fc4edbf1527832a2a36dbc1e63ed6193a6eee654472fbebbf88ef1750b5344"},
          "subscription":"0x9a52eeddc2b289f985c0e23a7d8427c8"
      }
  }

```

2. `newHeads`

যখনই চেইনে একটি নতুন হেডার যোগ করা হয়, চেইন পুনর্গঠন সহ, তখন একটি ইভেন্ট নির্গত করে।

যখন একটি চেইন পুনর্গঠন ঘটে, এই সাবস্ক্রিপশনটি নতুন চেইনের জন্য সমস্ত নতুন হেডার সম্বলিত একটি ইভেন্ট নির্গত করবে। বিশেষ করে, এর মানে হল যে আপনি একই উচ্চতা সহ একাধিক হেডার নির্গত হতে দেখতে পারেন, এবং যখন এটি ঘটে তখন পুনর্গঠনের পরে পরবর্তী হেডারটিকে সঠিক হিসাবে গ্রহণ করা উচিত।

উদাহরণ:

```json
>  {"jsonrpc":  "2.0",  "id":  1,  "method":  "eth_subscribe",  "params":  ["newHeads"]}

<  {"jsonrpc":"2.0","id":2,"result":"0x9ce59a13059e417087c02d3236a0b1cc"}
<  {
  "jsonrpc":  "2.0",
  "method":  "eth_subscription",
  "params":  {
      "result":  {
          "extraData":  "0xd983010305844765746887676f312e342e328777696e646f7773",
          "gasLimit":  "0x47e7c4",
          "gasUsed":  "0x38658",
          "logsBloom":
"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
          "nonce":  "0x084149998194cc5f",
          "number":  "0x1348c9",
          "parentHash":  "0x7736fab79e05dc611604d22470dadad26f56fe494421b5b333de816ce1f25701",
          "receiptRoot":  "0x2fab35823ad00c7bb388595cb46652fe7886e00660a01e867824d3dceb1c8d36",
          "sha3Uncles":  "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
          "stateRoot":  "0xb3346685172db67de536d8765c43c31009d0eb3bd9c501c9be3229203f15f378",
          "timestamp":  "0x56ffeff8",
          "transactionsRoot":  "0x0167ffa60e3ebc0b080cdb95f7c0087dd6c0e61413140e39d94d3468d7c9689f"
      },
  "subscription":  "0x9ce59a13059e417087c02d3236a0b1cc"
  }
}

```

3. `logs`

নির্দিষ্ট ফিল্টার মানদণ্ডের সাথে মেলে এমন নতুন যোগ করা ব্লকের অংশ যা এমন লগ নির্গত করে।

যখন একটি চেইন পুনর্গঠন ঘটে, তখন পুরানো চেইনের ব্লকের অংশ যা লগ, সেগুলি `removed` প্রপার্টি `true` সেট করে আবার নির্গত হবে। অধিকন্তু, নতুন চেইনের ব্লকের অংশ যা লগ, সেগুলি নির্গত হয়, যার মানে হল যে একটি পুনর্গঠনের ক্ষেত্রে একই ট্রানজ্যাকশনের জন্য একাধিকবার লগ দেখা সম্ভব।

প্যারামিটার

1. নিম্নলিখিত ক্ষেত্রগুলি সহ একটি অবজেক্ট:
   - `address` (ঐচ্ছিক): হয় একটি অ্যাড্রেস প্রতিনিধিত্বকারী একটি স্ট্রিং বা এই ধরনের স্ট্রিংগুলির একটি অ্যারে।
     - শুধুমাত্র এই অ্যাড্রেসগুলির মধ্যে একটি থেকে তৈরি করা লগগুলিই নির্গত হবে।
   - `topics`: টপিক স্পেসিফায়ারের একটি অ্যারে।
     - প্রতিটি টপিক স্পেসিফায়ার হয় `null`, একটি টপিক প্রতিনিধিত্বকারী একটি স্ট্রিং, অথবা স্ট্রিংগুলির একটি অ্যারে।
     - অ্যারের প্রতিটি অবস্থান যা `null` নয়, নির্গত লগগুলিকে কেবল তাদের মধ্যে সীমাবদ্ধ করে যাদের সেই অবস্থানে প্রদত্ত টপিকগুলির মধ্যে একটি রয়েছে।

টপিক স্পেসিফিকেশনের কিছু উদাহরণ:

- `[]`: যেকোনো টপিক অনুমোদিত।
- `[A]`: প্রথম অবস্থানে A (এবং তারপরে যেকোনো কিছু)।
- `[null, B]`: প্রথম অবস্থানে যেকোনো কিছু এবং দ্বিতীয় অবস্থানে B (এবং তারপরে যেকোনো কিছু)।
- `[A, B]`: প্রথম অবস্থানে A এবং দ্বিতীয় অবস্থানে B (এবং তারপরে যেকোনো কিছু)।
- `[[A, B], [A, B]]`: প্রথম অবস্থানে (A বা B) এবং দ্বিতীয় অবস্থানে (A বা B) (এবং তারপরে যেকোনো কিছু)।

উদাহরণ:

```json
>  {"jsonrpc":  "2.0",  "id":  1,  "method":  "eth_subscribe",  "params":  ["logs",  {"address":  "0x8320fe7702b96808f7bbc0d4a888ed1468216cfd",  "topics":  ["0xd78a0cb8bb633d06981248b816e7bd33c2a35a6089241d099fa519e361cab902"]}]}

<  {"jsonrpc":"2.0","id":2,"result":"0x4a8a4c0517381924f9838102c5a4dcb7"}
<  {
  "jsonrpc":  "2.0",
  "method":  "eth_subscription",
  "params":  {
      "subscription":  "0x4a8a4c0517381924f9838102c5a4dcb7",
      "result":  {
          "address":  "0x8320fe7702b96808f7bbc0d4a888ed1468216cfd",
          "blockHash":  "0x61cdb2a09ab99abf791d474f20c2ea89bf8de2923a2d42bb49944c8c993cbf04",
          "blockNumber":  "0x29e87",
          "data": "0x00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000003",
          "logIndex":"0x0",
          "topics":["0xd78a0cb8bb633d06981248b816e7bd33c2a35a6089241d099fa519e361cab902"],
          "transactionHash":  "0xe044554a0a55067caafd07f8020ab9f2af60bdfe337e395ecd84b4877a3d1ab4",
          "transactionIndex":  "0x0"
      }
  }
}

```

### `eth_unsubscribe` {#eth-unsubscribe}

একটি বিদ্যমান সাবস্ক্রিপশন বাতিল করে যাতে আর কোনো ইভেন্ট পাঠানো না হয়।

প্যারামিটার

1. সাবস্ক্রিপশন আইডি, যা আগে `eth_subscribe` কল থেকে রিটার্ন করা হয়েছিল।

রিটার্ন

যদি একটি সাবস্ক্রিপশন সফলভাবে বাতিল করা হয়, তাহলে `true`, অথবা যদি প্রদত্ত আইডি সহ কোনো সাবস্ক্রিপশন না থাকে তাহলে `false`।

উদাহরণ:

**রিকোয়েস্ট**

```
curl https://eth-mainnet.alchemyapi.io/v2/your-api-key
-X POST
-H "Content-Type: application/json"
-d '{"id": 1, "method": "eth_unsubscribe", "params": ["0x9cef478923ff08bf67fde6c64013158d"]}'


```

**রেজাল্ট**

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": true
}
```

---

বিনামূল্যে [Alchemy-তে সাইন আপ করুন](https://auth.alchemy.com), আমাদের [ডকুমেন্টেশন](https://www.alchemy.com/docs/) দেখুন, এবং সর্বশেষ খবরের জন্য, আমাদের [Twitter](https://x.com/AlchemyPlatform)-এ অনুসরণ করুন।
