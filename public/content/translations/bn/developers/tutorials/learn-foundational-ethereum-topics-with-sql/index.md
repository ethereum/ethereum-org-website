---
title: "SQL-এর সাহায্যে ইথেরিয়ামের ভিত্তিগত বিষয়গুলি শিখুন"
description: "এই টিউটোরিয়ালটি স্ট্রাকচার্ড কোয়েরি ল্যাঙ্গুয়েজ (SQL) দিয়ে অনচেইন ডেটা কোয়েরি করার মাধ্যমে পাঠকদের ট্রানজ্যাকশন, ব্লক এবং গ্যাসের মতো ইথেরিয়ামের মৌলিক ধারণাগুলি বুঝতে সাহায্য করে।"
author: "Paul Apivat"
tags: [ "SQL", "কোয়েরি করা", "লেনদেনসমূহ" ]
skill: beginner
lang: bn
published: 2021-05-11
source: paulapivat.com
sourceUrl: https://paulapivat.com/post/query_ethereum/
---

অনেক ইথেরিয়াম টিউটোরিয়াল ডেভেলপারদের লক্ষ্য করে তৈরি, কিন্তু ডেটা অ্যানালিস্ট বা এমন লোকেদের জন্য শিক্ষামূলক রিসোর্সের অভাব রয়েছে যারা কোনো ক্লায়েন্ট বা নোড না চালিয়ে অনচেইন ডেটা দেখতে চান।

এই টিউটোরিয়ালটি [Dune Analytics](https://dune.com/) দ্বারা প্রদত্ত একটি ইন্টারফেসের মাধ্যমে স্ট্রাকচার্ড কোয়েরি ল্যাঙ্গুয়েজ (SQL) দিয়ে অনচেইন ডেটা কোয়েরি করে পাঠকদেরকে ট্রানজ্যাকশন, ব্লক এবং গ্যাসের মতো ইথেরিয়ামের মৌলিক ধারণাগুলি বুঝতে সাহায্য করে।

অনচেইন ডেটা আমাদের ইথেরিয়াম, নেটওয়ার্ক এবং কম্পিউটিং পাওয়ারের জন্য একটি অর্থনীতি হিসাবে বুঝতে সাহায্য করতে পারে এবং বর্তমানে ইথেরিয়ামের মুখোমুখি হওয়া চ্যালেঞ্জগুলি (যেমন, ক্রমবর্ধমান গ্যাসের দাম) এবং, আরও গুরুত্বপূর্ণভাবে, স্কেলিং সমাধান নিয়ে আলোচনার জন্য একটি ভিত্তি হিসাবে কাজ করা উচিত।

### লেনদেন {#transactions}

ইথেরিয়ামে একজন ব্যবহারকারীর যাত্রা শুরু হয় একটি ব্যবহারকারী-নিয়ন্ত্রিত অ্যাকাউন্ট অথবা একটি ETH ব্যালেন্স সহ একটি এন্টিটি ইনিশিয়ালাইজ করার মাধ্যমে। দুই ধরনের অ্যাকাউন্ট আছে - ব্যবহারকারী-নিয়ন্ত্রিত বা একটি স্মার্ট কন্ট্র্যাক্ট ([ethereum.org](/developers/docs/accounts/) দেখুন)।

যেকোনো অ্যাকাউন্ট [Etherscan](https://etherscan.io/) বা [Blockscout](https://eth.blockscout.com/)-এর মতো একটি ব্লক এক্সপ্লোরারে দেখা যেতে পারে। ব্লক এক্সপ্লোরার হলো ইথেরিয়ামের ডেটার জন্য একটি পোর্টাল। তারা রিয়েল-টাইমে ব্লক, ট্রানজ্যাকশন, মাইনার, অ্যাকাউন্ট এবং অন্যান্য অনচেইন কার্যকলাপের ডেটা প্রদর্শন করে ([এখানে](/developers/docs/data-and-analytics/block-explorers/) দেখুন)।

তবে, একজন ব্যবহারকারী বাহ্যিক ব্লক এক্সপ্লোরার দ্বারা প্রদত্ত তথ্যের সাথে মেলানোর জন্য সরাসরি ডেটা কোয়েরি করতে চাইতে পারেন। [Dune Analytics](https://dune.com/) SQL সম্পর্কে কিছু জ্ঞান আছে এমন যেকোনো ব্যক্তিকে এই ক্ষমতা প্রদান করে।

রেফারেন্সের জন্য, Ethereum Foundation (EF)-এর স্মার্ট কন্ট্র্যাক্ট অ্যাকাউন্টটি [Blockscout](https://eth.blockscout.com/address/0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe)-এ দেখা যাবে।

একটি বিষয় লক্ষণীয় যে EF-এর অ্যাকাউন্টসহ সমস্ত অ্যাকাউন্টের একটি পাবলিক ঠিকানা আছে যা ট্রানজ্যাকশন পাঠানো এবং গ্রহণ করার জন্য ব্যবহার করা যেতে পারে।

Etherscan-এ অ্যাকাউন্ট ব্যালেন্স নিয়মিত ট্রানজ্যাকশন এবং অভ্যন্তরীণ ট্রানজ্যাকশন নিয়ে গঠিত। অভ্যন্তরীণ ট্রানজ্যাকশন, নাম সত্ত্বেও, _প্রকৃত_ ট্রানজ্যাকশন নয় যা চেইনের স্টেট পরিবর্তন করে। সেগুলি হলো ভ্যালু ট্রান্সফার যা একটি কন্ট্র্যাক্ট এক্সিকিউট করার মাধ্যমে শুরু হয় ([উৎস](https://ethereum.stackexchange.com/questions/3417/how-to-get-contract-internal-transactions))। যেহেতু অভ্যন্তরীণ ট্রানজ্যাকশনের কোনো স্বাক্ষর নেই, সেগুলি ব্লকচেইনে **অন্তর্ভুক্ত নয়** এবং Dune Analytics দিয়ে কোয়েরি করা যায় না।

অতএব, এই টিউটোরিয়ালটি নিয়মিত ট্রানজ্যাকশনের উপর ফোকাস করবে। এটি এইভাবে কোয়েরি করা যেতে পারে:

```sql
WITH temp_table AS (
SELECT
    hash,
    block_number,
    block_time,
    "from",
    "to",
    value / 1e18 AS ether,
    gas_used,
    gas_price / 1e9 AS gas_price_gwei
FROM ethereum."transactions"
WHERE "to" = '\xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'
ORDER BY block_time DESC
)
SELECT
    hash,
    block_number,
    block_time,
    "from",
    "to",
    ether,
    (gas_used * gas_price_gwei) / 1e9 AS txn_fee
FROM temp_table
```

এটি Etherscan-এর ট্রানজ্যাকশন পেজে প্রদান করা তথ্যের মতোই তথ্য দেবে। তুলনার জন্য, এখানে দুটি উৎস রয়েছে:

#### Etherscan {#etherscan}

![](./etherscan_view.png)

[Blockscout-এ EF-এর কন্ট্র্যাক্ট পেজ।](https://eth.blockscout.com/address/0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe)

#### Dune অ্যানালিটিক্স {#dune-analytics}

![](./dune_view.png)

আপনি ড্যাশবোর্ডটি [এখানে](https://dune.com/paulapivat/Learn-Ethereum) খুঁজে পেতে পারেন। কোয়েরিটি দেখতে টেবিলটিতে ক্লিক করুন (উপরেও দেখুন)।

### ট্রানজ্যাকশন ভেঙে দেখা {#breaking_down_transactions}

একটি জমা দেওয়া ট্রানজ্যাকশনে বিভিন্ন তথ্য অন্তর্ভুক্ত থাকে, যার মধ্যে রয়েছে ([উৎস](/developers/docs/transactions/)):

- **প্রাপক**: গ্রহণকারী ঠিকানা ("to" হিসাবে কোয়েরি করা হয়)
- **স্বাক্ষর**: যদিও একজন প্রেরকের প্রাইভেট কী একটি ট্রানজ্যাকশনে স্বাক্ষর করে, আমরা SQL দিয়ে যা কোয়েরি করতে পারি তা হলো প্রেরকের পাবলিক ঠিকানা ("from")।
- **ভ্যালু**: এটি ট্রান্সফার করা ETH-এর পরিমাণ (`ether` কলাম দেখুন)।
- **ডেটা**: এটি হলো ইচ্ছামত ডেটা যা হ্যাস করা হয়েছে (`data` কলাম দেখুন)
- **gasLimit** – গ্যাস ইউনিটের সর্বোচ্চ পরিমাণ যা ট্রানজ্যাকশন দ্বারা ব্যবহৃত হতে পারে। গ্যাসের ইউনিট গণনামূলক ধাপগুলিকে প্রতিনিধিত্ব করে
- **maxPriorityFeePerGas** - গ্যাসের সর্বোচ্চ পরিমাণ যা মাইনারকে টিপ হিসাবে অন্তর্ভুক্ত করা হবে
- **maxFeePerGas** - ট্রানজ্যাকশনের জন্য দিতে ইচ্ছুক গ্যাসের সর্বোচ্চ পরিমাণ (baseFeePerGas এবং maxPriorityFeePerGas সহ)

আমরা Ethereum Foundation-এর পাবলিক ঠিকানায় করা ট্রানজ্যাকশনের জন্য এই নির্দিষ্ট তথ্যগুলি কোয়েরি করতে পারি:

```sql
SELECT
    "to",
    "from",
    value / 1e18 AS ether,
    data,
    gas_limit,
    gas_price / 1e9 AS gas_price_gwei,
    gas_used,
    ROUND(((gas_used / gas_limit) * 100),2) AS gas_used_pct
FROM ethereum."transactions"
WHERE "to" = '\xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'
ORDER BY block_time DESC
```

### ব্লক {#blocks}

প্রতিটি ট্রানজ্যাকশন ইথিরিয়াম ভার্চুয়াল মেশিন ([EVM](/developers/docs/evm/))-এর স্টেট পরিবর্তন করবে ([উৎস](/developers/docs/transactions/))। ট্রানজ্যাকশনগুলি যাচাই করার জন্য এবং একটি ব্লকে অন্তর্ভুক্ত করার জন্য নেটওয়ার্কে সম্প্রচার করা হয়। প্রতিটি ট্রানজ্যাকশন একটি ব্লক নম্বরের সাথে যুক্ত। ডেটা দেখতে, আমরা একটি নির্দিষ্ট ব্লক নম্বর কোয়েরি করতে পারি: 12396854 (এই লেখা পর্যন্ত, 11/5/21, Ethereum Foundation-এর ট্রানজ্যাকশনগুলির মধ্যে সাম্প্রতিকতম ব্লক)।

উপরন্তু, যখন আমরা পরবর্তী দুটি ব্লক কোয়েরি করি, আমরা দেখতে পাই যে প্রতিটি ব্লকে পূর্ববর্তী ব্লকের হ্যাস (অর্থাৎ, প্যারেন্ট হ্যাস) রয়েছে, যা ব্লকচেইন কীভাবে গঠিত হয় তা চিত্রিত করে।

প্রতিটি ব্লকে তার প্যারেন্ট ব্লকের একটি রেফারেন্স থাকে। এটি `hash` এবং `parent_hash` কলামগুলির মধ্যে নীচে দেখানো হয়েছে ([উৎস](/developers/docs/blocks/)):

![parent_hash](./parent_hash.png)

Dune Analytics-এ [কোয়েরিটি](https://dune.com/queries/44856/88292) এখানে দেওয়া হলো:

```sql
SELECT
   time,
   number,
   hash,
   parent_hash,
   nonce
FROM ethereum."blocks"
WHERE "number" = 12396854 OR "number" = 12396855 OR "number" = 12396856
LIMIT 10
```

আমরা সময়, ব্লক নম্বর, ডিফিকাল্টি, হ্যাস, প্যারেন্ট হ্যাস এবং নন্স কোয়েরি করে একটি ব্লক পরীক্ষা করতে পারি।

এই কোয়েরিটি একমাত্র যা কভার করে না তা হলো _ট্রানজ্যাকশনের তালিকা_ যার জন্য নীচে একটি পৃথক কোয়েরি প্রয়োজন, এবং _স্টেট রুট_। একটি সম্পূর্ণ বা আর্কাইভাল নোড সমস্ত ট্রানজ্যাকশন এবং স্টেট ট্রানজিশন স্টোর করবে, যা ক্লায়েন্টদের যেকোনো সময়ে চেইনের স্টেট কোয়েরি করার অনুমতি দেয়। কারণ এর জন্য বড় স্টোরেজ স্পেস প্রয়োজন, আমরা চেইন ডেটাকে স্টেট ডেটা থেকে আলাদা করতে পারি:

- চেইন ডেটা (ব্লক, ট্রানজ্যাকশনের তালিকা)
- স্টেট ডেটা (প্রতিটি ট্রানজ্যাকশনের স্টেট ট্রানজিশনের ফলাফল)

স্টেট রুট পরেরটির অধীনে পড়ে এবং এটি _অন্তর্নিহিত_ ডেটা (অনচেইনে স্টোর করা হয় না), যেখানে চেইন ডেটা সুস্পষ্ট এবং চেইনেই স্টোর করা হয় ([উৎস](https://ethereum.stackexchange.com/questions/359/where-is-the-state-data-stored))।

এই টিউটোরিয়ালের জন্য, আমরা সেই অনচেইন ডেটার উপর ফোকাস করব যা Dune Analytics-এর মাধ্যমে SQL দিয়ে কোয়েরি _করা যায়_।

উপরে যেমন বলা হয়েছে, প্রতিটি ব্লকে ট্রানজ্যাকশনের একটি তালিকা থাকে, আমরা একটি নির্দিষ্ট ব্লকের জন্য ফিল্টার করে এটি কোয়েরি করতে পারি। আমরা সাম্প্রতিকতম ব্লক, 12396854 চেষ্টা করব:

```sql
SELECT * FROM ethereum."transactions"
WHERE block_number = 12396854
ORDER BY block_time DESC`
```

Dune-এ SQL আউটপুট এখানে দেওয়া হলো:

![](./list_of_txn.png)

চেইনে এই একক ব্লকটি যুক্ত হলে ইথিরিয়াম ভার্চুয়াল মেশিন ([EVM](/developers/docs/evm/))-এর স্টেট পরিবর্তিত হয়। কখনও কখনও ডজন ডজন, শত শত ট্রানজ্যাকশন একবারে যাচাই করা হয়। এই নির্দিষ্ট ক্ষেত্রে, 222টি ট্রানজ্যাকশন অন্তর্ভুক্ত ছিল।

কতগুলি প্রকৃতপক্ষে সফল হয়েছিল তা দেখতে, আমরা সফল ট্রানজ্যাকশন গণনা করার জন্য আরেকটি ফিল্টার যোগ করব:

```sql
WITH temp_table AS (
    SELECT * FROM ethereum."transactions"
    WHERE block_number = 12396854 AND success = true
    ORDER BY block_time DESC
)
SELECT
    COUNT(success) AS num_successful_txn
FROM temp_table
```

ব্লক 12396854-এর জন্য, মোট 222টি ট্রানজ্যাকশনের মধ্যে, 204টি সফলভাবে যাচাই করা হয়েছে:

![](./successful_txn.png)

ট্রানজ্যাকশনের অনুরোধ প্রতি সেকেন্ডে কয়েক ডজন বার ঘটে, কিন্তু ব্লকগুলি প্রায় প্রতি 15 সেকেন্ডে একবার কমিট করা হয় ([উৎস](/developers/docs/blocks/))।

প্রায় প্রতি 15 সেকেন্ডে একটি ব্লক তৈরি হয় তা দেখতে, আমরা প্রতিদিনের ব্লকের আনুমানিক গড় সংখ্যা (~ 5760) পেতে একদিনের সেকেন্ড সংখ্যাকে (86400) 15 দিয়ে ভাগ করতে পারি।

প্রতিদিন উৎপাদিত ইথেরিয়াম ব্লকের চার্ট (2016 - বর্তমান) হলো:

![](./daily_blocks.png)

এই সময়কালে প্রতিদিন উৎপাদিত ব্লকের গড় সংখ্যা হলো ~5,874:

![](./avg_daily_blocks.png)

কোয়েরিগুলি হলো:

```sql
# 2016 সাল থেকে প্রতিদিন উৎপাদিত ব্লকের সংখ্যা ভিজ্যুয়ালাইজ করার জন্য কোয়েরি

SELECT
    DATE_TRUNC('day', time) AS dt,
    COUNT(*) AS block_count
FROM ethereum."blocks"
GROUP BY dt
OFFSET 1

# প্রতিদিন উৎপাদিত ব্লকের গড় সংখ্যা

WITH temp_table AS (
SELECT
    DATE_TRUNC('day', time) AS dt,
    COUNT(*) AS block_count
FROM ethereum."blocks"
GROUP BY dt
OFFSET 1
)
SELECT
    AVG(block_count) AS avg_block_count
FROM temp_table
```

2016 সাল থেকে প্রতিদিন উৎপাদিত ব্লকের গড় সংখ্যা সেই সংখ্যার থেকে সামান্য বেশি, 5,874। বিকল্পভাবে, 86400 সেকেন্ডকে 5874 গড় ব্লক দিয়ে ভাগ করলে ফল হয় 14.7 সেকেন্ড বা প্রায় প্রতি 15 সেকেন্ডে একটি ব্লক।

### গ্যাস {#gas}

ব্লকগুলি আকারে সীমাবদ্ধ। সর্বোচ্চ ব্লক সাইজ ডায়নামিক এবং নেটওয়ার্কের চাহিদা অনুযায়ী 12,500,000 এবং 25,000,000 ইউনিটের মধ্যে পরিবর্তিত হয়। ডিস্ক স্পেস এবং গতির প্রয়োজনের ক্ষেত্রে সম্পূর্ণ নোডগুলির উপর চাপ সৃষ্টি করে এমন ইচ্ছামত বড় ব্লক সাইজ প্রতিরোধ করার জন্য সীমার প্রয়োজন ([উৎস](/developers/docs/blocks/))।

ব্লক গ্যাস লিমিটকে ধারণা করার একটি উপায় হলো এটিকে উপলব্ধ ব্লক স্পেসের **সরবরাহ** হিসাবে ভাবা যেখানে ট্রানজ্যাকশনগুলি ব্যাচ করা হয়। ব্লক গ্যাস লিমিট 2016 থেকে বর্তমান দিন পর্যন্ত কোয়েরি এবং ভিজ্যুয়ালাইজ করা যেতে পারে:

![](./avg_gas_limit.png)

```sql
SELECT
    DATE_TRUNC('day', time) AS dt,
    AVG(gas_limit) AS avg_block_gas_limit
FROM ethereum."blocks"
GROUP BY dt
OFFSET 1
```

তারপরে রয়েছে প্রতিদিন ব্যবহৃত প্রকৃত গ্যাস যা ইথেরিয়াম চেইনে করা কম্পিউটিংয়ের জন্য অর্থ প্রদান করে (যেমন, ট্রানজ্যাকশন পাঠানো, একটি স্মার্ট কন্ট্র্যাক্ট কল করা, একটি NFT মিন্ট করা)। এটি উপলব্ধ ইথেরিয়াম ব্লক স্পেসের **চাহিদা**:

![](./daily_gas_used.png)

```sql
SELECT
    DATE_TRUNC('day', time) AS dt,
    AVG(gas_used) AS avg_block_gas_used
FROM ethereum."blocks"
GROUP BY dt
OFFSET 1
```

আমরা **চাহিদা এবং সরবরাহ** কীভাবে সামঞ্জস্যপূর্ণ তা দেখতে এই দুটি চার্টকে একসাথে পাশাপাশি রাখতে পারি:

![gas_demand_supply](./gas_demand_supply.png)

অতএব আমরা উপলব্ধ সরবরাহের প্রেক্ষিতে ইথেরিয়াম ব্লক স্পেসের চাহিদার একটি ফাংশন হিসাবে গ্যাসের দাম বুঝতে পারি।

অবশেষে, আমরা ইথেরিয়াম চেইনের জন্য গড় দৈনিক গ্যাসের দাম কোয়েরি করতে চাইতে পারি, তবে, এটি করলে একটি বিশেষ দীর্ঘ কোয়েরি সময় লাগবে, তাই আমরা আমাদের কোয়েরিকে Ethereum Foundation দ্বারা প্রতি ট্রানজ্যাকশনে প্রদত্ত গড় গ্যাসের পরিমাণে ফিল্টার করব।

![](./ef_daily_gas.png)

আমরা বছরের পর বছর ধরে Ethereum Foundation ঠিকানায় করা সমস্ত ট্রানজ্যাকশনের জন্য প্রদত্ত গ্যাসের দাম দেখতে পারি। কোয়েরিটি এখানে দেওয়া হলো:

```sql
SELECT
    block_time,
    gas_price / 1e9 AS gas_price_gwei,
    value / 1e18 AS eth_sent
FROM ethereum."transactions"
WHERE "to" = '\xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'
ORDER BY block_time DESC
```

### সারসংক্ষেপ {#summary}

এই টিউটোরিয়ালের মাধ্যমে, আমরা অনচেইন ডেটা কোয়েরি করে এবং তার একটি অনুভূতি পেয়ে ইথেরিয়ামের ভিত্তিগত ধারণাগুলি এবং ইথেরিয়াম ব্লকচেইন কীভাবে কাজ করে তা বুঝতে পারি।

এই টিউটোরিয়ালে ব্যবহৃত সমস্ত কোড ধারণকারী ড্যাশবোর্ডটি [এখানে](https://dune.com/paulapivat/Learn-Ethereum) পাওয়া যাবে।

web3 অন্বেষণ করতে ডেটার আরও ব্যবহারের জন্য [আমাকে টুইটারে খুঁজুন](https://twitter.com/paulapivat)।
