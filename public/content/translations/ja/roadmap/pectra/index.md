---
title: Prague-Electra (Pectra)
description: Pectraプロトコルアップグレードの詳細
lang: ja
---

# Pectra {#pectra}

Pectraネットワークアップグレードは、 [Dencun](/roadmap/dencun/)の後に行われました。このアップグレードにより、イーサリアムの実行レイヤーおよびコンセンサスレイヤー両方に変更が行われています。 Pectraは、PragueおよびElectraの組み合わせを省略した名前です。この各名前は、実行レイヤーおよびコンセンサスレイヤーの仕様変更に紐づいています。 この変更により、イーサリアムユーザー、デベロッパー、バリデータに向けにさまざまな改善が行われました。

このアップグレードは、イーサリアムメインネットのエポック`364032`で、`364032`, on **07-May-2025 at 10:05 (UTC)** に無事有効化されました。

<Alert variant="update">
<AlertContent>
<AlertDescription>
Pectraアップグレードは、イーサリアムの長期的な開発目標における1つのステップにすぎません。 [プロトコルロードマップ](/roadmap/)と[過去のアップグレード](/ethereum-forks/)について詳しく学びましょう。
</AlertDescription>
</AlertContent>
</Alert>

## Pectraにおける改善点 {#new-improvements}

Pectraによって、これまでのアップグレードよりも多くの[EIP](https://eips.ethereum.org/)が導入されました。 小さな変更から、大きな新しい機能まで含まれています。 変更の全リストや技術的な詳細は、各EIPを参照することで確認できます。

### EOAアカウントコード {#7702}

[EIP-7702](https://eips.ethereum.org/EIPS/eip-7702)は、[アカウント抽象化](/roadmap/account-abstraction/)の普及にむけた主要なステップを示しています。 この機能により、ユーザーは、自身のアドレス ([EOA](/glossary/#eoa))をスマートコントラクトで拡張できます。 このEIPで特定の関数を持つ新しいタイプのトランザクションが導入されます。具体的には、アドレスの所有者は、自身のアドレスを設定した権限に対して署名します。これにより、選択したスマートコントラクトに自身のもつアドレスを模倣させることができます。

このEIPにより、ユーザーは、プログラム可能なウォレットを選択でき、トランザクションバンドル、ガスレストランザクション、代替リカバリースキーマ向けのカスタム資産アクセスなどの新しい機能を利用できるようになります。 このハイブリッドなアプローチは、EOAのシンプルさと、コントラクトベースのアカウントのプログラム可能性を組み合わせています。

7702のより詳しい情報は[こちら](/roadmap/pectra/7702/)をご覧ください。

### 最大有効残高の引き上げ {#7251}

現在のバリデータの有効残高は、ちょうど32ETHです。 コンセンサスに参加するのに必要な最低額であると同時に、1つのバリデータがステークできる最大額でもあります。

[EIP-7251](https://eips.ethereum.org/EIPS/eip-7251)により、最大有効残高が2048ETHに引き上げられました。これにより、1つのバリデータは、32ETHから2048ETHまでステーキングできるようになりました。 ステーカーは、32の倍数に限らず、最小額から1ETH単位で任意の金額をステークキングできるようになり、報酬も受け取れるようになりました。 例えば、バリデータの残高が報酬も含めて33ETHになった場合、この増加した1ETHも有効残高として扱われ、報酬を受け取ることができます。

この改善によってもたらされる、バリデータに対するより優れた報酬システムの利点は、これだけではありません。 複数のバリデータを実行している[ステーカー](/staking/)は、複数のバリデータを集約して1つのバリデータにすることができるため、運用を軽減するとともに、ネットワークのオーバヘッドも削減できます。 ビーコンチェーンの各バリデータは、各エポックごとに署名を提出します。そのため、バリデータの数が増えると、膨大な署名を伝播させるための帯域幅がより多く必要になります。 バリデータの集約することで、ネットワークへの負荷を減らしながら、同じ経済的なセキュリティを保ちつつ、新たにスケーリングするオプションが得られます。

MaxEBのより詳しい情報は[こちら](/roadmap/pectra/maxeb/)をご覧ください。

### Blobスループットの増加 {#7691}

Blobは、[データ可用性](/developers/docs/data-availability/#data-availability-and-layer-2-rollups)をL2に提供します。 これは、[前回のネットワークアップグレード](/roadmap/dencun/)で導入されました。

ネットワークは現在、1ブロックごとに平均3Blobで、最大6Blobとなっています。 [EIP-7691](https://eips.ethereum.org/EIPS/eip-7691)では、1ブロックあたりの平均Blob数が6まで引き上げられ、最大は9となります。これにより、イーサリアムのロールアップの容量が引き上げられます。 このEIPは、[PeerDAS](https://eips.ethereum.org/EIPS/eip-7594)によって、さらに多くのBlob数を可能になるまでのギャップを埋めるのに役立ちます。

### コールデータコストの増加 {#7623}

[DencunアップグレードでのBLOB導入](/roadmap/danksharding)以前、L2は[calldata](/developers/docs/data-availability/blockchain-data-storage-strategies/#calldata)を使用してイーサリアムにデータを保存していました。 BLOBとcalldataはどちらもイーサリアムの帯域幅使用量に影響を与えます。 ほとんどのブロックは最小限のcalldataしか使用しませんが、多くのBLOBも含むデータ量の多いブロックは、イーサリアムのP2Pネットワークに有害となる可能性があります。

これに対処するため、[EIP-7623](https://eips.ethereum.org/EIPS/eip-7623)では、データ量の多いトランザクションに限り、calldataの価格を引き上げます。 これにより、最悪の場合のブロックサイズが制限され、L2がBLOBのみを使用するインセンティブが提供され、99%以上のトランザクションは影響を受けません。

### 実行レイヤーでトリガー可能な退出 {#7002}

現在、バリデータから離脱して[ステークされたETHを引き出す](/staking/withdrawals/)ことは、コンセンサスレイヤーのオペレーションであり、アテステーションのようなアクティブな責務を遂行するためにバリデータが使用するのと同じBLSキーである、アクティブなバリデータキーを必要とします。 引き出し認証情報は、離脱したステークを受け取るための別のコールドキーですが、離脱をトリガーすることはできません。 ステーカーが離脱する唯一の方法は、アクティブなバリデータキーで署名された特別なメッセージをビーコンチェーンネットワークに送信することです。 これは、引き出し認証情報とバリデータキーが異なるエンティティによって保持されている場合や、バリデータキーが失われた場合に制限となります。

[EIP-7002](https://eips.ethereum.org/EIPS/eip-7002)では、実行レイヤーの引き出し認証情報を使用して離脱をトリガーできる新しいコントラクトを導入しています。 ステーカーは、バリデータの署名キーやビーコンチェーンへのアクセスを一切必要とせず、この特別なコントラクトの関数を呼び出すことで、バリデータから離脱できるようになります。 重要なことに、オンチェーンでバリデータの引き出しを可能にすることで、ノードオペレーターに対する信頼の前提を低減したステーキングプロトコルが可能になります。

### オンチェーンでのバリデータデポジット {#6110}

バリデータのデポジットは現在、実行レイヤーからデータを取得するビーコンチェーン上の機能である[eth1data poll](https://eth2book.info/capella/part2/deposits-withdrawals/deposit-processing/)によって処理されています。 これは、ビーコンチェーンが別のネットワークであり、プルーフ・オブ・ワークのリオーグを考慮しなければならなかったマージ以前からの、ある種の技術的負債です。

[EIP-6110](https://eips.ethereum.org/EIPS/eip-6110)は、実行レイヤーからコンセンサスレイヤーにデポジットを配信する新しい方法であり、実装の複雑さを軽減し、即時処理を可能にします。 これは、マージ後のイーサリアムにネイティブなデポジットを処理する、より安全な方法です。 また、履歴の期限切れに必要なノードのブートストラップに過去のデポジットを必要としないため、プロトコルの将来性を確保するのにも役立ちます。

### BLS12-381のプリコンパイル {#2537}

プリコンパイルは、イーサリアム仮想マシン([EVM](/developers/docs/evm/))に直接組み込まれた特別なスマートコントラクトのセットです。 通常のコントラクトとは異なり、プリコンパイルはユーザーによってデプロイされるのではなく、クライアント実装自体の一部であり、そのネイティブ言語(Solidityではなく、GoやJavaなど)で記述されています。 プリコンパイルは、暗号化操作など、広く使用され標準化された機能を提供します。 スマートコントラクトのデベロッパーは、プリコンパイルを通常のコントラクトとして呼び出すことができますが、より高いセキュリティと効率性が得られます。

[EIP-2537](https://eips.ethereum.org/EIPS/eip-2537)は、[BLS12-381](https://hackmd.io/@benjaminion/bls12-381)上の曲線演算のための新しいプリコンパイルを追加します。 この楕円曲線は、その実用的な特性により、暗号通貨エコシステムで広く使用されるようになりました。 具体的には、イーサリアムのコンセンサスレイヤーで採用され、バリデータによって使用されています。

この新しいプリコンパイルにより、すべてのデベロッパーがこの曲線を使用して、例えば署名の検証などの暗号化操作を簡単、効率的、かつ安全に実行できるようになります。 この曲線に依存するオンチェーンアプリケーションは、カスタムコントラクトの代わりにプリコンパイルに依存することで、ガス効率が向上し、より安全になります。 これは主に、EVM内のバリデータについて推論したいアプリケーション、例えばステーキングプール、[リステーキング](/restaking/)、ライトクライアント、ブリッジ、さらにはゼロ知識にも適用されます。

### 状態からの履歴ブロックハッシュの提供 {#2935}

EVMは現在、コントラクトのデベロッパーが実行レイヤーで直接ブロックのハッシュを取得できるようにする`BLOCKHASH`オペコードを提供しています。 しかし、これは最後の256ブロックにのみ限定されており、将来的にはステートレスクライアントにとって問題となる可能性があります。

[EIP-2935](https://eips.ethereum.org/EIPS/eip-2935)は、最後の8192ブロックハッシュをストレージスロットとして提供できる新しいシステムコントラクトを作成します。 これは、ステートレス実行のためにプロトコルの将来性を確保するのに役立ち、Verkleトライが採用されると、より効率的になります。 しかし、これとは別に、ロールアップはより長い履歴ウィンドウでコントラクトを直接クエリできるため、すぐにこの恩恵を受けることができます。

### アテステーションの外に委員会インデックスを移動  {#7549}

ビーコンチェーンのコンセンサスは、バリデータが最新のブロックとファイナライズされたエポックに投票することに基づいています。 アテステーションには3つの要素が含まれ、そのうち2つは投票、3つ目は委員会インデックス値です。

[EIP-7549](https://eips.ethereum.org/EIPS/eip-7549)では、このインデックスを署名付きアテステーションメッセージの外に移動させることで、コンセンサスの投票の検証と集約が容易になります。 これにより、すべてのコンセンサスクライアントの効率が向上し、イーサリアムのコンセンサスを証明するためのゼロ知識回路のパフォーマンスが大幅に向上する可能性があります。

### EL設定ファイルにBLOBスケージュールを追加 {#7840}

[EIP-7840](https://eips.ethereum.org/EIPS/eip-7840)は、実行レイヤークライアントの設定に新しいフィールドを追加する単純な変更です。 これによりブロック数が設定され、ブロックあたりのターゲットおよび最大BLOB数、ならびにBLOBフィーの調整を動的に設定できます。 直接定義された設定を使用することで、クライアントはEngine APIを介してこの情報を交換する複雑さを回避できます。

<Alert variant="update">
<AlertContent>
<AlertDescription>
イーサリアムのユーザー、デベロッパー、またはバリデータとして、Pectraが具体的にどのような影響を与えるかについて詳しく知るには、<a href="https://epf.wiki/#/wiki/pectra-faq">Pectra FAQ</a>をご覧ください。
</AlertDescription>
</AlertContent>
</Alert>

## このアップグレードは、イーサリアムノード全体やバリデータに影響しますか？ {#client-impact}

はい、Pectraアップグレードでは、[実行クライアントおよびコンセンサスクライアント](/developers/docs/nodes-and-clients/)両方のアップグレードが必要です。 主要なイーサリアムクライアントのはすべて、高い優先度でハードフォーク対応バージョンをリリースします。 アップグレード後もイーサリアムネットワークと同期を維持するために、ノードオペレーターはサポートされているクライアントバージョンを実行していることを確認する必要があります。 なお、クライアントリリースに関する情報は時間とともに変化するため、ユーザーは現時点の詳細情報を知るために、最新のアップデートを参照すべきです。

## ハードフォーク後にETHはどのように変換されるのでしょうか? {#scam-alert} {#scam-alert}

- ETHに必要なアクションはありません: イーサリアムのPectraアップグレード後、ETHを変換またはアップグレードする必要はありません。 あなたのアカウント残高は同じままで、現在保有しているETHはハードフォーク後も既存の形式でアクセス可能です。
- 詐欺に注意してください！ <Emoji text="⚠️" /> ETHを「アップグレード」するよう指示する人は、詐欺を試みています。このアップグレードに関して、あなたがする必要のあることは何もありません。 あなたの資産は完全に影響を受けません。 詐欺から身を守る最善の方法は、情報を得ておくことです。

[詐欺の認識と回避についての詳細](/security/)

## 映像で学びたい場合 {#visual-learner}

<YouTube id="ufIDBCgdGwY" />

_Pectraアップグレードで何が行われるのか - Christine Kim_

<YouTube id="_UpAFpC7X6Y" />

_イーサリアムPectraアップグレード: ステーカーが知っておくべきこと — Blockdaemon_

## 参考リンク{#further-reading}

- [イーサリアムのロードマップ](/roadmap/)
- [Pectra FAQ](https://epf.wiki/#/wiki/pectra-faq)
- [Pectra.wtf情報ページ](https://pectra.wtf)
- [ステーカー体験を向上させるPectraの仕組み](https://www.kiln.fi/post/next-ethereum-upgrade-how-pectra-will-enhance-the-staking-experience)
- [EIP7702情報ページ](https://eip7702.io/)
- [Pectra開発ネットワーク](https://github.com/ethereum/pm/blob/master/Pectra/pectra-pm.md)
