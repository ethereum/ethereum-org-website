---
title: プロポーザー/ビルダーセパレーション(PBS)
description: イーサリアムのバリデータがブロックの構築とブロックのブロードキャストの責任を分担する方法とその理由を学びます。
lang: ja
---

# プロポーザー/ビルダーセパレーション(PBS) {#proposer-builder-separation}

現在、イーサリアムのバリデータは、*ブロックを作成、ブロードキャスト*します。 バリデータは、ゴシップネットワークを通じて伝達されたトランザクションを 1 つのブロックにまとめて、イーサリアムネットワーク上のピアに送信します。 **プロポーザー/ビルダーセパレーション(PBS)**は、ブロック提案とブロック生成のタスクを複数のバリデータに分割します。 ブロックビルダーは、各スロットのブロック提案者にブロックを提供する責任を負います。 ブロックプロポーザーは、ブロックの内容を事前に知ることができません。ブロックビルダーに料金を支払い、最も報酬の高いものを選び、その後、ブロックをピアに送信します。

このアップグレードが重要な理由はいくつかあります。 まず、このアップグレードでプロトコルレベルでトランザクションの検閲を防ぐことができます。 次に、ブロック構築の収益性をより最適化できる機関投資家に個人のバリデータが出し抜かれることを防ぐことができます。 最後に、ダンクシャーディングのアップグレードが有効になると、イーサリアムのスケーリングを補助します。

## PBS と検閲耐性 {#pbs-and-censorship-resistance}

ブロックビルダーとブロック提案者を分離すると、ブロックビルダーがトランザクションを検閲することがかなり困難になります。 これは、PBS により、ブロックが提案される前に、検閲が行われていないことを保証する比較的複雑な基準を追加できるためです。 ブロック提案者は、ブロックビルダーとは別のエンティティであるため、ブロックビルダーによる検閲を防ぐ役割を担うことができます。

例えば、包含リストを導入すると、バリデータがトランザクションについて把握した時に、それがブロックに含まれていないことがわかった場合、次のブロックでそのトランザクションを必ず含めるように強制できるようになります。 包含リストは、ブロック提案者のローカルのメンプール(認識しているトランザクションのリスト)から生成され、ブロックが提案される直前にピアに送信されます。 包含リストのトランザクションのいずれかが失われている場合、提案者はブロックを拒否するか、提案する前に失われているトランザクションを追加するか、ブロックを提案して他のバリデータからブロックを受信した場合に拒否することができます。 また、より効率的なバージョンもあります。ビルダーは利用可能なブロック領域をすべて活用する必要があることを主張し、そうしなかった場合、提案者の包含リストからトランザクションを追加するというアイデアです。 まだ研究中の分野なので、包含リストの最適な構成はまだ決定されていません。

[暗号化メンプール](https://www.youtube.com/watch?v=fHDjgFcha0M&list=PLpktWkixc1gUqkyc1-iE6TT0RWQTBJELe&index=3)により、ブロックがブロードキャストされるまで、ブロックビルダーやブロック提案者は、ブロックにどのトランザクションが含まれているかわからない可能性があります。

<ExpandableCard title="PBSにより、どのような検閲が解決されるのでしょうか？" eventCategory="/roadmap/pbs" eventName="clicked what kinds of censorship does PBS solve?">

経済力のある組織は、特定のアドレスのトランザクションをブロックするようにバリデータに圧力をかけてくるかもしれません。 バリデータは、ブラックリストに登録されたアドレスのトランザクションを検出し、その組織が提案したブロックを除外することで、この圧力に対抗します。 PBS を導入すると、ブロック提案者は、自身のブロックでどのトランザクションをブロードキャストしているのか分からなくなるので、この対抗策は使えなくなります。 住んでいる地域で検閲が法律になっている場合、個人やアプリが検閲ルールに準拠しなければならないことがあります。 これらのケースでは、コンプライアンスはアプリケーションレベルで行われ、プロトコルはパーミッションレスで検閲が行われない状態のままです。

</ExpandableCard>

## PBS と MEV {#pbs-and-mev}

**最大抽出可能価値(MEV)**とは、トランザクションを好ましい順序に並べ替えることによって収益を最大化するバリデータのことです。 具体的には、分散型取引所での裁定取引(大規模な売買を行うフロントランニング)や、DeFi ポジションの清算などが挙げられます。 MEV を最大化するには、高度な技術ノウハウと、通常のバリデータに追加するカスタムソフトウェアが必要です。そのため MEV 抽出において、組織的なオペレータの方が個人や趣味でバリデータ立てている人物よりも優れたパフォーマンスを発揮する可能性が非常に高くなります。 つまり、集中化されたオペレータは、個人でステーキングするよりも高いリターンを得られる可能性があるため、ホームステークを阻害する力が働いてしまうということです。

PBS では、MEV の経済を再設定することによって、この問題を解決します。 ブロック提案者は、MEV を自分で探す代わりに、ブロックビルダーが提案したブロックの中から、適当なブロックを選択します。 ブロックビルダーは、MEV を巧みに抽出しているかもしれませんが、その報酬はブロック提案者に支払われます。 つまり、専門のブロックビルダーが小さなプールを持っていても、MEV の抽出を独占していても、その報酬は、個人のホームステーカーを含む、ネットワーク上のすべてのバリデータに分配される可能性があるということです。

<ExpandableCard title="ブロック構築を集中化しても問題ないのはなぜでしょうか？" eventCategory="/roadmap/pbs" eventName="clicked why is it OK to centralize block building?">

個人でステークするよりも、プールでステークする方が有利になるかもしれません。これは、複雑な MEV 戦略によって得られる報酬が増えるからです。 ブロックの構築とブロックの提案を分離することで、抽出された MEV は、最も使われている MEV サーチャーに集中するのではなく、より多くのバリデータに分散されます。 同時に、専門のブロックビルダーの存在を許可することで、ブロック構築の負担が軽減され、MEV の盗難も防止されます。また、独立したバリデータの数も最大化され、ブロックの正しさをチェックできるようになります。 これは、「証明者と検証者の非対称性」という重要なコンセプトであり、ブロックが誠実であることを証明できる堅牢かつ最大限に分散化された検証者のネットワークが存在する限り、集中的なブロック生成は問題ないという考えを参考にしています。 分散化はあくまでも手段であって、目的ではありません。私たちが本当に望んでいるのは、正しいブロックです。
</ExpandableCard>

## PBS とダンクシャーディング {#pbs-and-danksharding}

ダンクシャーディングは、イーサリアムの処理能力を 1 秒あたり 10 万トランザクション以上までスケーリングします。これにより、ロールアップユーザーの手数料を最小限に抑えることができます。 ダンクシャーディングでは、ブロックビルダーの作業負荷が増加します。ブロックビルダーは、最大 64MB のロールアップデータの証明を 1 秒未満で計算する必要があるため、PBS に依存しています。 このタスクは、かなりのハードウェアリソースを必要とするものです。そのため、専門のビルダーが専属で取り組む必要がありますが、 現在の状況では、いずれにせよ MEV 抽出によって、ブロック構築は、より洗練化した強力なオペレーターを中心にますます集中化する可能性があります。 プロポーザー/ビルダーセパレーションは、ブロックの検証やステーキング報酬の分配といった重要な役割を、複数のバリデーターに分散することで、集中化を防ぐための仕組みです。 また、この仕組みには、副次的な利点もあります。それは、専門のブロックビルダーが、ダンクシャーディングに必要なデータ証明を、より意欲的に計算できるようになるということです。

## 現在の進行状況 {#current-progress}

PBS の研究は、順調に進んでいます。しかし、イーサリアムクライアントでプロトタイプを作成するには、まだいくつかの設計上の重大な問題を解決する必要があります。 そのため、仕様の確定に至っていません。 つまり、PBS の実装は 1 年以上先になる可能性があります。 最新の研究状況は、[こちら](https://notes.ethereum.org/@vbuterin/pbs_censorship_resistance)でご確認ください。

## 参考文献 {#further-reading}

- [研究状況: PBS の下での検閲耐性](https://notes.ethereum.org/@vbuterin/pbs_censorship_resistance)
- [PBS にふさわしい手数料市場のデザイン](https://ethresear.ch/t/proposer-block-builder-separation-friendly-fee-market-designs/9725)
- [PBS と検閲耐性](https://notes.ethereum.org/@fradamt/H1TsYRfJc#Secondary-auctions)
- [包括リスト](https://notes.ethereum.org/@fradamt/H1ZqdtrBF)
