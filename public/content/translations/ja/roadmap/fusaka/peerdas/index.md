---
title: PeerDAS
description: Fusakaイーサリアムプロトコルアップグレードの一環としてのPeerDASについて学ぶ
lang: ja
---

# PeerDAS {#peer-das}

イーサリアムプロトコルは、[EIP-4844によるブロブトランザクションの導入](/roadmap/danksharding/)以来、最も重要なスケーリングアップグレードを実施しています。 [Fusakaアップグレード](/roadmap/fusaka/)の一環として、PeerDASはブロブデータを処理する新しい方法を導入し、L2の\*\*[データ可用性（DA）](/developers/docs/data-availability/)\*\*容量を約1桁増加させます。

[ブロブスケーリングのロードマップ詳細](https://blog.ethereum.org/2025/08/22/protocol-update-002)

## スケーラビリティ {#scalability}

イーサリアムのビジョンは、世界中の誰もが利用できる、中立で安全かつ分散化されたプラットフォームであることです。 ネットワークの使用量が増加するにつれて、ネットワークのスケール、セキュリティ、分散化のトリレンマのバランスをとることが求められます。 もしイーサリアムが現在の設計のままでネットワークが処理するデータを単純に増加させると、[イーサリアムが分散化のために依存しているノード](/developers/docs/nodes-and-clients/)に過大な負荷をかけるリスクがあります。 スケーラビリティには、トレードオフを最小限に抑える厳密なメカニズム設計が必要です。

この目標を達成するための戦略の1つは、[レイヤー1（L1）](/glossary/#layer-1)のメインネットですべてのトランザクションを処理するのではなく、レイヤー2のスケーリングソリューションの多様なエコシステムを可能にすることです。 [レイヤー2（L2）](/glossary/#layer-2)または[ロールアップ](/glossary#rollups)は、独自の独立したチェーンでトランザクションを処理し、検証とセキュリティのためにイーサリアムを使用します。 セキュリティ上重要なコミットメントのみを公開し、ペイロードを圧縮することで、L2はイーサリアムのDA容量をより効率的に使用できます。 その結果、L1はセキュリティ保証を損なうことなく少ないデータを運び、L2はより低いガス代でより多くのユーザーを取り込むことができます。 当初、L2は通常のトランザクションで`calldata`としてデータを公開していましたが、これはL1トランザクションとガスを競合し、バルクデータの可用性には実用的ではありませんでした。

## プロトダンクシャーディング {#proto-danksharding}

L2のスケーリングに向けた最初の大きな一歩は、[プロト・ダンクシャーディング](/roadmap/danksharding/)（EIP-4844）を導入したDencunアップグレードでした。 このアップグレードにより、ロールアップ用にブロブと呼ばれる新しい特殊なデータ型が作成されました。 [ブロブ](/developers/docs/data-availability/blockchain-data-storage-strategies/#eip-4844-blobs)（バイナリラージオブジェクト）は、EVMの実行を必要とせず、ノードが限られた時間だけ保存する、任意データの一時的な断片です。 このより効率的な処理により、L2はイーサリアムにより多くのデータを公開し、さらにスケールすることが可能になりました。

スケーリングに既に大きなメリットがあるにもかかわらず、ブロブの使用は最終目標の一部にすぎません。 現在のプロトコルでは、ネットワーク内のすべてのノードがすべてのブロブをダウンロードする必要があります。 個々のノードに要求される帯域幅がボトルネックとなり、ダウンロードが必要なデータ量はブロブ数の増加に直接比例して増加します。

イーサリアムは分散化に妥協せず、帯域幅は最も敏感な調整項目の1つです。 誰でも手頃な価格で利用できる強力なコンピューティングが広く普及しているにもかかわらず、先進国の高度に都市化された都市（[ドイツ](https://www.speedtest.net/global-index/germany)、[ベルギー](https://www.speedtest.net/global-index/belgium)、[オーストラリア](https://www.speedtest.net/global-index/australia)、[アメリカ合衆国](https://www.speedtest.net/global-index/united-states)など）でさえ、[アップロード帯域幅の制限](https://www.speedtest.net/global-index)により、帯域幅要件が慎重に調整されない場合、ノードはデータセンターからしか実行できなくなる可能性があります。

ブロブが増加するにつれて、ノードオペレーターにはますます高い帯域幅とディスク容量が要求されます。 ブロブのサイズと量は、これらの制約によって制限されます。 各ブロブは最大128kbのデータを運ぶことができ、1ブロックあたり平均6つのブロブがあります。 これは、ブロブをさらに効率的な方法で使用する将来の設計に向けた第一歩にすぎませんでした。

## データ可用性サンプリング {#das}

[データ可用性](/developers/docs/data-availability/)とは、チェーンを独立して検証するために必要なすべてのデータが、すべてのネットワーク参加者にアクセス可能であることを保証するものです。 これにより、データが完全に公開され、チェーンの新しい状態や受信トランザクションをトラストレスに検証するために使用できることが保証されます。

イーサリアムのブロブは、L2のセキュリティを保証する強力なデータ可用性保証を提供します。 これを行うために、イーサリアムのノードはブロブを完全にダウンロードして保存する必要があります。 しかし、ネットワーク内でブロブをより効率的に分散させ、この制限を回避できたらどうでしょうか？

データを保存し、その可用性を確保するための異なるアプローチが、\*\*データ可用性サンプリング（DAS）\*\*です。 イーサリアムを実行するすべてのコンピュータがすべてのブロブを完全に保存する代わりに、DASは分散化された分業を導入します。 データの処理負担を、より小さく管理しやすいタスクをノードのネットワーク全体に分散させることで軽減します。 ブロブは断片に分割され、各ノードは全ノードにわたる均一なランダム分布のメカニズムを使用して、いくつかの断片のみをダウンロードします。

これにより、データの可用性と完全性を証明するという新しい問題が生じます。 個々のノードが小さな断片しか保持していない場合、ネットワークはどのようにしてデータが利用可能であり、すべてが正しいことを保証できるでしょうか？ 悪意のあるノードが偽のデータを提供し、強力なデータ可用性保証を簡単に破る可能性があります！ ここで暗号技術が役立ちます。

データの完全性を確保するために、EIP-4844はすでにKZGコミットメントと共に実装されていました。 これらは、新しいブロブがネットワークに追加されるときに作成される暗号論的な証明です。 各ブロックには小さな証明が含まれており、ノードは受信したブロブがブロックのKZGコミットメントに対応していることを検証できます。

DASは、この上に構築され、データが正しく利用可能であることを保証するメカニズムです。 サンプリングとは、ノードがデータのごく一部だけを照会し、コミットメントに対してそれを検証するプロセスです。 KZGは多項式コミットメントスキームであり、これは多項式曲線上の任意の単一点が検証可能であることを意味します。 多項式上の数点を確認するだけで、サンプリングを行うクライアントはデータが利用可能であるという強力な確率的保証を得ることができます。

## PeerDAS {#peer-das}

[PeerDAS（EIP-7594）](https://eips.ethereum.org/EIPS/eip-7594)は、イーサリアムでDASメカニズムを実装する具体的な提案であり、おそらくマージ以来最大のアップグレードとなります。 PeerDASは、ブロブデータを拡張し、列に分割してサブセットをノードに配布するように設計されています。

イーサリアムはこれを達成するために、いくつかの巧妙な数学を借用しています。ブロブデータにリード・ソロモン形式の消失符号化を適用します。 ブロブデータは、データをエンコードする係数を持つ多項式として表現され、その多項式を追加の点で評価して拡張ブロブを作成し、評価の数を2倍にします。 この追加された冗長性により、消失回復が可能になります。いくつかの評価が欠落していても、拡張部分を含む全データの少なくとも半分が利用可能であれば、元のブロブを再構築できます。

![拡張多項式](./polynomial.png)

実際には、この多項式には何千もの係数があります。 KZGコミットは数バイトの値で、ハッシュのようなもので、すべてのノードに知られています。 十分なデータポイントを保持しているすべてのノードは、[ブロブデータの完全なセットを効率的に再構築できます](https://arxiv.org/abs/2207.11079)。

> 豆知識：同じ符号化技術がDVDでも使用されていました。 DVDに傷がついても、プレーヤーがそれを読み取れたのは、多項式の欠落部分を追加するリード・ソロモン符号化のおかげです。

歴史的に、ブロックチェーン内のデータは、ブロックであろうとブロブであろうと、すべてのノードにブロードキャストされていました。 PeerDASの分割・サンプリングアプローチにより、すべてを全員にブロードキャストする必要はなくなりました。 Fusaka後、コンセンサスレイヤーのネットワーキングはゴシップトピック/サブネットに編成されます。ブロブの列は特定のサブネットに割り当てられ、各ノードは事前に決定されたサブセットに登録し、それらの断片のみを保管します。

PeerDASでは、拡張されたブロブデータは「列」と呼ばれる128個の断片に分割されます。 データは、ノードが登録する特定のサブネット上の専用ゴシッププロトコルを介して、これらのノードに配布されます。 ネットワーク上の各通常ノードは、ランダムに選択された少なくとも8つの列サブネットに参加します。 128のサブネットのうち8つからのみデータを受信することは、このデフォルトノードが全データの1/16しか受信しないことを意味しますが、データが拡張されているため、これは元のデータの1/8です。

これにより、現在の「全員がすべてをダウンロードする」スキーマの8倍という新しい理論的なスケーリング限界が可能になります。 異なるランダムなサブネットに登録するノードがブロブの列を提供することで、それらが均一に分布し、したがってデータのすべての断片がネットワークのどこかに存在する確率が非常に高くなります。 バリデータを実行しているノードは、実行するバリデータごとに、より多くのサブネットに登録する必要があります。

> 各ノードには一意のランダムに生成されたIDがあり、通常は接続のための公開IDとして機能します。 PeerDASでは、この番号を使用して、登録する必要があるランダムなセットのサブネットを決定し、その結果、すべてのブロブデータが均一にランダムに分布します。

ノードが元のデータの再構築に成功すると、回復した列をネットワークに再配布し、データギャップを積極的に修復して、システム全体の回復力を高めます。 合計残高が4096 ETH以上のバリデータに接続されたノードはスーパーノードでなければならず、したがってすべてのデータ列サブネットに登録し、すべての列を保管する必要があります。 これらのスーパーノードは継続的にデータギャップを修復します。 プロトコルの確率的な自己修復性により、データの一部しか保持していないホームオペレーターを制限することなく、強力な可用性保証が可能になります。

![サブネットを介して配布される列に登録するノード](./subnets.png)

上記のサンプリングメカニズムのおかげで、ブロブデータの小さなサブセットしか保持していないノードでも、データ可用性を確認できます。 この可用性は強制されます。バリデータは新しいフォーク選択ルールに従う必要があり、これはデータの可用性を検証した後にのみブロックを受け入れて投票することを意味します。

ユーザー（特にL2ユーザー）への直接的な影響は、手数料の低下です。 ロールアップデータ用のスペースが8倍になることで、ユーザーのチェーンでの操作は時間とともにさらに安価になります。 しかし、Fusaka後の手数料の引き下げには時間がかかり、BPOに依存します。

## ブロブパラメータのみ（BPO） {#bpo}

ネットワークは理論的に8倍多くのブロブを処理できるようになりますが、ブロブの増加は段階的に適切にテストされ、安全に実行される必要がある変更です。 テストネットはメインネットに機能をデプロイするための十分な信頼性を提供しますが、大幅に多い数のブロブを有効にする前に、p2pネットワークの安定性を確保する必要があります。

ネットワークに過大な負荷をかけることなく、ブロックあたりの目標ブロブ数を段階的に引き上げるために、Fusakaは\*\*[ブロブパラメータのみ（BPO）](https://ethereum-magicians.org/t/blob-parameter-only-bpo-forks/22623)\*\*のフォークを導入します。 広範なエコシステムの調整、合意、ソフトウェアのアップデートが必要な通常のフォークとは異なり、[BPO（EIP-7892）](https://eips.ethereum.org/EIPS/eip-7892)は、介入なしに時間とともに最大ブロブ数を増加させる、事前にプログラムされたアップグレードです。

これは、Fusakaが有効になりPeerDASが稼働した直後、ブロブの数は変わらないことを意味します。 ブロブの数は、最大48に達するまで数週間ごとに倍増し始め、その間デベロッパーはメカニズムが期待どおりに機能しており、ネットワークを実行しているノードに悪影響を及ぼしていないことを監視します。

## 今後の方向性 {#future-directions}

PeerDASは、[FullDASというより大きなスケーリングビジョン、つまりダンクシャーディング](https://ethresear.ch/t/fulldas-towards-massive-scalability-with-32mb-blocks-and-beyond/19529)への一歩にすぎません。 PeerDASは各ブロブに個別に1D消失符号化を使用しますが、完全なダンクシャーディングでは、ブロブデータのマトリックス全体にわたって、より完全な2D消失符号化スキームを使用します。 データを2次元で拡張することにより、さらに強力な冗長性特性と、より効率的な再構築および検証が実現されます。 FullDASの実現には、追加の研究とともに、大幅なネットワークおよびプロトコルの最適化が必要となります。

## 参考リンク{#further-reading}

- [PeerDAS: Francesco D'Amatoによるピアデータ可用性サンプリング](https://www.youtube.com/watch?v=WOdpO1tH_Us)
- [イーサリアムのPeerDASに関するドキュメント](https://eprint.iacr.org/2024/1362.pdf)
- [AGMなしでのPeerDASのセキュリティ証明](https://eprint.iacr.org/2025/1683)
- [VitalikによるPeerDAS、その影響、およびFusakaのテストに関する見解](https://x.com/VitalikButerin/status/1970983281090085200)