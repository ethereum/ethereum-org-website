---
title: دانک‌شاردینگ
description: با دو ارتقای متوالی برای مقیاس‌بندی اتریوم تحت عنوان Proto-Danksharding و Danksharding آشنا شوید.
lang: fa
summaryPoints:
  - Danksharding یک ارتقای چندمرحله‌ای برای بهبود مقیاس‌پذیری و ظرفیت اتریوم است.
  - مرحله اول، Proto-Danksharding، توده‌های داده را به بلوک‌ها اضافه می‌کند
  - توده‌های داده راه ارزان‌تری را برای جمع‌آوری داده‌ها جهت ارسال آنها به اتریوم ارائه می‌کنند و این هزینه‌ها می‌تواند در قالب مبلغی کمتر بابت کارمزد تراکنش‌ها به کاربران منتقل شود.
  - بعدتر، Danksharding به‌طور کامل مسئولیت تأیید توده‌های داده را در زیرمجموعه‌های گره‌ها گسترش می‌دهد و اتریوم را به بیش از 100,000 تراکنش در ثانیه افزایش می‌دهد.
---

# دانک‌شاردینگ {#danksharding}

**Danksharding** شبکه اتریوم را به یک زنجیره بلوکی کاملاً مقیاس‌پذیر تبدیل می‌کند، اما برای رسیدن به آن، لازم است چندین به‌روزرسانی در پروتکل اتریوم اجرا شود. **Proto-Danksharding** یکی از مراحل میانی رسیدن به این هدف است. هردو هدفشان این است که تراکنش‌ها را در شبکه‌های لایه‌ دوم تا حد ممکن ارزان‌تر کنند و سرعت پردازش تراکنش‌ها در شبکه اتریوم را به بیش از 100,000> تراکنش در ثانیه تغییر دهد.

## Proto-Danksharding چیست؟ {#what-is-protodanksharding}

بروتو-دنک‌شاردینگ با نام [EIP-4844](https://eips.ethereum.org/EIPS/eip-4844) هم شناخته می‌شود و راهی است برای [رول‌آپ‌ها](/layer-2/#rollups) تا داده‌های ارزان‌تری به بلوک‌ها افزوده شوند. این اسم از نام دو محقق (Protolambda و Dankrad Feist) که این ایده را مطرح کردند گرفته شده است. از لحاظ تاریخی، رول‌آپ‌ها به دلیل اینکه تراکنش‌های خود را در `CALLDATA` پست می‌کنند، از نظر ارزان بودن تراکنش‌های کاربر محدود بوده اند.

این فرایند پرهزینه است چون تمام گره‌های اتریوم باید آن را پردازش کنند و باید همیشه در زنجیره فعال باشند، گرچه رول‌آپ‌ها فقط برای مدت کوتاهی به داده‌ها نیاز دارند. پروتو-دنک‌شاردینگ توده‌هایی از داده‌ها را ارائه می‌کند که قابل ارسال و الصاق به بلوک‌ها هستند. داده موجود در این توده‌ها برای EVM قابل دسترسی نیستند و پس از یک دوره زمانی ثابت (که بر روی 4096 ایپوک در زمان نوشتن یا حدود 18 روز تنظیم شده است) به‌طور خودکار حذف می‌شوند. به‌عبارتی، رول‌آپ‌ها اطلاعات را با هزینه کمتری ارسال می‌کنند و مقدار صرفه‌جویی‌شده را در قالب تراکنش‌های ارزان‌تر به کاربران نهایی منتقل می‌کنند.

<ExpandableCard title="چرا توده‌ها رول‌آپ‌ها را ارزان‌تر می‌کنند؟" eventCategory="/roadmap/danksharding" eventName="clicked why do blocks make rollups cheaper?">

رول‌آپ‌ها روشی برای مقیاس‌بندی اتریوم با دسته‌بندی تراکنش‌های خارج از زنجیره و سپس ارسال نتایج به اتریوم است. یک رول‌آپ اساساً از دو بخش تشکیل شده است: داده‌ها و بررسی اجرا. داده‌ها دنباله کامل تراکنش‌هایی هستند که توسط یک رول‌آپ پردازش می‌شوند تا تغییر حالت در حال ارسال به اتریوم ایجاد شود. بررسی اجرا عبارت است از اجرای مجدد آن تراکنش‌ها توسط یک بازیگر درستکار (یک «اثبات‌کننده») تا اطمینان حاصل شود که تغییر حالت پیشنهادی درست است. برای انجام بررسی اجرا، داده تراکنش باید به اندازه کافی در دسترس باشد تا هر کس بتواند آن را دانلود و بررسی کند. این بدان معناست که هر رفتار فریبکارانه توسط توالی‌سنج رول‌آپ می‌تواند توسط اثبات‌کننده شناسایی و به چالش کشیده شود. با این حال، لازم نیست برای همیشه در دسترس باشد.

</ExpandableCard>

<ExpandableCard title="چرا حذف داده‌های توده‌ای مشکلی ندارد؟" eventCategory="/roadmap/danksharding" eventName="clicked why is it OK to delete the blob data?">

رول‌آپ‌ها تعهدات مربوط به داده‌های تراکنش خود را روی زنجیره ارسال می‌کنند و همچنین داده‌های واقعی را در توده‌های داده در دسترس قرار می‌دهند. این بدان معناست که اثبات‌کنندگان می‌توانند معتبر بودن تعهدات را بررسی کنند یا داده‌هایی را که فکر می‌کنند اشتباه هستند به چالش بکشند. در سطح گره، توده‌های داده در کلاینت اجماع نگهداری می‌شوند. کلاینت‌های اجماع تأیید می‌کنند که آن‌ها داده‌ها را دیده‌اند و در سراسر شبکه منتشر شده است. اگر داده‌ها برای همیشه حفظ می‌شد، این کلاینت‌ها حجیم می‌شدند و منجر به نیازهای سخت‌افزاری بزرگ برای اجرای گره‌ها می‌شدند. در عوض، داده به طور خودکار هر 18 روز از گره هرس می شود. گواهی‌های کلاینت اجماع نشان می‌دهد که فرصت کافی برای تأیید داده‌ها ازسوی اثبات‌کننده‌ها وجود دارد. داده‌های واقعی را می‌توان در خارج از زنجیره توسط اپراتورهای رول‌آپ، کاربران یا دیگران ذخیره کرد.

</ExpandableCard>

### نحوه تأیید توده اطلاعات چگونه است؟ {#how-are-blobs-verified}

رول‌آپ‌ها تراکنش‌هایی را که اجرا می‌کنند در قالب توده‌های داده‌ها منتشر می‌کنند. همچنین «تعهدی» را نسبت به داده‌ها منتشر می‌کنند. آن‌ها این کار را با نصب یک تابع چند جمله‌ای به داده‌ها انجام می‌دهند. سپس این تابع را می‌توان در نقاط مختلف ارزیابی کرد. به عنوان مثال، تابع بسیار ساده `f(x) = 2x-1` را درنظر بگیرید. سپس، این تابع را می‌توانیم برای متغیرهای `x = 1` ،`x = 2` ،`x = 3` ارزیابی کنیم، که نتایج `1, 3, 5` را به ما می‌دهد. هر تأییدکننده همین تابع را برای داده‌ها اعمال و آن را در همان نقاط ارزیابی می‌کند. هربار که داده‌های اصلی تغییر کنند، تابع هم یکسان نخواهد بود، و بنابراین مقادیری که در هر نقطه ارزیابی شده‌اند نیز متفاوت خواهند بود. در واقعیت، پروسه تعهد و تأیید پیچیده‌تر است چون در بطن توابع رمزنگاری‌شده قرار گرفته‌اند.

### KZG چیست؟  {#what-is-kzg}

KZG مخفف نام سه [نویسنده اصلی](https://link.springer.com/chapter/10.1007/978-3-642-17373-8_11) Kate-Zaverucha-Goldberg طرحی است که توده‌ای از داده‌ها را در یک [تعهدنامه رمزنگاری‌شده](https://dankradfeist.de/ethereum/2020/06/16/kate-polynomial-commitments.html) کوچک خلاصه می‌کند. برای اطمینان از این که رول‌آپ‌ها رفتار درست دارند، توده داده‌های ارسال‌شده از طرف رول‌آپ‌ها باید تأیید شوند. در این فرایند، یک اثبات‌کننده تراکنش‌های موجود در توده داده‌ها را مجدداً اجرا می‌‌کند تا معتبر بودن تعهد بررسی شود. از نظر مفهومی، این روش شبیه همان کاری است که کاربرهای اجرا، با استفاده از اثبات‌های Merkle، برای بررسی اعتبار تراکنش‌های اتریوم در لایه 1 انجام می‌دهند. KZG روشی جایگزین برای اثبات است که یک معادله چند جمله‌ای را به داده‌ها الصاق می‌کند. تعهد مذکور صحت این معادله را در برخی مخفی نقاط داده‌ ارزیابی می‌کند. یک اثبات‌کننده، همان معادله چندجمله‌ای را روی داده الصاق می‌کند و با همان مقادیر ارزیابی می‌کند تا یکسان بودن نتایج را بررسی کند. این فرایند روشی برای تأیید داده‌هایی سازگار با تکنیک‌های دانش صفر است که بعضی از رول‌آپ‌ها و متعاقباً بخش‌‌هایی از پروتکل اتریوم بکار می‌برند.

### مراسم KZG چه بود؟ {#what-is-a-kzg-ceremony}

مراسم KZG راهی برای بسیاری از افراد از سراسر جامعه اتریوم بود تا به طور جمعی یک رشته تصادفی مخفی از اعداد را تولید کنند که می‌تواند برای تأیید برخی از داده‌ها استفاده شود. نکته بسیار مهم این است که این رشته از اعداد ناشناخته‌اند و کسی نمی‌تواند دوباره آن‌ها را تولید کند. برای اطمینان از این امر، هر فردی که در مراسم شرکت کرد، یک رشته از شرکت کننده قبلی دریافت کرد. سپس مقادیر تصادفی جدیدی ایجاد کردند (مثلاً با اجازه دادن به مرورگر خود برای اندازه گیری حرکت ماوس) و آن را با مقدار قبلی ترکیب کردند. سپس عدد را برای شرکت‌کننده بعدی ارسال کردند و آن را از دستگاه محلی خود حذف کردند. تا زمانی که یک نفر در مراسم این کار را صادقانه انجام دهد، عدد نهایی برای مهاجم غیرقابل تشخیص خواهد بود.

پمراسم EIP-4844 KZG برای عموم آزاد بود و ده ها هزار نفر برای اضافه کردن آنتروپی (انتخاب تصادفی) خود شرکت کردند. در مجموع بیش از 140،000 مشارکت کننده وجود داشت که آن مراسم را به بزرگترین مراسم از نوع خود در جهان تبدیل کردند. وقتی اعتبار تشریفات زیر سؤال می‌رود که 100 درصد شرکت‌کنندگان فعالیت خود را به‌طور فعالانه از روی فریبکاری انجام دهند. از نقطه‌نظر شرکت‌کنندگان، اگر بدانند که کارشان را صادقانه انجام داده‌اند، نیازی نیست به شخص دیگری اعتماد کنند زیرا می‌دانند که امنیت تشریفات را تأمین کرده‌اند (شرط یک شرکت‌کننده درستکار از میان N شرکت‌‌کننده را که لازمه صحت روند است شخصاً تضمین کرده‌اند).

<ExpandableCard title="کاربرد عدد تصادفی از تشریفات KZG چیست؟" eventCategory="/roadmap/danksharding" eventName="clicked why is the random number from the KZG ceremony used for?">

هنگامی که یک رول‌‌آپ داده را در یک توده پست می کند، آنها یک "تعهد" را ارائه می دهند که روی زنجیره پست می کنند. این تعهد نتیجه ارزیابی یک معادله چندجمله‌ای است که در نقاطی مشخص به داده‌ها الصاق شده‌اند. این نقاط با اعداد تصادفی تولیدشده در تشریفات KZG تعریف می‌شوند. سپس اثبات‌کنندگان می‌توانند معادله چندجمله‌ای را در همان نقاط ارزیابی کنند تا داده‌ها را تأیید کنند - اگر به همان مقادیر برسند، داده‌ها درست است.

</ExpandableCard>

<ExpandableCard title="چرا داده‌های تصادفی KZG باید مخفی بماند؟" eventCategory="/roadmap/danksharding" eventName="clicked why does the KZG random data have to stay secret?">

اگر کسی مکان‌های تصادفی مورد استفاده برای تعهد را بداند، به راحتی می‌تواند یک چندجمله‌ای جدید ایجاد کند که در آن نقاط خاص قرار بگیرد (یعنی نوعی «برخورد»). این بدان معنی است که آنها می‌توانند داده‌ها را به توده اضافه یا از آن حذف کنند و همچنان یک مدرک معتبر ارائه دهند. برای جلوگیری از این امر، به جای دادن مکان‌های مخفی واقعی به اثبات‌کنندگان، آنها در واقع مکان‌هایی را دریافت می‌کنند که در یک «جعبه سیاه» رمزنگاری، با استفاده از منحنی‌های بیضوی پیچیده شده‌اند. اینها به طور مؤثر مقادیر را به گونه‌ای درهم می‌زنند که امکان مهندسی معکوس روی مقادیر اصلی وجود ندارد، اما با برخی از اثبات‌کننده‌ها و تأییدکنندگان باهوش در حیطه جبر، همچنان می‌توانند چندجمله‌ای‌ها را در نقاطی که نشان می‌دهند ارزیابی کنند.

</ExpandableCard>

<InfoBanner isWarning mb={8}>
  نه دنک‌شاردینگ و نه پروتو-دنک‌شاردینگ از مدل سنتی "شاردینگ" پیروی نمی‌کنند که هدف آن تقسیم بلاکچین به چندین بخش است. زنجیره‌های شارد (خرده‌زنجیره‌ها) دیگر بخشی از نقشه راه نیستند. در عوض، Danksharding از نمونه‌گیری داده‌های توزیع‌شده در توده‌ها برای مقیاس‌بندی اتریوم استفاده می‌کند. اجرای این بسیار ساده‌تر است. گاهی اوقات، از این مدل تحت عنوان «شاردینگ داده‌ها» یاد می‌شود.
</InfoBanner>

## Danksharding چیست؟ {#what-is-danksharding}

Danksharding تحقق کامل مقیاس‌بندی رول‌آپی است که با Proto-Danksharding آغاز شده بود. Danksharding در اتریوم فضای عظیمی را برای رول‌آپ‌ها فراهم می‌کند تا داده‌های تراکنش‌های فشرده‌شده را از شبکه بیرون کند. این بدان معناست که اتریوم می‌تواند با پشتیبانی آسان از صدها رول‌آپ جداگانه، رؤیای پردازش میلیون‌ها تراکنش در ثانیه را به واقعیت تبدیل کند.

روش کار این است که توده‌های متصل به بلوک ها را از شش (6) در پروتو-دنک‌شاردینگ به 64 در دنک‌شاردینگ کامل گسترش می دهد. بقیه تغییرات مورد نیاز همگی به‌روزرسانی‌هایی در نحوه عملکرد کلاینت اجماع است تا بتواند به توده‌های اطلاعاتی جدید و بزرگ رسیدگی کند. تعدادی از این تغییراتی که هم‌اکنون در نقشه راه وجود دارد برای اهداف دیگری مستقل از Danksharding عمل می‌کنند. به عنوان مثال، برای Danksharding لازم است تفکیک پیشنهاددهنده و سازنده اجرا شده باشد. این ارتقا وظایف ساخت بلوک و پیشنهاد بلوک را بین اعتبارسنج‌های مختلف از هم تفکیک می‌کند. همچنین، در Danksharding نمونه‌گیری در دسترس بودن داده‌ها ضروری است، همانطور که برای توسعه تین‌کلاینت‌هایی که داده‌های تاریخی زیادی ذخیره نمی‌کنند لازم است (کلاینت‌های بدون حالت).

<ExpandableCard title="چرا Danksharding به تفکیک پیشنهاددهنده و سازنده نیاز دارد؟" eventCategory="/roadmap/danksharding" eventName="clicked why does danksharding require proposer-builder separation?">

جداسازی پیشنهاددهنده-سازنده برای اینکه تأییدکننده‌های منفرد نیازی به ایجاد تعهدات و اثبات‌های گران‌قیمت برای توده داده‌ای با حجم 32 مگابایت نداشته باشند ضروری است. این امر فشار زیادی را بر سهام‌گذاران خانگی وارد می‌کند و آن‌ها را ملزم به سرمایه‌گذاری روی سخت‌افزار قدرتمندتر می‌کند که به غیرمتمرکزسازی آسیب می‌زند. در عوض، متخصصان بلاک‌سازی مسئولیت این کار محاسباتی گران‌قیمت را بر عهده می‌گیرند. سپس، بلوک‌های خود را برای پیشنهادکنندگان بلوک جهت پخش در دسترس قرار می‌دهند. پیشنهاددهنده بلوک به سادگی بلوکی را انتخاب می‌کند که بیشترین سود را دارد. هرکسی می‌تواند توده‌ها را ارزان و سریع تأیید کند، به این معنی که کلیه اعتبارسنج‌های عادی می‌توانند بررسی کنند که بلوک‌سازان رفتاری صادقانه داشته باشند. بدین ترتیب، توده‌های بزرگ بدون به خطر انداختن فرایند غیرمتمرکزسازی می‌توانند پردازش شوند. بلوک‌سازانی که رفتار نامناسب دارند را می‌توان به سادگی از شبکه خارج و بیرون انداخت - دیگران به جای آنها وارد کار خواهند شد زیرا بلوک‌سازی یک فعالیت سودآور است.

</ExpandableCard>

<ExpandableCard title="چرا Danksharding به نمونه‌گیری در دسترس بودن داده‌ها نیاز دارد؟" eventCategory="/roadmap/danksharding" eventName="clicked why does danksharding require data availability sampling?">

نمونه‌گیری از در دسترس بودن داده‌ها برای اعتبارسنج‌ها لازم است تا روند تأیید داده‌های توده‌ها را سریع و کارآمد انجام دهند. با استفاده از نمونه‌گیری در دسترس بودن داده‌ها، اعتبارسنج‌ها می‌توانند بسیار مطمئن باشند که داده‌های توده‌ها در دسترس بوده و به درستی انجام شده باشد. هریک از اعتبارسنج‌ها می‌توانند به طور تصادفی از چند نقطه داده نمونه‌برداری کنند و یک اثبات ایجاد کند، به این معنی که اعتبارسنج مجبور نیست کل توده را بررسی کند. اگر داده‌ای از دست رفته باشد، به سرعت شناسایی می‌شود و توده رد می‌شود.

</ExpandableCard>

### پیشرفت فعلی {#current-progress}

هنوز چند سالی با اجرای کامل Danksharding فاصله داریم. در این بین، مراسم KZG با بیش از 140،000 مشارکت کننده به پایان رسید و [EIP](https://eips.ethereum.org/EIPS/eip-4844) مربوط به پروتو-دنک‌شاردینگ به بلوغ رسید. این پیشنهاد به طور کامل در همه شبکه‌های آزمایشی پیاده‌سازی شده و با ارتقای شبکه Cancun-Deneb ("Dencun") در مارس 2024 در شبکه اصلی پخش شد.

### بیشتر بخوانید {#further-reading}

- [یادداشت‌های Proto-Danksharding‏](https://notes.ethereum.org/@vbuterin/proto_danksharding_faq) - _‏Vitalik Buterin‏_
- [یادداشت‌های Dankrad در مورد Danksharding](https://notes.ethereum.org/@dankrad/new_sharding)
- [گفتگوی Dankrad و Proto و Vitalik درباره Danksharding](https://www.youtube.com/watch?v=N5p0TB77flM)
- [تشریفات KZG](https://ceremony.ethereum.org/)
- [بحث دِوکان Carl Beekhuizen در مورد تنظیمات قابل اعتماد](https://archive.devcon.org/archive/watch/6/the-kzg-ceremony-or-how-i-learnt-to-stop-worrying-and-love-trusted-setups/?tab=YouTube)
- [اطلاعات بیشتر در مورد نمونه‌گیری در دسترس بودن داده برای توده‌ها](https://hackmd.io/@vbuterin/sharding_proposal#ELI5-data-availability-sampling)
- [سخنان Dankrad Feist در مورد تعهدات و اثبات‌های KZG](https://youtu.be/8L2C6RDMV9Q)
- [تعهدات چندجمله‌ای KZG](https://dankradfeist.de/ethereum/2020/06/16/kate-polynomial-commitments.html)
