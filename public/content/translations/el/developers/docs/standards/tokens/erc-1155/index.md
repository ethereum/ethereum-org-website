---
title: ERC-1155 Πρότυπο Πολλαπλών Ψηφιακών Στοιχείων
description:
lang: el
---

## Εισαγωγή {#introduction}

Μια τυπική διεπαφή για συμβόλαια που διαχειρίζονται πολλούς τύπους κρυπτονομισμάτων. Ένα απλό συμβόλαιο που έχει αναπτυχθεί μπορεί να περιλαμβάνει κάθε συνδυασμό εναλλάξιμων κρυπτοπαραστατικών, μη εναλλάξιμων κρυπτοπαραστατικών ή άλλων παραμέτρων (π.χ. ημι-εναλλάξιμα κρυπτοπαραστατικά).

**Τι εννοούμε με το πρότυπο πολλαπλών στοιχείων;**

Η ιδέα είναι απλή και επιδιώκει να δημιουργήσει μια διεπαφή έξυπνου συμβολαίου που μπορεί να αντιπροσωπεύει και να ελέγχει οποιοδήποτε αριθμό τύπων εναλλάξιμων και μη εναλλάξιμων ψηφιακών στοιχείων. Με αυτόν τον τρόπο, ένα ψηφιακό στοιχείο ERC-1155 μπορεί να έχει τις ίδιες λειτουργίες με ένα ψηφιακό στοιχείο [ERC-20](/developers/docs/standards/tokens/erc-20/) και [ERC-721](/developers/docs/standards/tokens/erc-721/) ή ακόμη και τα δύο ταυτόχρονα. Βελτιώνει τη λειτουργικότητα τόσο του προτύπου ERC-20 όσο και του ERC-721, καθιστώντας το πιο αποτελεσματικό και διορθώνοντας προφανή σφάλματα υλοποίησης.

Το ψηφιακό στοιχείο ERC-1155 περιγράφεται πλήρως στο [EIP-1155](https://eips.ethereum.org/EIPS/eip-1155).

## Προαπαιτούμενα {#prerequisites}

Για να κατανοήσετε καλύτερα αυτή τη σελίδα, σας συνιστούμε να διαβάσετε πρώτα για τα [πρότυπα ψηφιακών στοιχείων](/developers/docs/standards/tokens/) [ERC-20](/developers/docs/standards/tokens/erc-20/) και [ERC-721](/developers/docs/standards/tokens/erc-721/).

## Λειτουργίες και Χαρακτηριστικά ERC-1155: {#body}

- [Μεταφορά παρτίδας](#batch_transfers): Μεταφορά πολλών περιουσιακών στοιχείων με μία μόνο κλήση.
- [Υπόλοιπο παρτίδας](#batch_balance): Λήψη των υπολοίπων πολλών περιουσιακών στοιχείων με μία μόνο κλήση.
- [Έγκριση παρτίδας](#batch_approval): Έγκριση όλων των ψηφιακών στοιχείων σε μια διεύθυνση.
- [Hooks](#receive_hook): Λήψη token hook.
- [Υποστήριξη NFT](#nft_support): Εάν η προσφορά είναι μόνο 1, αντιμετωπίστε την ως NFT.
- [Κανόνες ασφαλούς μεταφοράς](#safe_transfer_rule): Σύνολο κανόνων για ασφαλή μεταφορά.

### Μεταφορές παρτίδας {#batch-transfers}

Η μεταφορά παρτίδας λειτουργεί πολύ παρόμοια με τις κανονικές μεταφορές ERC-20. Ας δούμε τη συνάρτηση `transferFrom` ERC-20:

```solidity
// ERC-20
function transferFrom(address from, address to, uint256 value) external returns (bool);

// ERC-1155
function safeBatchTransferFrom(
    address _from,
    address _to,
    uint256[] calldata _ids,
    uint256[] calldata _values,
    bytes calldata _data
) external;
```

Η μόνη διαφορά στο ERC-1155 είναι ότι περνάμε τις τιμές ως μια σειρά και περνάμε επίσης μια σειρά από αναγνωριστικά. Για παράδειγμα, `ids= [3, 6, 13]` και των `values= [100, 200, 5]`, οι προκύπτουσες μεταφορές θα είναι

1. Μεταφορά 100 ψηφιακών στοιχείων με id 3 από `_from` σε `_to`.
2. Μεταφορά 200 ψηφιακών στοιχείων με id 6 από `_from` σε `_to`.
3. Μεταφορά 5 ψηφιακών στοιχείων με id 13 από `_from` σε `_to`.

Στο ERC-1155 υπάρχει μόνο `transferFrom`, και όχι `transfer`. Για να το χρησιμοποιήσετε σαν ένα κανονικό `transfer`, απλά ορίστε το στη διεύθυνση "από" στη διεύθυνση που ζητά τη συνάρτηση.

### Υπόλοιπο παρτίδας {#batch-balance}

Η αντίστοιχη κλήση `balanceOf` του ERC-20 έχει επίσης τη συνάρτηση συνεργάτη της με υποστήριξη παρτίδας. Ως υπενθύμιση, αυτή είναι η έκδοση ERC-20:

```solidity
// ERC-20
function balanceOf(address owner) external view returns (uint256);

// ERC-1155
function balanceOfBatch(
    address[] calldata _owners,
    uint256[] calldata _ids
) external view returns (uint256[] memory);
```

Ακόμη απλούστερη για την κλήση ισοζυγίου, μπορούμε να ανακτήσουμε πολλαπλά ισοζύγια σε μια ενιαία κλήση. Περνάμε τη σειρά των κατόχων, ακολουθούμενη από τη σειρά των αναγνωριστικών token.

Για παράδειγμα, το `_ids=[3, 6, 13]` και `_owners=[0xbeef..., 0x1337..., 0x1111...]`, η τιμή του αποτελέσματος θα είναι

```solidity
[
    balanceOf(0xbeef...),
    balanceOf(0x1337...),
    balanceOf(0x1111...)
]
```

### Έγκριση παρτίδας {#batch-approval}

```solidity
// ERC-1155
function setApprovalForAll(
    address _operator,
    bool _approved
) external;

function isApprovedForAll(
    address _owner,
    address _operator
) external view returns (bool);
```

Οι εγκρίσεις είναι ελαφρώς διαφορετικές από το ERC-20. Αντί να εγκρίνετε συγκεκριμένα ποσά, ορίζετε έναν χειριστή ως εγκεκριμένο ή μη εγκεκριμένο μέσω του `setApprovalForAll`.

Η ανάγνωση της τρέχουσας κατάστασης μπορεί να γίνει μέσω του `isApprovedForAll`. Όπως μπορείτε να δείτε, είναι μια λειτουργία όλα ή τίποτα. Δεν μπορείτε να ορίσετε πόσα ψηφιακά στοιχεία θα εγκρίνετε ή καν ποια κατηγορία ψηφιακού στοιχείου αφορά.

Αυτό έχει σχεδιαστεί σκόπιμα με γνώμονα την απλότητα. Μπορείτε να τα εγκρίνετε όλα για μία διεύθυνση.

### Receive Hook {#receive-hook}

```solidity
function onERC1155BatchReceived(
    address _operator,
    address _from,
    uint256[] calldata _ids,
    uint256[] calldata _values,
    bytes calldata _data
) external returns(bytes4);
```

Δεδομένης της υποστήριξης [EIP-165](https://eips.ethereum.org/EIPS/eip-165), το ERC-1155 υποστηρίζει τα hooks λήψης μόνο για έξυπνα συμβόλαια. Η συνάρτηση hook πρέπει να επιστρέφει μια μαγική προκαθορισμένη τιμή bytes4 που δίνεται ως:

```solidity
bytes4(keccak256("onERC1155BatchReceived(address,address,uint256[],uint256[],bytes)"))
```

Όταν το συμβαλλόμενο μέρος που λαμβάνει επιστρέφει αυτήν την τιμή, υποτίθεται ότι το συμβαλλόμενο μέρος αποδέχεται τη μεταφορά και γνωρίζει πώς να χειρίζεται τα token ERC-1155. Ωραία, τέλος τα κολλημένα token σε ένα συμβόλαιο!

### Υποστήριξη NFT {#nft-support}

Όταν η προσφορά είναι μόνο μία, το token είναι ουσιαστικά ένα μη εναλλάξιμο token (NFT). Και όπως είναι τυπικό για το ERC-721, μπορείτε να ορίσετε μια διεύθυνση URL μεταδεδομένων. Η διεύθυνση URL μπορεί να διαβαστεί και να τροποποιηθεί από τους πελάτες, δείτε [εδώ](https://eips.ethereum.org/EIPS/eip-1155#metadata).

### Κανόνας Ασφαλούς Μεταφοράς {#safe-transfer-rule}

Έχουμε ήδη αναφερθεί σε μερικούς κανόνες ασφαλούς μεταφοράς στις προηγούμενες εξηγήσεις. Αλλά ας δούμε τους πιο σημαντικούς από τους κανόνες:

1. Ο αποστολέας πρέπει να έχει εγκριθεί για να ξοδέψει τα ψηφιακά στοιχεία για τη διεύθυνση `_from` ή ο αποστολέας πρέπει να ισούται με `_from`.
2. Η κλήση μεταφοράς πρέπει να αναστρέφεται εάν
   1. `_to` η διεύθυνση είναι 0.
   2. Το μήκος του `_ids` δεν είναι ίδιο με το μήκος του `_values`.
   3. Οποιοδήποτε από τα υπόλοιπα του κατόχου ή των κατόχων για το ή τα token στο `_ids` είναι χαμηλότερο από τα αντίστοιχα ποσά στο `_values` που αποστέλλονται στον παραλήπτη.
   4. Προκύπτει οποιοδήποτε άλλο σφάλμα.

_Σημείωση_: Όλες οι συναρτήσεις παρτίδας συμπεριλαμβανομένης του hook υπάρχουν επίσης ως εκδόσεις χωρίς παρτίδα. Αυτό γίνεται για απόδοση gas, λαμβάνοντας υπόψη ότι η μεταφορά μόνο ενός περιουσιακού στοιχείου θα είναι πιθανώς ο πιο συχνά χρησιμοποιούμενος τρόπος. Τα παραλείψαμε για απλότητα στις εξηγήσεις, συμπεριλαμβανομένων των κανόνων ασφαλούς μεταφοράς. Τα ονόματα είναι ίδια, απλώς αφαιρέστε το 'Batch'.

## Περισσότερες πληροφορίες {#further-reading}

- [EIP-1155: Πρότυπα Πολλαπλών Ψηφιακών Στοιχείων](https://eips.ethereum.org/EIPS/eip-1155)
- [ERC-1155: Τεκμηρίωση Openzeppelin](https://docs.openzeppelin.com/contracts/5.x/erc1155)
- [ERC-1155: Αποθετήριο GitHub](https://github.com/enjin/erc-1155)
- [Alchemy NFT API](https://docs.alchemy.com/alchemy/enhanced-apis/nft-api)
