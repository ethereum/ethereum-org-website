---
title: "स्मार्ट अनुबंध सुरक्षा उपकरणों के लिए एक गाइड"
description: "तीन विभिन्न परीक्षण और प्रोग्राम विश्लेषण तकनीकों का एक अवलोकन"
author: "Trailofbits"
lang: hi
tags: [ "सोलिडीटी", "स्मार्ट अनुबंध", "सुरक्षा" ]
skill: intermediate
published: 2020-09-07
source: "सुरक्षित अनुबंध बनाना"
sourceUrl: https://github.com/crytic/building-secure-contracts/tree/master/program-analysis
---

हम तीन विशिष्ट परीक्षण और प्रोग्राम विश्लेषण तकनीकों का उपयोग करने जा रहे हैं:

- **[Slither](/developers/tutorials/how-to-use-slither-to-find-smart-contract-bugs/) के साथ स्थैतिक विश्लेषण।** प्रोग्राम के सभी पथों का अनुमान लगाया जाता है और विभिन्न प्रोग्राम प्रस्तुतियों (जैसे, नियंत्रण-प्रवाह-ग्राफ) के माध्यम से एक ही समय में विश्लेषण किया जाता है।
- **[Echidna](/developers/tutorials/how-to-use-echidna-to-test-smart-contracts/) के साथ फ़ज़िंग।** कोड को लेनदेन की छद्म-यादृच्छिक पीढ़ी के साथ निष्पादित किया जाता है। फ़ज़र दी गई संपत्ति का उल्लंघन करने के लिए लेनदेन का एक क्रम खोजने का प्रयास करेगा।
- **[Manticore](/developers/tutorials/how-to-use-manticore-to-find-smart-contract-bugs/) के साथ प्रतीकात्मक निष्पादन।** एक औपचारिक सत्यापन तकनीक, जो प्रत्येक निष्पादन पथ को एक गणितीय सूत्र में अनुवादित करती है, जिस पर शीर्ष बाधाओं की जाँच की जा सकती है।

प्रत्येक तकनीक के फायदे और नुकसान हैं, और यह [विशिष्ट मामलों](#determining-security-properties) में उपयोगी होगी:

| तकनीक                | उपकरण     | उपयोग                     | गति   | चूके हुए बग | झूठे अलार्म |
| -------------------- | --------- | ------------------------- | ----- | ----------- | ----------- |
| स्थैतिक विश्लेषण     | Slither   | CLI और स्क्रिप्ट          | सेकंड | मध्यम       | कम          |
| फ़ज़िंग              | Echidna   | Solidity गुण              | मिनट  | कम          | कोई नहीं    |
| प्रतीकात्मक निष्पादन | Manticore | Solidity गुण और स्क्रिप्ट | घंटे  | कोई नहीं\*  | कोई नहीं    |

\* यदि सभी पथ बिना टाइमआउट के खोजे जाते हैं

**Slither** सेकंड के भीतर अनुबंधों का विश्लेषण करता है, हालांकि, स्थैतिक विश्लेषण से झूठे अलार्म हो सकते हैं और जटिल जांच (जैसे, अंकगणितीय जांच) के लिए कम उपयुक्त होगा। बिल्ट-इन डिटेक्टरों तक पुश-बटन पहुंच के लिए API के माध्यम से या उपयोगकर्ता-परिभाषित जांच के लिए API के माध्यम से Slither चलाएं।

**Echidna** को कई मिनट तक चलने की आवश्यकता है और यह केवल सही सकारात्मक परिणाम देगा। Echidna Solidity में लिखे गए उपयोगकर्ता-प्रदत्त सुरक्षा गुणों की जाँच करता है। यह बग्स को छोड़ सकता है क्योंकि यह यादृच्छिक अन्वेषण पर आधारित है।

**Manticore** "सबसे भारी वजन" विश्लेषण करता है। Echidna की तरह, Manticore उपयोगकर्ता-प्रदत्त गुणों को सत्यापित करता है। इसे चलाने में अधिक समय लगेगा, लेकिन यह किसी संपत्ति की वैधता साबित कर सकता है और झूठे अलार्म की रिपोर्ट नहीं करेगा।

## सुझाया गया वर्कफ़्लो {#suggested-workflow}

यह सुनिश्चित करने के लिए कि अब कोई साधारण बग मौजूद नहीं है या बाद में पेश किया जाएगा, Slither के अंतर्निहित डिटेक्टरों से शुरू करें। विरासत, चर निर्भरता और संरचनात्मक मुद्दों से संबंधित गुणों की जांच के लिए Slither का उपयोग करें। जैसे-जैसे कोडबेस बढ़ता है, स्टेट मशीन के अधिक जटिल गुणों का परीक्षण करने के लिए Echidna का उपयोग करें। Solidity से अनुपलब्ध सुरक्षा के लिए कस्टम चेक विकसित करने के लिए Slither पर फिर से जाएं, जैसे कि किसी फ़ंक्शन को ओवरराइड करने से बचाना। अंत में, महत्वपूर्ण सुरक्षा गुणों के लक्षित सत्यापन के लिए Manticore का उपयोग करें, जैसे, अंकगणितीय संचालन।

- सामान्य समस्याओं को पकड़ने के लिए Slither के CLI का उपयोग करें
- अपने अनुबंध के उच्च-स्तरीय सुरक्षा गुणों का परीक्षण करने के लिए Echidna का उपयोग करें
- कस्टम स्थैतिक जांच लिखने के लिए Slither का उपयोग करें
- एक बार जब आप महत्वपूर्ण सुरक्षा गुणों का गहन आश्वासन चाहते हैं तो Manticore का उपयोग करें

**इकाई परीक्षणों पर एक नोट**। उच्च-गुणवत्ता वाले सॉफ्टवेयर बनाने के लिए इकाई परीक्षण आवश्यक हैं। हालांकि, ये तकनीकें सुरक्षा खामियों को खोजने के लिए सबसे उपयुक्त नहीं हैं। वे आम तौर पर कोड के सकारात्मक व्यवहार का परीक्षण करने के लिए उपयोग किए जाते हैं (यानी, कोड सामान्य संदर्भ में अपेक्षा के अनुरूप काम करता है), जबकि सुरक्षा खामियां उन मामलों में रहती हैं जिन पर डेवलपर्स ने विचार नहीं किया। दर्जनों स्मार्ट अनुबंध सुरक्षा समीक्षाओं के हमारे अध्ययन में, [इकाई परीक्षण कवरेज का हमारे क्लाइंट के कोड में पाई गई सुरक्षा खामियों की संख्या या गंभीरता पर कोई प्रभाव नहीं पड़ा](https://blog.trailofbits.com/2019/08/08/246-findings-from-our-smart-contract-audits-an-executive-summary/)।

## सुरक्षा गुणों का निर्धारण {#determining-security-properties}

अपने कोड का प्रभावी ढंग से परीक्षण और सत्यापन करने के लिए, आपको उन क्षेत्रों की पहचान करनी होगी जिन पर ध्यान देने की आवश्यकता है। चूंकि सुरक्षा पर खर्च किए गए आपके संसाधन सीमित हैं, इसलिए अपने प्रयास को अनुकूलित करने के लिए अपने कोडबेस के कमजोर या उच्च-मूल्य वाले हिस्सों को निर्धारित करना महत्वपूर्ण है। खतरा मॉडलिंग मदद कर सकता है। समीक्षा करने पर विचार करें:

- [रैपिड रिस्क असेसमेंट](https://infosec.mozilla.org/guidelines/risk/rapid_risk_assessment.html) (समय कम होने पर हमारा पसंदीदा दृष्टिकोण)
- [डेटा-केंद्रित सिस्टम थ्रेट मॉडलिंग के लिए गाइड](https://csrc.nist.gov/pubs/sp/800/154/ipd) (उर्फ NIST 800-154)
- [Shostack थ्रेट मॉडलिंग](https://www.amazon.com/Threat-Modeling-Designing-Adam-Shostack/dp/1118809998)
- [STRIDE](https://wikipedia.org/wiki/STRIDE_\(security\)) / [DREAD](https://wikipedia.org/wiki/DREAD_\(risk_assessment_model\))
- [PASTA](https://wikipedia.org/wiki/Threat_model#P.A.S.T.A.)
- [दावों का उपयोग](https://blog.regehr.org/archives/1091)

### घटक {#components}

यह जानना कि आप क्या जाँचना चाहते हैं, आपको सही उपकरण चुनने में भी मदद करेगा।

स्मार्ट अनुबंधों के लिए अक्सर प्रासंगिक व्यापक क्षेत्रों में शामिल हैं:

- **स्टेट मशीन।** अधिकांश अनुबंधों को स्टेट मशीन के रूप में दर्शाया जा सकता है। यह जांचने पर विचार करें कि (1) कोई अमान्य स्थिति तक नहीं पहुंचा जा सकता है, (2) यदि कोई स्थिति मान्य है तो उस तक पहुंचा जा सकता है, और (3) कोई भी स्थिति अनुबंध को फंसाती नहीं है।

  - Echidna और Manticore स्टेट-मशीन विनिर्देशों का परीक्षण करने के लिए पसंदीदा उपकरण हैं।

- **एक्सेस कंट्रोल।** यदि आपके सिस्टम में विशेषाधिकार प्राप्त उपयोगकर्ता हैं (उदाहरण के लिए, एक मालिक, नियंत्रक, ...) आपको यह सुनिश्चित करना होगा कि (1) प्रत्येक उपयोगकर्ता केवल अधिकृत कार्य कर सकता है और (2) कोई भी उपयोगकर्ता अधिक विशेषाधिकार प्राप्त उपयोगकर्ता से कार्यों को ब्लॉक नहीं कर सकता है।

  - Slither, Echidna और Manticore सही एक्सेस कंट्रोल की जांच कर सकते हैं। उदाहरण के लिए, Slither यह जांच सकता है कि केवल श्वेतसूचीबद्ध फ़ंक्शन में onlyOwner संशोधक की कमी है। Echidna और Manticore अधिक जटिल एक्सेस कंट्रोल के लिए उपयोगी हैं, जैसे कि केवल तभी अनुमति दी जाती है जब अनुबंध किसी दी गई स्थिति में पहुंचता है।

- **अंकगणितीय संचालन।** अंकगणितीय संचालन की सुदृढ़ता की जाँच करना महत्वपूर्ण है। `SafeMath` का हर जगह उपयोग करना ओवरफ़्लो/अंडरफ़्लो को रोकने के लिए एक अच्छा कदम है, हालांकि, आपको अभी भी अन्य अंकगणितीय खामियों पर विचार करना चाहिए, जिसमें राउंडिंग मुद्दे और अनुबंध को फंसाने वाली खामियां शामिल हैं।

  - Manticore यहाँ सबसे अच्छा विकल्प है। Echidna का उपयोग तब किया जा सकता है जब अंकगणित SMT सॉल्वर के दायरे से बाहर हो।

- **विरासत की शुद्धता।** Solidity अनुबंध कई विरासतों पर बहुत अधिक निर्भर करते हैं। `super` कॉल से गायब शैडोइंग फ़ंक्शन और गलत व्याख्या किए गए c3 रैखिककरण क्रम जैसी गलतियाँ आसानी से पेश की जा सकती हैं।

  - Slither इन मुद्दों का पता लगाने को सुनिश्चित करने वाला उपकरण है।

- **बाहरी इंटरैक्शन।** अनुबंध एक दूसरे के साथ इंटरैक्ट करते हैं, और कुछ बाहरी अनुबंधों पर भरोसा नहीं किया जाना चाहिए। उदाहरण के लिए, यदि आपका अनुबंध बाहरी ओरेकल पर निर्भर करता है, तो क्या यह सुरक्षित रहेगा यदि आधे उपलब्ध ओरेकल से समझौता किया जाता है?

  - Manticore और Echidna आपके अनुबंधों के साथ बाहरी इंटरैक्शन का परीक्षण करने के लिए सबसे अच्छा विकल्प हैं। Manticore में बाहरी अनुबंधों को स्टब करने के लिए एक अंतर्निहित तंत्र है।

- **मानक अनुरूपता।** एथेरियम मानकों (उदाहरण के लिए, ERC20) के डिजाइन में खामियों का इतिहास है। जिस मानक पर आप निर्माण कर रहे हैं, उसकी सीमाओं से अवगत रहें।
  - Slither, Echidna और Manticore आपको किसी दिए गए मानक से विचलन का पता लगाने में मदद करेंगे।

### उपकरण चयन चीटशीट {#tool-selection-cheatsheet}

| घटक               | उपकरण                       | उदाहरण                                                                                                                                                                                                                                                                    |
| ----------------- | --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| स्टेट मशीन        | Echidna, Manticore          |                                                                                                                                                                                                                                                                           |
| एक्सेस कंट्रोल    | Slither, Echidna, Manticore | [Slither अभ्यास 2](https://github.com/crytic/slither/blob/7f54c8b948c34fb35e1d61adaa1bd568ca733253/docs/src/tutorials/exercise2.md), [Echidna अभ्यास 2](https://github.com/crytic/building-secure-contracts/blob/master/program-analysis/echidna/exercises/Exercise-2.md) |
| अंकगणितीय संचालन  | Manticore, Echidna          | [Echidna अभ्यास 1](https://github.com/crytic/building-secure-contracts/blob/master/program-analysis/echidna/exercises/Exercise-1.md), [Manticore अभ्यास 1 - 3](https://github.com/crytic/building-secure-contracts/tree/master/program-analysis/manticore/exercises)      |
| विरासत की शुद्धता | Slither                     | [Slither अभ्यास 1](https://github.com/crytic/slither/blob/7f54c8b948c34fb35e1d61adaa1bd568ca733253/docs/src/tutorials/exercise1.md)                                                                                                                                       |
| बाहरी इंटरैक्शन   | Manticore, Echidna          |                                                                                                                                                                                                                                                                           |
| मानक अनुरूपता     | Slither, Echidna, Manticore | [`slither-erc`](https://github.com/crytic/slither/wiki/ERC-Conformance)                                                                                                                                                                                                   |

आपके लक्ष्यों के आधार पर अन्य क्षेत्रों की जाँच करने की आवश्यकता होगी, लेकिन फोकस के ये मोटे-दाने वाले क्षेत्र किसी भी स्मार्ट अनुबंध प्रणाली के लिए एक अच्छी शुरुआत हैं।

हमारे सार्वजनिक ऑडिट में सत्यापित या परीक्षण किए गए गुणों के उदाहरण हैं। वास्तविक दुनिया की सुरक्षा संपत्तियों की समीक्षा करने के लिए निम्नलिखित रिपोर्टों के `स्वचालित परीक्षण और सत्यापन` अनुभागों को पढ़ने पर विचार करें:

- [0x](https://github.com/trailofbits/publications/blob/master/reviews/0x-protocol.pdf)
- [Balancer](https://github.com/trailofbits/publications/blob/master/reviews/BalancerCore.pdf)
