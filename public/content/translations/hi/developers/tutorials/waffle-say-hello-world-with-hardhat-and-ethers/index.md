---
title: "рд╣рд╛рд░реНрдбрд╣реИрдЯ рдФрд░ рдИрдерд░ рдХреЗ рд╕рд╛рде рд╡рдлрд╝рд▓ рдХрд╛ рд╣реИрд▓реЛ рд╡рд░реНрд▓реНрдб рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓"
description: "рд╣рд╛рд░реНрдбрд╣реИрдЯ рдФрд░ ethers.js рдХреЗ рд╕рд╛рде рдЕрдкрдирд╛ рдкрд╣рд▓рд╛ рд╡рдлрд╝рд▓ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ"
author: "MiZiet"
tags:
  [
    "рд╡рдлрд╝рд▓",
    "рд╕реНрдорд╛рд░реНрдЯ рдЕрдиреБрдмрдВрдз",
    "рд╕реЛрд▓рд┐рдбреАрдЯреА",
    "рдкрд░рд┐рдХреНрд╖рдг",
    "рд╣рд╛рд░реНрдбрд╣реИрдЯ",
    "ethers.js"
  ]
skill: beginner
lang: hi
published: 2020-10-16
---

рдЗрд╕ [рд╡рдлрд╝рд▓](https://ethereum-waffle.readthedocs.io) рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдореЗрдВ, рд╣рдо рд╕реАрдЦреЗрдВрдЧреЗ рдХрд┐ [рд╣рд╛рд░реНрдбрд╣реИрдЯ](https://hardhat.org/) рдФрд░ [ethers.js](https://docs.ethers.io/v5/) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╕рд░рд▓ "рд╣реИрд▓реЛ рд╡рд░реНрд▓реНрдб" рд╕реНрдорд╛рд░реНрдЯ рдЕрдиреБрдмрдВрдз рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреИрд╕реЗ рд╕реЗрдЯ рдЕрдк рдХрд░реЗрдВред рдлрд┐рд░ рд╣рдо рд╕реАрдЦреЗрдВрдЧреЗ рдХрд┐ рдЕрдкрдиреЗ рд╕реНрдорд╛рд░реНрдЯ рдЕрдиреБрдмрдВрдз рдореЗрдВ рдПрдХ рдирдИ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреИрд╕реЗ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рд╡рдлрд╝рд▓ рдХреЗ рд╕рд╛рде рдЗрд╕рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХреИрд╕реЗ рдХрд░реЗрдВред

рдЖрдЗрдП рдПрдХ рдирдпрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдиреЗ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ:

```bash
yarn init
```

рдпрд╛

```bash
npm init
```

рдФрд░ рдЖрд╡рд╢реНрдпрдХ рдкреИрдХреЗрдЬ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:

```bash
yarn add -D hardhat @nomiclabs/hardhat-ethers ethers @nomiclabs/hardhat-waffle ethereum-waffle chai
```

рдпрд╛

```bash
npm install -D hardhat @nomiclabs/hardhat-ethers ethers @nomiclabs/hardhat-waffle ethereum-waffle chai
```

рдЕрдЧрд▓рд╛ рдЪрд░рдг `npx hardhat` рдЪрд▓рд╛рдХрд░ рдПрдХ рд╕реИрдВрдкрд▓ рд╣рд╛рд░реНрдбрд╣реИрдЯ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдирд╛ рд╣реИред

```bash
888    888                      888 888               888
888    888                      888 888               888
888    888                      888 888               888
8888888888  8888b.  888d888 .d88888 88888b.   8888b.  888888
888    888     "88b 888P"  d88" 888 888 "88b     "88b 888
888    888 .d888888 888    888  888 888  888 .d888888 888
888    888 888  888 888    Y88b 888 888  888 888  888 Y88b.
888    888 "Y888888 888     "Y88888 888  888 "Y888888  "Y888

ЁЯС╖ Welcome to Hardhat v2.0.3 ЁЯС╖тАН

? рдЖрдк рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? тАж
тЭп рдПрдХ рд╕реИрдВрдкрд▓ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ
рдПрдХ рдЦрд╛рд▓реА hardhat.config.js рдмрдирд╛рдПрдВ
рдЫреЛрдбрд╝реЗрдВ
```

`Create a sample project` рдЪреБрдиреЗрдВ

рд╣рдорд╛рд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреА рд╕рдВрд░рдЪрдирд╛ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрдиреА рдЪрд╛рд╣рд┐рдП:

```
MyWaffleProject
тФЬтФАтФА contracts
тФВ   тФФтФАтФА Greeter.sol
тФЬтФАтФА node_modules
тФЬтФАтФА scripts
тФВ   тФФтФАтФА sample-script.js
тФЬтФАтФА test
тФВ   тФФтФАтФА sample-test.js
тФЬтФАтФА .gitattributes
тФЬтФАтФА .gitignore
тФЬтФАтФА hardhat.config.js
тФФтФАтФА package.json
```

### рдЕрдм рдЗрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВ: {#now-lets-talk}

- Greeter.sol - рд╣рдорд╛рд░рд╛ рд╕реНрдорд╛рд░реНрдЯ рдЕрдиреБрдмрдВрдз рдЬреЛ рд╕реЙрд▓рд┐рдбрд┐рдЯреА рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ;

```solidity
contract Greeter {
string greeting;

constructor(string memory _greeting) public {
console.log("greeting рдХреЗ рд╕рд╛рде рдПрдХ Greeter рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ:", _greeting);
greeting = _greeting;
}

function greet() public view returns (string memory) {
return greeting;
}

function setGreeting(string memory _greeting) public {
console.log("greeting рдХреЛ '%s' рд╕реЗ '%s' рдореЗрдВ рдмрджрд▓рд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ", greeting, _greeting);
greeting = _greeting;
}
}
```

рд╣рдорд╛рд░реЗ рд╕реНрдорд╛рд░реНрдЯ рдЕрдиреБрдмрдВрдз рдХреЛ рддреАрди рднрд╛рдЧреЛрдВ рдореЗрдВ рдмрд╛рдВрдЯрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

1. рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ - рдЬрд╣рд╛рдВ рд╣рдо `greeting` рдирд╛рдордХ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╡реИрд░рд┐рдПрдмрд▓ рдШреЛрд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ,
2. рдлрдВрдХреНрд╢рди рдЧреНрд░реАрдЯ - рдПрдХ рдлрдВрдХреНрд╢рди рдЬреЛ рдХреЙрд▓ рдХрд┐рдП рдЬрд╛рдиреЗ рдкрд░ `greeting` рд▓реМрдЯрд╛рдПрдЧрд╛,
3. рдлрдВрдХреНрд╢рди рд╕реЗрдЯрдЧреНрд░реАрдЯрд┐рдВрдЧ - рдПрдХ рдлрдВрдХреНрд╢рди рдЬреЛ рд╣рдореЗрдВ `greeting` рдорд╛рди рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

- sample-test.js - рд╣рдорд╛рд░реА рдкрд░реАрдХреНрд╖рдг рдлрд╝рд╛рдЗрд▓

```js
describe("Greeter", function () {
  it("рдмрджрд▓ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж рдЗрд╕реЗ рдирдпрд╛ рдЧреНрд░реАрдЯрд┐рдВрдЧ рд▓реМрдЯрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП", async function () {
    const Greeter = await ethers.getContractFactory("Greeter")
    const greeter = await Greeter.deploy("Hello, world!")

    await greeter.deployed()
    expect(await greeter.greet()).to.equal("Hello, world!")

    await greeter.setGreeting("Hola, mundo!")
    expect(await greeter.greet()).to.equal("Hola, mundo!")
  })
})
```

### рдЕрдЧрд▓реЗ рдЪрд░рдг рдореЗрдВ рд╣рдорд╛рд░реЗ рд╕реНрдорд╛рд░реНрдЯ рдЕрдиреБрдмрдВрдз рдХреЛ рдХрдВрдкрд╛рдЗрд▓ рдХрд░рдирд╛ рдФрд░ рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реИ: {#compiling-and-testing}

рд╡рдлрд╝рд▓ рдкрд░реАрдХреНрд╖рдг Mocha (рдПрдХ рдкрд░реАрдХреНрд╖рдг рдврд╛рдВрдЪрд╛) рдХреЗ рд╕рд╛рде Chai (рдПрдХ рдПрд╕рд░реНрд╢рди рд▓рд╛рдЗрдмреНрд░реЗрд░реА) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред рдЖрдкрдХреЛ рдмрд╕ `npx hardhat test` рдЪрд▓рд╛рдирд╛ рд╣реИ рдФрд░ рдирд┐рдореНрди рд╕рдВрджреЗрд╢ рдХреЗ рдкреНрд░рдХрдЯ рд╣реЛрдиреЗ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдиреА рд╣реИред

```bash
тЬУ рдмрджрд▓ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж рдЗрд╕реЗ рдирдпрд╛ рдЧреНрд░реАрдЯрд┐рдВрдЧ рд▓реМрдЯрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП
```

### рдЕрдм рддрдХ рд╕рдм рдХреБрдЫ рдмрдврд╝рд┐рдпрд╛ рд▓рдЧ рд░рд╣рд╛ рд╣реИ, рдЖрдЗрдП рдЕрдкрдиреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдХреБрдЫ рдФрд░ рдЬрдЯрд┐рд▓рддрд╛ рдЬреЛрдбрд╝реЗрдВ <Emoji text=":slightly_smiling_face:" size={1}/> {#adding-complexity}

рдПрдХ рдРрд╕реА рд╕реНрдерд┐рддрд┐ рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдЬрд╣рд╛рдВ рдХреЛрдИ рдЧреНрд░реАрдЯрд┐рдВрдЧ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдЬреЛрдбрд╝рддрд╛ рд╣реИред рдпрд╣ рдПрдХ рдЙрддреНрд╕рд╛рд╣рднрд░рд╛ рдЧреНрд░реАрдЯрд┐рдВрдЧ рдирд╣реАрдВ рд╣реЛрдЧрд╛, рд╣реИ рдирд╛?  
рдЖрдЗрдП рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдРрд╕рд╛ рди рд╣реЛ:

рдЬрдм рдХреЛрдИ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ рддреЛ рд╣рдо solidity рдХреЗ `revert` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред рдЕрдЪреНрдЫреА рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╣рдо рд╡рдлрд╝рд▓ рдХреЗ chai рдореИрдЪрд░ `to.be.revertedWith()` рдХреЗ рд╕рд╛рде рдЗрд╕ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рдЖрд╕рд╛рдиреА рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

```js
it("рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд╛рд╕ рдХрд░рдиреЗ рдкрд░ рд░рд┐рд╡рд░реНрдЯ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП", async () => {
  const Greeter = await ethers.getContractFactory("Greeter")
  const greeter = await Greeter.deploy("Hello, world!")

  await greeter.deployed()
  await expect(greeter.setGreeting("")).to.be.revertedWith(
    "рдЧреНрд░реАрдЯрд┐рдВрдЧ рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП"
  )
})
```

рд▓рдЧрддрд╛ рд╣реИ рд╣рдорд╛рд░рд╛ рдирдпрд╛ рдкрд░реАрдХреНрд╖рдг рдкрд╛рд╕ рдирд╣реАрдВ рд╣реБрдЖ:

```bash
greeting рдХреЗ рд╕рд╛рде рдПрдХ Greeter рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ: Hello, world!
greeting рдХреЛ 'Hello, world!' рд╕реЗ 'Hola, mundo!' рдореЗрдВ рдмрджрд▓рд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ
    тЬУ рдмрджрд▓ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж рдЗрд╕реЗ рдирдпрд╛ рдЧреНрд░реАрдЯрд┐рдВрдЧ рд▓реМрдЯрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП (1514ms)
greeting рдХреЗ рд╕рд╛рде рдПрдХ Greeter рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ: Hello, world!
greeting рдХреЛ 'Hello, world!' рд╕реЗ '' рдореЗрдВ рдмрджрд▓рд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ
    1) рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд╛рд╕ рдХрд░рдиреЗ рдкрд░ рд░рд┐рд╡рд░реНрдЯ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП


  1 рдкрд╛рд╕ (2s)
  1 рд╡рд┐рдлрд▓
```

рдЖрдЗрдП рдЗрд╕ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд╣рдорд╛рд░реЗ рд╕реНрдорд╛рд░реНрдЯ рдЕрдиреБрдмрдВрдз рдореЗрдВ рд▓рд╛рдЧреВ рдХрд░реЗрдВ:

```solidity
require(bytes(_greeting).length > 0, "рдЧреНрд░реАрдЯрд┐рдВрдЧ рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП");
```

рдЕрдм, рд╣рдорд╛рд░рд╛ setGreeting рдлрдВрдХреНрд╢рди рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ:

```solidity
function setGreeting(string memory _greeting) public {
require(bytes(_greeting).length > 0, "рдЧреНрд░реАрдЯрд┐рдВрдЧ рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП");
console.log("greeting рдХреЛ '%s' рд╕реЗ '%s' рдореЗрдВ рдмрджрд▓рд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ", greeting, _greeting);
greeting = _greeting;
}
```

рдЖрдЗрдП рдлрд┐рд░ рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдПрдБ:

```bash
тЬУ рдмрджрд▓ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж рдЗрд╕реЗ рдирдпрд╛ рдЧреНрд░реАрдЯрд┐рдВрдЧ рд▓реМрдЯрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП (1467ms)
тЬУ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд╛рд╕ рдХрд░рдиреЗ рдкрд░ рд░рд┐рд╡рд░реНрдЯ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (276ms)

2 рдкрд╛рд╕ (2s)
```

рдмрдзрд╛рдИ рд╣реЛ! рдЖрдкрдиреЗ рдпрд╣ рдХрд░ рджрд┐рдЦрд╛рдпрд╛ :)

### рдирд┐рд╖реНрдХрд░реНрд╖ {#conclusion}

рд╣рдордиреЗ рд╡рдлрд╝рд▓, рд╣рд╛рд░реНрдбрд╣реИрдЯ рдФрд░ ethers.js рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд░рд▓ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдпрд╛ред рд╣рдордиреЗ рд╕реАрдЦрд╛ рдХрд┐ рдПрдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреИрд╕реЗ рд╕реЗрдЯ рдЕрдк рдХрд░реЗрдВ, рдПрдХ рдкрд░реАрдХреНрд╖рдг рдХреИрд╕реЗ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рдирдИ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд░реЗрдВред

рдЕрдкрдиреЗ рд╕реНрдорд╛рд░реНрдЯ рдЕрдиреБрдмрдВрдзреЛрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рдмреЗрд╣рддрд░реАрди chai рдореИрдЪрд░реНрд╕ рдХреЗ рд▓рд┐рдП, [рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╡рдлрд╝рд▓ рдХреЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝](https://ethereum-waffle.readthedocs.io/en/latest/matchers.html) рджреЗрдЦреЗрдВред
