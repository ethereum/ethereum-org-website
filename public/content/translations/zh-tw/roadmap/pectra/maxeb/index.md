---
title: "Pectra 升級後的最大有效金額機制"
description: "在 Pectra 升級中了解更多關於 MaxEB 的信息"
lang: zh-tw
---

# MaxEB{#maxeb}

_簡單來說：_ Pectra 強分叉允許以太坊驗證程式將 **類型1** 提款憑證轉換為 **類型2** 提款憑證，從而參與更高的最大有效余額和復利機制。 執行这个操作的官方工具是 Launchpad（啟動面板）。 這個操作無法撤銷。

## 概覽{#overview}

### 誰會受到影響？ {#who-is-affected}

任何運行驗證程式的人——他們通常知道自己所控制的驗證程式的索引（例如：[驗證程式 #12345](https://beaconcha.in/validator/12345)）。 如果您使用協議（例如 Lido CSM 或 Rocket Pool）來運行驗證程式，則必須向他們查詢是否以及何時支援 maxEB。

如果您使用流動性質押代幣（例如 rETH 或 stETH）進行質押，則無需採取任何行動。

### 什麽是 “maxEB” ？ {#what-is-maxeb}

maxEB = 驗證程式的最大有效余額。 在Pectra強分叉之前，單個驗證程式最多可獲得基於32 ETH的收益。 在 Pectra 之後，驗證程式可以選擇，以 1 ETH 為增量單位賺取基於 32 至 2048 ETH 任意余額之間的收益。

### 驗證程式如何參與？ {#how-does-a-validator-opt-in}

驗證程式若要選擇啟用 maxEB的變更，需要將提取憑證從 類型1（Type 1） 轉換為 類型2（Type 2）。 這可在 Pectra 強分叉上線後，於[啟動面板（驗證程式操作）](https://launchpad.ethereum.org/validator-actions)上完成。 正如同從**類型0** → **類型1**，從**類型1**轉換為**類型2**是一個不可逆的過程。

### 什麽是提款憑證？ {#whats-a-withdrawal-credential}

當你運行一個驗證程式時，你會擁有一組提取憑證。 這些信息可以在您的存款數據 Json 文件 中找到，或者您可以在驗證程式的 beaconcha.in [存款標籤](https://beaconcha.in/validator/12345#deposits) 上查看。

1. **類型 0** 提款憑證：如果您的驗證程式的提款憑證以“0x00...”開頭，則您在 Shapella強分叉之前進行了存款，但尚未設置提款地址。

![類型 0 提款憑證](./0x00-wd.png)

2. **類型 1** 提款憑證：如果您的驗證程式的提款憑證以 `0x01...` 開頭，則表示您是在 Shapella 強分叉之後進行的存款，或者您已經將 **類型 0** 憑證轉換為 **類型 1** 憑證。

![類型1提款憑證](./0x01-wd.png)

3. **類型 2** 提款憑證：憑證類型將以 `0x02...` 開頭，並在 Pectra 升級之後啟用。 啟用**類型2**提款憑證的驗證程式也被稱為“**複利驗證程式**”

| **可行的**       | **不可行的**      |
| ------------- | ------------- |
| ✅ 類型 0 → 類型 1 | ❌ 類型 0 → 類型 2 |
| ✅ 類型 1 → 類型 2 | ❌ 類型 1 → 類型 0 |
|               | ❌ 類型 2 → 類型 1 |
|               | ❌ 類型 2 → 類型 0 |

### 風險 {#risks}

MaxEB 允許驗證程式將其全部餘額轉賬給另一個驗證程式。 提交合併請求的使用者應核實其簽名的交易的來源和內容。 利用maxEB特性的官方工具是啟動面板（Launchpad）。 如果您決定使用第三方工具，您應確認以下幾點：

- 源驗證程式的公鑰和提現地址與他們控制的驗證程式相匹配
- 目標驗證程式的公鑰正確且是屬於他們的
- 該請求為轉換操作，而非合併操作，若他們無意將資金轉至另一驗證程式
- 該交易正在由正確的提現地址進行簽名

我們**強烈建議**你在使用任何第三方工具之前，與 [EthStaker 社區](https://ethstaker.org/about)討論。 這有助於驗證你的方法並避免錯誤。 如果您使用了惡意或配置錯誤的工具，**您的整個驗證程式餘額可能會被發送到您無法控制的驗證程式** ——且無法被追回。

## 技術細節 {#technical-details}

### 流程 {#the-flow}

`合併請求` 操作將有兩種用途：

1. 將現有驗證程式從**類型1**轉換為**類型2**驗證程式
2. 將其他驗證程式合併到現有的**類型2**驗證程式中

在將**類型 1** 驗證程式轉換為**類型 2** 驗證程式時，_源驗證程式_和_目標驗證程式_都將是你正在轉換的驗證程式。 這個操作將消耗燃料，並將排在其他合併請求之後。 此隊列與存款隊列**獨立**，不受新驗證程式存款的影響，可通過[pectrified.com](https://pectrified.com/)查看。

要合併驗證程式，您必須擁有一個具有**類型 2** 提幣憑證的_目標驗證程式_。 這是任何驗證程式餘額被合併的目的地，且索引要得到保留。

### 轉換為類型2的要求 {#requirements-for-converting-to-type-2}

這將是您將第一個驗證程式轉換為**類型2**時所需的。 該驗證程式的索引已保留且處於活躍狀態。 對於一個轉換，_源驗證程式_ == _目標驗證程式_

驗證程式必須……

- 處於活躍狀態
- 有**類型1**的取款憑證
- 不處於退出狀態（或被禁用狀態）
- 沒有待處理的手動觸發提款（不適用於自動轉賬）

![轉換示意圖](./conversion.png)

### 合併的條件 {#requirements-for-consolidating}

這是與轉換_相同的操作_，但此時_源驗證者與_目標驗證者\*不同。 目標驗證程式的索引得以保留，並接受來自源驗證程式的餘額。 源驗證程式的索引被置於“已退出”的狀態。

在這種情況下，源驗證程式需要滿足上述所有要求，還要滿足：

- 持續保持活躍至少大約27.3小時（一個共同的委員會周期）

源驗證程式必須

- 擁有**類型 2**的提款憑證
- 沒有在退出狀態。

![合併示意圖](./consolidation.png)

### 合併請求{#the-consolidation-request}

合併請求將會被源驗證程式所關聯的取款地址簽名，且需要具有：

1. 來源驗證程式的地址（例如：`0x15F4B914A0cCd14333D850ff311d6DafbFbAa32b`）
2. 來源驗證程式的公鑰（例如：`0xa1d1ad0714035353258038e964ae9675dc0252ee22cea896825c01458e1807bfad2f9969338798548d9858a571f7425c`）
3. 目標驗證程式的公鑰

在轉換過程中，2和3將保持同樣。 這個操作可以在[Launchpad]上完成（https://launchpad.ethereum.org/）。

### 簽名的要求{#signing-requirements}

要提交“合併請求”，源驗證程式的取款地址必須在請求上簽名。 這證明了對於驗證程式資金的控制權。

### 簽名了什麼？ {#what-is-signed}

使用 `合併請求` 的域名分隔[簽名根](https://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/beacon-chain.md#compute_signing_root)。

- **領域**“領域合并請求”
- **簽名根欄位:**
  - `源公鑰`: `BLSPubkey`
  - `目標公鑰`: `BLSPubkey`
  - `源地址`: `ExecutionAddress`

生成的 **​​BLS 簽名**​​隨請求一同提交。

注意：簽名由取款地址執行，而非通過驗證程式的密鑰。

### 部分取款{#partial-withdrawals}

有着**類型1** 憑證的驗證者會自動地、無需Gas 費地把它們的超額餘額（任何超過 32 ETH的）清理到他們的提款地址。 由於 **類型2**驗證者​​允許以 ​​1 ETH 為增量單位​​進行餘額複利累積，在餘額達到 ​​2048 ETH​​ 之前，系統​​不會自動清理餘額。 在 **類型 2** 驗證程式上的部分提取必須被手動觸發，且需要消耗燃料。

## 合併工具{#consolidation-tooling}

有幾種可以使用的工具來管理合併。 [啟動面板（Launchpad）](https://launchpad.ethereum.org/en/validator-actions) 是由以太坊基金會創建的官方工具。 還有一些由質押社區的實體創建的第三方工具，可能提供該啟動版（Launchpad）未提供的功能。 儘管這裡的工具沒有經過以太坊基金會的審計或認可，社區知名成員的開源工具如下。

| 工具                              | 網站                                                                                                        | 開源                            | 創建者                                            | 已審核                                                                                                                                                | 接口                           | 顯著特徵                                |
| ------------------------------- | --------------------------------------------------------------------------------------------------------- | ----------------------------- | ---------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------- | ----------------------------------- |
| Pectra 質押經理                     | pectrastaking.com                                                                         | 是的，Apache 2.0 | [Pier Two](https://piertwo.com/)               | 否                                                                                                                                                  | 網頁用戶界面                       | Wallet Connect，支援 SAFE              |
| Pectra 驗證程式操作 CLI 工具            | [GitHub](https://github.com/Luganodes/Pectra-Batch-Contract)                                              | 是，MIT                         | [Luganodes](https://www.luganodes.com/)        | 是，Quantstamp [2025 年 5 月](https://certificate.quantstamp.com/full/luganodes-pectra-batch-contract/23f0765f-969a-4798-9edd-188d276c4a2b/index.html) | 指令行                          | 批次處理，可一次用於多個驗證程式                    |
| Ethereal                        | [GitHub](https://github.com/wealdtech/ethereal)                                                           | 是的，Apache 2.0 | [Jim McDonald](https://www.attestant.io/team/) | 否                                                                                                                                                  | 指令行                          | 驗證程式和節點管理的完整功能集                     |
| Siren                           | [GitHub](https://github.com/sigp/siren)                                                                   | 是的，Apache 2.0 | [Sigma Prime](https://sigmaprime.io/)          | 否                                                                                                                                                  | 部分使用命令列，但主要為網頁使用者介面          | 僅在您使用 Lighthouse 共識用戶端時才可運作         |
| Consolideth.app | https://consolideth.app/ [GitHub](https://github.com/Stakely/consolideth) | 是，MIT 授權                      | [Stakely](https://stakely.io/)                 | 否                                                                                                                                                  | 網頁使用者介面，由 Stakely 託管，可免費自行託管 | 支援主流錢包連線，包括透過 WalletConnect 連接 Safe |

## 常見問題 {#faq}

### 選擇加入會改變我的提案的運氣或者獎勵嗎？ {#change-luck-or-rewards}

否。 選擇加入不會降低你的提議被選中的機會——你的驗證責任和提案選擇仍然保持不變。 例如，如果你有兩個 ​​32 ETH 的驗證​程式和一個 ​​64 ETH 的驗證​程式，它們被選中提議一個區塊並贏得獎勵的總概率是相同的。

### 選擇加入會改變我被懲罰的風險嗎？ {#change-slashing-risk}

對於小型或非專業運營商而言，​​合併驗證程式節點不會改變被懲罰的風險。 更詳細的回答是：對於每個節點運行多個驗證程式且擁有快速警報的專業運營者來說，合併為更少的驗證程式可能會降低他們對罰沒事件的反應能力，從而無法避免連鎖懲罰事件發生。 所有驗證程式的初始削減 _懲罰_ 已大幅調降，從（每 32 ETH）1 ETH 降至（每 32 ETH）0.0078125 ETH，以抵銷此風險。

### 我需要退出我的驗證程式來進行轉換嗎？ {#exit-validator}

否。 你可以在不退出的情況下就地進行轉換。

### 轉換/合併需要多長時間？ {#how-long}

最少需要27.3小時，但是合併的時候也會遭遇排隊。 這個排隊獨立於存款隊列與取款隊列，且不受到它們的影響。

### 我可以保留我的驗證程式索引嗎？ {#keep-validator-index}

是的， 就地轉換使得驗證程式索引得以保持相同。 如果你合併了多個驗證程式，你只能夠保留_目標驗證程式_.的索引。

### 我會錯過證明嗎？ {#miss-attestations}

在合並到另一個驗證程式期間，源驗證程式將退出，並且在目標驗證程式的余額生效前，有大約 27 小時的等待期。 這段時間**不會影響性能指標**。

### 我會遭到懲罰嗎？ {#incur-penalties}

否。 只要你的驗證程式還在線，你就不會遭受懲罰。

### 合並的驗證程式的提現地址是否必須匹配？ {#withdrawal-addresses-match}

否。 但是_來源_必須從自己的地址授權請求。

### 轉換之後我的酬勞會進行復利嗎？ {#rewards-compound}

是的， 通過**類型 2**憑證，超過 32 ETH 的酬勞會自動被重新質押——但不是立即開始重新質押。 由於存在一個小緩沖區 (稱為[_滯後_](https://eth2book.info/capella/part2/incentives/balances/#hysteresis))，你的餘額需要達到**約 1.25 ETH 以上**，才會將多余部分重新質押。 因此，複利並非在 33.0 ETH 時發生，而是在 33.25 (有效餘額為 33 ETH) 時發生，然後是 34.25 (有效餘額為 34 ETH)，以此類推。

### 完成轉換之後我還能獲得自動轉賬的功能嗎？ {#automatic-sweep}

自動轉賬只會在超額餘額超過 2048 時觸發。 對於所有其它的部分取款，你都需要通過手動觸發它們。

### 我能否改變主意，將驗證器從類型2​​轉回類型 1​​？ {#go-back-to-type1}

否。 到**類型2**的轉換是不可逆的。

### 如果我想要合併多個驗證程式，是否需要首先將每個驗證程式單獨轉換為類型2？ {#consolidate-multiple-validators}

不需要！ 把其中一個驗證程式轉換為類型2，然後把它作為目標驗證程式使用。 所有合併到類型2目標驗證程式的其他驗證程式，都可以是類型1或類型2

### ​​我的驗證者是離線的或餘額低於32 ETH——我仍然可以轉化它嗎？ {#offline-or-below-32eth}

是的， 只要驗證程式處在活躍狀態（未退出）且你能用其取款地址進行簽名，你就可以進行轉換。

## 資源{#resources}

- 【Electra 共識規範】（https://github.com/ethereum/consensus-specs/blob/dev/specs/electra/beacon-chain.md）這是您應該參照的最權威的版本。 當您感到疑惑的時候，請閱讀這些規範
- 並非每個人都擅長閱讀程式碼。因此，[這個 maxEB-GPT](https://chatgpt.com/g/g-67f1650fb48081918f555e0c8d1c2ae9-maxeb-gpt) 可以幫助解讀規範。 _免責聲明：應參照規範本身，而非AI作為事實的來源，因為AI可能會誤解信息或者提供幻覺回答_
- 【pectrified.com】（https://pectrified.com/）：]：查看合併、存款及隊列等待時間的狀態
- 【Ethereal】（https://github.com/wealdtech/ethereal）：社區創造的 CLI 工具，用於管理常見的驗證程式任務
- [batch-validator-depositor](https://github.com/attestantio/batch-validator-depositor)：社區創建的合約，允許在單筆交易中存入多個以太坊驗證程式
