---
title: 樂觀卷軸
description: 介紹零知識卷軸 — 一種以太坊社群使用的擴張解決方案。
lang: zh-tw
---

樂觀卷軸是二層網路 (L2) 協定，旨在擴展以太坊基礎層的吞吐量。 它們透過在鏈外處理交易來減少以太坊主鏈上的計算，從而顯著提高處理速度。 與其他擴張解決方案（如[側鏈](/developers/docs/scaling/sidechains/)）不同，樂觀卷軸從主網（透過在鏈上發佈交易結果）或 [Plasma 鏈](/developers/docs/scaling/plasma/)（該鏈還使用詐欺證明驗證以太坊主網上的交易，但將資料儲存在其他地方）獲取安全性。

由於計算是使用以太坊時緩慢且昂貴的部分，樂觀卷軸可以提供高達 10-100 倍的可擴展性提升。 樂觀卷軸還會將交易以 `calldata` 或[二進位大型物件](/roadmap/danksharding/)的形式寫入以太坊，從而降低使用者的燃料成本。

## 先備知識 {#prerequisites}

你應該已經閲讀並理解我們關於[以太坊擴張](/developers/docs/scaling/)和[二層網路](/layer-2/)的頁面。

## 什麽是樂觀卷軸？ {#what-is-an-optimistic-rollup}

樂觀卷軸是一種擴張以太坊的方法，涉及將計算和狀態存儲遷移到鏈外。 樂觀卷軸在以太坊之外執行交易，但將交易資料作爲 `calldata` 或[二進位大型物件](/roadmap/danksharding/)發佈到主網。

樂觀卷軸營運者將多個鏈外交易捆綁到一個大批次中，然後將其提交到以太坊。 此方法可將固定成本分散到每一批次的多筆交易中，從而降低最終使用者的費用。 樂觀卷軸還使用壓縮技術來減少發佈在以太坊上的資料量。

樂觀卷軸之所以被認爲是「樂觀的」，是因爲其假設鏈外交易有效，並且不會針對發佈到鏈上的交易批次發佈有效性證明。 這區分了樂觀卷軸與[零知識卷軸](/developers/docs/scaling/zk-rollups)，後者會發佈鏈外交易的加密[有效性證明](/glossary/#validity-proof)。

相反，樂觀卷軸依賴詐欺證明方案來偵測交易計算不正確的情況。 在以太坊上提交卷軸批次后，會有一個時間窗口（稱爲挑戰期），在此期間任何人都可以透過計算[詐欺證明](/glossary/#fraud-proof)來挑戰卷軸交易的結果。

如果詐欺證明成功，卷軸協定就會重新執行交易並相應地更新卷軸的狀態。 詐欺證明成功的另一個影響是，負責將錯誤執行的交易納入區塊的排序者會收到懲罰。

如果在挑戰期過後卷軸批次仍未被挑戰（即所有交易都正確執行），則它被視爲有效並在以太坊上被接受。 其他人可以繼續構建未經確認的卷軸區塊，但需要注意：交易結果如果以先前發佈的錯誤執行的交易為基礎，則會被撤銷。

## 樂觀卷軸如何與以太坊互動？ {#optimistic-rollups-and-Ethereum}

樂觀卷軸是爲了在以太坊上運作而構建的[鏈外擴張解決方案](/developers/docs/scaling/#off-chain-scaling)。 每個樂觀卷軸都由部署在以太坊網路上的一組智慧型合約來管理。 樂觀卷軸在以太坊主鏈之外處理交易，但將鏈外交易（按批次）發佈到鏈上的卷軸合約。 像以太坊區塊鏈一樣，此交易記錄是不可變的，並形成「樂觀卷軸鏈」。

樂觀卷軸的架構由以下部分組成：

**鏈上合約**：樂觀卷軸的運作由在以太坊上執行的智慧型合約控制。 這包括用於存儲卷軸區塊、監控卷軸狀態更新以及追蹤使用者存款的合約。 從這種意義上講，以太坊充當樂觀卷軸的基礎層或「一層網路」。

**鏈外虛擬機 (VM)**：雖然管理樂觀卷軸協定的合約在以太坊上執行，但卷軸協定在[以太坊虛擬機](/developers/docs/evm/)之外的另一個虛擬機上執行計算和狀態存儲。 鏈外虛擬機是應用程式活躍和執行狀態變更的地方；它是樂觀卷軸的上層或「二層網路」。

由於樂觀卷軸旨在執行為以太坊虛擬機編寫或編譯的程式，因此鏈外虛擬機包含許多以太坊虛擬機設計規範。 此外，鏈上計算的詐欺證明讓以太坊網路可以强制執行在鏈外虛擬機中計算的狀態變更的有效性。

樂觀卷軸被描述為「混合擴張解決方案」，因爲儘管它們作爲單獨的協定存在，但其安全屬性來自以太坊。 除此之外，以太坊還能保證卷軸鏈外計算的正確性和計算後台資料的可用性。 這使得樂觀卷軸比不依賴以太坊獲取安全性的純鏈外擴張協定（如[側鏈](/developers/docs/scaling/sidechains/)）更安全。

樂觀卷軸在以下方面依賴以太坊的主要協定：

### 資料可用性 {#data-availability}

如前所述，樂觀卷軸將交易資料以 `calldata` 或[二進位大型物件](/roadmap/danksharding/)的形式發佈到以太坊。 由於卷軸鏈的執行以提交的交易為基礎，任何人都可以使用在以太坊基礎層上錨定的此資訊，來執行卷軸的狀態並驗證狀態轉換的正確性。

[資料可用性](/developers/docs/data-availability/)至關重要，因爲如果不能存取狀態資料，挑戰者就無法構建詐欺證明來對無效的卷軸作業提出爭論。 透過以太坊提供資料可用性，卷軸營運者逃脫惡意行爲（如提交無效區塊）懲罰的風險就降低了。

### 審查阻力 {#censorship-resistance}

樂觀卷軸也依賴以太坊來提供抗審查性。 在樂觀卷軸中，中心化實體（營運者）負責處理交易並將卷軸區塊提交到以太坊。 這會產生一些影響：

- 卷軸營運者可以透過完全離綫或拒絕產生包含某些交易的區塊來審查使用者。

- 卷軸營運者可以透過扣留默克爾所有權證明所需的狀態資料，來阻止使用者提取存放在卷軸合約中的資金。 扣留狀態資料還可以向使用者隱匿卷軸的狀態，並阻止他們與卷軸進行互動。

樂觀卷軸透過迫使營運者在以太坊上發佈與狀態更新相關的資料來解決該問題。 在鏈上發佈卷軸資料有以下好處：

- 如果樂觀卷軸營運者離線或停止產生交易批次，另一個節點可以使用可用資料來重現卷軸的最後狀態並繼續區塊生產。

- 使用者可以使用交易資料來建立默克爾證明，以證明資金的所有權，並從卷軸中提取他們的資產。

- 使用者也可以在一層網路提交交易，而不是提交給排序者，在這種情況下，排序者必須在一定時間限制内納入交易，以繼續生產有效的區塊。

### 結算 {#settlement}

以太坊在樂觀卷軸背景下扮演的另一個角色是結算層。 結算層錨定整個區塊鏈生態系統，建立安全性，並在另一條鏈（在該實例中為樂觀卷軸）上發生需要仲裁的爭議時提供客觀的最終性.

以太坊主網為樂觀卷軸提供了一個中樞，以驗證詐欺證明並解決爭議。 此外，在卷軸上進行的交易只有當區塊在以太坊上被接受_之後_才是最終的。 一旦卷軸交易被提交到以太坊的基礎層，它就無法回滾（除非在極不可能的情況下發生鏈重組）。

## 樂觀卷軸如何運作？ {#how-optimistic-rollups-work}

### 交易執行和彙總 {#transaction-execution-and-aggregation}

使用者向「營運者」提交交易，「營運者」則是樂觀卷軸上負責處理交易的節點。 營運者也稱爲「驗證者」或「彙總者」，負責彙總交易、壓縮底層資料，並在以太坊上發佈區塊。

儘管任何人都可以成爲驗證者，但樂觀卷軸驗證者與[權益證明系統](/developers/docs/consensus-mechanisms/pos/)很像，必須在生成區塊之前提供保證金。 如果驗證者發佈了無效的區塊或構建了原有但無效的區塊（即使他們的區塊是有效的），該保證金可能會被罰沒。 透過這種方式，樂觀卷軸利用加密經濟激勵來確保驗證者誠實行事。

樂觀卷軸鏈上的其他驗證者預期使用他們的卷軸狀態複本來執行提交的交易。 如果驗證者的最終狀態與營運者建議的狀態不同，他們可以發起挑戰並計算詐欺證明。

一些樂觀卷軸可能會放棄無需許可的驗證者系統並使用單個「排序者」來執行鏈。 與驗證者一樣，排序者會處理交易、生成卷軸區塊，並將卷軸交易提交到一層網路鏈（以太坊）。

排序者與常規卷軸營運者不同，因爲他們對交易的順序有更大的控制權。 此外，排序者具有卷軸鏈的優先存取權，並且是唯一被授權向鏈上合約提交交易的實體。 來自非排序者節點或常規使用者的交易只會在一個單獨的收件匣中排隊，直到排序者將其納入一個新批次。

#### 提交卷軸區塊到以太坊 {#submitting-blocks-to-ethereum}

如前所述，樂觀卷軸的營運者將鏈外交易捆綁為一個批次，並將其發送到以太坊進行公證。 該程序涉及壓縮與交易相關的資料，並將其作爲 `calldata` 或二進位大型物件發佈到以太坊上。

`calldata` 是智慧型合約中不可修改、非持久的區域，其行爲與[記憶體](/developers/docs/smart-contracts/anatomy/#memory)極為相似。 儘管 `calldata` 作爲區塊鏈[歷史日志](https://docs.soliditylang.org/en/latest/introduction-to-smart-contracts.html?highlight=memory#logs)的一部分持續不變，但它不會儲存爲以太坊狀態的一部分。 由於 `calldata` 不觸及以太坊狀態的任何部分，因此它比在鏈上儲存資料的狀態更便宜。

`calldata` 關鍵字也在 Solidity 中用於在執行時傳送參數到智慧型合約函式。 `calldata` 辨識在交易期間被調用的函式，並以任意位元組序列的形式保存函式的輸入。

在樂觀卷軸的背景下，`calldata` 被用於將壓縮的交易資料發送到鏈上合約。 卷軸營運者透過呼叫卷軸合約中所需的函式，並將壓縮資料作爲函式引數傳送，來添加新批次。 使用 `calldata` 可以降低使用者費用，因爲卷軸產生的大部分成本來自鏈上储存資料。

以下是卷軸批次提交的[一個示例](https://etherscan.io/tx/0x9102bfce17c58b5fc1c974c24b6bb7a924fb5fbd7c4cd2f675911c27422a5591)，展示了此概念如何運作。 排序者叫用 `appendSequencerBatch()` 方法並使用 `calldata` 將壓縮的交易資料作爲輸入傳送。

一些卷軸現在使用二進位大型物件將交易批次發佈到以太坊。

二進位大型物件是不可修改且非持久的（就像 `calldata`），并會在約 18 天后從歷史记录中刪除。 有關二進位大型物件的更多資訊，請参阅 [Danksharding](/roadmap/danksharding)。

### 狀態承諾 {#state-commitments}

在任何時間，樂觀卷軸狀態（帳戶、餘額、合約程式碼等）都被組織為[默克爾樹](/whitepaper/#merkle-trees)，也稱爲「狀態樹」。 該默克爾樹的根（狀態根）引用卷軸的最新狀態，經過雜湊並儲存在卷軸合約中。 鏈上的每個狀態轉換都會產生一個新的卷軸狀態，營運者透過計算新的狀態根來提交該狀態。

營運者在發佈批次時需要同時提交舊狀態根和新狀態根。 如果舊狀態根與鏈上合約中現有的狀態根相符，則現有狀態根會被丟棄並替換爲新狀態根。

卷軸營運者還需要為交易批次本身提交默克爾根。 這讓任何人都能透過提供[默克爾證明](/developers/tutorials/merkle-proofs-for-offline-data-integrity/)，證明交易已納入批次中（在一層網路上）。

狀態承諾，尤其是狀態根，對於證明樂觀卷軸中的狀態變更正確性非常必要。 卷軸合約在發佈後會立即接受來自營運者的新狀態根，但之後可以刪除無效的狀態根，將卷軸復原到其正確狀態。

### 詐欺證明 {#fraud-proving}

如前所述，樂觀卷軸讓任何人都可以在不提供有效性證明的情況下發佈區塊。 然而，爲了確保鏈保持安全，樂觀卷軸指定了一個時間窗口，在此期間任何人都可以對狀態轉換提出異議。 因此，卷軸區塊被稱爲「斷言」，因爲任何人都可以質疑其有效性。

如果有人對斷言提出異議，卷軸協定會啓動詐欺證明計算。 每種類型的詐欺證明都是互動式的 — 必須有人發佈斷言，然後另一個人才能對其提出挑戰。 區別在於計算詐欺證明需要多少輪互動。

單輪互動式證明方案在一層網路回放有爭議的交易，以偵測無效斷言。 卷軸協定使用驗證者合約模擬在一層網路（以太坊）上重新執行有爭議的交易，利用計算出的狀態根確定誰贏得挑戰。 如果挑戰者關於卷軸正確狀態的聲明是正確的，營運者就會受到懲罰，他們的保證金將被罰沒。

然而，在一層網路重新執行交易以偵測欺詐，需要發佈單獨交易的狀態承諾，並增加必須在鏈上發佈的資料卷軸。 回放交易還會產生巨大的燃料成本。 出於這些原因，樂觀卷軸正在轉換到多輪互動式證明，以更高的效率實現相同的目標（即偵測無效卷軸作業）。

#### 多輪互動式證明 {#multi-round-interactive-proving}

多輪互動式證明涉及斷言者與挑戰者之間的往返協定，該協定由一層網路驗證者合約監督，最終確定説謊方。 二層網路節點對斷言提出挑戰后，斷言者需要將有爭議的斷言分成相等的兩半。 在這種情況下，每個單獨的斷言都會包含與另一個斷言一樣多的計算步驟。

然後挑戰者會選擇其想要挑戰的斷言。 劃分過程（稱爲「二等分協定」）一直持續到雙方就_單個_執行步驟的斷言發生爭議。 此時，一層網路合約會透過評估指示（及其結果）來解決爭議，以抓住欺詐方。

斷言者需要提供「一步證明」來驗證有爭議的單步計算的有效性。 如果斷言者未能提供一步證明，或者一層網路驗證者認爲證明無效，他們便會輸掉挑戰。

關於此類詐欺證明的一些注意事項：

1. 多輪互動式詐欺證明被認爲是有效率的，因爲它能最大限度減少一層網路鏈在爭議仲裁中必須完成的工作。 一層網路鏈無需回放整個交易，而只需要重新執行卷軸執行過程中的一個步驟。

2. 二等分協定減少了發佈在鏈上的資料量（無需為每筆交易發佈狀態承諾）。 此外，樂觀卷軸交易不受以太坊燃料限制的約束。 相反，樂觀卷軸重新執行交易時必須確保二層網路交易具有較低的燃料限制，以模擬其在單筆以太坊交易中的執行。

3. 惡意斷言者的保證金一部分被獎勵給挑戰者，而另一部分則會被銷毀。 銷毀可以防止驗證者之間串通；如果兩個驗證者串通起來發起虛假挑戰，他們仍然會損失其全部質押的很大一部分。

4. 多輪互動式證明需要雙方（斷言者和挑戰者）在指定的時間窗口内行動。 未能在最後期限前采取行動會導致違約方喪失挑戰機會。

#### 爲什麽詐欺證明對於樂觀卷軸很重要 {#fraud-proof-benefits}

詐欺證明很重要，因爲它們促進了樂觀卷軸中的_去信任最終性_。 去信任最終性是樂觀卷軸的一項品質，它保證交易只要有效，最終將會被確認。

惡意節點可以嘗試透過啓動虛假挑戰來延遲對有效卷軸區塊的確認。 然而，詐欺證明最終會證明卷軸區塊的有效性並使其得到確認。

這也與樂觀卷軸的另一個安全屬性有關：鏈的有效性依賴於_一個_誠實節點的存在。 誠實節點可以透過發佈有效斷言或對無效斷言提出異議來正確地推進鏈。 無論如何，與誠實節點發生爭議的惡意節點會在詐欺證明過程中失去其質押。

### 一層網路/二層網路的互操作性 {#l1-l2-interoperability}

樂觀卷軸旨在與以太坊主網的互操作性，並允許使用者在一層網路和二層網路之間傳輸訊息和任意資料。 它們還與以太坊虛擬機兼容，因此你可以將現有的[去中心化應用程式](/developers/docs/dapps/)移植到樂觀卷軸，或使用以太坊開發工具建立新的去中心化應用程式。

#### 1. 資產轉移 {#asset-movement}

##### 進入卷軸

爲了使用樂觀卷軸，使用者需要將以太幣、ERC-20 代幣和其他被接受的資產存入一層網路上卷軸的[跨鏈橋](/developers/docs/bridges/)合約中。 跨鏈橋合約會將交易轉送到二層網路，在那裏鑄造等量的資產並發送到使用者在樂觀卷軸上選擇的地址。

使用者生成的交易（如一層網路 > 二層網路存款）通常需要排隊，直到排序者將其重新提交到卷軸合約。 然而，爲了保持抗審查性，如果交易延遲超過允許的最大時間，樂觀卷軸將允許使用者直接向鏈上卷軸合約提交交易。

一些樂觀卷軸采用更簡單的方法來防止排序者審查使用者。 這時，區塊由自前一個區塊以來提交給一層網路合約的所有交易（如存款）以及卷軸鏈上已處理的交易共同定義。 如果排序者忽略一層網路交易，它將發佈（可證明）錯誤的狀態根；因此，一旦使用者產生的訊息被發佈在一層網路上，排序者就不能將其延遲。

##### 退出卷軸

由於詐欺證明方案，從樂觀卷軸提款到以太坊更加困難。 如果使用者發起一個二層網路 > 一層網路的交易以提取在一層網路上托管的資金，他們就必須等到挑戰期（持續約 7 天）結束。 盡管如此，提款過程本身相當簡單。

在二層網路上發起提款請求後，該交易會被納入下一個批次，同時使用者在卷軸上的資產被銷毀。 一旦批次在以太坊上發佈，使用者就可以計算一個默克爾證明，來驗證其退出交易是否納入到區塊中。 然後只需要等待延遲期過後最終確定一層網路上的交易，並將資金提取到主網。

爲了避免向以太坊提款之前等待一周的時間，樂觀卷軸使用者可以雇用一個**流動性提供者** (LP)。 流動性提供者承擔待處理的二層網路提款的所有權，並在一層網路上向使用者付款（以換取費用）。

流動性提供者可以在釋放資金之前檢查使用者提款請求的有效性（透過自行執行鏈）。 這樣他們就可以保證交易最終會得到確認（即去信任最終性）。

#### 2. 以太坊虛擬機 (EVM) 相容性 {#evm-compatibility}

對於開發者來講，樂觀卷軸的優勢在於，它們與[以太坊虛擬機 (EVM)](/developers/docs/evm/) 的相容性（或者更確切地說，等效性）。 與以太坊虛擬機相容的卷軸符合[以太坊黃皮書](https://ethereum.github.io/yellowpaper/paper.pdf)中的規範，並在位元組碼級別支援以太坊虛擬機。

樂觀卷軸中的以太坊虛擬機相容性具有以下好處：

i. 開發者可以將以太坊上的現有智慧型合約遷移到樂觀卷軸鏈，而無需大量修改程式碼庫。 這可以節省開發團隊在二層網路上部署以太坊智慧型合約的時間。

ii. 使用樂觀卷軸的開發者和專案團隊可以利用以太坊的基礎設施。 這包括程式設計語言、程式碼庫、測試工具、用戶端軟體、部署基礎設施等。

使用現有工具很重要，因爲這些工具多年來已經過廣泛的審核、除錯和改進。 它還讓以太坊開發者不需要學習如何使用全新的開發堆棧建置應用程式。

#### 3. 跨鏈合約呼叫 {#cross-chain-contract-calls}

使用者（外部擁有的帳戶）透過向卷軸合約提交交易或者讓排序者或驗證者為其提交交易，來與二層網路合約進行互動。 樂觀卷軸還讓以太坊上的合約帳戶可以與二層網路互動，使用跨鏈橋合約來轉送訊息，並在一層網路和二層網路之間傳遞資料。 這意味著你可以在以太坊主網上編寫一層網路合約，來叫用屬於二層網路樂觀卷軸合約的函式。

跨鏈合約呼叫是非同步發生的 — 這意味著呼叫首先啓動，然後再執行。 這與以太坊上兩個合約之間的呼叫不同，那種呼叫會立即產生結果。

跨鏈合約的一個範例是先前描述的代幣存款。 一層網路上的合約托管使用者的代幣，並向配對的二層網路合約發送訊息，以在卷軸中鑄造等量的代幣。

由於跨鏈訊息呼叫會導致合約執行，因此發送者通常需要支付用於計算的[燃料成本](/developers/docs/gas/)。 建議設定較高的燃料限制，以防止交易在目標鏈上失敗。 代幣跨鏈橋場景就是一個很好的範例：如果交易的一層網路端（存入代幣）有效，但二層網路端（鑄造新代幣）由於燃料不足而失敗，則存款將無法恢復。

最後，我們應該注意，合約之間的二層網路 > 一層網路訊息呼叫需要考慮延遲（一層網路 > 二層網路呼叫通常在幾分鐘後執行）。 這是因爲從樂觀卷軸發送到主網的訊息在挑戰窗口到期之前無法執行。

## 樂觀卷軸的費用如何計算？ {#how-do-optimistic-rollup-fees-work}

樂觀卷軸使用與以太坊非常相似的燃料費方案來表示使用者為每筆交易支付的費用。 樂觀卷軸收取的費用取決於以下組成部分：

1. **狀態寫入**：樂觀卷軸將交易資料和區塊頭（由前一個區塊頭的雜湊、狀態根、批次根組成）作爲 `blob`，即「二進位大型物件」，發佈到以太坊。 [EIP-4844](https://eips.ethereum.org/EIPS/eip-4844) 為鏈上納入資料引入了具成本效益的解決方案。 `blob` 是一個新交易欄位，讓卷軸可以將壓縮的狀態轉換資料發佈到以太坊一層網路。 與鏈上永久保留的 `calldata` 不同，二進位大型物件的生命周期很短，在 [4096 個時期](https://github.com/ethereum/consensus-specs/blob/81f3ea8322aff6b9fb15132d050f8f98b16bdba4/configs/mainnet.yaml#L147)（約 18 天）后即會被用戶端刪除。 透過使用二進位大型物件發佈壓縮的交易批次，樂觀卷軸可以顯著降低向一層網路寫入交易的成本。

2. **二進位大型物件燃料使用**：二進位大型物件攜帶的交易采用類似於 [EIP-1559](https://eips.ethereum.org/EIPS/eip-1559) 中引入的動態費用機制。 3 型交易的燃料費會考慮二進位大型物件的基本費用，該費用由網路根據二進位大型物件空間需求和所發送交易的二進位大型物件空間使用來決定。

3. **二層網路營運者費用**：這是支付給卷軸節點的金額，用於補償處理交易時產生的計算成本，與以太坊上的燃料費非常相似。 由於二層網路處理能力更强，並且不會出現網路擁塞迫使以太坊上的驗證者優先處理費用更高的交易，卷軸節點收取的交易費更低。

樂觀卷軸套用了多種機制來降低使用者的費用，包括批次交易和壓縮 `calldata` 來降低資料發佈成本。 你可以查看[二層網路費用追蹤器](https://l2fees.info/)來即時瞭解使用基於以太坊的樂觀卷軸的成本。

## 樂觀卷軸如何擴張以太坊？ {#scaling-ethereum-with-optimistic-rollups}

如前所述，樂觀卷軸在以太坊上發佈壓縮的交易資料，以保證資料可用性。 壓縮鏈上發佈的資料的能力，對於透過樂觀卷軸來擴張以太坊的吞吐量至關重要。

以太坊主鏈限制了區塊可容納的資料量，以燃料單位計價（[平均區塊大小](/developers/docs/blocks/#block-size)為 1500 萬燃料）。 雖然這限制了每筆交易可以使用的燃料數量，但也意味著我們可以透過減少與交易相關的資料來增加每個區塊處理的交易 — 直接改進了可擴展性。

樂觀卷軸使用多種技術來實現交易資料壓縮並提高每秒交易數速率。 例如，這篇[文章](https://vitalik.eth.limo/general/2021/01/05/rollup.html)將基本使用者交易（發送以太幣）在主網上產生的資料量與相同交易在卷軸上產生的資料量進行了比較：

| 參數     | 以太坊（一層網路）         | 卷軸（二層網路）     |
| ------ | ----------------- | ------------ |
| 隨機數    | ~3                | 0            |
| 燃料價格   | ~8                | 0-0.5        |
| 燃料     | 3                 | 0-0.5        |
| 目標     | 21                | 4            |
| 數值     | 9                 | ~3           |
| 簽名     | ~68 (2 + 33 + 33) | ~0.5         |
| 來源     | 0（從簽名恢復）          | 4            |
| **總計** | **~112 個位元組**     | **~12 個位元組** |

對這些數字進行一些初略計算，有助於顯示樂觀卷軸提供的可擴展性改進：

1. 每個區塊的目標大小為 1500 萬燃料，驗證一個位元組的資料需要 16 燃料。 將平均區塊大小除以 16 燃料 (15,000,000/16)，顯示了一般區塊可以容納 **937,500 個位元組的資料**。
2. 如果一個基本卷軸交易使用 12 個位元組，則以太坊區塊平均可以處理 **78,125 筆卷軸交易** (937,5000/12) 或 **39 個卷軸批次**（如果每個批次平均包含 2,000 筆交易）。
3. 如果每 15 秒在以太坊上產生一個新區塊，則卷軸的處理速度大約爲**每秒 5,208 筆交易**。 計算方法是，將以太坊區塊可以容納的基本卷軸交易數量 (**78,125**) 除以平均出塊時間（**15 秒**）。

鑒於樂觀卷軸交易不可能包含以太坊上的整個區塊，這是一個比較樂觀的預計。 但是，透過它可以大致瞭解樂觀卷軸可以為以太坊使用者提供多少可擴展性收益（當前實現可提供每秒高達 2,000 筆交易的速率）。

在以太坊上引入[資料分片](/roadmap/danksharding/)有望增加樂觀卷軸的可擴展性。 由於卷軸交易必須與其他非卷軸交易共用區塊空間，因此其最大處理能力受制於以太坊主鏈上的資料吞吐量。 Danksharding 使用更便宜的非永久型「二進位大型物件」存儲，而不是昂貴的永久型 `CALLDATA`，這將增加二層網路鏈上用於按區塊發佈資料的空間。

### 樂觀卷軸的優點和缺點 {#optimistic-rollups-pros-and-cons}

| 優勢                                                                 | 劣勢                                      |
| ------------------------------------------------------------------ | --------------------------------------- |
| 在不犧牲安全和去信任的情況下大幅改進可擴展性。                                            | 潛在的欺詐挑戰導致交易最終性延遲。                       |
| 交易資料儲存在一層網路鏈上，提高了透明性、安全性、抗審查性和去中心化。                                | 中心化卷軸營運者（排序者）可以影響交易順序。                  |
| 詐欺證明保證了去信任的最終性，並使誠實少數能夠保護鏈的安全。                                     | 如果沒有誠實節點，惡意營運者就可以透過發佈無效區塊和狀態承諾來竊取資金。    |
| 計算詐欺證明對常規二層網路節點開放，這與需要特殊硬體的有效性證明（用於零知識卷軸中）不同。                      | 安全模式依賴於至少一個誠實節點執行卷軸交易並提交詐欺證明來挑戰無效的狀態轉換。 |
| 卷軸受益於「去信任活躍性」（任何人都可以透過執行交易和發佈斷言來强制鏈前進）                             | 使用者在將資金提取回以太坊之前，必須等待為期一周的挑戰期結束。         |
| 樂觀卷軸依賴於精心設計的加密激勵機制來提升鏈上安全性。                                        | 卷軸必須在鏈上發佈所有交易資料，這可能會增加成本。               |
| 與以太坊虛擬機和 Solidity 的相容性，讓開發者可以將以太坊原生智慧型合約移植到卷軸或使用現有工具來建立新的去中心化應用程式。 |                                         |

### 樂觀卷軸之視覺範例 {#optimistic-video}

想透過視覺方式學習？ 觀看 Finematics 解釋樂觀卷軸：

<YouTube id="7pWxCklcNsU" start="263" />

### 使用樂觀卷軸 {#use-optimistic-rollups}

樂觀卷軸存在多種實作，可供你整合到去中心化應用程式：

<RollupProductDevDoc rollupType="optimistic" />

## 有關樂觀卷軸的延伸閲讀

- [樂觀卷軸如何運作（完整指引）](https://www.alchemy.com/overviews/optimistic-rollups)
- [什麽是區塊鏈卷軸？ （技術介紹）](https://www.ethereum-ecosystem.com/blog/what-is-a-blockchain-rollup-a-technical-introduction)
- [Arbitrum 之概要指引](https://newsletter.banklesshq.com/p/the-essential-guide-to-arbitrum)
- [樂觀卷軸究竟如何運作？](https://www.paradigm.xyz/2021/01/how-does-optimisms-rollup-really-work)
- [樂觀虛擬機深入探索](https://medium.com/ethereum-optimism/ovm-deep-dive-a300d1085f52)
- [什麽是樂觀虛擬機？](https://www.alchemy.com/overviews/optimistic-virtual-machine)
