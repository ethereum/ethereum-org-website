---
title: "SQL सह Ethereum चे मूलभूत विषय शिका"
description: "हे ट्युटोरियल वाचकांना स्ट्रक्चर्ड क्वेरी लँग्वेज (SQL) सह ऑनचेन डेटा क्वेरी करून व्यवहार, ब्लॉक्स आणि गॅस यासह मूलभूत Ethereum संकल्पना समजून घेण्यास मदत करते."
author: "पॉल आपीवत"
tags: [ "SQL", "क्वेरी करणे", "व्यवहार" ]
skill: beginner
lang: mr
published: 2021-05-11
source: paulapivat.com
sourceUrl: https://paulapivat.com/post/query_ethereum/
---

बरेच Ethereum ट्युटोरिअल्स डेव्हलपर्ससाठी असतात, परंतु डेटा विश्लेषकांसाठी किंवा क्लायंट किंवा नोड न चालवता ऑनचेन डेटा पाहू इच्छिणाऱ्या लोकांसाठी शैक्षणिक संसाधनांची कमतरता आहे.

हे ट्युटोरियल वाचकांना [Dune Analytics](https://dune.com/) द्वारे प्रदान केलेल्या इंटरफेसद्वारे स्ट्रक्चर्ड क्वेरी लँग्वेज (SQL) सह ऑनचेन डेटा क्वेरी करून व्यवहार, ब्लॉक्स आणि गॅस यासह मूलभूत Ethereum संकल्पना समजून घेण्यास मदत करते.

ऑनचेन डेटा आपल्याला Ethereum, नेटवर्क आणि कंप्यूटिंग पॉवरसाठी एक अर्थव्यवस्था म्हणून समजून घेण्यास मदत करू शकतो आणि आज Ethereum समोर असलेल्या आव्हानांना (उदा., वाढत्या गॅस किमती) आणि अधिक महत्त्वाचे म्हणजे, स्केलिंग सोल्यूशन्सच्या आसपासच्या चर्चा समजून घेण्यासाठी आधार म्हणून काम केले पाहिजे.

### व्यवहार {#transactions}

Ethereum वरील वापरकर्त्याचा प्रवास वापरकर्ता-नियंत्रित खाते किंवा ETH बॅलन्स असलेल्या एंटिटीच्या आरंभीकरणाने सुरू होतो. दोन प्रकारचे खाते आहेत - वापरकर्ता-नियंत्रित किंवा स्मार्ट कॉन्ट्रॅक्ट ([ethereum.org](/developers/docs/accounts/) पहा).

कोणतेही खाते [Etherscan](https://etherscan.io/) किंवा [Blockscout](https://eth.blockscout.com/) सारख्या ब्लॉक एक्सप्लोररवर पाहिले जाऊ शकते. ब्लॉक एक्सप्लोरर हे Ethereum च्या डेटासाठी एक पोर्टल आहेत. ते रिअल-टाइममध्ये ब्लॉक्स, व्यवहार, मायनर्स, खाती आणि इतर ऑनचेन अ‍ॅक्टिव्हिटीवरील डेटा प्रदर्शित करतात ([येथे](/developers/docs/data-and-analytics/block-explorers/) पहा).

तथापि, बाह्य ब्लॉक एक्सप्लोरर्सद्वारे प्रदान केलेल्या माहितीचा ताळमेळ साधण्यासाठी वापरकर्ता थेट डेटा क्वेरी करू शकतो. [Dune Analytics](https://dune.com/) SQL चे काही ज्ञान असलेल्या कोणालाही ही क्षमता प्रदान करते.

संदर्भासाठी, Ethereum फाउंडेशन (EF) साठी स्मार्ट कॉन्ट्रॅक्ट खाते [Blockscout](https://eth.blockscout.com/address/0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe) वर पाहिले जाऊ शकते.

एक गोष्ट लक्षात घेण्यासारखी आहे की EF च्या खात्यासह सर्व खात्यांचा एक सार्वजनिक पत्ता असतो जो व्यवहार पाठवण्यासाठी आणि प्राप्त करण्यासाठी वापरला जाऊ शकतो.

Etherscan वरील खाते बॅलन्समध्ये नियमित व्यवहार आणि अंतर्गत व्यवहार समाविष्ट आहेत. अंतर्गत व्यवहार, नावाप्रमाणे, _वास्तविक_ व्यवहार नाहीत जे चेनची स्थिती बदलतात. ते एका कॉन्ट्रॅक्टची अंमलबजावणी करून सुरू केलेले मूल्य हस्तांतरण आहेत ([स्त्रोत](https://ethereum.stackexchange.com/questions/3417/how-to-get-contract-internal-transactions)). अंतर्गत व्यवहारांना सही नसल्यामुळे, ते ब्लॉकचेनवर **समाविष्ट** केले जात नाहीत आणि Dune Analytics सह क्वेरी केले जाऊ शकत नाहीत.

म्हणून, हे ट्युटोरियल नियमित व्यवहारांवर लक्ष केंद्रित करेल. हे अशा प्रकारे क्वेरी केले जाऊ शकते:

```sql
WITH temp_table AS (
SELECT
    hash,
    block_number,
    block_time,
    "from",
    "to",
    value / 1e18 AS ether,
    gas_used,
    gas_price / 1e9 AS gas_price_gwei
FROM ethereum."transactions"
WHERE "to" = '\xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'
ORDER BY block_time DESC
)
SELECT
    hash,
    block_number,
    block_time,
    "from",
    "to",
    ether,
    (gas_used * gas_price_gwei) / 1e9 AS txn_fee
FROM temp_table
```

हे Etherscan च्या व्यवहार पृष्ठावर प्रदान केलेल्या माहितीसारखीच माहिती देईल. तुलनेसाठी, येथे दोन स्रोत आहेत:

#### Etherscan {#etherscan}

![](./etherscan_view.png)

[Blockscout वर EF चे कॉन्ट्रॅक्ट पृष्ठ.](https://eth.blockscout.com/address/0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe)

#### ड्युन अॅनालिटिक्स {#dune-analytics}

![](./dune_view.png)

आपण डॅशबोर्ड [येथे](https://dune.com/paulapivat/Learn-Ethereum) शोधू शकता. क्वेरी पाहण्यासाठी टेबलवर क्लिक करा (वर देखील पहा).

### व्यवहारांचे विघटन {#breaking_down_transactions}

सबमिट केलेल्या व्यवहारामध्ये अनेक माहितीचे तुकडे समाविष्ट असतात, ज्यात ([स्त्रोत](/developers/docs/transactions/)) खालील गोष्टींचा समावेश आहे:

- **प्राप्तकर्ता**: प्राप्त करणारा पत्ता ("to" म्हणून क्वेरी केलेला)
- **सही**: प्रेषकाची खाजगी की व्यवहारावर सही करत असली तरी, आपण SQL सह जो क्वेरी करू शकतो तो म्हणजे प्रेषकाचा सार्वजनिक पत्ता ("from").
- **मूल्य**: ही हस्तांतरित ETH ची रक्कम आहे (`ether` स्तंभ पहा).
- **डेटा**: हा हॅश केलेला अनियंत्रित डेटा आहे (`data` स्तंभ पहा)
- **gasLimit** – व्यवहाराद्वारे वापरल्या जाऊ शकणाऱ्या गॅस युनिट्सची कमाल रक्कम. गॅसची युनिट्स संगणकीय पायऱ्या दर्शवतात
- **maxPriorityFeePerGas** - मायनरला टिप म्हणून समाविष्ट करण्यासाठी गॅसची कमाल रक्कम
- **maxFeePerGas** - व्यवहारासाठी देय करण्यास इच्छुक असलेल्या गॅसची कमाल रक्कम (baseFeePerGas आणि maxPriorityFeePerGas सह)

आपण Ethereum फाउंडेशनच्या सार्वजनिक पत्त्यावर झालेल्या व्यवहारांसाठी या विशिष्ट माहितीचे तुकडे क्वेरी करू शकतो:

```sql
SELECT
    "to",
    "from",
    value / 1e18 AS ether,
    data,
    gas_limit,
    gas_price / 1e9 AS gas_price_gwei,
    gas_used,
    ROUND(((gas_used / gas_limit) * 100),2) AS gas_used_pct
FROM ethereum."transactions"
WHERE "to" = '\xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'
ORDER BY block_time DESC
```

### ब्लॉक्स {#blocks}

प्रत्येक व्यवहार Ethereum व्हर्च्युअल मशीनची ([EVM](/developers/docs/evm/)) स्थिती बदलेल ([स्त्रोत](/developers/docs/transactions/)). व्यवहार नेटवर्कवर प्रसारित केले जातात जेणेकरून ते सत्यापित केले जातील आणि ब्लॉकमध्ये समाविष्ट केले जातील. प्रत्येक व्यवहार एका ब्लॉक क्रमांकाशी संबंधित असतो. डेटा पाहण्यासाठी, आपण एक विशिष्ट ब्लॉक क्रमांक क्वेरी करू शकतो: 12396854 (हे लिहित असताना Ethereum फाउंडेशनच्या व्यवहारांमधील सर्वात अलीकडील ब्लॉक, 11/5/21).

शिवाय, जेव्हा आपण पुढील दोन ब्लॉक्सची क्वेरी करतो, तेव्हा आपण पाहू शकतो की प्रत्येक ब्लॉकमध्ये मागील ब्लॉकचा हॅश असतो (म्हणजे, पॅरेंट हॅश), जे ब्लॉकचेन कसे तयार होते हे दर्शवते.

प्रत्येक ब्लॉकमध्ये त्याच्या पॅरेंट ब्लॉकचा संदर्भ असतो. हे खाली `hash` आणि `parent_hash` स्तंभांदरम्यान दर्शविले आहे ([स्त्रोत](/developers/docs/blocks/)):

![parent_hash](./parent_hash.png)

Dune Analytics वरील [क्वेरी](https://dune.com/queries/44856/88292) येथे आहे:

```sql
SELECT
   time,
   number,
   hash,
   parent_hash,
   nonce
FROM ethereum."blocks"
WHERE "number" = 12396854 OR "number" = 12396855 OR "number" = 12396856
LIMIT 10
```

आपण वेळ, ब्लॉक क्रमांक, डिफिकल्टी, हॅश, पॅरेंट हॅश आणि नॉन्स क्वेरी करून ब्लॉकची तपासणी करू शकतो.

ही क्वेरी केवळ _व्यवहारांची सूची_ कव्हर करत नाही, ज्यासाठी खाली स्वतंत्र क्वेरी आणि _स्टेट रूट_ आवश्यक आहे. एक पूर्ण किंवा आकाईव्हल नोड सर्व व्यवहार आणि स्टेट ट्रान्झिशन्स संग्रहित करेल, ज्यामुळे क्लायंट्सना कोणत्याही वेळी चेनची स्थिती क्वेरी करण्याची परवानगी मिळते. यासाठी मोठ्या स्टोरेज जागेची आवश्यकता असल्याने, आपण चेन डेटा स्टेट डेटामधून वेगळा करू शकतो:

- चेन डेटा (ब्लॉक्सची, व्यवहारांची सूची)
- स्टेट डेटा (प्रत्येक व्यवहाराच्या स्टेट ट्रान्झिशनचा परिणाम)

स्टेट रूट नंतरच्या प्रकारात येते आणि तो _गर्भित_ डेटा आहे (ऑनचेन संग्रहित नाही), तर चेन डेटा स्पष्ट असतो आणि तो स्वतः चेनवर संग्रहित असतो ([स्त्रोत](https://ethereum.stackexchange.com/questions/359/where-is-the-state-data-stored)).

या ट्युटोरियलसाठी, आपण Dune Analytics द्वारे SQL सह क्वेरी _केल्या जाऊ शकणाऱ्या_ ऑनचेन डेटावर लक्ष केंद्रित करणार आहोत.

वर सांगितल्याप्रमाणे, प्रत्येक ब्लॉकमध्ये व्यवहारांची सूची असते, आपण एका विशिष्ट ब्लॉकसाठी फिल्टर करून हे क्वेरी करू शकतो. आपण सर्वात अलीकडील ब्लॉक, 12396854, वापरून पाहू:

```sql
SELECT * FROM ethereum."transactions"
WHERE block_number = 12396854
ORDER BY block_time DESC`
```

Dune वरील SQL आउटपुट येथे आहे:

![](./list_of_txn.png)

चेनमध्ये हा एकच ब्लॉक जोडल्याने Ethereum व्हर्च्युअल मशीनची ([EVM](/developers/docs/evm/)) स्थिती बदलते. कधीकधी डझनभर, तर कधी शेकडो व्यवहार एकाच वेळी सत्यापित केले जातात. या विशिष्ट बाबतीत, 222 व्यवहार समाविष्ट केले गेले होते.

प्रत्यक्षात किती यशस्वी झाले हे पाहण्यासाठी, यशस्वी व्यवहार मोजण्यासाठी आपण आणखी एक फिल्टर जोडू:

```sql
WITH temp_table AS (
    SELECT * FROM ethereum."transactions"
    WHERE block_number = 12396854 AND success = true
    ORDER BY block_time DESC
)
SELECT
    COUNT(success) AS num_successful_txn
FROM temp_table
```

ब्लॉक 12396854 साठी, एकूण 222 व्यवहारांपैकी, 204 यशस्वीरित्या सत्यापित केले गेले:

![](./successful_txn.png)

व्यवहारांच्या विनंत्या प्रति सेकंद डझनभर वेळा येतात, परंतु ब्लॉक्स अंदाजे दर 15 सेकंदांनी एकदा कमिट केले जातात ([स्त्रोत](/developers/docs/blocks/)).

अंदाजे दर 15 सेकंदांनी एक ब्लॉक तयार होतो हे पाहण्यासाठी, आपण एका दिवसातील सेकंदांची संख्या (86400) 15 ने भागू शकतो जेणेकरून प्रति दिन तयार होणाऱ्या ब्लॉक्सची अंदाजे सरासरी संख्या (~ 5760) मिळेल.

प्रति दिन तयार झालेल्या Ethereum ब्लॉक्सचा चार्ट (2016 - आतापर्यंत) आहे:

![](./daily_blocks.png)

या कालावधीत दररोज तयार होणाऱ्या ब्लॉक्सची सरासरी संख्या ~5,874 आहे:

![](./avg_daily_blocks.png)

क्वेरीज आहेत:

```sql
# 2016 पासून दररोज तयार झालेल्या ब्लॉक्सची संख्या व्हिज्युअलाइझ करण्यासाठी क्वेरी

SELECT
    DATE_TRUNC('day', time) AS dt,
    COUNT(*) AS block_count
FROM ethereum."blocks"
GROUP BY dt
OFFSET 1

# प्रति दिन तयार झालेल्या ब्लॉक्सची सरासरी संख्या

WITH temp_table AS (
SELECT
    DATE_TRUNC('day', time) AS dt,
    COUNT(*) AS block_count
FROM ethereum."blocks"
GROUP BY dt
OFFSET 1
)
SELECT
    AVG(block_count) AS avg_block_count
FROM temp_table
```

2016 पासून प्रति दिन तयार होणाऱ्या ब्लॉक्सची सरासरी संख्या 5,874 आहे, जी त्या संख्येपेक्षा थोडी जास्त आहे. पर्यायाने, 86400 सेकंदांना 5874 सरासरी ब्लॉक्सने भागल्यास 14.7 सेकंद किंवा अंदाजे दर 15 सेकंदांनी एक ब्लॉक येतो.

### गॅस {#gas}

ब्लॉक्स आकारात मर्यादित असतात. कमाल ब्लॉक आकार डायनॅमिक आहे आणि नेटवर्कच्या मागणीनुसार 12,500,000 आणि 25,000,000 युनिट्स दरम्यान बदलतो. डिस्क स्पेस आणि गती आवश्यकतांच्या बाबतीत पूर्ण नोड्सवर ताण टाकणाऱ्या अनियंत्रित मोठ्या ब्लॉक आकारांना प्रतिबंधित करण्यासाठी मर्यादा आवश्यक आहेत ([स्त्रोत](/developers/docs/blocks/)).

ब्लॉक गॅस मर्यादेची संकल्पना मांडण्याचा एक मार्ग म्हणजे त्याला व्यवहारांना बॅच करण्यासाठी उपलब्ध ब्लॉक स्पेसचा **पुरवठा** म्हणून विचार करणे. ब्लॉक गॅस मर्यादा 2016 पासून आजपर्यंत क्वेरी आणि व्हिज्युअलाइझ केली जाऊ शकते:

![](./avg_gas_limit.png)

```sql
SELECT
    DATE_TRUNC('day', time) AS dt,
    AVG(gas_limit) AS avg_block_gas_limit
FROM ethereum."blocks"
GROUP BY dt
OFFSET 1
```

नंतर Ethereum चेनवर केलेल्या कंप्यूटिंगसाठी (उदा., व्यवहार पाठवणे, स्मार्ट कॉन्ट्रॅक्ट कॉल करणे, NFT मिंट करणे) दररोज वापरलेला वास्तविक गॅस आहे. ही उपलब्ध Ethereum ब्लॉक स्पेसची **मागणी** आहे:

![](./daily_gas_used.png)

```sql
SELECT
    DATE_TRUNC('day', time) AS dt,
    AVG(gas_used) AS avg_block_gas_used
FROM ethereum."blocks"
GROUP BY dt
OFFSET 1
```

**मागणी आणि पुरवठा** कसे जुळतात हे पाहण्यासाठी आपण हे दोन चार्ट एकत्र ठेवू शकतो:

![gas_demand_supply](./gas_demand_supply.png)

म्हणून आपण उपलब्ध पुरवठ्याच्या तुलनेत Ethereum ब्लॉक स्पेसच्या मागणीचे एक कार्य म्हणून गॅस किमती समजू शकतो.

शेवटी, आपण Ethereum चेनसाठी सरासरी दैनिक गॅस किमती क्वेरी करू इच्छितो, तथापि, असे केल्याने क्वेरीला विशेषतः जास्त वेळ लागेल, म्हणून आपण Ethereum फाउंडेशनद्वारे प्रति व्यवहारासाठी भरलेल्या गॅसच्या सरासरी रकमेसाठी आपली क्वेरी फिल्टर करू.

![](./ef_daily_gas.png)

आपण गेल्या काही वर्षांपासून Ethereum फाउंडेशनच्या पत्त्यावर केलेल्या सर्व व्यवहारांसाठी भरलेल्या गॅस किमती पाहू शकतो. येथे क्वेरी आहे:

```sql
SELECT
    block_time,
    gas_price / 1e9 AS gas_price_gwei,
    value / 1e18 AS eth_sent
FROM ethereum."transactions"
WHERE "to" = '\xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'
ORDER BY block_time DESC
```

### सारांश {#summary}

या ट्युटोरियलद्वारे, आपण मूलभूत Ethereum संकल्पना आणि Ethereum ब्लॉकचेन कसे कार्य करते हे ऑनचेन डेटा क्वेरी करून आणि त्याची अनुभूती घेऊन समजून घेतो.

या ट्युटोरियलमध्ये वापरलेला सर्व कोड असलेला डॅशबोर्ड [येथे](https://dune.com/paulapivat/Learn-Ethereum) आढळू शकतो.

web3 एक्सप्लोर करण्यासाठी डेटाच्या अधिक वापरासाठी [मला Twitter वर शोधा](https://twitter.com/paulapivat).
