---
title: "hardhat рдЖрдгрд┐ ethers рд╡рд╛рдкрд░реВрди Waffle hello world рд╢рд┐рдХрд╡рдгреА"
description: hardhat рдЖрдгрд┐ ethers.js рд╡рд╛рдкрд░реВрди рддреБрдордЪрд╛ рдкрд╣рд┐рд▓рд╛ Waffle рдкреНрд░рдХрд▓реНрдк рдмрдирд╡рд╛
author: "MiZiet"
tags:
  [
    "waffle",
    "рд╕реНрдорд╛рд░реНрдЯ рдХреЙрдиреНрдЯреНрд░реЕрдХреНрдЯ",
    "рд╕реЙрд▓рд┐рдбрд┐рдЯреА",
    "рдЪрд╛рдЪрдгреА",
    "hardhat",
    "ethers.js"
  ]
skill: beginner
lang: mr
published: 2020-10-16
---

рдпрд╛ [Waffle](https://ethereum-waffle.readthedocs.io) рд╢рд┐рдХрд╡рдгреАрдордзреНрдпреЗ, рдЖрдкрдг [hardhat](https://hardhat.org/) рдЖрдгрд┐ [ethers.js](https://docs.ethers.io/v5/) рд╡рд╛рдкрд░реВрди рдПрдХ рд╕рд╛рдзрд╛ "Hello world" рд╕реНрдорд╛рд░реНрдЯ рдХреЙрдиреНрдЯреНрд░реЕрдХреНрдЯ рдкреНрд░рдХрд▓реНрдк рдХрд╕рд╛ рд╕реЗрдЯ рдХрд░рд╛рдпрдЪрд╛ рд╣реЗ рд╢рд┐рдХреВ. рдордЧ рдЖрдкрдг рдЖрдкрд▓реНрдпрд╛ рд╕реНрдорд╛рд░реНрдЯ рдХреЙрдиреНрдЯреНрд░реЕрдХреНрдЯрдордзреНрдпреЗ рдПрдХ рдирд╡реАрди рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╢реА рдЬреЛрдбрд╛рд╡реА рдЖрдгрд┐ Waffle рд╕рд╣ рддреНрдпрд╛рдЪреА рдЪрд╛рдЪрдгреА рдХрд╢реА рдХрд░рд╛рд╡реА рд╣реЗ рд╢рд┐рдХреВ.

рдЪрд▓рд╛ рдПрдХ рдирд╡реАрди рдкреНрд░рдХрд▓реНрдк рддрдпрд╛рд░ рдХрд░реВрди рд╕реБрд░реБрд╡рд╛рдд рдХрд░реВрдпрд╛:

```bash
yarn init
```

рдХрд┐рдВрд╡рд╛

```bash
npm init
```

рдЖрдгрд┐ рдЖрд╡рд╢реНрдпрдХ рдкреЕрдХреЗрдЬреЗрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдд рдЖрд╣реЛрдд:

```bash
yarn add -D hardhat @nomiclabs/hardhat-ethers ethers @nomiclabs/hardhat-waffle ethereum-waffle chai
```

рдХрд┐рдВрд╡рд╛

```bash
npm install -D hardhat @nomiclabs/hardhat-ethers ethers @nomiclabs/hardhat-waffle ethereum-waffle chai
```

рдкреБрдвреАрд▓ рдкрд╛рдпрд░реА `npx hardhat` рдЪрд╛рд▓рд╡реВрди рдПрдХ рдирдореБрдирд╛ hardhat рдкреНрд░рдХрд▓реНрдк рддрдпрд╛рд░ рдХрд░рдгреЗ рд╣реА рдЖрд╣реЗ.

```bash
888    888                      888 888               888
888    888                      888 888               888
888    888                      888 888               888
8888888888  8888b.  888d888 .d88888 88888b.   8888b.  888888
888    888     "88b 888P"  d88" 888 888 "88b     "88b 888
888    888 .d888888 888    888  888 888  888 .d888888 888
888    888 888  888 888    Y88b 888 888  888 888  888 Y88b.
888    888 "Y888888 888     "Y88888 888  888 "Y888888  "Y888

ЁЯС╖ Hardhat v2.0.3 рдордзреНрдпреЗ рдЖрдкрд▓реЗ рд╕реНрд╡рд╛рдЧрдд рдЖрд╣реЗ ЁЯС╖тАН

? рддреБрдореНрд╣рд╛рд▓рд╛ рдХрд╛рдп рдХрд░рд╛рдпрдЪреЗ рдЖрд╣реЗ? тАж
тЭп рдПрдХ рдирдореБрдирд╛ рдкреНрд░рдХрд▓реНрдк рддрдпрд╛рд░ рдХрд░рд╛
рдПрдХ рд░рд┐рдХрд╛рдорд╛ hardhat.config.js рддрдпрд╛рд░ рдХрд░рд╛
рдмрд╛рд╣реЗрд░ рдкрдбрд╛
```

`Create a sample project` рдирд┐рд╡рдбрд╛

рдЖрдкрд▓реНрдпрд╛ рдкреНрд░рдХрд▓реНрдкрд╛рдЪреА рд░рдЪрдирд╛ рдЕрд╢реА рджрд┐рд╕рд╛рд╡реА:

```
MyWaffleProject
тФЬтФАтФА contracts
тФВ   тФФтФАтФА Greeter.sol
тФЬтФАтФА node_modules
тФЬтФАтФА scripts
тФВ   тФФтФАтФА sample-script.js
тФЬтФАтФА test
тФВ   тФФтФАтФА sample-test.js
тФЬтФАтФА .gitattributes
тФЬтФАтФА .gitignore
тФЬтФАтФА hardhat.config.js
тФФтФАтФА package.json
```

### рдЖрддрд╛ рдпрд╛рдкреИрдХреА рдХрд╛рд╣реА рдлрд╛рдЗрд▓реНрд╕рдмрджреНрджрд▓ рдмреЛрд▓реВрдпрд╛: {#now-lets-talk}

- Greeter.sol - solidity рдордзреНрдпреЗ рд▓рд┐рд╣рд┐рд▓реЗрд▓рд╛ рдЖрдордЪрд╛ рд╕реНрдорд╛рд░реНрдЯ рдХреЙрдиреНрдЯреНрд░реЕрдХреНрдЯ;

```solidity
contract Greeter {
string greeting;

constructor(string memory _greeting) public {
console.log("рдЕрднрд┐рд╡рд╛рджрдирд╛рд╕рд╣ рдЧреНрд░реАрдЯрд░ рдЙрдкрдпреЛрдЬрд┐рдд рдХрд░рдд рдЖрд╣реЗ:", _greeting);
greeting = _greeting;
}

function greet() public view returns (string memory) {
return greeting;
}

function setGreeting(string memory _greeting) public {
console.log("рдЕрднрд┐рд╡рд╛рджрди '%s' рд╡рд░реВрди '%s' рдордзреНрдпреЗ рдмрджрд▓рдд рдЖрд╣реЗ", greeting, _greeting);
greeting = _greeting;
}
}
```

рдЖрдкрд▓рд╛ рд╕реНрдорд╛рд░реНрдЯ рдХреЙрдиреНрдЯреНрд░реЕрдХреНрдЯ рддреАрди рднрд╛рдЧрд╛рдВрдордзреНрдпреЗ рд╡рд┐рднрд╛рдЧрд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ:

1. рдХрдиреНрд╕реНрдЯреНрд░рдХреНрдЯрд░ - рдЬрд┐рдереЗ рдЖрдкрдг `greeting` рдирд╛рд╡рд╛рдЪрд╛ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рдХрд╛рд░рдЪрд╛ рд╡реНрд╣реЗрд░рд┐рдПрдмрд▓ рдШреЛрд╖рд┐рдд рдХрд░рддреЛ,
2. рдлрдВрдХреНрд╢рди рдЧреНрд░реАрдЯ - рдПрдХ рдлрдВрдХреНрд╢рди рдЬреЗ рдХреЙрд▓ рдХреЗрд▓реНрдпрд╛рд╡рд░ `greeting` рдкрд░рдд рдХрд░реЗрд▓,
3. рдлрдВрдХреНрд╢рди рд╕реЗрдЯрдЧреНрд░реАрдЯрд┐рдВрдЧ - рдПрдХ рдлрдВрдХреНрд╢рди рдЬреЗ рдЖрдкрд▓реНрдпрд╛рд▓рд╛ `greeting` рдЪреЗ рдореВрд▓реНрдп рдмрджрд▓рдгреНрдпрд╛рдЪреА рдкрд░рд╡рд╛рдирдЧреА рджреЗрддреЗ.

- sample-test.js - рдЖрдордЪреА рдЪрд╛рдЪрдгреА рдлрд╛рдЗрд▓

```js
describe("Greeter", function () {
  it("рдПрдХрджрд╛ рдмрджрд▓рд▓реНрдпрд╛рд╡рд░ рдирд╡реАрди рдЕрднрд┐рд╡рд╛рджрди рдкрд░рдд рдХреЗрд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ", async function () {
    const Greeter = await ethers.getContractFactory("Greeter")
    const greeter = await Greeter.deploy("Hello, world!")

    await greeter.deployed()
    expect(await greeter.greet()).to.equal("Hello, world!")

    await greeter.setGreeting("Hola, mundo!")
    expect(await greeter.greet()).to.equal("Hola, mundo!")
  })
})
```

### рдкреБрдвреАрд▓ рдкрд╛рдпрд░реА рдореНрд╣рдгрдЬреЗ рдЖрдкрд▓рд╛ рдХреЙрдиреНрдЯреНрд░реЕрдХреНрдЯ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдгреЗ рдЖрдгрд┐ рдЪрд╛рдЪрдгреНрдпрд╛ рдЪрд╛рд▓рд╡рдгреЗ: {#compiling-and-testing}

Waffle рдЪрд╛рдЪрдгреНрдпрд╛ Mocha (рдПрдХ рдЪрд╛рдЪрдгреА рдлреНрд░реЗрдорд╡рд░реНрдХ) рдЖрдгрд┐ Chai (рдПрдХ рдЕрднрд┐рдХрдерди рд▓рд╛рдпрдмреНрд░рд░реА) рд╡рд╛рдкрд░рддрд╛рдд. рддреБрдореНрд╣рд╛рд▓рд╛ рдлрдХреНрдд `npx hardhat test` рдЪрд╛рд▓рд╡рд╛рдпрдЪреЗ рдЖрд╣реЗ рдЖрдгрд┐ рдЦрд╛рд▓реАрд▓ рд╕рдВрджреЗрд╢ рдпреЗрдгреНрдпрд╛рдЪреА рд╡рд╛рдЯ рдкрд╛рд╣рд╛рдпрдЪреА рдЖрд╣реЗ.

```bash
тЬУ рдПрдХрджрд╛ рдмрджрд▓рд▓реНрдпрд╛рд╡рд░ рдирд╡реАрди рдЕрднрд┐рд╡рд╛рджрди рдкрд░рдд рдХреЗрд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ
```

### рдЖрддрд╛рдкрд░реНрдпрдВрдд рд╕рд░реНрд╡ рдХрд╛рд╣реА рдЫрд╛рди рджрд┐рд╕рдд рдЖрд╣реЗ, рдЪрд▓рд╛ рдЖрдкрд▓реНрдпрд╛ рдкреНрд░рдХрд▓реНрдкрд╛рдд рдереЛрдбреА рдЕрдзрд┐рдХ рдЧреБрдВрддрд╛рдЧреБрдВрдд рд╡рд╛рдврд╡реВрдпрд╛ <Emoji text=":slightly_smiling_face:" size={1}/> {#adding-complexity}

рдЕрд╢рд╛ рдкрд░рд┐рд╕реНрдерд┐рддреАрдЪреА рдХрд▓реНрдкрдирд╛ рдХрд░рд╛ рдЬрд┐рдереЗ рдХреЛрдгреАрддрд░реА рдЕрднрд┐рд╡рд╛рджрди рдореНрд╣рдгреВрди рдПрдХ рд░рд┐рдХрд╛рдорд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдЬреЛрдбрддреЛ. рддреЗ рдПрдХ рдЖрдкреБрд▓рдХреАрдЪреЗ рдЕрднрд┐рд╡рд╛рджрди рд╣реЛрдгрд╛рд░ рдирд╛рд╣реА, рдмрд░реЛрдмрд░?  
рдЕрд╕реЗ рд╣реЛрдгрд╛рд░ рдирд╛рд╣реА рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░реВрдпрд╛:

рдЬреЗрд╡реНрд╣рд╛ рдХреЛрдгреА рд░рд┐рдХрд╛рдорд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд╛рд╕ рдХрд░рддреЛ рддреЗрд╡реНрд╣рд╛ рдЖрдореНрд╣рд╛рд▓рд╛ solidity рдЪрд╛ `revert` рд╡рд╛рдкрд░рд╛рдпрдЪрд╛ рдЖрд╣реЗ. рдЪрд╛рдВрдЧрд▓реА рдЧреЛрд╖реНрдЯ рд╣реА рдЖрд╣реЗ рдХреА рдЖрдкрдг Waffle рдЪреНрдпрд╛ рдЪрд╛рдп рдореЕрдЪрд░ `to.be.revertedWith()` рд╕рд╣ рдпрд╛ рдХрд╛рд░реНрдпрдХреНрд╖рдорддреЗрдЪреА рд╕рд╣рдЬ рдЪрд╛рдЪрдгреА рдШреЗрдК рд╢рдХрддреЛ.

```js
it("рд░рд┐рдХрд╛рдорд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд╛рд╕ рдХреЗрд▓реНрдпрд╛рд╡рд░ рдЙрд▓рдЯрд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ", async () => {
  const Greeter = await ethers.getContractFactory("Greeter")
  const greeter = await Greeter.deploy("Hello, world!")

  await greeter.deployed()
  await expect(greeter.setGreeting("")).to.be.revertedWith(
    "рдЕрднрд┐рд╡рд╛рджрди рд░рд┐рдХрд╛рдореЗ рдирд╕рд╛рд╡реЗ"
  )
})
```

рдЕрд╕реЗ рджрд┐рд╕рддреЗ рдХреА рдЖрдордЪреА рдирд╡реАрди рдЪрд╛рдЪрдгреА рдпрд╢рд╕реНрд╡реА рдЭрд╛рд▓реА рдирд╛рд╣реА:

```bash
рдЕрднрд┐рд╡рд╛рджрдирд╛рд╕рд╣ рдЧреНрд░реАрдЯрд░ рдЙрдкрдпреЛрдЬрд┐рдд рдХрд░рдд рдЖрд╣реЗ: Hello, world!
рдЕрднрд┐рд╡рд╛рджрди 'Hello, world!' рд╡рд░реВрди 'Hola, mundo!' рдордзреНрдпреЗ рдмрджрд▓рдд рдЖрд╣реЗ
    тЬУ рдПрдХрджрд╛ рдмрджрд▓рд▓реНрдпрд╛рд╡рд░ рдирд╡реАрди рдЕрднрд┐рд╡рд╛рджрди рдкрд░рдд рдХреЗрд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ (1514ms)
рдЕрднрд┐рд╡рд╛рджрдирд╛рд╕рд╣ рдЧреНрд░реАрдЯрд░ рдЙрдкрдпреЛрдЬрд┐рдд рдХрд░рдд рдЖрд╣реЗ: Hello, world!
рдЕрднрд┐рд╡рд╛рджрди 'Hello, world!' рд╡рд░реВрди '' рдордзреНрдпреЗ рдмрджрд▓рдд рдЖрд╣реЗ
    1) рд░рд┐рдХрд╛рдорд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд╛рд╕ рдХреЗрд▓реНрдпрд╛рд╡рд░ рдЙрд▓рдЯрд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ


  1 рдпрд╢рд╕реНрд╡реА (2s)
  1 рдЕрдпрд╢рд╕реНрд╡реА
```

рдЪрд▓рд╛ рд╣реА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдЖрдкрд▓реНрдпрд╛ рд╕реНрдорд╛рд░реНрдЯ рдХреЙрдиреНрдЯреНрд░реЕрдХреНрдЯрдордзреНрдпреЗ рд▓рд╛рдЧреВ рдХрд░реВрдпрд╛:

```solidity
require(bytes(_greeting).length > 0, "рдЕрднрд┐рд╡рд╛рджрди рд░рд┐рдХрд╛рдореЗ рдирд╕рд╛рд╡реЗ");
```

рдЖрддрд╛, рдЖрдордЪреЗ setGreeting рдлрдВрдХреНрд╢рди рдЕрд╕реЗ рджрд┐рд╕рддреЗ:

```solidity
function setGreeting(string memory _greeting) public {
require(bytes(_greeting).length > 0, "рдЕрднрд┐рд╡рд╛рджрди рд░рд┐рдХрд╛рдореЗ рдирд╕рд╛рд╡реЗ");
console.log("рдЕрднрд┐рд╡рд╛рджрди '%s' рд╡рд░реВрди '%s' рдордзреНрдпреЗ рдмрджрд▓рдд рдЖрд╣реЗ", greeting, _greeting);
greeting = _greeting;
}
```

рдЪрд▓рд╛ рдкреБрдиреНрд╣рд╛ рдЪрд╛рдЪрдгреНрдпрд╛ рдЪрд╛рд▓рд╡реВрдпрд╛:

```bash
тЬУ рдПрдХрджрд╛ рдмрджрд▓рд▓реНрдпрд╛рд╡рд░ рдирд╡реАрди рдЕрднрд┐рд╡рд╛рджрди рдкрд░рдд рдХреЗрд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ (1467ms)
тЬУ рд░рд┐рдХрд╛рдорд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд╛рд╕ рдХреЗрд▓реНрдпрд╛рд╡рд░ рдЙрд▓рдЯрд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ (276ms)

2 рдпрд╢рд╕реНрд╡реА (2s)
```

рдЕрднрд┐рдирдВрджрди! рддреБрдореНрд╣реА рддреЗ рдХреЗрд▓реЗ :)

### рдирд┐рд╖реНрдХрд░реНрд╖ {#conclusion}

рдЖрдореНрд╣реА Waffle, Hardhat рдЖрдгрд┐ ethers.js рд╕рд╣ рдПрдХ рд╕реЛрдкрд╛ рдкреНрд░рдХрд▓реНрдк рдмрдирд╡рд▓рд╛. рдЖрдкрдг рдкреНрд░рдХрд▓реНрдк рдХрд╕рд╛ рд╕реЗрдЯ рдХрд░рд╛рдпрдЪрд╛, рдЪрд╛рдЪрдгреА рдХрд╢реА рдЬреЛрдбрд╛рдпрдЪреА рдЖрдгрд┐ рдирд╡реАрди рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╢реА рд▓рд╛рдЧреВ рдХрд░рд╛рдпрдЪреА рд╣реЗ рд╢рд┐рдХрд▓реЛ.

рддреБрдордЪреНрдпрд╛ рд╕реНрдорд╛рд░реНрдЯ рдХреЙрдиреНрдЯреНрд░реЕрдХреНрдЯрдЪреА рдЪрд╛рдЪрдгреА рдШреЗрдгреНрдпрд╛рд╕рд╛рдареА рдЕрдзрд┐рдХ рдЙрддреНрддрдо рдЪрд╛рдп рдореЕрдЪрд░реНрд╕рд╕рд╛рдареА, [Waffle рдЪреЗ рдЕрдзрд┐рдХреГрдд рдбреЙрдХреНрд╕](https://ethereum-waffle.readthedocs.io/en/latest/matchers.html) рддрдкрд╛рд╕рд╛.
