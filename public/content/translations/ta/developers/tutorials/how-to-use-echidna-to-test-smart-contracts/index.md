---
title: "ро╕рпНрооро╛ро░рпНроЯрпН роТрокрпНрокроирпНродроЩрпНроХро│рпИроЪрпН роЪрпЛродро┐роХрпНроХ роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роОро╡рпНро╡ро╛ро▒рпБ рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ"
description: "ро╕рпНрооро╛ро░рпНроЯрпН роТрокрпНрокроирпНродроЩрпНроХро│рпИродрпН родро╛ройро╛роХ роЪрпЛродро┐роХрпНроХ роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роОро╡рпНро╡ро╛ро▒рпБ рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ"
author: "Trailofbits"
lang: ta
tags:
  [
    "родро┐роЯрпНрокроорпН",
    "ро╕рпНрооро╛ро░рпНроЯрпН роТрокрпНрокроирпНродроЩрпНроХро│рпН",
    "рокро╛родрпБроХро╛рокрпНрокрпБ",
    "роЪрпЛродройрпИ",
    "fuzzing"
  ]
skill: advanced
published: 2020-04-10
source: Building secure contracts
sourceUrl: https://github.com/crytic/building-secure-contracts/tree/master/program-analysis/echidna
---

## роиро┐ро▒рпБро╡ро▓рпН {#installation}

роЯро╛роХрпНроХро░рпН роорпВро▓рооро╛роХро╡рпЛ роЕро▓рпНро▓родрпБ роорпБройрпНрокрпЗ родрпКроХрпБроХрпНроХрокрпНрокроЯрпНроЯ рокрпИройро░ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ропрпЛ роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роиро┐ро▒рпБро╡ро▓ро╛роорпН.

### роЯро╛роХрпНроХро░рпН ро╡ро┤ро┐ропро╛роХ роОроЪрпНроЪро┐роЯрпНройро╛ {#echidna-through-docker}

```bash
docker pull trailofbits/eth-security-toolbox
docker run -it -v "$PWD":/home/training trailofbits/eth-security-toolbox
```

_роХроЯрпИроЪро┐роХрпН роХроЯрпНроЯро│рпИ eth-security-toolbox-роР роЙроЩрпНроХро│рпН родро▒рпНрокрпЛродрпИроп роХрпЛрокрпНрокроХродрпНродро┐ро▒рпНроХро╛рой роЕрогрпБроХро▓рпИроХрпН роХрпКрогрпНроЯ docker-роЗро▓рпН роЗропроХрпНроХрпБроХро┐ро▒родрпБ. роЙроЩрпНроХро│рпН ро╣рпЛро╕рпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ роХрпЛрокрпНрокрпБроХро│рпИ рооро╛ро▒рпНро▒ро▓ро╛роорпН, роорпЗро▓рпБроорпН docker-роЗро▓ро┐ро░рпБроирпНродрпБ роХрпЛрокрпНрокрпБроХро│ро┐ро▓рпН роХро░рпБро╡ро┐роХро│рпИ роЗропроХрпНроХро▓ро╛роорпН_

роЯро╛роХрпНроХро░рпБроХрпНроХрпБро│рпН, роЗропроХрпНроХро╡рпБроорпН:

```bash
solc-select 0.5.11
cd /home/training
```

### рокрпИройро░ро┐ {#binary}

[https://github.com/crytic/echidna/releases/tag/v1.4.0.0](https://github.com/crytic/echidna/releases/tag/v1.4.0.0)

## роЪрпКродрпНродрпБ роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓ро╛рой роГрокро╕ро┐роЩрпНроХро┐ро▒рпНроХро╛рой роЕро▒ро┐роорпБроХроорпН {#introduction-to-property-based-fuzzing}

роОроЪрпНроЪро┐роЯрпНройро╛ роТро░рпБ роЪрпКродрпНродрпБ роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓ро╛рой роГрокро╕рпНро╕ро░рпН роЖроХрпБроорпН, роЗродрпБрокро▒рпНро▒ро┐ роОроЩрпНроХро│рпН роорпБроирпНродрпИроп ро╡ро▓рпИрокрпНрокродро┐ро╡рпБроХро│ро┐ро▓рпН ро╡ро┐ро╡ро░ро┐родрпНродрпБро│рпНро│рпЛроорпН ([1](https://blog.trailofbits.com/2018/03/09/echidna-a-smart-fuzzer-for-ethereum/), [2](https://blog.trailofbits.com/2018/05/03/state-machine-testing-with-echidna/), [3](https://blog.trailofbits.com/2020/03/30/an-echidna-for-all-seasons/)).

### роГрокро╕ро┐роЩрпН {#fuzzing}

рокро╛родрпБроХро╛рокрпНрокрпБ роЪроорпВроХродрпНродро┐ро▓рпН [роГрокро╕ро┐роЩрпН](https://wikipedia.org/wiki/Fuzzing) роТро░рпБ роиройрпНроХрпБ роЕро▒ро┐ропрокрпНрокроЯрпНроЯ роирпБроЯрпНрокрооро╛роХрпБроорпН. роиро┐ро░ро▓ро┐ро▓рпН роЙро│рпНро│ рокро┐ро┤рпИроХро│рпИроХрпН роХрогрпНроЯро▒ро┐роп, роПро▒роХрпНроХрпБро▒рпИроп роЪрпАро░ро▒рпНро▒ роЙро│рпНро│рпАроЯрпБроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХрпБро╡родрпИ роЗродрпБ роХрпКрогрпНроЯрпБро│рпНро│родрпБ. рокро╛ро░роорпНрокро░ро┐роп роорпЖройрпНрокрпКро░рпБро│рпБроХрпНроХро╛рой роГрокро╕рпНро╕ро░рпНроХро│рпН ([AFL](http://lcamtuf.coredump.cx/afl/) роЕро▓рпНро▓родрпБ [LibFuzzer](https://llvm.org/docs/LibFuzzer.html) рокрпЛройрпНро▒ро╡рпИ) рокро┐ро┤рпИроХро│рпИроХрпН роХрогрпНроЯро▒ро┐ропрпБроорпН родро┐ро▒роорпИропро╛рой роХро░рпБро╡ро┐роХро│ро╛роХ роЕро▒ро┐ропрокрпНрокроЯрпБроХро┐ройрпНро▒рой.

роЙро│рпНро│рпАроЯрпБроХро│рпИ роорпБро▒рпНро▒ро┐ро▓рпБроорпН роЪрпАро░ро▒рпНро▒ роорпБро▒рпИропро┐ро▓рпН роЙро░рпБро╡ро╛роХрпНроХрпБро╡родрпИродрпН родро╛рогрпНроЯро┐, роиро▓рпНро▓ роЙро│рпНро│рпАроЯрпБроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХрокрпН рокро▓ роирпБроЯрпНрокроЩрпНроХро│рпБроорпН роЙродрпНродро┐роХро│рпБроорпН роЙро│рпНро│рой, роЕро╡ро▒рпНро▒рпБро│рпН роЪро┐ро▓:

- роТро╡рпНро╡рпКро░рпБ роЪрпЖропро▓ро╛роХрпНроХродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБроорпН рокро┐ройрпНройрпВроЯрпНроЯродрпНродрпИрокрпН рокрпЖро▒рпНро▒рпБ, роЕродрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЙро░рпБро╡ро╛роХрпНроХродрпНродрпИ ро╡ро┤ро┐роироЯродрпНродрпБродро▓рпН. роЙродро╛ро░рогрооро╛роХ, рокрпБродро┐родро╛роХ роЙро░рпБро╡ро╛роХрпНроХрокрпНрокроЯрпНроЯ роТро░рпБ роЙро│рпНро│рпАроЯрпБ роТро░рпБ рокрпБродро┐роп рокро╛родрпИропрпИроХрпН роХрогрпНроЯро▒ро┐роп ро╡ро┤ро┐ро╡роХрпБродрпНродро╛ро▓рпН, роЕродро▒рпНроХрпБ роирпЖро░рпБроХрпНроХрооро╛рой рокрпБродро┐роп роЙро│рпНро│рпАроЯрпБроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХрпБро╡родрпБ роЕро░рпНродрпНродроорпБро│рпНро│родро╛роХ роЗро░рпБроХрпНроХрпБроорпН.
- роТро░рпБ роХроЯрпНроЯроорпИрокрпНрокрпБ ро░рпАродро┐ропро╛рой роХроЯрпНроЯрпБрокрпНрокро╛роЯрпНроЯро┐ро▒рпНроХрпБ роЗрогроЩрпНроХ роЙро│рпНро│рпАроЯрпНроЯрпИ роЙро░рпБро╡ро╛роХрпНроХрпБродро▓рпН. роЙродро╛ро░рогрооро╛роХ, роЙроЩрпНроХро│рпН роЙро│рпНро│рпАроЯрпНроЯро┐ро▓рпН роТро░рпБ роЪрпЖроХрпНроЪроорпН роХрпКрогрпНроЯ родро▓рпИрокрпНрокрпБ роЗро░рпБроирпНродро╛ро▓рпН, роЪрпЖроХрпНроЪроорпНроорпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХрпБроорпН роЙро│рпНро│рпАроЯрпНроЯрпИ роГрокро╕рпНро╕ро░рпН роЙро░рпБро╡ро╛роХрпНроХ роЕройрпБроородро┐рокрпНрокродрпБ роЕро░рпНродрпНродроорпБро│рпНро│родро╛роХ роЗро░рпБроХрпНроХрпБроорпН.
- рокрпБродро┐роп роЙро│рпНро│рпАроЯрпБроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХ, роЕро▒ро┐ропрокрпНрокроЯрпНроЯ роЙро│рпНро│рпАроЯрпБроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБродро▓рпН: роЪрпЖро▓рпНро▓рпБрокроЯро┐ропро╛роХрпБроорпН роЙро│рпНро│рпАроЯрпБроХро│ро┐ройрпН рокрпЖро░ро┐роп родро░ро╡рпБродрпНродрпКроХрпБрокрпНрокро┐ро▒рпНроХрпБ роЙроЩрпНроХро│рпБроХрпНроХрпБ роЕрогрпБроХро▓рпН роЗро░рпБроирпНродро╛ро▓рпН, роЙроЩрпНроХро│рпН роГрокро╕рпНро╕ро░рпН роЕродройрпН роЙро░рпБро╡ро╛роХрпНроХродрпНродрпИ рокрпБродро┐родро╛роХродрпН родрпКроЯроЩрпНроХрпБро╡родро▒рпНроХрпБрокрпН рокродро┐ро▓ро╛роХ, роЕро╡ро▒рпНро▒ро┐ро▓ро┐ро░рпБроирпНродрпБ рокрпБродро┐роп роЙро│рпНро│рпАроЯрпБроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХ роорпБроЯро┐ропрпБроорпН. роЗро╡рпИ рокрпКродрпБро╡ро╛роХ _ро╡ро┐родрпИроХро│рпН_ роОройрпНро▒рпБ роЕро┤рпИроХрпНроХрокрпНрокроЯрпБроХро┐ройрпНро▒рой.

### роЪрпКродрпНродрпБ роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓ро╛рой роГрокро╕ро┐роЩрпН {#property-based-fuzzing}

роОроЪрпНроЪро┐роЯрпНройро╛, [QuickCheck](https://wikipedia.org/wiki/QuickCheck) роорпВро▓роорпН рокрпЖро░ро┐родрпБроорпН роИро░рпНроХрпНроХрокрпНрокроЯрпНроЯ роЪрпКродрпНродрпБ роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓ро╛рой роГрокро╕ро┐роЩрпН роОройрокрпНрокроЯрпБроорпН роТро░рпБ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ роГрокро╕рпНро╕ро░рпН ро╡роХрпИропрпИроЪрпН роЪрпЗро░рпНроирпНродродрпБ. роЪрпЖропро▓ро┐ро┤рокрпНрокрпБроХро│рпИроХрпН роХрогрпНроЯро▒ро┐роп роорпБропро▒рпНроЪро┐роХрпНроХрпБроорпН роХро┐ро│ро╛роЪро┐роХрпН роГрокро╕рпНро╕ро░рпНроХро│рпИрокрпН рокрпЛро▓ройрпНро▒ро┐, роОроЪрпНроЪро┐роЯрпНройро╛ рокропройро░рпН ро╡ро░рпИропро▒рпБродрпНрод рооро╛ро▒ро┐ро▓ро┐роХро│рпИ роЙроЯрпИроХрпНроХ роорпБропро▒рпНроЪро┐роХрпНроХрпБроорпН.

ро╕рпНрооро╛ро░рпНроЯрпН роТрокрпНрокроирпНродроЩрпНроХро│ро┐ро▓рпН, рооро╛ро▒ро┐ро▓ро┐роХро│рпН роОройрпНрокро╡рпИ роЪрпКро▓ро┐роЯро┐роЯрпНроЯро┐ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│ро╛роХрпБроорпН, роЕро╡рпИ роТрокрпНрокроирпНродроорпН роЕроЯрпИропроХрпНроХрпВроЯро┐роп роОроирпНродро╡рпКро░рпБ родро╡ро▒ро╛рой роЕро▓рпНро▓родрпБ роЪрпЖро▓рпНро▓ро╛род роиро┐ро▓рпИропрпИропрпБроорпН роХрпБро▒ро┐роХрпНроХ роорпБроЯро┐ропрпБроорпН, роЕро╡ро▒рпНро▒рпБро│рпН роЪро┐ро▓:

- родро╡ро▒ро╛рой роЕрогрпБроХро▓рпН роХроЯрпНроЯрпБрокрпНрокро╛роЯрпБ: родро╛роХрпНроХрпБрокро╡ро░рпН роТрокрпНрокроирпНродродрпНродро┐ройрпН роЙро░ро┐роорпИропро╛ро│ро░ро╛роХро┐ро╡ро┐роЯрпБроХро┐ро▒ро╛ро░рпН.
- родро╡ро▒ро╛рой роиро┐ро▓рпИ роЗропроирпНродро┐ро░роорпН: роТрокрпНрокроирпНродроорпН роЗроЯрпИроиро┐ро▒рпБродрпНродрокрпНрокроЯрпНроЯро┐ро░рпБроХрпНроХрпБроорпН рокрпЛродрпБ роЯрпЛроХрпНроХройрпНроХро│рпИ рооро╛ро▒рпНро▒ роорпБроЯро┐ропрпБроорпН.
- родро╡ро▒ро╛рой роХрогро┐родроорпН: рокропройро░рпН родройродрпБ роЗро░рпБрокрпНрокрпИ роЕрогрпНроЯро░рпНроГрокрпНро│рпЛ роЪрпЖропрпНродрпБ ро╡ро░роорпНрокро▒рпНро▒ роЗро▓ро╡роЪ роЯрпЛроХрпНроХройрпНроХро│рпИрокрпН рокрпЖро▒ роорпБроЯро┐ропрпБроорпН.

### роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпБроЯройрпН роТро░рпБ роЪрпКродрпНродрпИроЪрпН роЪрпЛродро┐родрпНродро▓рпН {#testing-a-property-with-echidna}

роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпБроЯройрпН роТро░рпБ ро╕рпНрооро╛ро░рпНроЯрпН роТрокрпНрокроирпНродродрпНродрпИ роОро╡рпНро╡ро╛ро▒рпБ роЪрпЛродро┐рокрпНрокродрпБ роОройрпНро▒рпБ рокро╛ро░рпНрокрпНрокрпЛроорпН. роЗро▓роХрпНроХрпБ рокро┐ройрпНро╡ро░рпБроорпН ро╕рпНрооро╛ро░рпНроЯрпН роТрокрпНрокроирпНродроорпН роЖроХрпБроорпН [`token.sol`](https://github.com/crytic/building-secure-contracts/blob/master/program-analysis/echidna/example/token.sol):

```solidity
contract Token{
  mapping(address => uint) public balances;
  function airdrop() public{
      balances[msg.sender] = 1000;
  }
  function consume() public{
      require(balances[msg.sender]>0);
      balances[msg.sender] -= 1;
  }
  function backdoor() public{
      balances[msg.sender] += 1;
  }
}
```

роЗроирпНрод роЯрпЛроХрпНроХройрпН рокро┐ройрпНро╡ро░рпБроорпН рокрогрпНрокрпБроХро│рпИроХрпН роХрпКрогрпНроЯро┐ро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН роОройрпНро▒ роЕройрпБрооро╛ройродрпНродрпИ роиро╛роорпН роОроЯрпБродрпНродрпБроХрпНроХрпКро│рпНро╡рпЛроорпН:

- ропро╛ро░рпН ро╡рпЗрогрпНроЯрпБрооро╛ройро╛ро▓рпБроорпН роЕродро┐роХрокроЯрпНроЪрооро╛роХ 1000 роЯрпЛроХрпНроХройрпНроХро│рпИ ро╡рпИродрпНродро┐ро░рпБроХрпНроХро▓ро╛роорпН
- роЯрпЛроХрпНроХройрпИ рооро╛ро▒рпНро▒ роорпБроЯро┐ропро╛родрпБ (роЗродрпБ ERC20 роЯрпЛроХрпНроХройрпН роЕро▓рпНро▓)

### роТро░рпБ роЪрпКродрпНродрпИ роОро┤рпБродрпБродро▓рпН {#write-a-property}

роОроЪрпНроЪро┐роЯрпНройро╛ роЪрпКродрпНродрпБроХрпНроХро│рпН роЪрпКро▓ро┐роЯро┐роЯрпНроЯро┐ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│ро╛роХрпБроорпН. роТро░рпБ роЪрпКродрпНродрпБ роХрогрпНроЯро┐рокрпНрокро╛роХ:

- роОроирпНрод роЙро│рпНро│рпАроЯрпБроХро│рпБроорпН роХрпКрогрпНроЯро┐ро░рпБроХрпНроХроХрпНроХрпВроЯро╛родрпБ
- роЕродрпБ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ роЗро░рпБроирпНродро╛ро▓рпН `true` роОройродрпН родро┐ро░рпБрокрпНрокро┐ропройрпБрокрпНрок ро╡рпЗрогрпНроЯрпБроорпН
- роЕродройрпН рокрпЖропро░рпН `echidna` роОройродрпН родрпКроЯроЩрпНроХ ро╡рпЗрогрпНроЯрпБроорпН

роОроЪрпНроЪро┐роЯрпНройро╛ рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИроЪрпН роЪрпЖропрпНропрпБроорпН:

- роЪрпКродрпНродрпИроЪрпН роЪрпЛродро┐роХрпНроХ, родройрпНройро┐роЪрпНроЪрпИропро╛рой рокро░ро┐ро╡ро░рпНродрпНродройрпИроХро│рпИродрпН родро╛ройро╛роХро╡рпЗ роЙро░рпБро╡ро╛роХрпНроХрпБродро▓рпН.
- роТро░рпБ роЪрпКродрпНродрпБ `false` роОройродрпН родро┐ро░рпБрокрпНрокро┐ропройрпБрокрпНрок роЕро▓рпНро▓родрпБ роТро░рпБ рокро┐ро┤рпИропрпИродрпН родрпВрогрпНроЯ ро╡ро┤ро┐ро╡роХрпБроХрпНроХрпБроорпН роОроирпНродро╡рпКро░рпБ рокро░ро┐ро╡ро░рпНродрпНродройрпИропрпИропрпБроорпН рокрпБроХро╛ро░ро│ро┐родрпНродро▓рпН.
- роТро░рпБ роЪрпКродрпНродрпИ роЕро┤рпИроХрпНроХрпБроорпНрокрпЛродрпБ рокроХрпНроХ ро╡ро┐ро│рпИро╡рпБроХро│рпИ роиро┐ро░ро╛роХро░ро┐родрпНродро▓рпН (роЕродро╛ро╡родрпБ, роЪрпКродрпНродрпБ роТро░рпБ роиро┐ро▓рпИ рооро╛ро▒ро┐ропрпИ рооро╛ро▒рпНро▒ро┐ройро╛ро▓рпН, роЕродрпБ роЪрпЛродройрпИроХрпНроХрпБрокрпН рокро┐ро▒роХрпБ роиро┐ро░ро╛роХро░ро┐роХрпНроХрокрпНрокроЯрпБроорпН)

роЕро┤рпИрокрпНрокро╛ро│ро░рпН 1000 роЯрпЛроХрпНроХройрпНроХро│рпБроХрпНроХрпБ роорпЗро▓рпН ро╡рпИродрпНродро┐ро░рпБроХрпНроХро╡ро┐ро▓рпНро▓рпИ роОройрпНрокродрпИ рокро┐ройрпНро╡ро░рпБроорпН роЪрпКродрпНродрпБ роЪро░ро┐рокро╛ро░рпНроХрпНроХро┐ро▒родрпБ:

```solidity
function echidna_balance_under_1000() public view returns(bool){
      return balances[msg.sender] <= 1000;
}
```

роЙроЩрпНроХро│рпН роТрокрпНрокроирпНродродрпНродрпИ роЙроЩрпНроХро│рпН роЪрпКродрпНродрпБроХрпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ рокро┐ро░ро┐роХрпНроХ рооро░рокрпБро░ро┐роорпИропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН:

```solidity
contract TestToken is Token{
      function echidna_balance_under_1000() public view returns(bool){
            return balances[msg.sender] <= 1000;
      }
  }
```

[`token.sol`](https://github.com/crytic/building-secure-contracts/blob/master/program-analysis/echidna/example/token.sol) роЪрпКродрпНродрпИроЪрпН роЪрпЖропро▓рпНрокроЯрпБродрпНродро┐ роЯрпЛроХрпНроХройро┐ро▓ро┐ро░рпБроирпНродрпБ рооро░рокрпБро░ро┐роорпИропро╛роХрокрпН рокрпЖро▒рпБроХро┐ро▒родрпБ.

### роТро░рпБ роТрокрпНрокроирпНродродрпНродрпИродрпН родрпКроЯроЩрпНроХрпБродро▓рпН {#initiate-a-contract}

роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпБроХрпНроХрпБ роЙро│рпНро│рпАроЯрпБ роЗро▓рпНро▓ро╛род роТро░рпБ [роХройрпНро╕рпНроЯро┐ро░роХрпНроЯро░рпН](/developers/docs/smart-contracts/anatomy/#constructor-functions) родрпЗро╡рпИ. роЙроЩрпНроХро│рпН роТрокрпНрокроирпНродродрпНродро┐ро▒рпНроХрпБ роТро░рпБ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ родрпБро╡роХрпНроХроорпН родрпЗро╡рпИрокрпНрокроЯрпНроЯро╛ро▓рпН, роирпАроЩрпНроХро│рпН роЕродрпИ роХройрпНро╕рпНроЯро┐ро░роХрпНроЯро░ро┐ро▓рпН роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН.

роОроЪрпНроЪро┐роЯрпНройро╛ро╡ро┐ро▓рпН роЪро┐ро▓ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ роорпБроХро╡ро░ро┐роХро│рпН роЙро│рпНро│рой:

- `0x00a329c0648769A73afAc7F9381E08FB43dBEA72` роЗродрпБ роХройрпНро╕рпНроЯро┐ро░роХрпНроЯро░рпИ роЕро┤рпИроХрпНроХро┐ро▒родрпБ.
- `0x10000`, `0x20000`, рооро▒рпНро▒рпБроорпН `0x00a329C0648769a73afAC7F9381e08fb43DBEA70` роЗро╡рпИ рооро▒рпНро▒ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИродрпН родрпЛро░ро╛ропрооро╛роХ роЕро┤рпИроХрпНроХро┐ройрпНро▒рой.

роироородрпБ родро▒рпНрокрпЛродрпИроп роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯро┐ро▓рпН роОроирпНродро╡рпКро░рпБ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ родрпБро╡роХрпНроХроорпБроорпН роироороХрпНроХрпБродрпН родрпЗро╡рпИропро┐ро▓рпНро▓рпИ, роЗродройрпН ро╡ро┐ро│рпИро╡ро╛роХ роироородрпБ роХройрпНро╕рпНроЯро┐ро░роХрпНроЯро░рпН роХро╛ро▓ро┐ропро╛роХ роЙро│рпНро│родрпБ.

### роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роЗропроХрпНроХрпБродро▓рпН {#run-echidna}

роОроЪрпНроЪро┐роЯрпНройро╛ роЗродройрпН роорпВро▓роорпН родрпКроЯроЩрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ:

```bash
echidna-test contract.sol
```

contract.sol рокро▓ роТрокрпНрокроирпНродроЩрпНроХро│рпИроХрпН роХрпКрогрпНроЯро┐ро░рпБроирпНродро╛ро▓рпН, роирпАроЩрпНроХро│рпН роЗро▓роХрпНроХрпИроХрпН роХрпБро▒ро┐рокрпНрокро┐роЯро▓ро╛роорпН:

```bash
echidna-test contract.sol --contract MyContract
```

### роЪрпБро░рпБроХрпНроХроорпН: роТро░рпБ роЪрпКродрпНродрпИроЪрпН роЪрпЛродро┐родрпНродро▓рпН {#summary-testing-a-property}

роироородрпБ роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯро┐ро▓рпН роОроЪрпНроЪро┐роЯрпНройро╛ро╡ро┐ройрпН роЗропроХрпНроХродрпНродрпИ рокро┐ройрпНро╡ро░рпБро╡родрпБ роЪрпБро░рпБроХрпНроХрооро╛роХроХрпН роХрпВро▒рпБроХро┐ро▒родрпБ:

```solidity
contract TestToken is Token{
    constructor() public {}
        function echidna_balance_under_1000() public view returns(bool){
          return balances[msg.sender] <= 1000;
        }
  }
```

```bash
echidna-test testtoken.sol --contract TestToken
...

echidna_balance_under_1000: failed!ЁЯТе
  Call sequence, shrinking (1205/5000):
    airdrop()
    backdoor()

...
```

`backdoor` роЕро┤рпИроХрпНроХрокрпНрокроЯрпНроЯро╛ро▓рпН роЪрпКродрпНродрпБ роорпАро▒рокрпНрокроЯрпБроХро┐ро▒родрпБ роОройрпНро▒рпБ роОроЪрпНроЪро┐роЯрпНройро╛ роХрогрпНроЯро▒ро┐роирпНродродрпБ.

## роТро░рпБ роГрокро╕ро┐роЩрпН рокро┐ро░роЪрпНроЪро╛ро░родрпНродро┐ройрпН рокрпЛродрпБ роЕро┤рпИроХрпНроХ ро╡рпЗрогрпНроЯро┐роп роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ ро╡роЯро┐роХроЯрпНроЯрпБродро▓рпН {#filtering-functions-to-call-during-a-fuzzing-campaign}

роГрокро╕рпН роЪрпЖропрпНропрокрпНрокроЯ ро╡рпЗрогрпНроЯро┐роп роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ роОро╡рпНро╡ро╛ро▒рпБ ро╡роЯро┐роХроЯрпНроЯрпБро╡родрпБ роОройрпНро▒рпБ рокро╛ро░рпНрокрпНрокрпЛроорпН.
роЗро▓роХрпНроХрпБ рокро┐ройрпНро╡ро░рпБроорпН ро╕рпНрооро╛ро░рпНроЯрпН роТрокрпНрокроирпНродроорпН роЖроХрпБроорпН:

```solidity
contract C {
  bool state1 = false;
  bool state2 = false;
  bool state3 = false;
  bool state4 = false;

  function f(uint x) public {
    require(x == 12);
    state1 = true;
  }

  function g(uint x) public {
    require(state1);
    require(x == 8);
    state2 = true;
  }

  function h(uint x) public {
    require(state2);
    require(x == 42);
    state3 = true;
  }

 function i() public {
    require(state3);
    state4 = true;
  }

  function reset1() public {
    state1 = false;
    state2 = false;
    state3 = false;
    return;
  }

  function reset2() public {
    state1 = false;
    state2 = false;
    state3 = false;
    return;
  }

  function echidna_state4() public returns (bool) {
    return (!state4);
  }
}
```

роЗроирпНрод роЪро┐ро▒ро┐роп роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБ, роТро░рпБ роиро┐ро▓рпИ рооро╛ро▒ро┐ропрпИ рооро╛ро▒рпНро▒рпБро╡родро▒рпНроХро╛роХ роТро░рпБ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ рокро░ро┐ро╡ро░рпНродрпНродройрпИ ро╡ро░ро┐роЪрпИропрпИроХрпН роХрогрпНроЯро▒ро┐роп роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИроХрпН роХроЯрпНроЯро╛ропрокрпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ.
роЗродрпБ роТро░рпБ роГрокро╕рпНро╕ро░рпБроХрпНроХрпБ роХроЯро┐ройрооро╛ройродрпБ ([Manticore](https://github.com/trailofbits/manticore) рокрпЛройрпНро▒ роТро░рпБ роХрпБро▒ро┐ропрпАроЯрпНроЯрпБ роЪрпЖропро▓ро╛роХрпНроХроХрпН роХро░рпБро╡ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродрокрпН рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ).
роЗродрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХ роиро╛роорпН роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роЗропроХрпНроХро▓ро╛роорпН:

```bash
echidna-test multi.sol
...
echidna_state4: passed! ЁЯОЙ
Seed: -3684648582249875403
```

### роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ ро╡роЯро┐роХроЯрпНроЯрпБродро▓рпН {#filtering-functions}

роЗроирпНрод роТрокрпНрокроирпНродродрпНродрпИроЪрпН роЪрпЛродро┐роХрпНроХ роЪро░ро┐ропро╛рой ро╡ро░ро┐роЪрпИропрпИроХрпН роХрогрпНроЯро▒ро┐ро╡родро┐ро▓рпН роОроЪрпНроЪро┐роЯрпНройро╛ роЪро┐ро░роорокрпНрокроЯрпБроХро┐ро▒родрпБ, роПройрпЖройро┐ро▓рпН роЗро░рогрпНроЯрпБ роорпАроЯрпНроЯроорпИрокрпНрокрпБ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпБроорпН (`reset1` рооро▒рпНро▒рпБроорпН `reset2`) роЕройрпИродрпНродрпБ роиро┐ро▓рпИ рооро╛ро▒ро┐роХро│рпИропрпБроорпН `false` роОрой роЕроорпИродрпНродрпБро╡ро┐роЯрпБроорпН.
роЗро░рпБрокрпНрокро┐ройрпБроорпН, роорпАроЯрпНроЯроорпИрокрпНрокрпБ роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпИ рокро┐ро│ро╛роХрпНро▓ро┐ро╕рпНроЯрпН роЪрпЖропрпНро╡родро▒рпНроХрпЛ роЕро▓рпНро▓родрпБ `f`, `g`,
`h` рооро▒рпНро▒рпБроорпН `i` роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ роороЯрпНроЯрпБроорпН роТропро┐роЯрпНро▓ро┐ро╕рпНроЯрпН роЪрпЖропрпНро╡родро▒рпНроХрпЛ роТро░рпБ роЪро┐ро▒рокрпНрокрпБ роОроЪрпНроЪро┐роЯрпНройро╛ роЕроорпНроЪродрпНродрпИ роиро╛роорпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН.

роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ рокро┐ро│ро╛роХрпНро▓ро┐ро╕рпНроЯрпН роЪрпЖропрпНроп, роЗроирпНрод роЙро│рпНро│роорпИро╡рпБроХрпН роХрпЛрокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН:

```yaml
filterBlacklist: true
filterFunctions: ["reset1", "reset2"]
```

роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ ро╡роЯро┐роХроЯрпНроЯрпБро╡родро▒рпНроХро╛рой рооро▒рпНро▒рпКро░рпБ роЕрогрпБроХрпБроорпБро▒рпИ, роТропро┐роЯрпНро▓ро┐ро╕рпНроЯрпН роЪрпЖропрпНропрокрпНрокроЯрпНроЯ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИрокрпН рокроЯрпНроЯро┐ропро▓ро┐роЯрпБро╡родро╛роХрпБроорпН. роЕродрпИроЪрпН роЪрпЖропрпНроп, роЗроирпНрод роЙро│рпНро│роорпИро╡рпБроХрпН роХрпЛрокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН:

```yaml
filterBlacklist: false
filterFunctions: ["f", "g", "h", "i"]
```

- `filterBlacklist` роЗропро▓рпНрокро╛роХ `true` роЖроХрпБроорпН.
- ро╡роЯро┐роХроЯрпНроЯрпБродро▓рпН рокрпЖропро░ро╛ро▓рпН роороЯрпНроЯрпБроорпЗ роЪрпЖропрпНропрокрпНрокроЯрпБроорпН (роЕро│ро╡рпБро░рпБроХрпНроХро│рпН роЗро▓рпНро▓ро╛рооро▓рпН). роЙроЩрпНроХро│ро┐роЯроорпН `f()` рооро▒рпНро▒рпБроорпН `f(uint256)` роЗро░рпБроирпНродро╛ро▓рпН, `"f"` роОройрпНро▒ ро╡роЯро┐рокрпНрокро╛ройрпН роЗро░рогрпНроЯрпБ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпБроХрпНроХрпБроорпН рокрпКро░рпБроирпНродрпБроорпН.

### роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роЗропроХрпНроХрпБродро▓рпН {#run-echidna-1}

`blacklist.yaml` роЙро│рпНро│роорпИро╡рпБроХрпН роХрпЛрокрпНрокрпБроЯройрпН роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роЗропроХрпНроХ:

```bash
echidna-test multi.sol --config blacklist.yaml
...
echidna_state4: failed!ЁЯТе
  Call sequence:
    f(12)
    g(8)
    h(42)
    i()
```

роЪрпКродрпНродрпИ рокрпКропрпНропро╛роХрпНроХрпБро╡родро▒рпНроХро╛рой рокро░ро┐ро╡ро░рпНродрпНродройрпИроХро│ро┐ройрпН ро╡ро░ро┐роЪрпИропрпИ роОроЪрпНроЪро┐роЯрпНройро╛ роЙроЯройроЯро┐ропро╛роХроХрпН роХрогрпНроЯро▒ро┐ропрпБроорпН.

### роЪрпБро░рпБроХрпНроХроорпН: роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ ро╡роЯро┐роХроЯрпНроЯрпБродро▓рпН {#summary-filtering-functions}

роОроЪрпНроЪро┐роЯрпНройро╛ роТро░рпБ роГрокро╕ро┐роЩрпН рокро┐ро░роЪрпНроЪро╛ро░родрпНродро┐ройрпН рокрпЛродрпБ рокро┐ро│ро╛роХрпНро▓ро┐ро╕рпНроЯрпН роЕро▓рпНро▓родрпБ роТропро┐роЯрпНро▓ро┐ро╕рпНроЯрпН роЪрпЖропрпНроп ро╡рпЗрогрпНроЯро┐роп роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЕро┤рпИроХрпНроХ роорпБроЯро┐ропрпБроорпН:

```yaml
filterBlacklist: true
filterFunctions: ["f1", "f2", "f3"]
```

```bash
echidna-test contract.sol --config config.yaml
...
```

роОроЪрпНроЪро┐роЯрпНройро╛ `filterBlacklist` рокрпВро▓ро┐ропройрпН роородро┐рокрпНрокрпИрокрпН рокрпКро▒рпБродрпНродрпБ, `f1`, `f2` рооро▒рпНро▒рпБроорпН `f3` роЖроХро┐ропро╡ро▒рпНро▒рпИ рокро┐ро│ро╛роХрпНро▓ро┐ро╕рпНроЯрпН роЪрпЖропрпНродрпЛ роЕро▓рпНро▓родрпБ роЕро╡ро▒рпНро▒рпИ роороЯрпНроЯрпБроорпН роЕро┤рпИродрпНродрпЛ роТро░рпБ роГрокро╕ро┐роЩрпН рокро┐ро░роЪрпНроЪро╛ро░родрпНродрпИродрпН родрпКроЯроЩрпНроХрпБроХро┐ро▒родрпБ.

## роЪрпКро▓ро┐роЯро┐роЯрпНроЯро┐ропро┐ройрпН assert-роР роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпБроЯройрпН роЪрпЛродро┐рокрпНрокродрпБ роОрокрпНрокроЯро┐ {#how-to-test-soliditys-assert-with-echidna}

роЗроирпНродроЪрпН роЪро┐ро▒ро┐роп рокропро┐ро▒рпНроЪро┐ропро┐ро▓рпН, роТрокрпНрокроирпНродроЩрпНроХро│ро┐ро▓рпН роЙро▒рпБродро┐роорпКро┤ро┐роЪрпН роЪро░ро┐рокро╛ро░рпНрокрпНрокрпИроЪрпН роЪрпЛродро┐роХрпНроХ роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роОро╡рпНро╡ро╛ро▒рпБ рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ роОройрпНрокродрпИроХрпН роХро╛роЯрпНроЯрокрпН рокрпЛроХро┐ро▒рпЛроорпН. роЗродрпБ рокрпЛройрпНро▒ роТро░рпБ роТрокрпНрокроирпНродроорпН роироорпНрооро┐роЯроорпН роЗро░рпБрокрпНрокродро╛роХ ро╡рпИродрпНродрпБроХрпНроХрпКро│рпНро╡рпЛроорпН:

```solidity
contract Incrementor {
  uint private counter = 2**200;

  function inc(uint val) public returns (uint){
    uint tmp = counter;
    counter += val;
    // tmp <= counter
    return (counter - tmp);
  }
}
```

### роТро░рпБ роЙро▒рпБродро┐роорпКро┤ро┐ропрпИ роОро┤рпБродрпБродро▓рпН {#write-an-assertion}

`tmp` роЖройродрпБ роЕродройрпН ро╡рпЗро▒рпБрокро╛роЯрпНроЯрпИ родро┐ро░рпБрокрпНрокро┐ропройрпБрокрпНрокро┐роп рокро┐ро▒роХрпБ `counter`-роР ро╡ро┐роЯ роХрпБро▒рпИро╡ро╛роХро╡рпЛ роЕро▓рпНро▓родрпБ роЪроорооро╛роХро╡рпЛ роЙро│рпНро│родро╛ роОройрпНрокродрпИ роиро╛роорпН роЙро▒рпБродро┐роЪрпЖропрпНроп ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпЛроорпН. роиро╛роорпН роТро░рпБ роОроЪрпНроЪро┐роЯрпНройро╛ роЪрпКродрпНродрпИ роОро┤рпБродро▓ро╛роорпН, роЖройро╛ро▓рпН `tmp` роородро┐рокрпНрокрпИ роОроЩрпНроХро╛ро╡родрпБ роЪрпЗрооро┐роХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. роЕродро▒рпНроХрпБ рокродро┐ро▓ро╛роХ, роЗродрпБ рокрпЛройрпНро▒ роТро░рпБ роЙро▒рпБродро┐роорпКро┤ро┐ропрпИ роиро╛роорпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН:

```solidity
contract Incrementor {
  uint private counter = 2**200;

  function inc(uint val) public returns (uint){
    uint tmp = counter;
    counter += val;
    assert (tmp <= counter);
    return (counter - tmp);
  }
}
```

### роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роЗропроХрпНроХрпБродро▓рпН {#run-echidna-2}

роЙро▒рпБродро┐роорпКро┤ро┐ родрпЛро▓рпНро╡ро┐роЪрпН роЪрпЛродройрпИропрпИ роЗропроХрпНроХ, роТро░рпБ [роОроЪрпНроЪро┐роЯрпНройро╛ роЙро│рпНро│роорпИро╡рпБроХрпН роХрпЛрокрпНрокрпИ](https://github.com/crytic/echidna/wiki/Config) `config.yaml` роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН:

```yaml
checkAsserts: true
```

роОроЪрпНроЪро┐роЯрпНройро╛ро╡ро┐ро▓рпН роЗроирпНрод роТрокрпНрокроирпНродродрпНродрпИ роЗропроХрпНроХрпБроорпНрокрпЛродрпБ, роиро╛роорпН роОродро┐ро░рпНрокро╛ро░рпНродрпНрод роорпБроЯро┐ро╡рпБроХро│рпИрокрпН рокрпЖро▒рпБроХро┐ро▒рпЛроорпН:

```bash
echidna-test assert.sol --config config.yaml
Analyzing contract: assert.sol:Incrementor
assertion in inc: failed!ЁЯТе
  Call sequence, shrinking (2596/5000):
    inc(21711016731996786641919559689128982722488122124807605757398297001483711807488)
    inc(7237005577332262213973186563042994240829374041602535252466099000494570602496)
    inc(86844066927987146567678238756515930889952488499230423029593188005934847229952)

Seed: 1806480648350826486
```

роирпАроЩрпНроХро│рпН рокро╛ро░рпНрокрпНрокродрпБ рокрпЛро▓, `inc` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▓рпН роЪро┐ро▓ роЙро▒рпБродро┐роорпКро┤ро┐родрпН родрпЛро▓рпНро╡ро┐роХро│рпИ роОроЪрпНроЪро┐роЯрпНройро╛ рокрпБроХро╛ро░ро│ро┐роХрпНроХро┐ро▒родрпБ. роТро░рпБ роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▒рпНроХрпБ роТройрпНро▒рпБроХрпНроХрпБ роорпЗро▒рпНрокроЯрпНроЯ роЙро▒рпБродро┐роорпКро┤ро┐роХро│рпИроЪрпН роЪрпЗро░рпНрокрпНрокродрпБ роЪро╛родрпНродро┐ропроорпН, роЖройро╛ро▓рпН роОроирпНрод роЙро▒рпБродро┐роорпКро┤ро┐ родрпЛро▓рпНро╡ро┐ропроЯрпИроирпНродродрпБ роОройрпНрокродрпИ роОроЪрпНроЪро┐роЯрпНройро╛ро╡ро╛ро▓рпН роЪрпКро▓рпНро▓ роорпБроЯро┐ропро╛родрпБ.

### роОрокрпНрокрпЛродрпБ, роОрокрпНрокроЯро┐ роЙро▒рпБродро┐роорпКро┤ро┐роХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ {#when-and-how-use-assertions}

роЪро░ро┐рокро╛ро░рпНроХрпНроХ ро╡рпЗрогрпНроЯро┐роп роиро┐рокроирпНродройрпИроХро│рпН роЪро┐ро▓ `f` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ройрпН роЪро░ро┐ропро╛рой рокропройрпНрокро╛роЯрпНроЯрпБроЯройрпН роирпЗро░роЯро┐ропро╛роХ родрпКроЯро░рпНрокрпБроЯрпИропродро╛роХ роЗро░рпБроирпНродро╛ро▓рпН, ро╡рпЖро│ро┐рокрпНрокроЯрпИропро╛рой роЪрпКродрпНродрпБроХро│рпБроХрпНроХрпБ рооро╛ро▒рпНро▒ро╛роХ роЙро▒рпБродро┐роорпКро┤ро┐роХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН. роЪро┐ро▓ роХрпБро▒ро┐ропрпАроЯрпНроЯро┐ро▒рпНроХрпБрокрпН рокро┐ро▒роХрпБ роЙро▒рпБродро┐роорпКро┤ро┐роХро│рпИроЪрпН роЪрпЗро░рпНрокрпНрокродрпБ, роЕродрпБ роЪрпЖропро▓рпНрокроЯрпБродрпНродрокрпНрокроЯрпНроЯ роЙроЯройрпЗропрпЗ роЪро░ро┐рокро╛ро░рпНрокрпНрокрпБ роироЯрокрпНрокродрпИ роЙро▒рпБродро┐ роЪрпЖропрпНропрпБроорпН:

```solidity
function f(..) public {
    // some complex code
    ...
    assert (condition);
    ...
}

```

рооро╛ро▒ро╛роХ, роТро░рпБ ро╡рпЖро│ро┐рокрпНрокроЯрпИропро╛рой роОроЪрпНроЪро┐роЯрпНройро╛ роЪрпКродрпНродрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ родрпЛро░ро╛ропрооро╛роХ рокро░ро┐ро╡ро░рпНродрпНродройрпИроХро│рпИроЪрпН роЪрпЖропро▓рпНрокроЯрпБродрпНродрпБроорпН, роорпЗро▓рпБроорпН роЕродрпБ роОрокрпНрокрпЛродрпБ роЪро░ро┐рокро╛ро░рпНроХрпНроХрокрпНрокроЯрпБроорпН роОройрпНрокродрпИроЪрпН роЪро░ро┐ропро╛роХроЪрпН роЪрпЖропро▓рпНрокроЯрпБродрпНродрпБро╡родро▒рпНроХрпБ роОро│ро┐родро╛рой ро╡ро┤ро┐ роЗро▓рпНро▓рпИ. роЗроирпНрод рооро╛ро▒рпНро▒рпБ ро╡ро┤ро┐ропрпИроЪрпН роЪрпЖропрпНро╡родрпБ роЗройрпНройрпБроорпН роЪро╛родрпНродро┐ропроорпН:

```solidity
function echidna_assert_after_f() public returns (bool) {
    f(..);
    return(condition);
}
```

роЗро░рпБрокрпНрокро┐ройрпБроорпН, роЪро┐ро▓ роЪро┐роХрпНроХро▓рпНроХро│рпН роЙро│рпНро│рой:

- `f` `internal` роЕро▓рпНро▓родрпБ `external` роОрой роЕро▒ро┐ро╡ро┐роХрпНроХрокрпНрокроЯрпНроЯро╛ро▓рпН роЕродрпБ родрпЛро▓рпНро╡ро┐ропроЯрпИроХро┐ро▒родрпБ.
- `f` роР роЕро┤рпИроХрпНроХ роОроирпНрод ро╡ро╛родроЩрпНроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНрод ро╡рпЗрогрпНроЯрпБроорпН роОройрпНрокродрпБ родрпЖро│ро┐ро╡ро╛роХ роЗро▓рпНро▓рпИ.
- `f` родро┐ро░рпБрокрпНрокро┐ропройрпБрокрпНрокро┐ройро╛ро▓рпН, роЪрпКродрпНродрпБ родрпЛро▓рпНро╡ро┐ропроЯрпИропрпБроорпН.

рокрпКродрпБро╡ро╛роХ, роЙро▒рпБродро┐роорпКро┤ро┐роХро│рпИ роОро╡рпНро╡ро╛ро▒рпБ рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ роОройрпНрокродрпБ роХрпБро▒ро┐родрпНрод [роЬро╛ройрпН ро░рпЖро╣ро░ро┐ройрпН рокро░ро┐роирпНродрпБро░рпИропрпИ](https://blog.regehr.org/archives/1091)рокрпН рокро┐ройрпНрокро▒рпНро▒рокрпН рокро░ро┐роирпНродрпБро░рпИроХрпНроХро┐ро▒рпЛроорпН:

- роЙро▒рпБродро┐роорпКро┤ро┐роЪрпН роЪро░ро┐рокро╛ро░рпНрокрпНрокро┐ройрпН рокрпЛродрпБ роОроирпНродрокрпН рокроХрпНроХ ро╡ро┐ро│рпИро╡рпБроХро│рпИропрпБроорпН роХроЯрпНроЯро╛ропрокрпНрокроЯрпБродрпНрод ро╡рпЗрогрпНроЯро╛роорпН. роЙродро╛ро░рогрооро╛роХ: `assert(ChangeStateAndReturn() == 1)`
- ро╡рпЖро│ро┐рокрпНрокроЯрпИропро╛рой роЕро▒ро┐роХрпНроХрпИроХро│рпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНрод ро╡рпЗрогрпНроЯро╛роорпН. роЙродро╛ро░рогрооро╛роХ `assert(var >= 0)` роЗродро┐ро▓рпН `var` роЖройродрпБ `uint` роОрой роЕро▒ро┐ро╡ро┐роХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ.

роЗро▒рпБродро┐ропро╛роХ, `assert` роХрпНроХрпБ рокродро┐ро▓ро╛роХ `require`-роР **рокропройрпНрокроЯрпБродрпНрод ро╡рпЗрогрпНроЯро╛роорпН**, роПройрпЖройро┐ро▓рпН роОроЪрпНроЪро┐роЯрпНройро╛ро╡ро╛ро▓рпН роЕродрпИроХрпН роХрогрпНроЯро▒ро┐роп роорпБроЯро┐ропро╛родрпБ (роЖройро╛ро▓рпН роТрокрпНрокроирпНродроорпН роОрокрпНрокроЯро┐ропрпБроорпН родро┐ро░рпБрокрпНрокро┐ропройрпБрокрпНрокрпБроорпН).

### роЪрпБро░рпБроХрпНроХроорпН: роЙро▒рпБродро┐роорпКро┤ро┐ роЪро░ро┐рокро╛ро░рпНрокрпНрокрпБ {#summary-assertion-checking}

роироородрпБ роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯро┐ро▓рпН роОроЪрпНроЪро┐роЯрпНройро╛ро╡ро┐ройрпН роЗропроХрпНроХродрпНродрпИ рокро┐ройрпНро╡ро░рпБро╡родрпБ роЪрпБро░рпБроХрпНроХрооро╛роХроХрпН роХрпВро▒рпБроХро┐ро▒родрпБ:

```solidity
contract Incrementor {
  uint private counter = 2**200;

  function inc(uint val) public returns (uint){
    uint tmp = counter;
    counter += val;
    assert (tmp <= counter);
    return (counter - tmp);
  }
}
```

```bash
echidna-test assert.sol --config config.yaml
Analyzing contract: assert.sol:Incrementor
assertion in inc: failed!ЁЯТе
  Call sequence, shrinking (2596/5000):
    inc(21711016731996786641919559689128982722488122124807605757398297001483711807488)
    inc(7237005577332262213973186563042994240829374041602535252466099000494570602496)
    inc(86844066927987146567678238756515930889952488499230423029593188005934847229952)

Seed: 1806480648350826486
```

рокрпЖро░ро┐роп ро╡ро╛родроЩрпНроХро│рпБроЯройрпН роЗроирпНродроЪрпН роЪрпЖропро▓рпНрокро╛роЯрпБ рокро▓роорпБро▒рпИ роЕро┤рпИроХрпНроХрокрпНрокроЯрпНроЯро╛ро▓рпН `inc`-ро▓рпН роЙро│рпНро│ роЙро▒рпБродро┐роорпКро┤ро┐ родрпЛро▓рпНро╡ро┐ропроЯрпИропроХрпНроХрпВроЯрпБроорпН роОройрпНрокродрпИ роОроЪрпНроЪро┐роЯрпНройро╛ роХрогрпНроЯро▒ро┐роирпНродродрпБ.

## роТро░рпБ роОроЪрпНроЪро┐роЯрпНройро╛ роХро╛ро░рпНрокро╕рпИ роЪрпЗроХро░ро┐родрпНродро▓рпН рооро▒рпНро▒рпБроорпН рооро╛ро▒рпНро▒рпБродро▓рпН {#collecting-and-modifying-an-echidna-corpus}

роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпБроЯройрпН роТро░рпБ роХро╛ро░рпНрокро╕рпН рокро░ро┐ро╡ро░рпНродрпНродройрпИроХро│рпИ роОро╡рпНро╡ро╛ро▒рпБ роЪрпЗроХро░ро┐рокрпНрокродрпБ рооро▒рпНро▒рпБроорпН рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ роОройрпНро▒рпБ рокро╛ро░рпНрокрпНрокрпЛроорпН. роЗро▓роХрпНроХрпБ рокро┐ройрпНро╡ро░рпБроорпН ро╕рпНрооро╛ро░рпНроЯрпН роТрокрпНрокроирпНродроорпН роЖроХрпБроорпН [`magic.sol`](https://github.com/crytic/building-secure-contracts/blob/master/program-analysis/echidna/example/magic.sol):

```solidity
contract C {
  bool value_found = false;
  function magic(uint magic_1, uint magic_2, uint magic_3, uint magic_4) public {
    require(magic_1 == 42);
    require(magic_2 == 129);
    require(magic_3 == magic_4+333);
    value_found = true;
    return;
  }

  function echidna_magic_values() public returns (bool) {
    return !value_found;
  }

}
```

роЗроирпНрод роЪро┐ро▒ро┐роп роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБ роТро░рпБ роиро┐ро▓рпИ рооро╛ро▒ро┐ропрпИ рооро╛ро▒рпНро▒рпБро╡родро▒рпНроХро╛роХ роЪро┐ро▓ роородро┐рокрпНрокрпБроХро│рпИроХрпН роХрогрпНроЯро▒ро┐роп роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИроХрпН роХроЯрпНроЯро╛ропрокрпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ. роЗродрпБ роТро░рпБ роГрокро╕рпНро╕ро░рпБроХрпНроХрпБ роХроЯро┐ройрооро╛ройродрпБ
([Manticore](https://github.com/trailofbits/manticore) рокрпЛройрпНро▒ роТро░рпБ роХрпБро▒ро┐ропрпАроЯрпНроЯрпБ роЪрпЖропро▓ро╛роХрпНроХроХрпН роХро░рпБро╡ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродрокрпН рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ).
роЗродрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХ роиро╛роорпН роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роЗропроХрпНроХро▓ро╛роорпН:

```bash
echidna-test magic.sol
...

echidna_magic_values: passed! ЁЯОЙ

Seed: 2221503356319272685
```

роЗро░рпБрокрпНрокро┐ройрпБроорпН, роЗроирпНрод роГрокро╕ро┐роЩрпН рокро┐ро░роЪрпНроЪро╛ро░родрпНродрпИ роЗропроХрпНроХрпБроорпН рокрпЛродрпБ роХро╛ро░рпНрокро╕рпИроЪрпН роЪрпЗроХро░ро┐роХрпНроХ роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роиро╛роорпН роЗройрпНройрпБроорпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН.

### роТро░рпБ роХро╛ро░рпНрокро╕рпИроЪрпН роЪрпЗроХро░ро┐родрпНродро▓рпН {#collecting-a-corpus}

роХро╛ро░рпНрокро╕рпН роЪрпЗроХро░ро┐рокрпНрокрпИ роЗропроХрпНроХ, роТро░рпБ роХро╛ро░рпНрокро╕рпН роХрпЛрокрпНрокроХродрпНродрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН:

```bash
mkdir corpus-magic
```

рооро▒рпНро▒рпБроорпН роТро░рпБ [роОроЪрпНроЪро┐роЯрпНройро╛ роЙро│рпНро│роорпИро╡рпБроХрпН роХрпЛрокрпНрокрпБ](https://github.com/crytic/echidna/wiki/Config) `config.yaml`:

```yaml
coverage: true
corpusDir: "corpus-magic"
```

роЗрокрпНрокрпЛродрпБ роиро╛роорпН роироородрпБ роХро░рпБро╡ро┐ропрпИ роЗропроХрпНроХро┐, роЪрпЗроХро░ро┐роХрпНроХрокрпНрокроЯрпНроЯ роХро╛ро░рпНрокро╕рпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХро▓ро╛роорпН:

```bash
echidna-test magic.sol --config config.yaml
```

роОроЪрпНроЪро┐роЯрпНройро╛ро╡ро╛ро▓рпН роЗройрпНройрпБроорпН роЪро░ро┐ропро╛рой роорпЗроЬро┐роХрпН роородро┐рокрпНрокрпБроХро│рпИроХрпН роХрогрпНроЯро▒ро┐роп роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ, роЖройро╛ро▓рпН роЕродрпБ роЪрпЗроХро░ро┐родрпНрод роХро╛ро░рпНрокро╕рпИрокрпН рокро╛ро░рпНроХрпНроХро▓ро╛роорпН.
роЙродро╛ро░рогрооро╛роХ, роЗроирпНрод роХрпЛрокрпНрокрпБроХро│ро┐ро▓рпН роТройрпНро▒рпБ:

```json
[
  {
    "_gas'": "0xffffffff",
    "_delay": ["0x13647", "0xccf6"],
    "_src": "00a329c0648769a73afac7f9381e08fb43dbea70",
    "_dst": "00a329c0648769a73afac7f9381e08fb43dbea72",
    "_value": "0x0",
    "_call": {
      "tag": "SolCall",
      "contents": [
        "magic",
        [
          {
            "contents": [
              256,
              "93723985220345906694500679277863898678726808528711107336895287282192244575836"
            ],
            "tag": "AbiUInt"
          },
          {
            "contents": [256, "334"],
            "tag": "AbiUInt"
          },
          {
            "contents": [
              256,
              "68093943901352437066264791224433559271778087297543421781073458233697135179558"
            ],
            "tag": "AbiUInt"
          },
          {
            "tag": "AbiUInt",
            "contents": [256, "332"]
          }
        ]
      ]
    },
    "_gasprice'": "0xa904461f1"
  }
]
```

родрпЖро│ро┐ро╡ро╛роХ, роЗроирпНрод роЙро│рпНро│рпАроЯрпБ роироородрпБ роЪрпКродрпНродро┐ро▓рпН родрпЛро▓рпНро╡ро┐ропрпИродрпН родрпВрогрпНроЯро╛родрпБ. роЗро░рпБрокрпНрокро┐ройрпБроорпН, роЕроЯрпБродрпНрод рокроЯро┐ропро┐ро▓рпН, роЕродрпИ роОрокрпНрокроЯро┐ рооро╛ро▒рпНро▒рпБро╡родрпБ роОройрпНро▒рпБ рокро╛ро░рпНрокрпНрокрпЛроорпН.

### роТро░рпБ роХро╛ро░рпНрокро╕рпИ ро╡ро┐родрпИродрпНродро▓рпН {#seeding-a-corpus}

`magic` роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпИроХрпН роХрпИропро╛ро│рпНро╡родро▒рпНроХро╛роХ роОроЪрпНроЪро┐роЯрпНройро╛ро╡ро┐ро▒рпНроХрпБ роЪро┐ро▓ роЙродро╡ро┐роХро│рпН родрпЗро╡рпИ. роЕродро▒рпНроХрпБрокрпН рокрпКро░рпБродрпНродрооро╛рой роЕро│ро╡рпБро░рпБроХрпНроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНрод роЙро│рпНро│рпАроЯрпНроЯрпИ роироХро▓рпЖроЯрпБродрпНродрпБ рооро╛ро▒рпНро▒рокрпН рокрпЛроХро┐ро▒рпЛроорпН:

```bash
cp corpus/2712688662897926208.txt corpus/new.txt
```

`magic(42,129,333,0)`-роР роЕро┤рпИроХрпНроХ `new.txt`-роР рооро╛ро▒рпНро▒рпБро╡рпЛроорпН. роЗрокрпНрокрпЛродрпБ, роиро╛роорпН роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роорпАрогрпНроЯрпБроорпН роЗропроХрпНроХро▓ро╛роорпН:

```bash
echidna-test magic.sol --config config.yaml
...
echidna_magic_values: failed!ЁЯТе
  Call sequence:
    magic(42,129,333,0)


Unique instructions: 142
Unique codehashes: 1
Seed: -7293830866560616537

```

роЗроирпНрод роорпБро▒рпИ, роЪрпКродрпНродрпБ роЙроЯройроЯро┐ропро╛роХ роорпАро▒рокрпНрокроЯрпНроЯро┐ро░рпБрокрпНрокродрпИроХрпН роХрогрпНроЯро▒ро┐роирпНродродрпБ.

## роЕродро┐роХ роОро░ро┐ро╡ро╛ропрпБ роирпБроХро░рпНро╡рпБ роХрпКрогрпНроЯ рокро░ро┐ро╡ро░рпНродрпНродройрпИроХро│рпИроХрпН роХрогрпНроЯро▒ро┐родро▓рпН {#finding-transactions-with-high-gas-consumption}

роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпБроЯройрпН роЕродро┐роХ роОро░ро┐ро╡ро╛ропрпБ роирпБроХро░рпНро╡рпБ роХрпКрогрпНроЯ рокро░ро┐ро╡ро░рпНродрпНродройрпИроХро│рпИ роОро╡рпНро╡ро╛ро▒рпБ роХрогрпНроЯро▒ро┐ро╡родрпБ роОройрпНро▒рпБ рокро╛ро░рпНрокрпНрокрпЛроорпН. роЗро▓роХрпНроХрпБ рокро┐ройрпНро╡ро░рпБроорпН ро╕рпНрооро╛ро░рпНроЯрпН роТрокрпНрокроирпНродроорпН роЖроХрпБроорпН:

```solidity
contract C {
  uint state;

  function expensive(uint8 times) internal {
    for(uint8 i=0; i < times; i++)
      state = state + i;
  }

  function f(uint x, uint y, uint8 times) public {
    if (x == 42 && y == 123)
      expensive(times);
    else
      state = 0;
  }

  function echidna_test() public returns (bool) {
    return true;
  }

}
```

роЗроЩрпНроХрпБ `expensive` роЕродро┐роХ роОро░ро┐ро╡ро╛ропрпБ роирпБроХро░рпНро╡рпИроХрпН роХрпКрогрпНроЯро┐ро░рпБроХрпНроХро▓ро╛роорпН.

родро▒рпНрокрпЛродрпБ, роОроЪрпНроЪро┐роЯрпНройро╛ро╡ро┐ро▒рпНроХрпБ роОрокрпНрокрпЛродрпБроорпН роЪрпЛродро┐роХрпНроХ роТро░рпБ роЪрпКродрпНродрпБ родрпЗро╡рпИ: роЗроЩрпНроХрпБ `echidna_test` роОрокрпНрокрпЛродрпБроорпН `true` роОройродрпН родро┐ро░рпБрокрпНрокро┐ропройрпБрокрпНрокрпБроХро┐ро▒родрпБ.
роЗродрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХ роиро╛роорпН роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роЗропроХрпНроХро▓ро╛роорпН:

```
echidna-test gas.sol
...
echidna_test: passed! ЁЯОЙ

Seed: 2320549945714142710
```

### роОро░ро┐ро╡ро╛ропрпБ роирпБроХро░рпНро╡рпИ роЕро│ро╡ро┐роЯрпБродро▓рпН {#measuring-gas-consumption}

роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпБроЯройрпН роОро░ро┐ро╡ро╛ропрпБ роирпБроХро░рпНро╡рпИ роЗропроХрпНроХ, `config.yaml` роОройрпНро▒ роЙро│рпНро│роорпИро╡рпБроХрпН роХрпЛрокрпНрокрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН:

```yaml
estimateGas: true
```

роЗроирпНрод роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯро┐ро▓рпН, роорпБроЯро┐ро╡рпБроХро│рпИ роОро│ро┐родро╛роХрокрпН рокрпБро░ро┐роирпНродрпБроХрпКро│рпНро│ рокро░ро┐ро╡ро░рпНродрпНродройрпИ ро╡ро░ро┐роЪрпИропро┐ройрпН роЕро│ро╡рпИропрпБроорпН роХрпБро▒рпИрокрпНрокрпЛроорпН:

```yaml
seqLen: 2
estimateGas: true
```

### роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роЗропроХрпНроХрпБродро▓рпН {#run-echidna-3}

роЙро│рпНро│роорпИро╡рпБроХрпН роХрпЛрокрпНрокрпИ роЙро░рпБро╡ро╛роХрпНроХро┐ропродрпБроорпН, роОроЪрпНроЪро┐роЯрпНройро╛ро╡рпИ роЗродрпБрокрпЛро▓ роЗропроХрпНроХро▓ро╛роорпН:

```bash
echidna-test gas.sol --config config.yaml
...
echidna_test: passed! ЁЯОЙ

f used a maximum of 1333608 gas
  Call sequence:
    f(42,123,249) Gas price: 0x10d5733f0a Time delay: 0x495e5 Block delay: 0x88b2

Unique instructions: 157
Unique codehashes: 1
Seed: -325611019680165325

```

- роХро╛роЯрпНроЯрокрпНрокроЯрпБроорпН роОро░ро┐ро╡ро╛ропрпБ роОройрпНрокродрпБ [HEVM](https://github.com/dapphub/dapptools/tree/master/src/hevm#hevm-) ро╡ро┤роЩрпНроХрпБроорпН роТро░рпБ роородро┐рокрпНрокрпАроЯро╛роХрпБроорпН.

### роОро░ро┐ро╡ро╛ропрпБ роХрпБро▒рпИроХрпНроХрпБроорпН роЕро┤рпИрокрпНрокрпБроХро│рпИ ро╡роЯро┐роХроЯрпНроЯрпБродро▓рпН {#filtering-out-gas-reducing-calls}

роорпЗро▓рпЗ роЙро│рпНро│ **роТро░рпБ роГрокро╕ро┐роЩрпН рокро┐ро░роЪрпНроЪро╛ро░родрпНродро┐ройрпН рокрпЛродрпБ роЕро┤рпИроХрпНроХ ро╡рпЗрогрпНроЯро┐роп роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ ро╡роЯро┐роХроЯрпНроЯрпБродро▓рпН** рокропро┐ро▒рпНроЪро┐, роЙроЩрпНроХро│рпН роЪрпЛродройрпИропро┐ро▓ро┐ро░рпБроирпНродрпБ роЪро┐ро▓ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ роОро╡рпНро╡ро╛ро▒рпБ роЕроХро▒рпНро▒рпБро╡родрпБ роОройрпНрокродрпИроХрпН роХро╛роЯрпНроЯрпБроХро┐ро▒родрпБ.  
родрпБро▓рпНро▓ро┐ропрооро╛рой роОро░ро┐ро╡ро╛ропрпБ роородро┐рокрпНрокрпАроЯрпНроЯрпИрокрпН рокрпЖро▒рпБро╡родро▒рпНроХрпБ роЗродрпБ роорпБроХрпНроХро┐ропрооро╛ройродро╛роХ роЗро░рпБроХрпНроХро▓ро╛роорпН.
рокро┐ройрпНро╡ро░рпБроорпН роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпИроХрпН роХро╡ройро┐ропрпБроЩрпНроХро│рпН:

```solidity
contract C {
  address [] addrs;
  function push(address a) public {
    addrs.push(a);
  }
  function pop() public {
    addrs.pop();
  }
  function clear() public{
    addrs.length = 0;
  }
  function check() public{
    for(uint256 i = 0; i < addrs.length; i++)
      for(uint256 j = i+1; j < addrs.length; j++)
        if (addrs[i] == addrs[j])
          addrs[j] = address(0x0);
  }
  function echidna_test() public returns (bool) {
      return true;
  }
}
```

роОроЪрпНроЪро┐роЯрпНройро╛ роЕройрпИродрпНродрпБ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИропрпБроорпН роЕро┤рпИроХрпНроХ роорпБроЯро┐роирпНродро╛ро▓рпН, роЕродро┐роХ роОро░ро┐ро╡ро╛ропрпБ роЪрпЖро▓ро╡рпБ роХрпКрогрпНроЯ рокро░ро┐ро╡ро░рпНродрпНродройрпИроХро│рпИ роОро│ро┐родро┐ро▓рпН роХрогрпНроЯро▒ро┐ропро╛родрпБ:

```
echidna-test pushpop.sol --config config.yaml
...
pop used a maximum of 10746 gas
...
check used a maximum of 23730 gas
...
clear used a maximum of 35916 gas
...
push used a maximum of 40839 gas
```

роПройрпЖройрпНро▒ро╛ро▓рпН роЪрпЖро▓ро╡рпБ `addrs`-ройрпН роЕро│ро╡рпИрокрпН рокрпКро▒рпБродрпНродродрпБ рооро▒рпНро▒рпБроорпН родрпЛро░ро╛ропрооро╛рой роЕро┤рпИрокрпНрокрпБроХро│рпН ро╡ро░ро┐роЪрпИропрпИ роХро┐роЯрпНроЯродрпНродроЯрпНроЯ роХро╛ро▓ро┐ропро╛роХ ро╡ро┐роЯрпНроЯрпБро╡ро┐роЯрпБроорпН.
`pop` рооро▒рпНро▒рпБроорпН `clear` роЖроХро┐ропро╡ро▒рпНро▒рпИ рокро┐ро│ро╛роХрпНро▓ро┐ро╕рпНроЯрпН роЪрпЖропрпНро╡родрпБ, роЗро░рпБрокрпНрокро┐ройрпБроорпН, роироороХрпНроХрпБ рооро┐роХроЪрпН роЪро┐ро▒роирпНрод роорпБроЯро┐ро╡рпБроХро│рпИродрпН родро░рпБроХро┐ро▒родрпБ:

```yaml
filterBlacklist: true
filterFunctions: ["pop", "clear"]
```

```
echidna-test pushpop.sol --config config.yaml
...
push used a maximum of 40839 gas
...
check used a maximum of 1484472 gas
```

### роЪрпБро░рпБроХрпНроХроорпН: роЕродро┐роХ роОро░ро┐ро╡ро╛ропрпБ роирпБроХро░рпНро╡рпБ роХрпКрогрпНроЯ рокро░ро┐ро╡ро░рпНродрпНродройрпИроХро│рпИроХрпН роХрогрпНроЯро▒ро┐родро▓рпН {#summary-finding-transactions-with-high-gas-consumption}

роОроЪрпНроЪро┐роЯрпНройро╛ `estimateGas` роЙро│рпНро│роорпИро╡рпБ ро╡ро┐ро░рпБрокрпНрокродрпНродрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЕродро┐роХ роОро░ро┐ро╡ро╛ропрпБ роирпБроХро░рпНро╡рпБ роХрпКрогрпНроЯ рокро░ро┐ро╡ро░рпНродрпНродройрпИроХро│рпИроХрпН роХрогрпНроЯро▒ро┐роп роорпБроЯро┐ропрпБроорпН:

```yaml
estimateGas: true
```

```bash
echidna-test contract.sol --config config.yaml
...
```

роГрокро╕ро┐роЩрпН рокро┐ро░роЪрпНроЪро╛ро░роорпН роорпБроЯро┐роирпНродродрпБроорпН, роТро╡рпНро╡рпКро░рпБ роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▒рпНроХрпБроорпН роЕродро┐роХрокроЯрпНроЪ роОро░ро┐ро╡ро╛ропрпБ роирпБроХро░рпНро╡рпБ роХрпКрогрпНроЯ роТро░рпБ ро╡ро░ро┐роЪрпИропрпИ роОроЪрпНроЪро┐роЯрпНройро╛ рокрпБроХро╛ро░ро│ро┐роХрпНроХрпБроорпН.
