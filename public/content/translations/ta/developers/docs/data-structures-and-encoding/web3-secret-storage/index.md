---
title: "Web3 இரகசிய சேமிப்பக வரையறை"
description: "Web3 இரகசிய சேமிப்பகத்திற்கான முறையான வரையறை"
lang: ta
sidebarDepth: 2
---

உங்கள் app-ஐ Ethereum-இல் இயங்கச் செய்ய, web3.js library வழங்கும் web3 object-ஐ பயன்படுத்தலாம். அதன் உள்ளே, அது RPC calls மூலம் ஒரு local node-உடன் தொடர்பு கொள்கிறது. ஒரு RPC லேயரை வெளிப்படுத்தும் எந்த Ethereum நோடுடனும் [web3](https://github.com/ethereum/web3.js/) வேலை செய்யும்.

`web3`-இல் `eth` ஆப்ஜெக்ட் உள்ளது - web3.eth.

```js
var fs = require("fs")
var recognizer = require("ethereum-keyfile-recognizer")

fs.readFile("keyfile.json", (err, data) => {
  var json = JSON.parse(data)
  var result = recognizer(json)
})

/** முடிவு
 *               [ 'web3', 3 ]   web3 (v3) கீஃபைல்
 *  [ 'ethersale', undefined ]   Ethersale கீஃபைல்
 *                        null     செல்லாத கீஃபைல்
 */
```

இந்த ஆவணம் Web3 இரகசிய சேமிப்பக வரையறையின் **பதிப்பு 3**-ஐ ஆவணப்படுத்துகிறது.

## வரையறை {#definition}

இந்த file-ன் உண்மையான encoding மற்றும் decoding, பெரும்பாலும் version 1-இலிருந்து மாறவில்லை, ஆனால் crypto algorithm இனி AES-128-CBC-க்கு fix செய்யப்பட்டிருக்கவில்லை (இப்போது குறைந்தபட்ச தேவை AES-128-CTR ஆகும்). `mac` தவிர, பெரும்பாலான அர்த்தங்கள்/அல்காரிதம் பதிப்பு 1-ஐப் போலவே இருக்கும். `mac` என்பது, வருவிக்கப்பட்ட கீயின் இரண்டாவது இடதுபுறத்தில் உள்ள 16 பைட்டுகளையும் முழு `ciphertext`-ஐயும் இணைப்பதன் மூலம் கிடைக்கும் SHA3 (keccak-256) ஆக வழங்கப்படுகிறது.

இரகசிய கீ கோப்புகள் நேரடியாக `~/.web3/keystore` (Unix-போன்ற கணினிகளுக்கு) மற்றும் `~/AppData/Web3/keystore` (விண்டோஸிற்கு) ஆகியவற்றில் சேமிக்கப்படுகின்றன. அவற்றுக்கு எப்படி வேண்டுமானாலும் பெயரிடலாம், ஆனால் ஒரு நல்ல மரபு `<uuid>.json` என்பதாகும், இங்கு `<uuid>` என்பது இரகசிய கீக்கு வழங்கப்படும் 128-பிட் UUID ஆகும் (இது இரகசிய கீயின் முகவரிக்கான தனியுரிமை-காக்கும் ப்ராக்ஸி).

இத்தகைய அனைத்து கோப்புகளுக்கும் (files) தொடர்புடைய ஒரு password இருக்கும். ஒரு `.json` கோப்பின் இரகசிய கீயை வருவிக்க, முதலில் அந்தக் கோப்பின் என்க்ரிப்ஷன் கீயை வருவிக்க வேண்டும். `kdf` கீயில் விவரிக்கப்பட்டுள்ள ஒரு கீ வருவிப்புச் செயல்பாட்டின் வழியே கோப்பின் கடவுச்சொல்லைச் செலுத்துவதன் மூலம் இது செய்யப்படுகிறது. KDF செயல்பாட்டிற்கான KDF-சார்ந்த நிலையான மற்றும் டைனமிக் அளவுருக்கள் `kdfparams` கீயில் விவரிக்கப்பட்டுள்ளன.

PBKDF2, அனைத்து குறைந்தபட்சம் விதிகளைக் கடைப்பிடிக்கும் (minimally-compliant) implementations-இலும் ஆதரிக்கப்பட வேண்டும், அது கீழ்க்கண்டவாறு குறிக்கப்படுகிறது:

- `kdf`: `pbkdf2`

PBKDF2-க்கு, kdfparams-இல் அடங்குவன:

- `prf`: `hmac-sha256` ஆக இருக்க வேண்டும் (எதிர்காலத்தில் நீட்டிக்கப்படலாம்);
- `c`: மறுசெய்கைகளின் எண்ணிக்கை;
- `salt`: PBKDF-க்கு அனுப்பப்பட்ட salt;
- `dklen`: வருவிக்கப்பட்ட கீக்கான நீளம். >= 32 ஆக இருக்க வேண்டும்.

ஒருமுறை கோப்பின் key பெறப்பட்ட பிறகு, அது MAC derivation மூலம் சரிபார்க்கப்பட வேண்டும். வருவிக்கப்பட்ட கீயின் இரண்டாவது இடதுபுறத்தில் உள்ள 16 பைட்டுகளை `ciphertext` கீயின் உள்ளடக்கங்களுடன் இணைத்து உருவாக்கப்பட்ட பைட் வரிசையின் SHA3 (keccak-256) ஹாஷாக MAC கணக்கிடப்பட வேண்டும், அதாவது:

```js
KECCAK(DK[16..31] ++ <ciphertext>)
```

(இங்கு `++` என்பது இணைப்புச் செயலி)

இந்த மதிப்பு `mac` கீயின் உள்ளடக்கங்களுடன் ஒப்பிடப்பட வேண்டும்; அவை வேறுபட்டால், ஒரு மாற்று கடவுச்சொல் கோரப்பட வேண்டும் (அல்லது செயல்பாடு ரத்து செய்யப்பட வேண்டும்).

கோப்பின் கீ சரிபார்க்கப்பட்ட பிறகு, `cipher` கீயால் குறிப்பிடப்பட்ட சிம்மெட்ரிக் என்க்ரிப்ஷன் அல்காரிதம் மற்றும் `cipherparams` கீ மூலம் அளவுருவாக்கப்பட்டதைப் பயன்படுத்தி சைஃபர் உரையை (கோப்பில் உள்ள `ciphertext` கீ) மறைகுறியீடு நீக்கலாம். Derived key size மற்றும் algorithm-ன் key size ஒன்று பொருந்தவில்லை என்றால், derived key-யின் வலதுபுற (rightmost) bytes-களில் zero padding சேர்த்ததை, algorithm-க்கு key-ஆக பயன்படுத்த வேண்டும்.

அனைத்து குறைந்தபட்ச விதிகளைக் கடைப்பிடிக்கும் (minimally-compliant) implementations-இலும், AES-128-CTR algorithm-ஐ ஆதரிக்க வேண்டும், அது கீழ்க்கண்டவாறு குறிக்கப்படுகிறது:

- `cipher: aes-128-ctr`

இந்த cipher, கீழே கொடுக்கப்பட்டுள்ள parameters-ஐ (cipherparams key-இல் உள்ள values) எடுத்துக்கொள்கிறது:

- `iv`: சைஃபருக்கான 128-பிட் தொடக்க திசையன்.

சைஃபருக்கான கீ என்பது வருவிக்கப்பட்ட கீயின் இடதுபுறத்தில் உள்ள 16 பைட்டுகள் ஆகும், அதாவது `DK[0..15]`

Secret key-ஐ உருவாக்குவது/Encrypt செய்வது, அடிப்படையில் இந்த வழிமுறைகளின் (instructions) எதிர்மாறாக இருக்க வேண்டும். `uuid`, `salt` மற்றும் `iv` ஆகியவை உண்மையில் தற்போக்கானவையாக இருப்பதை உறுதிசெய்யவும்.

`version` புலம் பதிப்பின் ஒரு "கடினமான" அடையாளங்காட்டியாக செயல்பட வேண்டும். இதற்கு கூடுதலாக, வடிவமைப்புக்கு சிறிய, பாதிப்பில்லாத மாற்றங்களைக் கண்காணிக்க, செயலாக்கங்கள் `minorversion`-ஐயும் பயன்படுத்தலாம்.

## சோதனை வெக்டர்கள் {#test-vectors}

Details:

- `முகவரி`: `008aeeda4d805471df9b2a5b0f38a0c3bcba786b`
- `ICAP`: `XE542A5PZHH8PYIZUBEJEO0MFWRAPPIL67`
- `UUID`: `3198bc9c-6672-5ab3-d9954942343ae5b6`
- `கடவுச்சொல்`: `testpassword`
- `இரகசியம்`: `7a28b5ba57c53603b0b07b56bba752f7784bf506fa95edc395f5cf6c7514fe9d`

### PBKDF2-SHA-256 {#PBKDF2-SHA-256}

`AES-128-CTR` மற்றும் `PBKDF2-SHA-256` ஐப் பயன்படுத்தும் சோதனை வெக்டர்:

`~/.web3/keystore/3198bc9c-6672-5ab3-d9954942343ae5b6.json` கோப்பின் உள்ளடக்கங்கள்:

```json
{
  "crypto": {
    "cipher": "aes-128-ctr",
    "cipherparams": {
      "iv": "6087dab2f9fdbbfaddc31a909735c1e6"
    },
    "ciphertext": "5318b4d5bcd28de64ee5559e671353e16f075ecae9f99c7a79a38af5f869aa46",
    "kdf": "pbkdf2",
    "kdfparams": {
      "c": 262144,
      "dklen": 32,
      "prf": "hmac-sha256",
      "salt": "ae3cd4e7013836a3df6bd7241b12db061dbe2c6785853cce422d148a624ce0bd"
    },
    "mac": "517ead924a9d0dc3124507e3393d175ce3ff7c1e96529c6c555ce9e51205e9b2"
  },
  "id": "3198bc9c-6672-5ab3-d995-4942343ae5b6",
  "version": 3
}
```

**இடைநிலைகள்**:

`வருவிக்கப்பட்ட கீ`: `f06d69cdc7da0faffb1008270bca38f5e31891a3a773950e6d0fea48a7188551`
`MAC பாடி`: `e31891a3a773950e6d0fea48a71885515318b4d5bcd28de64ee5559e671353e16f075ecae9f99c7a79a38af5f869aa46`
`MAC`: `517ead924a9d0dc3124507e3393d175ce3ff7c1e96529c6c555ce9e51205e9b2`
`சைஃபர் கீ`: `f06d69cdc7da0faffb1008270bca38f5`

### Scrypt {#scrypt}

Test vector using AES-128-CTR and Scrypt:

```json
{
  "crypto": {
    "cipher": "aes-128-ctr",
    "cipherparams": {
      "iv": "740770fce12ce862af21264dab25f1da"
    },
    "ciphertext": "dd8a1132cf57db67c038c6763afe2cbe6ea1949a86abc5843f8ca656ebbb1ea2",
    "kdf": "scrypt",
    "kdfparams": {
      "dklen": 32,
      "n": 262144,
      "p": 1,
      "r": 8,
      "salt": "25710c2ccd7c610b24d068af83b959b7a0e5f40641f0c82daeb1345766191034"
    },
    "mac": "337aeb86505d2d0bb620effe57f18381377d67d76dac1090626aa5cd20886a7c"
  },
  "id": "3198bc9c-6672-5ab3-d995-4942343ae5b6",
  "version": 3
}
```

**இடைநிலைகள்**:

`வருவிக்கப்பட்ட கீ`: `7446f59ecc301d2d79bc3302650d8a5cedc185ccbb4bf3ca1ebd2c163eaa6c2d`
`MAC பாடி`: `edc185ccbb4bf3ca1ebd2c163eaa6c2ddd8a1132cf57db67c038c6763afe2cbe6ea1949a86abc5843f8ca656ebbb1ea2`
`MAC`: `337aeb86505d2d0bb620effe57f18381377d67d76dac1090626aa5cd20886a7c`
`சைஃபர் கீ`: `7446f59ecc301d2d79bc3302650d8a5c`

## பதிப்பு 1-லிருந்து மாற்றங்கள் {#alterations-from-v2}

[இங்கே](https://github.com/ethereum/homestead-guide/blob/master/old-docs-for-reference/go-ethereum-wiki.rst/Passphrase-protected-key-store-spec.rst) வெளியிடப்பட்ட பதிப்பு 1-இல் உள்ள பல முரண்பாடுகளை இந்தப் பதிப்பு சரிசெய்கிறது. சுருக்கமாக, அவை:

- Capitalisation (எழுத்து பெரிய/சிறிய பிழைகள்) தேவையற்றதும், ஒற்றுமையற்றதும் (உதா: scrypt சிறிய எழுத்தில், Kdf mixed-case-இல், MAC பெரிய எழுத்தில்).
- Address தேவையற்றது மற்றும் தனியுரிமையை (privacy) பாதிக்கிறது.
- `Salt` என்பது இயல்பாகவே கீ வருவிப்புச் செயல்பாட்டின் ஒரு அளவுருவாகும், எனவே அது பொதுவாக கிரிப்டோவுடன் அல்லாமல், அதனுடன் தொடர்புடையதாக இருக்க வேண்டும்.
- _SaltLen_ தேவையற்றது (அதை Salt-இல் இருந்தே கண்டறியலாம்).
- Key derivation function கொடுக்கப்பட்டுள்ளதே தவிர, crypto algorithm-ஐ கடினமாக fix செய்து விட்டார்கள்.
- `Version` இயல்பாகவே எண் சார்ந்தது, ஆனாலும் ஒரு ஸ்டிரிங்காக உள்ளது (ஒரு ஸ்டிரிங் மூலம் கட்டமைக்கப்பட்ட பதிப்பிடுதல் சாத்தியமாகும், ஆனால் அரிதாக மாறும் உள்ளமைவுக் கோப்பு வடிவத்திற்கு இது நோக்கத்திற்கு அப்பாற்பட்டதாகக் கருதப்படலாம்).
- `KDF` மற்றும் `cipher` ஆகியவை கருத்தளவில் தொடர்புடையவை, ஆனாலும் அவை வித்தியாசமாக ஒழுங்கமைக்கப்பட்டுள்ளன.
- `MAC` ஒரு வெற்றிடத்தைப் பொருட்படுத்தாத தரவுத் துண்டின் மூலம் கணக்கிடப்படுகிறது(!)

இந்த மாற்றங்கள் format-இல் செய்யப்பட்டுள்ளது, இதன் மூலம் கீழே கொடுக்கப்பட்டுள்ள கோப்பு (file) உருவாகிறது. இது முன்பு இணைக்கப்பட்ட பக்கத்தில் கொடுக்கப்பட்ட example-க்கு செயல்பாடில் (functionally) இணையானது:

```json
{
  "crypto": {
    "cipher": "aes-128-cbc",
    "ciphertext": "07533e172414bfa50e99dba4a0ce603f654ebfa1ff46277c3e0c577fdc87f6bb4e4fe16c5a94ce6ce14cfa069821ef9b",
    "cipherparams": {
      "iv": "16d67ba0ce5a339ff2f07951253e6ba8"
    },
    "kdf": "scrypt",
    "kdfparams": {
      "dklen": 32,
      "n": 262144,
      "p": 1,
      "r": 8,
      "salt": "06870e5e6a24e183a5c807bd1c43afd86d573f7db303ff4853d135cd0fd3fe91"
    },
    "mac": "8ccded24da2e99a11d48cda146f9cc8213eb423e2ea0d8427f41c3be414424dd",
    "version": 1
  },
  "id": "0498f19a-59db-4d54-ac95-33901b4f1870",
  "version": 2
}
```

## பதிப்பு 2-லிருந்து மாற்றங்கள் {#alterations-from-v2}

அதிலிருந்து இன்றுவரை முக்கிய அம்சங்களில் எந்த மாற்றமும் இல்லை (All essentials remain unchanged). All essentials remain unchanged from it.
