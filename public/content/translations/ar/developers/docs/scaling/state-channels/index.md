---
title: "قنوات الدولةقنوات الدولة"
description: |
  مقدمة لقنوات الدولة وقنوات الدفع كحل للتوسع يتم استخدامه حاليًا من قبل مجتمع الإيثيريوم.
lang: ar
sidebarDepth: 3
---

تسمح قنوات الدولة للمشاركين بإجراء معاملات بشكل آمن خارج السلسلة مع الحفاظ على الحد الأدنى من التفاعل مع شبكة إيثيريوم الرئيسية. يمكن لأقران القناة إجراء عدد غير محدود من المعاملات خارج السلسلة مع تقديم معاملة على السلسلة فقط لفتح وإغلاق القناة. This allows for extremely high transaction throughput and results in lower costs for users.

## المتطلبات الأساسية {#prerequisites}

كان يجب عليك قراءة وفهم صفحاتنا عن [تحجيم إيثريوم](/developers/docs/scaling/) و [الطبقة الثانية](/layer-2/).

## What are channels؟ {#what-are-channels}

تشهد الشبكات العامة مثل الإيثيريوم تحديات في قابلية التوسع بسبب هيكلها الموزع: يجب تنفيذ المعاملات على السلسلة بواسطة جميع العقد.
يجب أن تكون العقد قادرة على التعامل مع حجم المعاملات في الكتلة باستخدام أجهزة كمبيوتر متواضعة، مما يفرض حدًا على معدل المعاملات للحفاظ على الشبكة لامركزية.
تُعالج قنوات البلوكتشين هذه المشكلة من خلال السماح للمستخدمين بالتفاعل خارج السلسلة بينما لا يزالون يعتمدون على أمان السلسلة الرئيسية للتسوية النهائية.

القنوات هي بروتوكولات بسيطة من نظير إلى نظير تسمح لطرفين بإجراء العديد من المعاملات بينهما، ثم نشر النتائج النهائية فقط على سلسلة الكتل. تستخدم القناة التشفير لإظهار أن بيانات الملخص التي تقوم بإنشائها هي في الحقيقة نتيجة لمجموعة صالحة من المعاملات الوسيطة. عقد ذكي "متعدد التوقيع" يضمن أن المعاملات موقعة من قبل الأطراف الصحيحة.

مع القنوات، يتم تنفيذ تغييرات الحالة والتحقق منها من قبل الأطراف المهتمة، مما يقلل من الحسابات على طبقة تنفيذ الإيثيريوم. هذا يقلل من الازدحام على شبكة إيثريوم وأيضًا يزيد من سرعة معالجة المعاملات للمستخدمين.

يتم إدارة كل قناة بواسطة [عقد ذكي متعدد التوقيع](/developers/docs/smart-contracts/#multisig) يعمل على شبكة إيثريوم.
لفتح قناة، يقوم المشاركون بنشر عقد القناة على السلسلة وإيداع الأموال فيه.
يوقع الطرفان معًا تحديثًا للحالة لتفعيل حالة القناة، وبعد ذلك يمكنهم إجراء المعاملات بسرعة وحرية خارج السلسلة.

لإغلاق القناة، يقوم المشاركون بتقديم الحالة النهائية المتفق عليها للقناة على السلسلة.
بعد ذلك، يقوم العقد الذكي بتوزيع الأموال المحجوزة وفقًا لميزانية كل مشارك في الحالة النهائية للقناة.

تعد قنوات الند للند مفيدة بشكل خاص في الحالات التي يرغب فيها بعض المشاركين المحددين مسبقًا بالتعامل بتكرار عالٍ دون تكبد نفقات ظاهرة. تقع قنوات البلوك تشين تحت فئتين: **قنوات الدفع** و **قنوات الحالة**.

## قنوات الدفع {#payment-channels}

يمكن وصف قناة الدفع بأنها "دفتر أستاذ ذو اتجاهين" يتم صيانته جماعياً من قبل مستخدمين اثنين. الرصيد الأولي لسجل الحساب هو مجموع الودائع المحجوزة في العقد على السلسلة خلال مرحلة فتح القناة. يمكن إجراء تحويلات قنوات الدفع على الفور ودون الحاجة إلى الاستعانة بالتكنولوجيا الأساسية للكتلة نفسها، باستثناء إنشاء أولي لمرة واحدة على السلسلة وإغلاق القناة في النهاية.

Updates to the ledger's balance (i.e., the payment channel's state) require the approval of all parties in the channel. A channel update, signed by all channel participants, is considered finalized, much like a transaction on Ethereum.

كانت قنوات الدفع من بين أولى حلول التوسع المصممة لتقليل النشاط المكلف على السلسلة في التفاعلات البسيطة للمستخدمين (مثل تحويلات الإيثيريوم، والتبادلات الذرية، والمدفوعات الصغيرة). Channel participants can conduct an unlimited amount of instant, feeless transactions between each other as long as the net sum of their transfers does not exceed the deposited tokens.

## قنوات الدولة {#state-channels}

بعيدًا عن دعم المدفوعات خارج السلسلة، لم تثبت قنوات الدفع فائدتها في التعامل مع منطق انتقال الحالة العامة. State channels were created to solve this problem and make channels useful for scaling general-purpose computation.

State channels still have a lot in common with payment channels. For example, users interact by exchanging cryptographically signed messages (transactions), which the other channel participants must also sign. If a proposed state update isn't signed by all participants, it is considered invalid.

However, in addition to holding the user's balances, the channel also tracks the current state of the contract's storage (i.e., values of contract variables).

هذا يجعل من الممكن تنفيذ عقد ذكي خارج السلسلة بين مستخدمين اثنين. In this scenario, updates to the smart contract's internal state require only the approval of the peers who created the channel.

While this solves the scalability problem described earlier, it has implications for security. على إيثيريوم، يتم تطبيق صلاحية انتقالات الحالة بواسطة بروتوكول التوافق الخاص بالشبكة.
This makes it impossible to propose an invalid update to a smart contract's state or alter smart contract execution.

State channels don't have the same security guarantees. To some extent, a state channel is a miniature version of Mainnet. With a limited set of participants enforcing rules, the possibility of malicious behavior (e.g., proposing invalid state updates) increases. تستمد القنوات الحكومية أمانها من نظام تحكيم المنازعات القائم على [أدلة الاحتيال].

## كيف تعمل قنوات الدولة

Basically, the activity in a state channel is a session of interactions involving users and a blockchain system. يتواصل المستخدمون في الغالب مع بعضهم البعض خارج السلسلة ويدخلون فقط في تفاعل مع سلسلة الكتل الأساسية لفتح القناة أو إغلاق القناة أو تسوية النزاعات المحتملة بين المشاركين.

القسم التالي يوضح سير العمل الأساسي لقناة الدولة:

### فتح القناة {#فتح-القناة}

فتح قناة يتطلب من المشاركين التزام أموالهم بعقد ذكي على الشبكة الرئيسية. يعمل الوديعة أيضًا كعلامة افتراضية، لذا يمكن للجهات المشاركة إجراء المعاملات بحرية دون الحاجة لتسوية المدفوعات فورًا. فقط عندما يتم الانتهاء من قناة الاتصال على سلسلة الكتل يقوم الأطراف بتسوية بعضهم البعض وسحب ما تبقى من حسابهم.

هذا الإيداع يخدم أيضًا كضمان لضمان سلوك نزيه من كل مشارك. إذا وُجد أن المودعين مذنبون في أفعال خبيثة خلال مرحلة حل النزاع، فإن العقد يقوم بتخفيض وديعتهم.

يجب على نظراء القناة توقيع حالة أولية يتفقون عليها جميعًا. هذا يُعتبر بمثابة بداية قناة الدولة، وبعد ذلك يمكن للمستخدمين البدء في إجراء المعاملات.

### استخدام القناة {#using-the-channel}

بعد تهيئة حالة القناة، يتفاعل الأقران من خلال توقيع المعاملات وإرسالها إلى بعضهم البعض للحصول على الموافقة. يبدأ المشاركون تحديثات الحالة بهذه المعاملات ويوقعون على تحديثات الحالة من الآخرين. تتكون كل عملية من ما يلي:

- أداة **nonce**، التي تعمل كمعرّف فريد للمعاملات وتمنع هجمات إعادة التشغيل.
  كما أنها تحدد الترتيب الذي حدثت فيه تحديثات الحالة (وهو أمر مهم لتسوية النزاعات)

- حالة القناة القديمة

- حالة القناة الجديدة

- العملية التي تؤدي إلى انتقال الحالة (على سبيل المثال، أليس ترسل 5 إيثير إلى بوب)

لا يتم بث تحديثات الحالة في القناة على السلسلة كما هو الحال عادة عندما يتفاعل المستخدمون على الشبكة الرئيسية، وهو ما يتماشى مع هدف قنوات الحالة في تقليل الأثر على السلسلة. طالما أن المشاركين يتفقون على تحديثات الحالة، فهي نهائية مثل معاملات الإيثريوم. يحتاج المشاركون فقط للاعتماد على إجماع الشبكة الرئيسية إذا نشأ نزاع.

### إغلاق القناة {#closing-the-channel}

غلق قناة الدولة يتطلب تقديم الحالة النهائية المتفق عليها للقناة إلى العقد الذكي على السلسلة. تتضمن التفاصيل المشار إليها في تحديث الولاية عدد تحركات كل مشارك وقائمة بالمعاملات المعتمدة.

بعد التحقق من أن تحديث الحالة صالح (أي أنه موقع من جميع الأطراف)، يقوم العقد الذكي بإتمام القناة وتوزيع الأموال المقفلة وفقًا لنتيجة القناة. المدفوعات التي تتم خارج السلسلة تُطبق على حالة إيثريوم ويتلقى كل مشارك حصته المتبقية من الأموال المحتجزة.

السيناريو الموصوف أعلاه يمثل ما يحدث في الحالة السعيدة. في بعض الأحيان، قد لا يتمكن المستخدمون من التوصل إلى اتفاق وإنهاء القناة (وهو الأمر المحزن). يمكن أن يكون أي من الأمور التالية صحيحًا بالنسبة للوضع:

- يذهب المشاركون إلى وضع عدم الاتصال ويفشلون في اقتراح انتقالات الحالة

- المشاركون يرفضون التوقيع على تحديثات الدولة الصالحة

- يحاول المشاركون إنهاء القناة من خلال اقتراح تحديث حالة قديم للعقد على السلسلة.

- يقترح المشاركون انتقالات حالة غير صالحة ليوقع عليها الآخرون

عندما ينهار الإجماع بين الأطراف المشاركين في قناة ما، فإن الخيار الأخير هو الاعتماد على إجماع الشبكة الرئيسية لتطبيق الحالة النهائية والصحيحة للقناة. في هذه الحالة، يتطلب إغلاق قناة الدولة تسوية النزاعات على السلسلة.

### تسوية النزاعات

عادةً، تتفق الأطراف في القناة على إغلاق القناة مسبقًا وتوقيع آخر انتقال حالة بشكل مشترك، والذي يقدمونه إلى العقد الذكي. بمجرد الموافقة على التحديث على السلسلة، تنتهي عملية تنفيذ العقد الذكي خارج السلسلة ويخرج المشاركون من القناة بأموالهم.

ومع ذلك، يمكن لأحد الأطراف تقديم طلب على السلسلة لإنهاء تنفيذ العقد الذكي وإغلاق القناة—دون انتظار موافقة الطرف الآخر. إذا حدث أي من حالات كسر الاجماع التي تم وصفها سابقاً، يمكن لأي من الطرفين تفعيل العقد على السلسلة لإغلاق القناة وتوزيع الأموال. يوفر هذا **عدم الثقة**، مما يضمن أن الأطراف الشريفة يمكنها سحب ودائعها في أي لحظة، بغض النظر عن تصرفات الطرف الآخر.

لكي يتم معالجة خروج القناة، يجب على المستخدم تقديم آخر تحديث صالح لحالة التطبيق إلى العقد الذكي. If this checks out (i.e., it bears the signature of all parties), then fuإذا كانت هذه المعطيات صحيحة (بمعنى أنها تحمل توقيع جميع الأطراف)، فإن الأموال تُعاد توزيعها لصالحهم.nds are redistributed in their favor.

ومع ذلك، هناك تأخير في تنفيذ طلبات الخروج لمستخدم واحد. إذا تمت الموافقة بالإجماع على الطلب لإغلاق القناة، فسيتم تنفيذ عملية الخروج على السلسلة على الفور.

يأتي التأخير في الاستخدام الفردي للخروج بسبب إمكانية حدوث أفعال احتيالية.
على سبيل المثال، قد يحاول أحد المشاركين في القناة إنهاء القناة على إيثريوم من خلال تقديم تحديث حالة أقدم على السلسلة.

كإجراء مضاد، تتيح قنوات الدولة للمستخدمين الشرفاء تحدي تحديثات الحالة غير الصالحة عن طريق تقديم الحالة الأخيرة والصحيحة للقناة على السلسلة. تم تصميم القنوات الحكومية بحيث تتفوق التحديثات الحكومية الجديدة المتفق عليها على التحديثات الحكومية القديمة.

عندما يقوم طرف زميل بتفعيل نظام حل النزاعات على السلسلة، يُطلب من الطرف الآخر الرد ضمن فترة زمنية محددة (تسمى نافذة التحدي). هذا يتيح للمستخدمين الطعن في عملية الخروج، خاصة إذا كانت الطرف الآخر يطبق تحديثاً قديماً.

مهما كانت الحالة، يتمتع مستخدمو القناة دائمًا بضمانات نهائية قوية: إذا تم توقيع انتقال الحالة في حوزتهم من قبل جميع الأعضاء وكان أحدث تحديث، فسيكون له نفس القدر من النهاية مع معاملة على السلسلة العادية. لا يزال يتعين عليهم تحدي الطرف الآخر على السلسلة، ولكن النتيجة الوحيدة الممكنة هي الانتهاء من آخر حالة صالحة، والتي يحتفظون بها.

### How do state channels interact with Ethereum؟ {#how-do-state-channels-interact-with-ethereum}

على الرغم من وجودها كبروتوكولات خارج السلسلة، فإن قنوات الحالة لها مكون داخل السلسلة: العقد الذكي الذي يتم نشره على Ethereum عند فتح القناة. This contract controls the assets deposited into the channel, verifies state updates, and arbitrates disputes between participants.

لا تنشر قنوات الحالة بيانات المعاملات أو التزامات الحالة تجاه الشبكة الرئيسية، على عكس حلول التوسع [الطبقة 2](/layer-2/). ومع ذلك، فهي أكثر ارتباطًا بالشبكة الرئيسية من، على سبيل المثال، [السلاسل الجانبية](/developers/docs/scaling/sidechains/)، مما يجعلها أكثر أمانًا إلى حد ما.

تعتمد القنوات الحكومية على البروتوكول الرئيسي للإيثيريوم للآتي:

#### ١. حيوية {#liveness}

العقد الموجود على السلسلة والذي تم نشره عند فتح القناة هو المسؤول عن وظائف القناة. إذا كان العقد يعمل على إيثريوم، فإن القناة متاحة دائمًا للاستخدام.
على العكس من ذلك، يمكن أن يفشل السلسلة الجانبية دائمًا، حتى لو كانت الشبكة الرئيسية تعمل، مما يعرض أموال المستخدمين للخطر.

#### ٢. حماية{#security}

To some extent, state channels rely on Ethereum to provide secuإلى حد ما، تعتمد القنوات الرسمية على إيثريوم لتوفير الأمان وحماية المستخدمين من الأقران الخبيثين.
rity and protect users from malicious peers. كما تم مناقشته في الأقسام اللاحقة، تستخدم القنوات آلية إثبات احتيال تسمح للمستخدمين بتحدي المحاولات لإنهاء القناة باستخدام تحديث غير صالح أو قديم.

في هذه الحالة، يقدم الطرف الصادق أحدث حالة صالحة للقناة كدليل على عدم الاحتيال لعقد onchain للتحقق. تتيح أدلة الاحتيال للأطراف التي لا تثق ببعضها البعض إجراء معاملات خارج السلسلة دون المخاطرة بأموالهم في هذه العملية.

#### 3. النهائية {#finality}

عدّ تحديثات الحالة التي يوقعها مستخدمو القناة بشكل جماعي جيدة مثل المعاملات على السلسلة. ومع ذلك، فإن جميع الأنشطة داخل القناة تحقق النهاية الحقيقية فقط عندما يتم إغلاق القناة على إيثيريوم.

في الحالة المتفائلة، يمكن لكلا الطرفين التعاون والتوقيع على تحديث الحالة النهائي وإرساله إلى onchain لإغلاق القناة، وبعد ذلك يتم توزيع الأموال وفقًا للحالة النهائية للقناة. في الحالة المتشائمة، حيث يحاول شخص ما الغِشّ عن طريق نشر تحديث حالة غير صحيح على السلسلة، لا يتم الانتهاء من معاملته حتى تنقضي نافذة التحدي.

## قنوات الحالة الافتراضية {#virtual-state-channels}

سيكون التنفيذ الساذج لقناة الحالة هو نشر عقد جديد عندما يرغب مستخدمان في تنفيذ تطبيق خارج السلسلة. وهذا ليس مستحيلاً فحسب، بل إنه ينفي أيضاً فعالية تكلفة قنوات الدولة (فتكاليف المعاملات على السلسلة يمكن أن تتراكم بسرعة).

لحل هذه المشكلة، تم إنشاء "قنوات افتراضية". على عكس القنوات العادية التي تتطلب معاملات على السلسلة لفتحها وإنهائها، يمكن فتح قناة افتراضية وتنفيذها وإنهائها دون التفاعل مع السلسلة الرئيسية. ومن الممكن أيضًا تسوية النزاعات خارج السلسلة باستخدام هذه الطريقة.

يعتمد هذا النظام على وجود ما يسمى بـ "قنوات دفتر الأستاذ"، والتي تم تمويلها على السلسلة. يمكن بناء قنوات افتراضية بين طرفين على قمة قناة دفتر موجودة، حيث يعمل مالك(مالكو) قناة الدفتر كوسيط.

يتفاعل المستخدمون في كل قناة افتراضية عبر مثيل عقد جديد، مع إمكانية قناة السجل لدعم عدة مثيلات عقود. تحتوي حالة قناة الدفتر أيضًا على أكثر من حالة تخزين عقد واحدة، مما يسمح بالتنفيذ المتوازي للتطبيقات خارج السلسلة بين مستخدمين مختلفين.

Just like regular channels, users exchange state updates to progress the state macتمامًا مثل القنوات العادية، يقوم المستخدمون بتبادل تحديثات الحالة لتقدم آلة الحالة.hine. في حالة عدم حدوث نزاع، يجب الاتصال بالوسيط فقط عند فتح القناة أو إنهائها.

### قنوات الدفع الافتراضية {#virtual-payment-channels}

تعمل قنوات الدفع الافتراضية على نفس فكرة قنوات الحالة الافتراضية: يمكن للمشاركين المتصلين بنفس الشبكة تمرير الرسائل دون الحاجة إلى فتح قناة جديدة على السلسلة. في قنوات الدفع الافتراضية، يتم توجيه تحويلات القيمة من خلال وسيط أو أكثر، مع ضمانات بأن المستلم المقصود فقط هو من يمكنه استلام الأموال المحولة.

## تطبيقات قنوات الحالة {#applications-of-state-channels}

### المدفوعات {#payments}

كانت قنوات blockchain المبكرة عبارة عن بروتوكولات بسيطة سمحت لمشاركين بإجراء عمليات نقل سريعة ومنخفضة الرسوم خارج السلسلة دون الحاجة إلى دفع رسوم معاملات عالية على الشبكة الرئيسية. اليوم، لا تزال قنوات الدفع مفيدة للتطبيقات المصممة لتبادل وإيداع الإيثير والتوكنات.

لدى المدفوعات المعتمدة على القنوات المزايا التالية:

1. **الإنتاجية**: كمية المعاملات خارج السلسلة لكل قناة غير مرتبطة بإنتاجية الإيثريوم، والتي تتأثر بعوامل مختلفة، وخاصة حجم الكتلة ووقت الكتلة. من خلال تنفيذ المعاملات خارج السلسلة، يمكن لقنوات blockchain تحقيق إنتاجية أعلى.

2. **الخصوصية**: نظرًا لوجود القنوات خارج السلسلة، فإن تفاصيل التفاعلات بين المشاركين لا يتم تسجيلها على blockchain العامة الخاصة بـ Ethereum. يتعين على مستخدمي القناة التفاعل على السلسلة فقط عند تمويل القنوات وإغلاقها أو تسوية النزاعات. لذا، فإن القنوات مفيدة للأفراد الذين يرغبون في إجراء معاملات أكثر خصوصية.

3. **الزمن الكامن**: يمكن تسوية المعاملات خارج السلسلة التي يتم إجراؤها بين المشاركين في القناة على الفور، إذا تعاون الطرفان، مما يقلل من التأخير. على النقيض من ذلك، يتطلب إرسال معاملة على الشبكة الرئيسية الانتظار حتى تقوم العقد بمعالجة المعاملة، وإنتاج كتلة جديدة مع المعاملة، والوصول إلى توافق. قد يحتاج المستخدمون أيضًا إلى الانتظار للحصول على مزيد من تأكيدات الكتلة قبل اعتبار المعاملة نهائية.

4. **التكلفة**: تُعد قنوات الحالة مفيدة بشكل خاص في المواقف التي يتبادل فيها مجموعة من المشاركين العديد من تحديثات الحالة على مدار فترة طويلة. التكاليف الوحيدة التي تم تكبدها هي فتح وإغلاق عقد قناة الدولة الذكي؛ كل تغيير في الحالة بين فتح وإغلاق القناة سيكون أرخص من السابق حيث يتم توزيع تكلفة التسوية وفقًا لذلك.

قد يؤدي تنفيذ قنوات الحالة على حلول الطبقة 2، مثل [rollups](/developers/docs/scaling/#rollups)، إلى جعلها أكثر جاذبية للمدفوعات. في حين تقدم القنوات مدفوعات رخيصة، فإن تكاليف إعداد عقد onchain على Mainnet أثناء مرحلة الافتتاح يمكن أن تكون باهظة الثمن - خاصة عندما ترتفع رسوم الغاز. توفر عمليات التجميع المستندة إلى Ethereum رسوم معاملات أقل (https://l2fees.info/) ويمكنها تقليل النفقات العامة للمشاركين في القناة من خلال خفض رسوم الإعداد.

### المعاملات الصغيرة {#microtransactions}

المعاملات الصغيرة هي مدفوعات منخفضة القيمة (مثل، أقل من جزء من الدولار) لا يمكن للشركات معالجتها دون تكبد خسائر. يجب على هذه الكيانات دفع خدمات الدفع، وهذا ما لا يمكنها فعله إذا كانت هوامش المدفوعات من العملاء منخفضة جدًا لجني الأرباح.

تساعد قنوات الدفع في حل هذه المشكلة عن طريق تقليل الأعباء المرتبطة بالمعاملات الصغيرة. على سبيل المثال، يمكن لمزود خدمة الإنترنت (ISP) فتح قناة دفع مع عميل، مما يسمح له بعمل دفعات صغيرة في كل مرة يستخدم الخدمة.

بصرف النظر عن تكلفة فتح وإغلاق القناة، لا يتحمل المشاركون تكاليف إضافية على المعاملات الصغيرة (لا توجد رسوم غاز). هذه وضعية فوز للجميع حيث يمتلك العملاء مزيداً من المرونة في مقدار ما يدفعونه مقابل الخدمات والشركات لا تخسر من المعاملات الصغيرة المربحة.

### التطبيقات اللامركزية {#decentralized-applications}

مثل قنوات الدفع، يمكن للقنوات الحكومية إجراء مدفوعات مشروطة وفقًا للحالات النهائية لآلة الحالة.
يمكن لقنوات الحالة أيضًا دعم منطق انتقال الحالة التعسفي، مما يجعلها مفيدة لتنفيذ التطبيقات العامة خارج السلسلة.

غالبًا ما تقتصر قنوات الدولة على تطبيقات بسيطة تعتمد على الأدوار، حيث يسهل هذه إدارة الأموال المخصصة لعقد onchain. بالإضافة إلى ذلك، مع وجود عدد محدود من الأطراف التي تقوم بتحديث حالة التطبيق خارج السلسلة على فترات، فإن معاقبة السلوك غير النزيه أمر بسيط نسبيًا.

تعتمد كفاءة تطبيق قناة الدولة أيضًا على تصميمه. على سبيل المثال، قد يقوم أحد المطورين بنشر عقد قناة التطبيق على السلسلة مرة واحدة ويسمح للاعبين الآخرين بإعادة استخدام التطبيق دون الحاجة إلى الانتقال إلى السلسلة. في هذه الحالة، تعمل قناة التطبيق الأولية كقناة دفتر تدعم قنوات افتراضية متعددة، حيث تقوم كل منها بتشغيل مثيل جديد من العقد الذكي للتطبيق خارج السلسلة.

إحدى الحالات المحتملة لاستخدام تطبيقات قنوات الدولة هي الألعاب البسيطة ذات اللاعبين الاثنين، حيث يتم توزيع الأموال بناءً على نتيجة اللعبة. الفائدة هنا هي أن اللاعبين ليسوا مضطرين إلى الثقة ببعضهم البعض (عدم الثقة) وأن العقد على السلسلة، وليس اللاعبين، هو الذي يتحكم في تخصيص الأموال وتسوية النزاعات (اللامركزية).

تشمل الاستخدامات المحتملة الأخرى لتطبيقات قنوات الدولة ملكية أسماء ENS وسجلات NFTs والعديد من الاستخدامات الأخرى.

### عمليات النقل الذري {#atomic-transfers}

كانت قنوات الدفع المبكر مقيدة بالتحويلات بين طرفين، مما حد من قابلية استخدامها. ومع ذلك، فإن إدخال القنوات الافتراضية سمح للأفراد بتوجيه التحويلات من خلال وسطاء (أي قنوات نظير إلى نظير متعددة) دون الحاجة إلى فتح قناة جديدة على السلسلة.

غالبًا ما تُوصف بأنها "تحويلات متعددة القفزات"، المدفوعات الموجهة هي ذرية (أي إما أن تنجح جميع أجزاء الصفقة أو تفشل بالكامل). تستخدم التحويلات الذرية [عقود القفل الزمني المبهمة (HTLCs)](https://en.bitcoin.it/wiki/Hash_Time_Locked_Contracts) لضمان إصدار الدفع فقط في حالة استيفاء شروط معينة، وبالتالي تقليل مخاطر الطرف المقابل.

## عيوب استخدام قنوات الحالة {#drawbacks-of-state-channels}

### افتراضات الحيوية {#liveness-assumptions}

لضمان الكفاءة، تضع القنوات الرسمية حدوداً زمنية على قدرة المشاركين في القناة على الرد على النزاعات.
تفترض هذه القاعدة أن الأقران سيكونون دائمًا متصلين لمراقبة نشاط القناة والتنافس على التحديات عند الضرورة.

في الواقع، يمكن للمستخدمين أن يذهبوا إلى وضع عدم الاتصال لأسباب خارجة عن إرادتهم (مثل سوء الاتصال بالإنترنت، أو الأعطال الميكانيكية، وما إلى ذلك). إذا ذهب مستخدم صادق إلى وضع غير متصل، يمكن لجانب خبيث الاستفادة من الوضع من خلال عرض حالات وسيطة قديمة لعقد التحكيم وسرقة الأموال الملتزمة.

تستخدم بعض القنوات "أبراج المراقبة" - وهي كيانات مسؤولة عن مراقبة أحداث النزاع على السلسلة نيابة عن الآخرين واتخاذ الإجراءات اللازمة، مثل تنبيه الأطراف المعنية. ومع ذلك، يمكن أن يضيف هذا إلى تكاليف استخدام قناة الدولة.

### عدم توفر البيانات {#data-unavailability}

كما تم شرحه سابقًا، يتطلب الطعن في نزاع غير صالح تقديم أحدث حالة صالحة لقناة الدولة. هذه قاعدة أخرى تستند إلى افتراض - أن المستخدمين لديهم إمكانية الوصول إلى الحالة الأخيرة للقناة.

على الرغم من أن توقع قيام مستخدمي القناة بتخزين نسخ من حالة التطبيق خارج السلسلة أمر معقول، إلا أنه من الممكن أن تضيع هذه البيانات بسبب خطأ أو عطل ميكانيكي. إذا لم يكن لدى المستخدم بيانات محفوظة، يمكنه فقط أن يأمل أن الطرف الآخر لا يقوم بإتمام طلب الخروج غير الصحيح باستخدام انتقالات الحالة القديمة التي في حوزته.

لا يضطر مستخدمو إيثريوم لمواجهة هذه المشكلة لأن الشبكة تفرض قواعد على توفر البيانات. تُخزّن بيانات المعاملات وتنتشر بواسطة جميع العقد ومتاحة للمستخدمين للتنزيل إذا لزم الأمر.

### مشاكل السيولة {#liquidity-issues}

لإنشاء قناة blockchain، يحتاج المشاركون إلى قفل الأموال في عقد ذكي على السلسلة لدورة حياة القناة. هذا يقلل من سيولة مستخدمي القنوات ويحد أيضًا من القنوات لأولئك الذين يمكنهم تحمل تكلفة إبقاء الأموال مقفلة على الشبكة الرئيسية.

ومع ذلك، فإن قنوات دفتر الأستاذ - التي يديرها مزود خدمة خارج السلسلة (OSP) - يمكن أن تقلل من مشاكل السيولة بالنسبة للمستخدمين. يمكن لنظيرين متصلين بقناة دفترية إنشاء قناة افتراضية، والتي يمكنهما فتحها وإنهائها بالكامل خارج السلسلة، في أي وقت يريدانه.

يمكن لمقدمي الخدمات خارج السلسلة أيضًا فتح قنوات مع نظراء متعددين، مما يجعلها مفيدة لتوجيه المدفوعات. Of course, users must pay fees to OSPs for their services, which may be undesirable for some.

### نوبات الحزن {#griefing-attacks}

هجمات التدمير هي سمة شائعة في الأنظمة المعتمدة على إثبات الاحتيال. الهجوم التعسفي لا يفيد المهاجم بشكل مباشر ولكنه يسبب معاناة (أي ضرر) للضحية، ومن هنا جاء الاسم.

إثبات الاحتيال عرضة لهجمات التخريب لأن الطرف الأمين يجب أن يستجيب لكل نزاع، حتى لو كان غير صالح، أو يواجه خطر فقدان أمواله.
يمكن للمشارك الخبيث أن يقرر نشر انتقالات حالة قديمة على السلسلة بشكل متكرر، مما يجبر الطرف الصادق على الاستجابة بالحالة الصالحة. يمكن أن تتراكم تكلفة معاملات السلسلة هذه بسرعة، مما يتسبب في خسارة الأطراف الصادقة في هذه العملية.

### مجموعات المشاركين المحددة مسبقًا {#predefined-participant-sets}

بهدف التصميم، يظل عدد المشاركين الذين يشكلون قناة الدولة ثابتًا طوال فترة وجودها. هذا لأنه تحديث مجموعة المشاركين سيعقد عملية القناة، خاصة عند تمويل القناة أو حل النزاعات. ستتطلب إضافة أو إزالة المشاركين أيضًا نشاطًا إضافيًا على السلسلة، مما يزيد من النفقات العامة للمستخدمين.

بينما يجعل هذا قنوات الدولة أسهل في الفهم، فإنه يحد من فائدة تصميمات القنوات لمطوري التطبيقات. هذا يفسر جزئيًا لماذا تم التخلي عن قنوات الدولة لصالح حلول توسيع أخرى، مثل التجميعات.

### معالجة المعاملات المتوازية {#parallel-transaction-processing}

يرسل المشاركون في القناة الحكومية تحديثات الدولة بالتناوب، ولهذا السبب فهي تعمل بشكل أفضل للتطبيقات القائمة على الأدوار (مثل لعبة الشطرنج للاعبين). يؤدي هذا إلى التخلص من الحاجة إلى التعامل مع تحديثات الحالة المتزامنة ويقلل من العمل الذي يجب أن يقوم به عقد onchain لمعاقبة ملصقات التحديث القديمة. ومع ذلك، فإن أحد الآثار الجانبية لهذا التصميم هو أن المعاملات تعتمد على بعضها البعض، مما يزيد من زمن الاستجابة ويقلل من تجربة المستخدم بشكل عام.

تحل بعض قنوات الحالة هذه المشكلة باستخدام تصميم "ثنائي الاتجاه الكامل" الذي يفصل الحالة خارج السلسلة إلى حالتين "بسيطتين" أحاديتي الاتجاه، مما يسمح بتحديثات الحالة المتزامنة. تعمل مثل هذه التصميمات على تحسين معدل الإنتاج خارج السلسلة وتقليل تأخير المعاملات.

## استخدم قنوات الحالة {#use-state-channels}

توفر مشاريع متعددة تطبيقات لقنوات الدولة التي يمكنك دمجها في تطبيقاتك اللامركزية:

- [كونيكت](https://connext.network/)
- [قنوات K](https://www.kchannels.io/)
- [بيرون](https://perun.network/)
- [رايدن](https://raiden.network/)
- [Statechannels.org](https://statechannels.org/)

## قراءة إضافية{#further-reading}

**قنوات الدولة**

- [فهم حلول توسيع الطبقة الثانية في إيثريوم: قنوات الحالة، والبلازما، وTruebit](https://medium.com/l4-media/making-sense-of-ethereums-layer-2-scaling-solutions-state-channels-plasma-and-truebit-22cb40dcc2f4) _– جوش ستارك، ١٢ فبراير ٢٠١٨_
- [قنوات الولاية - شرح](https://www.jeffcoleman.ca/state-channels/) _6 نوفمبر 2015 - جيف كولمان_
- [أساسيات قنوات الحالة](https://education.district0x.io/general-topics/understanding-ethereum/basics-state-channels/) _District0x_
- [قنوات حالة البلوكتشين: أحدث التقنيات](https://ieeexplore.ieee.org/document/9627997)

_هل تعرف أحد الموارد المجتمعية التي ساعدتك؟ عدّل هذه الصفحة وأضفه!_
