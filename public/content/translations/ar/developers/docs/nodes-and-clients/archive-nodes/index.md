---
title: "عقدة أرشيف الإيثريوم"
description: "نظرة عامة على عقد الأرشيف"
lang: ar
sidebarDepth: 2
---

عقدة الأرشيف هي مثيل لعميل Ethereum الذي تم تكوينه لإنشاء أرشيف لجميع الحالات التاريخية. إنها أداة مفيدة لحالات استخدام معينة ولكن قد يكون تشغيلها أكثر صعوبة من تشغيل العقدة الكاملة.

## المتطلبات الأساسية {#prerequisites}

يجب أن تفهم مفهوم [عقدة إيثريوم](/developers/docs/nodes-and-clients/)، [وهيكلها](/developers/docs/nodes-and-clients/node-architecture/)، [واستراتيجيات المزامنة](/developers/docs/nodes-and-clients/#sync-modes)، وممارسات [تشغيلها](/developers/docs/nodes-and-clients/run-a-node/) [واستخدامها](/developers/docs/apis/json-rpc/).

## ما هي عقدة الأرشيف

لفهم أهمية عقدة الأرشيف، دعونا نوضح مفهوم "الحالة". يمكن الإشارة إلى إيثريوم على أنه _آلة حالة قائمة على المعاملات_. وهو يتألف من حسابات وتطبيقات تنفذ المعاملات التي تغير حالتها. يتم تخزين البيانات العالمية التي تحتوي على معلومات حول كل حساب وعقد في قاعدة بيانات تجريبية تسمى الحالة. تتم معالجة ذلك بواسطة عميل طبقة التنفيذ (EL) ويتضمن:

- أرصدة الحسابات والأرقام غير
- رمز العقد والتخزين
- البيانات المتعلقة بالإجماع، على سبيل المثال، عقد إيداع تجميد العملات.

للتفاعل مع الشبكة والتحقق من الكتل الجديدة وإنتاجها، يتعين على عملاء Ethereum مواكبة أحدث التغييرات (نهاية السلسلة) وبالتالي الحالة الحالية. يتحقق عميل طبقة التنفيذ الذي تم تكوينه كعقدة كاملة من أحدث حالة للشبكة ويتبعها، ولكنه يخزن مؤقتًا الحالات القليلة الماضية فقط، على سبيل المثال، الحالة المرتبطة بآخر 128 كتلة، حتى يتمكن من التعامل مع عمليات إعادة تنظيم السلسلة وتوفير وصول سريع إلى البيانات الحديثة. الحالة الأخيرة هي ما يحتاجه جميع العملاء للتحقق من المعاملات الواردة واستخدام الشبكة.

يمكنك تخيل الحالة باعتبارها لقطة شبكة مؤقتة في كتلة معينة والأرشيف كإعادة عرض للتاريخ.

يمكن تقليم الحالات التاريخية بأمان لأنها ليست ضرورية لتشغيل الشبكة وسيكون من غير المجدي أن يحتفظ العميل بجميع البيانات القديمة. يتم التخلص فعليًا من الحالات التي كانت موجودة قبل كتلة حديثة ما (على سبيل المثال، 128 كتلة قبل الرأس). تحتفظ العقد الكاملة فقط ببيانات blockchain التاريخية (الكتل والمعاملات) واللقطات التاريخية العرضية التي يمكن استخدامها لتجديد الحالات القديمة عند الطلب. يفعلون ذلك عن طريق إعادة تنفيذ المعاملات السابقة في EVM، والتي يمكن أن تتطلب جهدًا حسابيًا عندما تكون الحالة المطلوبة بعيدة عن أقرب لقطة.

ومع ذلك، هذا يعني أن الوصول إلى الحالة التاريخية على عقدة كاملة يستهلك الكثير من العمليات الحسابية. قد يحتاج العميل إلى تنفيذ جميع المعاملات السابقة وحساب حالة تاريخية واحدة منذ البداية. تحل عقد الأرشيف هذه المشكلة عن طريق تخزين ليس فقط الحالات الأحدث ولكن كل حالة تاريخية تم إنشاؤها بعد كل كتلة. إنه يقوم بشكل أساسي بإجراء مقايضة مع متطلبات مساحة قرص أكبر.

من المهم ملاحظة أن الشبكة لا تعتمد على عقد الأرشيف للاحتفاظ بجميع البيانات التاريخية وتوفيرها. كما ذكر أعلاه، يمكن اشتقاق جميع الحالات المؤقتة التاريخية على عقدة كاملة. يتم تخزين المعاملات بواسطة أي عقدة كاملة (حاليًا أقل من 400 جيجا) ويمكن إعادة تشغيلها لإنشاء الأرشيف بالكامل.

### حالات الاستخدام

الاستخدام المنتظم لـ Ethereum مثل إرسال المعاملات ونشر العقود والتحقق من الإجماع وما إلى ذلك لا يتطلب الوصول إلى الحالات التاريخية. لا يحتاج المستخدمون أبدًا إلى عقدة أرشيف للتفاعل القياسي مع الشبكة.

The main benefit of state archive is a quick access to queries about historical states. الميزة الرئيسية لأرشيف الحالة هي الوصول السريع إلى الاستفسارات المتعلقة بالحالات التاريخية.

- _ما هو رصيد ETH للحساب 0x1337... عند الكتلة 15537393؟_
- _ما هو رصيد الرمز المميز 0x في العقد 0x عند الكتلة 1920000؟_

كما هو موضح أعلاه، ستحتاج العقدة الكاملة إلى إنشاء هذه البيانات عن طريق تنفيذ EVM الذي يستخدم وحدة المعالجة المركزية ويستغرق وقتًا. يمكن لعقد الأرشيف الوصول إليها على القرص وتقديم الاستجابات على الفور. This is a useful feature for certain parts of infrastructure, for example:

- مقدمو الخدمات مثل مستكشفي الكتل
- الباحثون
- محللين أمنيين
- مطوري داب
- التدقيق والامتثال

هناك العديد من [الخدمات](/developers/docs/nodes-and-clients/nodes-as-a-service/) المجانية التي تسمح أيضًا بالوصول إلى البيانات التاريخية. نظرًا لأن تشغيل عقدة الأرشيف أكثر تطلبًا، فإن هذا الوصول محدود في الغالب ويعمل فقط للوصول العرضي. إذا كان مشروعك يتطلب الوصول المستمر إلى البيانات التاريخية، فيجب أن تفكر في تشغيل واحد بنفسك.

## التنفيذ والاستخدام

عقدة الأرشيف في هذا السياق تعني البيانات التي يقدمها المستخدم الذي يواجه عملاء طبقة التنفيذ أثناء تعاملهم مع قاعدة بيانات الحالة وتوفير نقاط نهاية JSON-RPC. قد تختلف خيارات التكوين ووقت المزامنة وحجم قاعدة البيانات حسب العميل. للحصول على التفاصيل، يرجى الرجوع إلى الوثائق المقدمة من قبل العميل الخاص بك.

قبل البدء بعقدة الأرشيف الخاصة بك، تعرّف على الاختلافات بين العملاء وخاصةً [متطلبات الأجهزة](/developers/docs/nodes-and-clients/run-a-node/#requirements) المختلفة. لم يتم تحسين معظم العملاء لهذه الميزة وتتطلب أرشيفاتهم أكثر من 12 تيرابايت من المساحة. في المقابل، يمكن لتطبيقات مثل Erigon تخزين نفس البيانات في أقل من 3 تيرابايت مما يجعلها الطريقة الأكثر فعالية لتشغيل عقدة الأرشيف.

## الممارسات الموصى بها

بصرف النظر عن [التوصيات العامة لتشغيل عقدة](/developers/docs/nodes-and-clients/run-a-node/)، قد تكون عقدة الأرشيف أكثر تطلبًا من حيث الأجهزة والصيانة. بالنظر إلى [الميزات الرئيسية](https://github.com/ledgerwatch/erigon#key-features) لـ Erigon، فإن النهج الأكثر عملية هو استخدام تطبيق عميل [Erigon](/developers/docs/nodes-and-clients/#erigon).

### الأجهزة

تأكد دائمًا من التحقق من متطلبات الأجهزة لوضع معين في وثائق العميل.
أكبر متطلبات عقد الأرشيف هي مساحة القرص. اعتمادا على العميل، فإنه يختلف من 3 تيرابايت إلى 12 تيرابايت. حتى لو كان محرك الأقراص الصلبة يعتبر حلاً أفضل لكميات كبيرة من البيانات، فإن مزامنته وتحديث رأس السلسلة باستمرار سيتطلب محركات أقراص SSD. محركات الأقراص [SATA](https://www.cleverfiles.com/help/sata-hard-drive.html) جيدة بما فيه الكفاية ولكن يجب أن تكون ذات جودة موثوقة، على الأقل [TLC](https://blog.synology.com/tlc-vs-qlc-ssds-what-are-the-differences). يمكن تركيب الأقراص في كمبيوتر مكتبي أو خادم مزود بفتحات كافية. تعتبر هذه الأجهزة المخصصة مثالية لتشغيل عقدة ذات وقت تشغيل عالي. من الممكن تمامًا تشغيله على جهاز كمبيوتر محمول ولكن إمكانية النقل ستأتي بتكلفة إضافية.

يجب أن تتسع جميع البيانات في وحدة تخزين واحدة، لذلك يجب ضم الأقراص، على سبيل المثال، باستخدام [RAID0](https://en.wikipedia.org/wiki/Standard_RAID_levels#RAID_0) أو LVM. قد يكون من المفيد أيضًا التفكير في استخدام [ZFS](https://en.wikipedia.org/wiki/ZFS) لأنه يدعم \"النسخ عند الكتابة\" والذي يضمن كتابة البيانات بشكل صحيح على القرص دون أي أخطاء منخفضة المستوى.

لمزيد من الاستقرار والأمان في منع تلف قاعدة البيانات العرضي، خاصة في الإعداد الاحترافي، فكر في استخدام [ذاكرة ECC](https://en.wikipedia.org/wiki/ECC_memory) إذا كان نظامك يدعمها. يُنصح عمومًا أن يكون حجم ذاكرة الوصول العشوائي (RAM) هو نفس حجم العقدة الكاملة، لكن زيادة حجم ذاكرة الوصول العشوائي (RAM) يمكن أن تساعد في تسريع المزامنة.

أثناء المزامنة الأولية، سيقوم العملاء في وضع الأرشيف بتنفيذ كل معاملة منذ البداية. غالبًا ما تكون سرعة التنفيذ محدودة بواسطة وحدة المعالجة المركزية، لذا يمكن أن تساعد وحدة المعالجة المركزية الأسرع في وقت المزامنة الأولي. على جهاز الكمبيوتر الاستهلاكي العادي، يمكن أن تستغرق المزامنة الأولية ما يصل إلى شهر.

## قراءة إضافية{#further-reading}

- [عقدة إيثريوم الكاملة مقابل عقدة الأرشيف](https://www.quicknode.com/guides/infrastructure/ethereum-full-node-vs-archive-node) - _QuickNode، سبتمبر 2022_
- [بناء عقدة أرشيف إيثريوم الخاصة بك](https://tjayrush.medium.com/building-your-own-ethereum-archive-node-72c014affc09) - _Thomas Jay Rush، أغسطس 2021_
- [كيفية إعداد Erigon، و RPC الخاص بـ Erigon، و TrueBlocks (الكشط وواجهة برمجة تطبيقات) كخدمات](https://magnushansson.xyz/blog_posts/crypto_defi/2022-01-10-Erigon-Trueblocks) _– Magnus Hansson، تم التحديث في سبتمبر 2022_

## المواضيع ذات الصلة {#related-topics}

- [العقد والعملاء](/developers/docs/nodes-and-clients/)
- [تشغيل عقدة](/developers/docs/nodes-and-clients/run-a-node/)
