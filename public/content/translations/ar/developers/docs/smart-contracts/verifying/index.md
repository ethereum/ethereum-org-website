---
title: "عقد ذكي"
description: "نظرة عامة على التحقق من الكود المصدر لعقود Ethereum الذكية"
lang: ar
---

[العقود الذكية](/developers/docs/smart-contracts/) مصممة لتكون "بدون ثقة"، مما يعني أنه لا ينبغي للمستخدمين الوثوق بأطراف ثالثة (مثل المطورين والشركات) قبل التفاعل مع عقد. كشرط لعدم الثقة، يجب أن يكون المستخدمون والمطورون الآخرون قادرين على التحقق من الكود المصدر للعقد الذكي. كشرط لعدم الثقة، يجب أن يكون المستخدمون والمطورون الآخرون قادرين على التحقق من الكود المصدر للعقد الذكي.

من المهم التمييز بين "التحقق من النص البرمجي المصدر" و"[التحقق الرسمي](/developers/docs/smart-contracts/formal-verification/)". يشير التحقق من النص البرمجي المصدر، الذي سيُشرح بالتفصيل أدناه، إلى التحقق من أن النص البرمجي المصدر المحدد لعقد ذكي بلغة عالية المستوى (مثل Solidity) يُجمَّع إلى نفس الـ bytecode الذي سيتم تنفيذه في عنوان العقد. ومع ذلك، فإن التحقق الرسمي يصف التحقق من صحة العقد الذكي، أي أن العقد يتصرف كما هو متوقع. على الرغم من اعتماد التحقق من العقد على السياق، فإنه يشير عادةً إلى التحقق من كود المصدر.

## ما هو التحقق من الكود المصدر؟ {#what-is-source-code-verification}

قبل نشر عقد ذكي في [آلة إيثريوم الافتراضية (EVM)](/developers/docs/evm/)، [يُجمِّع](/developers/docs/smart-contracts/compiling/) المطورون النص البرمجي المصدر للعقد — وهي تعليمات [مكتوبة بلغة Solidity](/developers/docs/smart-contracts/languages/) أو لغة برمجة أخرى عالية المستوى — إلى bytecode. نظرًا لأن EVM لا يمكنه تفسير التعليمات عالية المستوى، فإن تجميع الكود المصدر إلى رمز ثنائي (أي تعليمات الآلة منخفضة المستوى) ضروري لتنفيذ منطق العقد في EVM.

التحقق من الكود المصدر هو مقارنة الكود المصدر للعقد الذكي مع الكود الثانوي المترجم المستخدم أثناء إنشاء العقد للكشف عن أي اختلافات. يعد التحقق من العقود الذكية أمرًا مهمًا لأن كود العقد المعلن عنه قد يكون مختلفًا عما يعمل على blockchain.

يتيح التحقق من العقد الذكي التحقق من عمل العقد من خلال اللغة الأعلى مستوى التي تمت كتابتها بها، دون الحاجة إلى قراءة الكود الآلي. يتيح التحقق من العقد الذكي التحقق من عمل العقد من خلال اللغة الأعلى مستوى التي تمت كتابتها بها، دون الحاجة إلى قراءة الكود الآلي. وهذا يجعل قراءة الكود أسهل بكثير. يتيح التحقق من المصدر أيضًا توثيق التعليمات البرمجية، حتى يتمكن المستخدمون النهائيون من معرفة ما تم تصميم العقد الذكي للقيام به.

### ما هو التحقق الكامل؟ {#full-verification}

هناك بعض الأجزاء من الكود المصدر التي لا تؤثر على الكود الثانوي المترجم مثل التعليقات أو أسماء المتغيرات. وهذا يعني أن كودين مصدرين بأسماء متغيرات مختلفة وتعليقات مختلفة سيكونان قادرين على التحقق من نفس العقد. من خلال ذلك، يمكن للممثل الخبيث إضافة تعليقات خادعة أو إعطاء أسماء متغيرات مضللة داخل الكود المصدر والحصول على العقد الذي تم التحقق منه باستخدام كود مصدر مختلف عن الكود المصدر الأصلي.

من الممكن تجنب ذلك عن طريق إلحاق بيانات إضافية بـ bytecode لتكون بمثابة _ضمان تشفير_ لدقة النص البرمجي المصدر، و_كبصمة_ لمعلومات التجميع. توجد المعلومات الضرورية في [البيانات الوصفية لعقد Solidity](https://docs.soliditylang.org/en/v0.8.15/metadata.html)، ويتم إلحاق التجزئة (هاش) لهذا الملف بـ bytecode الخاص بالعقد. يمكنك رؤية ذلك عمليًا في [ملعب بيانات التعريف](https://playground.sourcify.dev)

يحتوي ملف البيانات الوصفية على معلومات حول تجميع العقد بما في ذلك ملفات المصدر وتجزئاتها.
وهذا يعني أنه إذا تغيرت أي من إعدادات التجميع أو حتى بايت واحد في أحد ملفات المصدر، يتغير ملف البيانات الوصفية. وبالتالي، يتغير أيضًا تجزئة ملف البيانات الوصفية، الملحقة بالرمز الثنائي. هذا يعني أنه إذا تطابق البايت كود الخاص بالعقد + تجزئة البيانات الوصفية الملحقة مع كود المصدر وإعدادات التجميع المقدمة، فيمكننا التأكد من أن هذا هو نفس كود المصدر المستخدم في التجميع الأصلي، ولا يختلف حتى بايت واحد.

يُشار إلى هذا النوع من التحقق الذي يستفيد من التجزئة (هاش) للبيانات الوصفية باسم **"[التحقق الكامل](https://docs.sourcify.dev/docs/full-vs-partial-match/)"** (يُعرف أيضًا بـ "التحقق المثالي"). إذا لم تتطابق تجزئات البيانات الوصفية أو لم يتم أخذها في الاعتبار أثناء التحقق، فسيكون ذلك "تطابقًا جزئيًا"، وهو حاليًا الطريقة الأكثر شيوعًا للتحقق من العقود. من الممكن [إدراج نص برمجي ضار](https://samczsun.com/hiding-in-plain-sight/) لن ينعكس في النص البرمجي المصدر المُتحقق منه بدون التحقق الكامل. معظم المطورين لا يدركون عملية التحقق الكاملة ولا يحتفظون بملف البيانات الوصفية للتجميع الخاص بهم، وبالتالي فإن التحقق الجزئي كان الطريقة الفعلية للتحقق من العقود حتى الآن.

## لماذا يعد التحقق من الكود المصدر مهمًا؟ {#importance-of-source-code-verification}

### انعدام الثقة {#trustlessness}

يمكن القول إن انعدام الثقة هو أكبر فرضية للعقود الذكية و[التطبيقات اللامركزية (dapps)](/developers/docs/dapps/). العقود الذكية "غير قابلة للتغيير" ولا يمكن تغييرها؛ حيث سيقوم العقد فقط بتنفيذ منطق العمل المحدد في الكود في وقت النشر. وهذا يعني أن المطورين والشركات لا يمكنهم التلاعب بكود العقد بعد نشره على Ethereum.

لكي يكون العقد الذكي خاليًا من الثقة، يجب أن يكون رمز العقد متاحًا للتحقق المستقل. في حين أن الكود الثنائي المجمّع لكل عقد ذكي متاح للعامة على blockchain، فإن اللغة منخفضة المستوى يصعب فهمها - لكل من المطورين والمستخدمين.

تعمل المشاريع على تقليل افتراضات الثقة من خلال نشر الكود المصدر لعقودها. لكن هذا يؤدي إلى مشكلة أخرى: من الصعب التحقق من أن الكود المصدر المنشور يتطابق مع الكود الثانوي للعقد. في هذا السيناريو، يتم فقدان قيمة عدم الثقة لأن المستخدمين يجب أن يثقوا في المطورين بعدم تغيير منطق أعمال العقد (أي عن طريق تغيير الكود الثنائي) قبل نشره على blockchain.

توفر أدوات التحقق من الكود المصدر ضمانات بأن ملفات الكود المصدر للعقد الذكي تتطابق مع كود التجميع. النتيجة هي نظام بيئي لا يعتمد على الثقة، حيث لا يثق المستخدمون في الأطراف الثالثة بشكل أعمى، بل يتحققون بدلاً من ذلك من الكود قبل إيداع الأموال في العقد.

### سلامة المستخدم {#user-safety}

مع العقود الذكية، عادة ما يكون هناك قدر كبير من المال على المحك. وهذا يتطلب ضمانات أمنية أعلى والتحقق من منطق العقد الذكي قبل استخدامه. المشكلة هي أن المطورين عديمي الضمير يمكنهم خداع المستخدمين عن طريق إدراج تعليمات برمجية ضارة في العقد الذكي. بدون التحقق، يمكن أن تحتوي العقود الذكية الخبيثة على [أبواب خلفية](https://www.trustnodes.com/2018/11/10/concerns-rise-over-backdoored-smart-contracts)، وآليات للتحكم في الوصول مثيرة للجدل، وثغرات قابلة للاستغلال، وأشياء أخرى تعرض سلامة المستخدم للخطر قد تمر دون أن يتم اكتشافها.

إن نشر ملفات الكود المصدر للعقد الذكي يجعل من الأسهل على المهتمين، مثل المدققين، تقييم العقد بحثًا عن متجهات الهجوم المحتملة. بفضل قيام أطراف متعددة بالتحقق من العقد الذكي بشكل مستقل، يتمتع المستخدمون بضمانات أقوى فيما يتعلق بأمان العقد.

## كيفية التحقق من النص البرمجي المصدر لعقود إيثريوم الذكية {#source-code-verification-for-ethereum-smart-contracts}

يتطلب [نشر عقد ذكي على إيثريوم](/developers/docs/smart-contracts/deploying/) إرسال معاملة مع حمولة بيانات (bytecode مُجمَّع) إلى عنوان خاص. يتم إنشاء حمولة البيانات عن طريق تجميع النص البرمجي المصدر، بالإضافة إلى [وسائط المُنشئ](https://docs.soliditylang.org/en/v0.8.14/contracts.html#constructor) لمثيل العقد الملحقة بحمولة البيانات في المعاملة. التجميع حتمي، مما يعني أنه ينتج دائمًا نفس المخرجات (أي bytecode العقد) إذا تم استخدام نفس الملفات المصدر وإعدادات التجميع (مثل إصدار المترجم، والمحسن).

![رسم بياني يوضح التحقق من النص البرمجي المصدر للعقد الذكي](./source-code-verification.png)

يتضمن التحقق من العقد الذكي الخطوات التالية بشكل أساسي:

1. قم بإدخال ملفات المصدر وإعدادات التجميع إلى المترجم.

2. قم بإدخال ملفات المصدر وإعدادات التجميع إلى المترجم.

3. احصل على الرمز الثنائي للعقد المنشور على عنوان معين

4. قم بمقارنة الكود الثنائي المنشور مع الكود الثنائي المعاد تجميعه. إذا تطابقت الرموز، فسيتم التحقق من العقد باستخدام كود المصدر وإعدادات التجميع المحددة.

5. إذا تطابقت الرموز، فسيتم التحقق من العقد باستخدام كود المصدر وإعدادات التجميع المحددة.

لاحظ أن هذا وصف مبسط للتحقق وهناك العديد من الاستثناءات التي لن تنجح معه مثل وجود [متغيرات غير قابلة للتغيير](https://docs.sourcify.dev/docs/immutables/).

## أدوات التحقق من النص البرمجي المصدر {#source-code-verification-tools}

أدوات التحقق من كود المصدر ولهذا السبب لدينا أدوات للتحقق من الكود المصدر للعقود الذكية المنتشرة على Ethereum. تعمل هذه الأدوات على أتمتة أجزاء كبيرة من التحقق من الكود المصدر وتقوم أيضًا بتنسيق العقود التي تم التحقق منها لصالح المستخدمين.

### Etherscan {#etherscan}

على الرغم من أنه معروف في الغالب بأنه [مستكشف بلوكتشين إيثريوم](/developers/docs/data-and-analytics/block-explorers/)، يوفر Etherscan أيضًا [خدمة التحقق من النص البرمجي المصدر](https://etherscan.io/verifyContract) لمطوري العقود الذكية ومستخدميها.

يتيح لك Etherscan إعادة تجميع البايت كود العقد من الحمولة الأصلية للبيانات (كود المصدر، عنوان المكتبة، إعدادات المترجم، عنوان العقد، وما إلى ذلك). إذا كان bytecode المعاد تجميعه مرتبطًا بـ bytecode (ومعلمات المُنشئ) للعقد الموجود على السلسلة، فعندئذٍ [يتم التحقق من العقد](https://info.etherscan.com/types-of-contract-verification/).

بمجرد التحقق، يتلقى كود مصدر العقد الخاص بك علامة "تم التحقق منه" ويتم نشره على Etherscan ليتمكن الآخرون من تدقيقه. يُضاف أيضًا إلى قسم [العقود المُتحقق منها](https://etherscan.io/contractsVerified/) — وهو مستودع للعقود الذكية ذات النصوص البرمجية المصدر المُتحقق منها.

Etherscan هي الأداة الأكثر استخدامًا للتحقق من العقود. لكن، لدى التحقق من العقد في Etherscan عيبًا: فهو يفشل في مقارنة **التجزئة (هاش) للبيانات الوصفية** لـ bytecode الموجود على السلسلة و bytecode المعاد تجميعه. لذلك فإن المباريات في Etherscan هي مباريات جزئية.

[المزيد عن التحقق من العقود على Etherscan](https://medium.com/etherscan-blog/verifying-contracts-on-etherscan-f995ab772327).

### Blockscout {#blockscout}

[Blockscout](https://blockscout.com/) هو مستكشف بلوكتشين مفتوح المصدر يوفر أيضًا [خدمة التحقق من العقود](https://eth.blockscout.com/contract-verification) لمطوري العقود الذكية ومستخدميها. كبديل مفتوح المصدر، يوفر Blockscout الشفافية في كيفية إجراء التحقق ويمكّن مساهمات المجتمع لتحسين عملية التحقق.

على غرار خدمات التحقق الأخرى، يسمح لك Blockscout بالتحقق من الكود المصدر لعقدك عن طريق إعادة تجميع الكود الثنائي ومقارنته بالعقد المنشور. على غرار خدمات التحقق الأخرى، يسمح لك Blockscout بالتحقق من الكود المصدر لعقدك عن طريق إعادة تجميع الكود الثنائي ومقارنته بالعقد المنشور. العقود المُتحقق منها مدرجة أيضًا في [مستودع العقود المُتحقق منها](https://eth.blockscout.com/verified-contracts) الخاص بـ Blockscout لسهولة التصفح والاستكشاف.

### Sourcify {#sourcify}

[Sourcify](https://sourcify.dev/#/verifier) هو أداة أخرى للتحقق من العقود وهي مفتوحة المصدر ولامركزية. إنه ليس مستكشف كتل ويتحقق فقط من العقود على [شبكات مختلفة قائمة على EVM](https://docs.sourcify.dev/docs/chains). يعمل كبنية تحتية عامة للأدوات الأخرى للبناء فوقها، ويهدف إلى تمكين تفاعلات العقود الأكثر سهولة للاستخدام البشري باستخدام [واجهة التطبيق الثنائية (ABI)](/developers/docs/smart-contracts/compiling/#web-applications) وتعليقات [NatSpec](https://docs.soliditylang.org/en/v0.8.15/natspec-format.html) الموجودة في ملف البيانات الوصفية.

على عكس Etherscan، يدعم Sourcify المطابقات الكاملة مع تجزئة البيانات الوصفية. تُقدَّم العقود المُتحقق منها في [مستودعه العام](https://docs.sourcify.dev/docs/repository/) على HTTP و [IPFS](https://docs.ipfs.io/concepts/what-is-ipfs/#what-is-ipfs)، وهو تخزين لامركزي [بعنونة المحتوى](https://docs.storacha.network/concepts/content-addressing/). يتيح هذا جلب ملف البيانات الوصفية لعقد عبر IPFS نظرًا لأن تجزئة البيانات الوصفية المضافة هي تجزئة IPFS.

بالإضافة إلى ذلك، يمكنك أيضًا استرداد ملفات التعليمات البرمجية المصدرية عبر IPFS، حيث يتم العثور على تجزئات IPFS لهذه الملفات أيضًا في البيانات الوصفية. يمكن التحقق من العقد من خلال توفير ملف البيانات الوصفية والملفات المصدر عبر واجهة برمجة التطبيقات (API) الخاصة به أو [واجهة المستخدم (UI)](https://sourcify.dev/#/verifier)، أو باستخدام المكونات الإضافية. تستمع أداة مراقبة Sourcify أيضًا إلى عمليات إنشاء العقود على الكتل الجديدة وتحاول التحقق من العقود إذا تم نشر بياناتها الوصفية وملفات المصدر على IPFS.

[المزيد عن التحقق من العقود على Sourcify](https://soliditylang.org/blog/2020/06/25/sourcify-faq/).

### Tenderly {#tenderly}

تتيح [منصة Tenderly](https://tenderly.co/) لمطوري Web3 بناء العقود الذكية واختبارها ومراقبتها وتشغيلها. من خلال الجمع بين أدوات التصحيح مع إمكانية المراقبة وبناء البنية التحتية، يساعد Tenderly المطورين على تسريع تطوير العقود الذكية. لتمكين ميزات Tenderly بالكامل، يحتاج المطورون إلى [إجراء التحقق من النص البرمجي المصدر](https://docs.tenderly.co/monitoring/contract-verification) باستخدام عدة طرق.

من الممكن التحقق من العقد بشكل خاص أو عام. إذا تم التحقق منه بشكل خاص، فسيكون العقد الذكي مرئيًا لك فقط (وللأعضاء الآخرين في مشروعك). يؤدي التحقق من العقد علنًا إلى جعله مرئيًا للجميع الذين يستخدمون منصة Tenderly.

يمكنك التحقق من عقودك باستخدام [لوحة التحكم](https://docs.tenderly.co/contract-verification)، أو [ملحق Tenderly Hardhat](https://docs.tenderly.co/contract-verification/hardhat)، أو [واجهة سطر الأوامر (CLI)](https://docs.tenderly.co/monitoring/smart-contract-verification/verifying-contracts-using-cli).

عند التحقق من العقود من خلال لوحة المعلومات، يتعين عليك استيراد ملف المصدر أو ملف البيانات الوصفية الذي تم إنشاؤه بواسطة مُجمِّع Solidity، والعنوان/الشبكة، وإعدادات المُجمِّع.

يسمح لك استخدام البرنامج الإضافي Tenderly Hardhat بالتحكم بشكل أكبر في عملية التحقق بمجهود أقل، مما يتيح لك الاختيار بين التحقق التلقائي (بدون كود) والتحقق اليدوي (المستند إلى الكود).

## قراءة إضافية{#further-reading}

- [التحقق من النص البرمجي المصدر للعقد](https://programtheblockchain.com/posts/2018/01/16/verifying-contract-source-code/)
