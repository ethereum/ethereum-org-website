---
title: "آليات الاجماع"
description: "شرحٌ لبروتوكولات التوافق في النُظم الموزعة ودورها في Ethereum."
lang: ar
---

غالبًا ما يتم استخدام مصطلح "آلية الإجماع" بشكل عامي للإشارة إلى بروتوكولات "إثبات الحصة" أو "إثبات العمل" أو "إثبات السلطة". ومع ذلك، فهذه مجرد مكونات في آليات الإجماع التي تحمي ضد [هجمات سيبيل](/glossary/#sybil-attack). آليات الإجماع هي المجموعة الكاملة من الأفكار والبروتوكولات والحوافز التي تمكن مجموعة موزعة من العقد من الاتفاق على حالة سلسلة الكتل.

## المتطلبات الأساسية {#prerequisites}

لفهم هذه الصفحة بشكل أفضل، نوصيك أولاً بقراءة [مقدمتنا إلى إيثريوم](/developers/docs/intro-to-ethereum/)

## ما هو الإجماع؟ {#what-is-consensus}

وبالإجماع نعني أنه تم التوصل إلى اتفاق عام. تخيل مجموعة من الأشخاص يذهبون إلى السينما. إذا لم يكن هناك خلاف على اختيار الفيلم المقترح، فسيتم التوصل إلى توافق في الآراء. إذا كان هناك خلاف، يجب أن تتوفر لدى المجموعة الوسائل اللازمة لتحديد الفيلم الذي تريد مشاهدته. وفي الحالات المتطرفة، سوف تنقسم المجموعة في نهاية المطاف.

فيما يتعلق بسلسلة كتل الإيثريوم، تم إضفاء الطابع الرسمي على العملية، والتوصل إلى إجماع يعني أن 66% على الأقل من العقد الموجودة على الشبكة تتفق على الحالة العالمية للشبكة.

## ما هي آلية التوافق؟ {#what-is-a-consensus-mechanism}

يشير مصطلح آلية الإجماع إلى المجموعة الكاملة من البروتوكولات والحوافز والأفكار التي تسمح لشبكة من العقد بالاتفاق على حالة blockchain.

تستخدم Ethereum آلية إجماع تعتمد على إثبات الحصة والتي تستمد أمنها الاقتصادي المشفر من مجموعة من المكافآت والعقوبات المطبقة على رأس المال المحبوس من قبل المشاركين. يشجع هيكل الحوافز هذا المشاركين الأفراد على تشغيل محققين صادقين، ويعاقب أولئك الذين لا يفعلون ذلك، ويخلق تكلفة عالية للغاية لمهاجمة الشبكة.

وهناك بروتوكول يحكم كيفية اختيار المحققين الصادقين لاقتراح أو التحقق من صحة الكتل، ومعالجة المعاملات والتصويت على وجهة نظرهم بشأن رأس السلسلة. في المواقف النادرة التي تتواجد فيها كتل متعددة في نفس الموضع بالقرب من رأس السلسلة، توجد آلية اختيار الشوكة التي تختار الكتل التي تشكل السلسلة "الأثقل"، والتي يتم قياسها من خلال عدد المحققين الذين صوتوا للكتل المرجحة برصيد الأثير المتراكم لديهم.

بعض المفاهيم مهمة للإجماع والتي لم يتم تعريفها صراحةً في الكود، مثل الأمان الإضافي الذي توفره التنسيق الاجتماعي المحتمل خارج النطاق كخط دفاع أخير ضد الهجمات على الشبكة.

وتشكل هذه المكونات مجتمعة آلية الإجماع.

## أنواع آليات الإجماع {#types-of-consensus-mechanisms}

### القائمة على إثبات العمل {#proof-of-work}

مثل بيتكوين، استخدم إيثريوم في السابق بروتوكول إجماع يعتمد على **إثبات العمل (PoW)**.

#### إنشاء الكتلة {#pow-block-creation}

يتنافس عمال المناجم على إنشاء كتل جديدة مليئة بالمعاملات المعالجة. ويشارك الرابح الكتلة الجديدة مع بقية الشبكة ويجني بعضًا من عملة ETH المعدَّنة حديثًا. يتم الفوز بالسباق من قبل الكمبيوتر الذي يكون قادرًا على حل لغز الرياضيات بشكل أسرع. يؤدي هذا إلى إنشاء رابط تشفيري بين الكتلة الحالية والكتلة السابقة. حل هذا اللغز هو العمل في "إثبات العمل". يتم بعد ذلك تحديد السلسلة الأساسية من خلال قاعدة اختيار الشوكة التي تحدد مجموعة الكتل التي تم إنجاز أكبر قدر من العمل لتعدينها.

#### حماية {#pow-security}

ما يحافظ على أمن الشبكة هو أنك بحاجة إلى 51% من القدرة الحاسوبية للشبكة للاحتيال على السلسلة. سيتطلب هذا استثمارات ضخمة في المعدات والطاقة؛ ومن المرجح أن تنفق أكثر مما تكسب.

المزيد عن [إثبات العمل](/developers/docs/consensus-mechanisms/pow/)

### القائمة على إثبات الحصة {#proof-of-stake}

يستخدم إيثريوم الآن بروتوكول إجماع يعتمد على **إثبات الحصة (PoS)**.

#### إنشاء الكتلة {#pos-block-creation}

المحققون يقومون بإنشاء الكتل. يتم اختيار أحد المحققين بشكل عشوائي في كل فتحة ليكون مقترح الكتلة. يطلب عميل الإجماع الخاص بهم مجموعة من المعاملات باعتبارها "حمولة تنفيذ" من عميل التنفيذ المقترن بهم. يقومون بتغليف هذا في بيانات الإجماع لتشكيل كتلة، والتي يرسلونها إلى العقد الأخرى على شبكة Ethereum. يتم مكافأة إنتاج هذه الكتلة بعملة ETH. في حالات نادرة عندما توجد كتل متعددة محتملة لفتحة واحدة، أو عندما تسمع العقد عن الكتل في أوقات مختلفة، تختار خوارزمية اختيار الشوكة الكتلة التي تشكل السلسلة ذات الوزن الأكبر من الشهادات (حيث يكون الوزن هو عدد المحققين الذين يثبتون حسب رصيد ETH الخاص بهم).

#### حماية {#pos-security}

يعد نظام إثبات الحصة آمنًا من الناحية الاقتصادية المشفرة لأنه يجب على المهاجم الذي يحاول السيطرة على السلسلة تدمير كمية هائلة من ETH. يعمل نظام المكافآت على تحفيز المشاركين الأفراد على التصرف بصدق، وتعمل العقوبات على تثبيط المشاركين عن التصرف بخبث.

المزيد عن [إثبات الحصة](/developers/docs/consensus-mechanisms/pos/)

### دليل مرئي {#types-of-consensus-video}

شاهد المزيد حول أنواع آليات الإجماع المختلفة المستخدمة في Ethereum:

<YouTube id="ojxfbN78WFQ" />

### مقاومة سيبيل واختيار السلسلة {#sybil-chain}

إن إثبات العمل وإثبات الحصة وحدهما ليسا بروتوكولات إجماع، ولكن غالبًا ما يشار إليهما على هذا النحو من أجل التبسيط. إنها في الواقع آليات مقاومة Sybil ومحددات مؤلف الكتلة؛ فهي طريقة لتحديد من هو مؤلف الكتلة الأحدث. هناك مكون مهم آخر وهو خوارزمية اختيار السلسلة (المعروفة أيضًا باسم اختيار الشوكة) التي تمكن العقد من اختيار كتلة واحدة صحيحة في رأس السلسلة في السيناريوهات التي توجد فيها كتل متعددة في نفس الموضع.

**مقاومة سيبيل** تقيس مدى قدرة البروتوكول على التصدي لهجوم سيبيل. إن مقاومة هذا النوع من الهجوم أمر ضروري لسلسلة الكتل اللامركزية وتمكن عمال المناجم والمحققين من الحصول على مكافأة متساوية بناءً على الموارد المستخدمة. <a href="https://openethereum.github.io/">عميل Rust Ethereum</a> \* <strong x-id="1">لاحظ أن OpenEthereum <a href="https://medium.com/openethereum/gnosis-joins-erigon-formerly-turbo-geth-to-release-next-gen-ethereum-client-c6708dd06dd">قد أصبح قديمًا</a> ولم يعد قيد الصيانة.</strong> استخدمه بحذر ويفضل التبديل إلى تنفيذ عميل آخر. تشكل هذه الحماية رادعًا اقتصاديًا لهجمات Sybil.

تُستخدم **قاعدة اختيار السلسلة** لتحديد السلسلة \"الصحيحة\". يستخدم البيتكوين قاعدة "أطول سلسلة"، مما يعني أن سلسلة الكتل الأطول ستكون هي التي تقبلها بقية العقد على أنها صالحة وتعمل معها. بالنسبة لسلاسل إثبات العمل، يتم تحديد السلسلة الأطول من خلال الصعوبة التراكمية الإجمالية لإثبات العمل في السلسلة. كانت الإيثريوم تستخدم أيضًا قاعدة السلسلة الأطول؛ ومع ذلك، الآن بعد أن تعمل الإيثريوم على إثبات الحصة، فقد اعتمدت خوارزمية اختيار الشوكة المحدثة التي تقيس "وزن" السلسلة. الوزن هو مجموع الأصوات المتراكمة للمحقق، مع مراعاة أرصدة الأثير التي راهن بها المحقق.

يستخدم إيثريوم آلية إجماع تُعرف باسم [Gasper](/developers/docs/consensus-mechanisms/pos/gasper/) والتي تجمع بين [Casper FFG لإثبات الحصة](https://arxiv.org/abs/1710.09437) مع [قاعدة اختيار الانقسام GHOST](https://arxiv.org/abs/2003.03052).

## قراءة إضافية {#further-reading}

- [ما هي خوارزمية إجماع البلوكتشين؟](https://academy.binance.com/en/articles/what-is-a-blockchain-consensus-algorithm)
- [ما هو إجماع ناكاموتو؟ دليل المبتدئين الكامل](https://blockonomi.com/nakamoto-consensus/)
- [كيف يعمل Casper؟](https://medium.com/unitychain/intro-to-casper-ffg-9ed944d98b2d)
- [حول أمان وأداء سلاسل بلوكتشين إثبات العمل](https://eprint.iacr.org/2016/555.pdf)
- [الخطأ البيزنطي](https://en.wikipedia.org/wiki/Byzantine_fault)

_هل تعرف أحد الموارد المجتمعية التي ساعدتك؟ عدّل هذه الصفحة وأضفه!_

## المواضيع ذات الصلة {#related-topics}

- [إثبات العمل](/developers/docs/consensus-mechanisms/pow/)
- [التنقيب](/developers/docs/consensus-mechanisms/pow/mining/)
- إثبات الحصة(/developers/docs/consensus-mechanisms/pos/)
- [إثبات السلطة](/developers/docs/consensus-mechanisms/poa/)
