---
title: "المفاتيح في إثبات الحصة إيثريوم"
description: "شرح المفاتيح المستخدمة في آلية التوافق في إثر يوم المعتمدة على إثبات الحصة"
lang: ar
---

تؤمن إيثيريوم أصول المستخدمين باستخدام تشفير المفتاح العام والخاص. يتم استخدام المفتاح العام كأساس لعنوان الإيثيريوم - أي أنه مرئي للجمهور العام ويستخدم كمعرف فريد. يجب أن يكون المفتاح الخاص (أو 'السرّي') متاحًا فقط لمالك الحساب. المفتاح الخاص يُستخدم 'لتوقيع' المعاملات والبيانات بحيث يمكن للتشفير أن يثبت أن الحامل يوافق على إجراء معين باستخدام مفتاح خاص محدد.

يتم إنشاء مفاتيح إيثريوم باستخدام [تشفير المنحنى الإهليلجي](https://en.wikipedia.org/wiki/Elliptic-curve_cryptography).

لكن، عندما تحولت إيثريوم من [إثبات العمل](/developers/docs/consensus-mechanisms/pow) إلى [إثبات الحصة](/developers/docs/consensus-mechanisms/pos) تمت إضافة نوع جديد من المفاتيح إلى إيثريوم. تعمل المفاتيح الأصلية بنفس الطريقة تمامًا كما كانت من قبل - لم يكن هناك أي تغييرات في المفاتيح المعتمدة على المنحنيات البيضاوية التي تؤمن الحسابات. ومع ذلك، كان المستخدمون بحاجة إلى نوع جديد من المفاتيح للمشاركة في إثبات الحصة عن طريق تعيين ETH وتشغيل المدققين. ظهرت هذه الحاجة من تحديات التوسع المرتبطة بالعديد من الرسائل التي تمر بين أعداد كبيرة من المدققين والتي تتطلب طريقة تشفير يمكن تجميعها بسهولة لتقليل كمية الاتصال المطلوبة لكي تصل الشبكة إلى توافق.

يستخدم هذا النوع الجديد من المفاتيح [مخطط توقيع **Boneh-Lynn-Shacham (BLS)**](https://wikipedia.org/wiki/BLS_digital_signature). يتيح نظام BLS تجميع التوقيعات بكفاءة عالية ولكنه يسمح أيضًا بالهندسة العكسية لمفاتيح المدققين الفردية المجمعة، وهو مثالي لإدارة الإجراءات بين المدققين.

## النوعان من مفاتيح برنامج المدقق {#two-types-of-keys}

قبل الانتقال إلى إثبات الحصة، كان لمستخدمي إيثريوم مفتاح خاص واحد مبني على المنحنيات البيانية للوصول إلى أموالهم. مع تقديم إثبات الحصة، أصبح المستخدمون الذين يرغبون في أن يكونوا مراهنين منفردين بحاجة أيضًا إلى **مفتاح برنامج مدقق** و**مفتاح سحب**.

### مفتاح برنامج المدقق {#validator-key}

يتكون مفتاح التوقيع للمدقق من عنصرين:

- المفتاح **الخاص** لبرنامج المدقق
- المفتاح **العام** لبرنامج المدقق

الغرض من المفتاح الخاص للمدقق هو التوقيع على العمليات على السلسلة مثل مقترحات الكتل والشهادات. بسبب ذلك، يجب أن تُحتفظ هذه المفاتيح في محفظة ساخنة.

تتمتع هذه المرونة بميزة نقل مفاتيح توقيع برنامج المدقق بسرعة كبيرة من جهاز إلى آخر، لكن، إذا ضاعت أو سُرقت، فقد يتمكن السارق من **التصرف بشكل ضار** بعدة طرق:

- احصل على المصدق المخفض بواسطة:
  - كونك مقترحًا وتوقيع كتلتين مختلفتين لنفس الفَتْحَة
  - كونك موثقًا وتوقيع شهادة تحيط بشهادة أخرى
  - كونك موثقًا وتوقيع شهادتين مختلفتين لهما نفس الهدف
- إجبار الخروج الطوعي، مما يمنع المدقق من المشاركة، ويمنح الوصول إلى رصيد ETH الخاص به لمالك مفتاح السحب

يُدرج **المفتاح العام لبرنامج المدقق** في بيانات المعاملة عندما يودع مستخدم ما عملة ETH في عقد إيداع تجميد العملات. يُعرف هذا باسم _بيانات الإيداع_ وهو يسمح لإيثريوم بتحديد برنامج المدقق.

### بيانات اعتماد السحب {#withdrawal-credentials}

يمتلك كل برنامج مدقق خاصية تُعرف باسم _بيانات اعتماد السحب_. يبدأ هذا الحقل المكون من 32 بايت إما بـ `0x00`، الذي يمثل بيانات اعتماد سحب BLS، أو بـ `0x01`، الذي يمثل بيانات اعتماد تشير إلى عنوان تنفيذ.

يجب على برامج المدققين التي لديها مفاتيح `0x00` BLS تحديث بيانات الاعتماد هذه لتشير إلى عنوان تنفيذ من أجل تفعيل مدفوعات الرصيد الزائد أو السحب الكامل من تجميد العملات. يمكن القيام بذلك عن طريق توفير عنوان تنفيذ في بيانات الإيداع أثناء الإنشاء الأولي للمفتاح، _أو_ باستخدام مفتاح السحب في وقت لاحق لتوقيع وبث رسالة `BLSToExecutionChange`.

### مفتاح السحب {#withdrawal-key}

مفتاح السحب سيكون مطلوبًا لتحديث بيانات السحب لتشير إلى عنوان التنفيذ، إذا لم يتم تعيينه أثناء الإيداع الأولي. سيتيح ذلك البدء في معالجة المدفوعات الزائدة، وسيسمح أيضاً للمستخدمين بسحب جميع ما تم تراكمه من الإيثر المخصص.

تمامًا مثل مفاتيح المدقق، تتكون مفاتيح السحب أيضًا من عنصرين:

- مفتاح السحب **الخاص**
- مفتاح السحب **العام**

فقدان هذا المفتاح قبل تحديث بيانات اعتماد السحب إلى النوع `0x01` يعني فقدان الوصول إلى رصيد برنامج المدقق. لا يزال بإمكان المُحقق توقيع الشهادات والكتل لأن هذه الإجراءات تتطلب المفتاح الخاص للمحقق، ومع ذلك فهناك حافز قليل أو معدوم إذا فقدت مفاتيح السحب.

فصل مفاتيح التحقق عن مفاتيح حساب الإيثيريوم يمكّن مستخدمًا واحدًا من تشغيل عدة تحققين.

![مخطط مفتاح برنامج المدقق](validator-key-schematic.png)

**ملاحظة**: يتطلب الخروج من مهام تجميد العملات وسحب رصيد برنامج المدقق حاليًا توقيع [رسالة خروج طوعي (VEM)](https://mirror.xyz/ladislaus.eth/wmoBbUBes2Wp1_6DvP6slPabkyujSU7MZOFOC3QpErs&1) باستخدام مفتاح برنامج المدقق. لكن، [EIP-7002](https://eips.ethereum.org/EIPS/eip-7002) هو مقترح سيسمح للمستخدم بتفعيل خروج برنامج المدقق وسحب رصيده عن طريق توقيع رسائل الخروج باستخدام مفتاح السحب في المستقبل. سيقلل هذا من افتراضات الثقة من خلال تمكين المراهنين الذين يفوضون ETH إلى [مقدمي خدمة تجميد العملات كخدمة](/staking/saas/#what-is-staking-as-a-service) من البقاء متحكمين في أموالهم.

## اشتقاق المفاتيح من عبارة أصل {#deriving-keys-from-seed}

إذا كان كل 32 ETH تم تخزينها يتطلب مجموعة جديدة من 2 مفتاحين مستقلين تمامًا، فإن إدارة المفاتيح ستصبح معقدة بسرعة، خاصةً بالنسبة للمستخدمين الذين تشغيل عدة مصادقين. بدلاً من ذلك، يمكن اشتقاق عدة مفاتيح للتحقق من صحة من سر مشترك واحد، ويسمح تخزين ذلك السر الواحد بالوصول إلى عدة مفاتيح للتحقق من الصحة.

[العبارات الأولية](https://en.bitcoinwiki.org/wiki/Mnemonic_phrase) والمسارات هي ميزات بارزة غالبًا ما يصادفها المستخدمون عندما [يصلون](https://ethereum.stackexchange.com/questions/19055/what-is-the-difference-between-m-44-60-0-0-and-m-44-60-0) إلى محافظهم. الذاكرة المساعدة هي سلسلة من الكلمات التي تعمل كزر ابتدائي لمفتاح خاص. عندما يتم دمجها مع بيانات إضافية، يولد المساعد الذهني هاشتا يعرف باسم 'المفتاح الرئيس. يمكن اعتبار هذا كجذر شجرة. يمكن اشتقاق الفروع من هذا الجذر باستخدام مسار هرمي بحيث يمكن أن توجد العقد الفرعية كتركيبات من تجزئة العقدة الأصلية ومؤشرها في الشجرة. اقرأ عن معايير [BIP-32](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki) و [BIP-19](https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki) لإنشاء المفاتيح القائم على العبارات الأولية.

تتمتع هذه المسارات بالهيكل التالي، والذي سيكون مألوفًا للمستخدمين الذين تفاعلوا مع المحافظ الصلبة:

```
m/44'/60'/0'/0`
```

الفواصل في هذا المسار تفصل بين مكونات المفتاح الخاص كما يلي:

```
master_key / purpose / coin_type / account / change / address_index
```

يمكّن هذا المنطق المستخدمين من إرفاق أكبر عدد ممكن من برامج المدققين إلى **عبارة أولية** واحدة لأن جذر الشجرة يمكن أن يكون مشتركًا، ويمكن أن يحدث التمايز عند الفروع. يمكن للمستخدم **اشتقاق أي عدد من المفاتيح** من العبارة الأولية.

```
      [m / 0]
     /
    /
[m] - [m / 1]
    \
     \
      [m / 2]
```

يتم فصل كل فرع بـ `/` لذا فإن `m/2` تعني البدء بالمفتاح الرئيس واتباع الفرع 2. في المخطط أدناه، يتم استخدام عبارة واحدة لتخزين ثلاثة مفاتيح سحب، كل منها مرتبط بمصادقين اثنين.

![منطق مفتاح برنامج المدقق](multiple-keys.png)

## قراءة إضافية {#further-reading}

- [منشور مدونة مؤسسة إيثريوم بقلم كارل بيكهويزن](https://blog.ethereum.org/2020/05/21/keys/)
- [EIP-2333 إنشاء مفتاح BLS12-381](https://eips.ethereum.org/EIPS/eip-2333)
- [EIP-7002: عمليات الخروج التي يتم تفعيلها من طبقة التنفيذ](https://web.archive.org/web/20250125035123/https://research.2077.xyz/eip-7002-unpacking-improvements-to-staking-ux-post-merge)
- [إدارة المفاتيح على نطاق واسع](https://docs.ethstaker.cc/ethstaker-knowledge-base/scaled-node-operators/key-management-at-scale)
