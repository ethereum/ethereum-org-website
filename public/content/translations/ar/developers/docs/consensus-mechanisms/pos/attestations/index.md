---
title: "المصادقات"
description: "وصف للشهادات على إثبات الحصة في الإيثيريوم."
lang: ar
---

من المتوقع أن يقوم المدقق بإنشاء وتوقيع وبث شهادة خلال كل عصر. تصف هذه الصفحة كيف تبدو هذه الشهادات وكيف يتم معالجتها والتواصل بشأنها بين عملاء التوافق.

## ما هو التصديق؟ {#what-is-an-attestation}

كل [حقبة](/glossary/#epoch) (6.4 دقائق)، يقترح أحد المدققين مصادقة للشبكة. الشهادة مخصصة لفتحة معينة في الحقبة. الغرض من المصادقة هو التصويت لصالح رؤية المدقق للسلسلة، لا سيما أحدث كتلة مبررة وأول كتلة في الحقبة الحالية (المعروفة باسم نقاط التحقق `source` و `target`). تُجمع هذه المعلومات لجميع المدققين المشاركين، مما يمكّن الشبكة من الوصول إلى توافق حول حالة سلسلة الكتل.

تحتوي الشهادة على المكونات التالية:

- `aggregation_bits`: قائمة بتات للمدققين حيث يرتبط الموضع بفهرس المدقق في لجنته؛ وتشير القيمة (0/1) إلى ما إذا كان المدقق قد وقع على `data` (أي ما إذا كان نشطًا ومتفقًا مع مُقترِح الكتلة)
- `data`: تفاصيل متعلقة بالمصادقة، على النحو المحدد أدناه
- `signature`: توقيع BLS يجمع توقيعات المدققين الأفراد

المهمة الأولى للمدقق الذي يجري المصادقة هي بناء `data`. تحتوي `data` على المعلومات التالية:

- `slot`: رقم الخانة التي تشير إليها المصادقة
- `index`: رقم يحدد اللجنة التي ينتمي إليها المدقق في خانة معينة
- `beacon_block_root`: تجزئة الجذر للكتلة التي يراها المدقق في رأس السلسلة (نتيجة تطبيق خوارزمية اختيار الانقسام)
- `source`: جزء من تصويت النهائية الذي يشير إلى ما يراه المدققون على أنه أحدث كتلة مبررة
- `target`: جزء من تصويت النهائية الذي يشير إلى ما يراه المدققون على أنه أول كتلة في الحقبة الحالية

بمجرد بناء `data`، يمكن للمدقق قلب البت في `aggregation_bits` المقابل لفهرس المدقق الخاص به من 0 إلى 1 ليُظهر أنه شارك.

أخيرًا، يقوم المدقق بتوقيع الشهادة ويبثها إلى الشبكة.

### المصادقة المجمَّعة {#aggregated-attestation}

هناك عبء كبير مرتبط بنقل هذه البيانات عبر الشبكة لكل مدقق. لذلك، يتم تجميع الشهادات من المدققين الفرديين ضمن الشبكات الفرعية قبل أن يتم بثها بشكل أوسع. يتضمن ذلك تجميع التوقيعات معًا حتى تتضمن المصادقة التي يتم بثها بيانات الإجماع `data` وتوقيعًا واحدًا يتشكل من خلال دمج توقيعات جميع المدققين الذين يوافقون على `data` تلك. يمكن التحقق من ذلك باستخدام `aggregation_bits` لأنها توفر فهرس كل مدقق في لجنته (الذي يتم توفير مُعرِّفه في `data`) والذي يمكن استخدامه للاستعلام عن التوقيعات الفردية.

في كل حقبة، يتم اختيار 16 مدققًا في كل شبكة فرعية ليكونوا المُجمِّعين (`aggregators`). يجمع المُجمِّعون كل المصادقات التي يسمعون عنها عبر شبكة النميمة (gossip network) التي لها `data` مكافئة لبياناتهم. يتم تسجيل مُرسِل كل مصادقة مطابقة في `aggregation_bits`. ثم يقوم المجمعون ببث الشهادة المجمعة إلى الشبكة الأوسع.

عندما يتم اختيار المدقق ليكون مقترحًا للكتلة، تعبئة الشهادات المجمعة من الشبكات الفرعية حتى الفَتْحَة.

### دورة حياة إدراج المصادقة {#attestation-inclusion-lifecycle}

1. التوليد
2. الانتشار
3. تجميع
4. الانتشار
5. التضمين

تم توضيح دورة حياة الشهادة في المخطط أدناه:

![دورة حياة المصادقة](./attestation_schematic.png)

## المكافآت {#rewards}

يتم مكافأة المدققين على تقديم الشهادات. تعتمد مكافأة الشهادة على علامات المشاركة (المصدر، الهدف والرأس)، والمكافأة الأساسية، ومعدل المشاركة.

يمكن أن تكون كل من علامات المشاركة إما صحيحة أو خاطئة، وذلك اعتمادًا على الشهادة المقدمة وتأخير تضمينها.

أفضل النص السينمائي يحدث عندما تكون جميع العلامات الثلاث صحيحة، وفي هذه الحالة سيحصل المدقق على (لكل علامة صحيحة):

`reward += base reward * flag weight * flag attesting rate / 64`

يتم قياس معدل الشهادة للعلامة باستخدام مجموع الرصيد الفعّال لجميع المدققين الشاهدين على العلامة المعينة مقارنةً بإجمالي الرصيد الفعّال نشيطٌ.

### المكافأة الأساسية {#base-reward}

يتم حساب المكافأة الأساسية وفقًا لعدد المدققين الشاهدين وأرصدتهم الفعّالة من الإيثيريوم المستثمرة:

`base reward = validator effective balance x 2^6 / SQRT(Effective balance of all active validators)`

#### تأخير الإدراج {#inclusion-delay}

في الوقت الذي صوت فيه المدققون على رأس السلسلة (`block n`)، لم تكن `block n+1` قد اقتُرحت بعد. لذلك، يتم إدراج المصادقات بشكل طبيعي **بعد كتلة واحدة**، لذا فإن جميع المصادقات التي صوتت على كون `block n` هو رأس السلسلة قد تم إدراجها في `block n+1`، و**تأخير الإدراج** هو 1. إذا تضاعف تأخير التضمين إلى فتحتين، فإن مكافأة الشهادة تنخفض إلى النصف، لأن حساب مكافأة الشهادة يتضمن ظرب المكافأة الأساسية في المعكوس لتأخير التضمين.

### سيناريوهات المصادقة {#attestation-scenarios}

#### مدقق التصويت المفقود {#missing-voting-validator}

يتمتع المدققون بحد أقصى قدره حقبة 1 لتقديم شهادتهم. إذا تم فقدان الشهادة في الحقبة 0، يمكنهم تقديمها مع تأخير التضمين في الحقبة 1.

#### المُجمِّع المفقود {#missing-aggregator}

يوجد 16 مجمعًا في كل حقبة بشكل إجمالي. بالإضافة إلى ذلك، يشترك المدققون العشوائيون في **شبكتين فرعيتين لمدة 256 حقبة** ويعملون كنسخة احتياطية في حال كان المُجمِّعون مفقودين.

#### مُقترِح الكتلة المفقود {#missing-block-proposer}

لاحظ أنه في بعض الحالات، قد يصبح المجمع المحظوظ أيضًا مقترحًا للكتلة. إذا لم يتم تضمين الشهادة لأن مقترح الكتلة قد اختفى، فإن مقترح الكتلة التالي سيأخذ الشهادة المجمعة ويشملها في الكتلة التالية. ومع ذلك، سيزداد **تأخير الإدراج** بمقدار واحد.

## قراءة إضافية{#further-reading}

- [المصادقات في مواصفات الإجماع المشروحة لفيتاليك](https://github.com/ethereum/annotated-spec/blob/master/phase0/beacon-chain.md#attestationdata)
- [المصادقات في eth2book.info](https://eth2book.info/capella/part3/containers/dependencies/#attestationdata)

_هل تعرف أحد الموارد المجتمعية التي ساعدتك؟ عدّل هذه الصفحة وأضفه!_
