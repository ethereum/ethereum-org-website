---
title: "كتلة العرض"
description: "شرح كيفية اقتراح الكتل في إثبات الحصة في إيثيريوم."
lang: ar
---

الكتل هي الوحدات الأساسية في سلسلة الكتل. الكتل هي وحدات معلومات منفصلة تُنقل بين العقد، يتم الاتفاق عليها وإضافتها إلى قاعدة بيانات كل عقدة. هذه الصفحة تشرح كيف يتم إنتاجها.

## المتطلبات الأساسية {#prerequisites}

اقتراح الكتلة هو جزء من بروتوكول إثبات الحصة. للمساعدة في فهم هذه الصفحة، نوصيك بالقراءة عن [إثبات الحصة](/developers/docs/consensus-mechanisms/pos/) و[بنية الكتلة](/developers/docs/blocks/).

## من ينتج الكتل؟ {#who-produces-blocks}

حسابات المدققين تقترح كتل. تتم إدارة حسابات المُحققين من قِبَل مشغلي العقد الذين يشغلون برامج المحققين كجزء من عملهم وعملائهم في التوافق، وقد أودعوا ما لا يقل عن 32 ETH في عقد الإيداع. ومع ذلك، فإن كل مدقق مسؤول فقط عن اقتراح كتلة بين الحين والآخر. تقيس إيثريوم الوقت بالفتحات والفترات. "كل فترة زمنية مدتها ثانية، ويتكون العصر من 32 فترة زمنية (6.4 دقيقة)." كل فترة زمنية هي فرصة لإضافة كتلة جديدة على إيثيريوم.

### الاختيار العشوائي {#random-selection}

يتم اختيار محقق واحد بشكل عشوائي زائف لاقتراح كتلة في كل فترة زمنية. لا يوجد شيء اسمه العشوائية الحقيقية في البلوكشين، لأنه إذا كان كل عقدة تولد أرقامًا عشوائية حقيقية، فلن تتمكن من الوصول إلى توافق. بدلاً من ذلك، الهدف هو جعل عملية اختيار المدقق غير قابلة للتنبؤ. يتم تحقيق العشوائية في إيثيريوم باستخدام خوارزمية تُسمى RANDAO، التي تمزج تجزئة من مقترح الكتلة مع بَذْرَة يتم تحديثها مع كل كتلة. يتم استخدام هذه القيمة لتحديد محقق محدد من مجموعة المحققين الإجمالية. يتم تحديد اختيار المدققين قبل فترتين زمنيّتين كطريقة للحماية من أنواع معينة من التلاعب بالبذرة.

على الرغم من أن المدققين يضيفون إلى RANDAO في كل فترة زمنية، إلا أن القيمة العالمية لـ RANDAO يتم تحديثها مرة واحدة فقط في كل "عصر". لحساب مؤشر مقترح الكتلة التالي، يتم مزج قيمة RANDAO مع رَقَم المدّة الزمنية لإعطاء قيمة فريدة في كل فترة زمنية. إن احتمال اختيار مدقق فردي ليس ببساطة `1/N` (حيث `N` = إجمالي عدد المدققين النشطين). بدلاً من ذلك، يتم وزن الاحتمالية بناءً على رصيد الإيثيريوم الفعّال لكل مدقق. أقصى رصيد فعال هو 32 ETH (وهذا يعني أن `الرصيد < 32 ETH` يؤدي إلى وزن أقل من `الرصيد == 32 ETH`، ولكن `الرصيد > 32 ETH` لا يؤدي إلى وزن أعلى من `الرصيد == 32 ETH`).

يتم اختيار مقترح كتلة واحد فقط في كل فترة زمنية. تحت الظروف العادية، يقوم منتج كتلة واحد بإنشاء وإصدار كتلة واحدة في فترته الزمنية المخصصة. أشاء كتلتين لنفس المدّة الزمنية هو مخالفة قابلة للخصم وغالبًا ما يُطلق عليها اسم "التناقض".

## كيف يتم إنشاء الكتلة؟ {#how-is-a-block-created}

من المتوقع أن يقوم مقترح الكتلة ببث كتلة منارة موقعة تبني على رأس السلسلة الأحدث وفقًا لرؤية خوارزمية اختيار الفروع التي يتم تشغيلها محليًا. تطبق خوارزمية اختيار الفروع أي شهادات معلقة من الفترات الزمنية السابقة، ثم تجد الكتلة التي تحتوي على أكبر وزن متراكم من الشهادات في تاريخها. تلك الكتلة هي الوالد للكتلة الجديدة التي يتم إنشاؤها بواسطة المقترح.

يقوم مقترح الكتلة بإنشاء الكتلة عن طريق جمع البيانات من قاعدة بياناته المحلية ورؤيته الخاصة للسلسلة. محتويات الكتلة موضحة في المقتطف أدناه:

```rust
class BeaconBlockBody(Container):
    randao_reveal: BLSSignature
    eth1_data: Eth1Data
    graffiti: Bytes32
    proposer_slashings: List[ProposerSlashing, MAX_PROPOSER_SLASHINGS]
    attester_slashings: List[AttesterSlashing, MAX_ATTESTER_SLASHINGS]
    attestations: List[Attestation, MAX_ATTESTATIONS]
    deposits: List[Deposit, MAX_DEPOSITS]
    voluntary_exits: List[SignedVoluntaryExit, MAX_VOLUNTARY_EXITS]
    sync_aggregate: SyncAggregate
    execution_payload: ExecutionPayload
```

يأخذ حقل `randao_reveal` قيمة عشوائية يمكن التحقق منها ينشئها مقترح الكتلة عن طريق توقيع رقم الحقبة الحالية. يعد `eth1_data` تصويتًا على عرض مقترح الكتلة لعقد الإيداع، بما في ذلك جذر Merkle trie للإيداع والعدد الإجمالي للإيداعات التي تمكن من التحقق من الإيداعات الجديدة. يُعد `graffiti` حقلاً اختيارياً يمكن استخدامه لإضافة رسالة إلى الكتلة. تُعد `proposer_slashings` و`attester_slashings` حقولاً تحتوي على دليل على أن بعض المدققين قد ارتكبوا مخالفات قابلة للخصم وفقاً لرؤية المقترح للسلسلة. تعد `deposits` قائمة بإيداعات المدققين الجديدة التي يكون مقترح الكتلة على علم بها، و`voluntary_exits` هي قائمة بالمدققين الذين يرغبون في الخروج والتي سمع عنها مقترح الكتلة على شبكة القيل والقال في طبقة الإجماع. يمثل `sync_aggregate` متجهاً يوضح أي المدققين تم تعيينهم مسبقًا في لجنة المزامنة (مجموعة فرعية من المدققين الذين يخدمون بيانات العميل الخفيف) وشاركوا في توقيع البيانات.

يمكّن `execution_payload` من تمرير المعلومات حول المعاملات بين عملاء التنفيذ وعملاء الإجماع. يمثل `execution_payload` كتلة من بيانات التنفيذ التي يتم تضمينها داخل كتلة المنارة. تعكس الحقول الموجودة داخل `execution_payload` بنية الكتلة الموضحة في ورقة إيثريوم الصفراء، باستثناء عدم وجود "أومرر" ووجود `prev_randao` بدلاً من `difficulty`. يتمتع عميل التنفيذ بالوصول إلى مجموعة محلية من المعاملات التي سمع عنها عبر شبكة القيل والقال الخاصة به. يتم تنفيذ هذه المعاملات محليًا لتوليد شجرة الحالة المحدثة المعروفة باسم "حالة ما بعد التنفيذ". يتم تضمين المعاملات في `execution_payload` كقائمة تسمى `transactions` ويتم توفير الحالة اللاحقة في حقل `state-root`.

يتم جمع كل هذه البيانات في كتلة منارة ، ثم يتم توقيعها وبثها إلى نظراء مقترح الكتلة، الذين نقلها إلى نظرائهم الآخرين، وهكذا.

اقرأ المزيد عن [بنية الكتل](/developers/docs/blocks).

## ماذا يحدث للكتلة؟ ماذا يحدث للكتل {#what-happens-to-blocks}

يتم إضافة الكتلة إلى قاعدة بيانات مقترح الكتلة المحلية وبثها إلى الأقران عبر شبكة القيل والقال في طبقة الإجماع. عندما يتلقى المدقق الكتلة، التحقق من البيانات داخلها، بما في ذلك التأكد من أن الكتلة تحتوي على الوالد الصحيح، وأنها تتوافق مع المدّة. يتم فك تجميع `execution_payload`، ويعيد عميل التنفيذ الخاص بالمدقق تنفيذ المعاملات الموجودة في القائمة للتحقق من تغيير الحالة المقترح. افتراضًا أن الكتلة تمر بكل هذه الفحوص، يقوم كل مدقق بإضافة الكتلة إلى سلسلته الكنسية الخاصة. ثم تبدأ العملية مرة أخرى في المدّة الزمنية التالية.

## مكافآت الكتلة {#block-rewards}

يتلقى مقترح الكتلة الدفع مقابل عمله. هناك `base_reward` يتم حسابه كدالة لعدد المدققين النشطين وأرصدتهم الفعالة. يتلقى مقترح الكتلة بعد ذلك جزءًا من `base_reward` مقابل كل مصادقة صالحة مضمنة في الكتلة؛ وكلما زاد عدد المدققين الذين يصادقون على الكتلة، زادت مكافأة مقترح الكتلة. هناك أيضًا مكافأة للإبلاغ عن المدققين الذين يجب أن يتم خصمهم، وتساوي `1/512 * الرصيد الفعال` لكل مدقق تم خصمه.

[المزيد عن المكافآت والعقوبات](/developers/docs/consensus-mechanisms/pos/rewards-and-penalties)

## قراءة إضافية{#further-reading}

- [مقدمة عن الكتل](/developers/docs/blocks/)
- مقدمة لإثبات الحصة
- [مواصفات إجماع إيثريوم](https://github.com/ethereum/consensus-specs)
- [مقدمة إلى Gasper](/developers/docs/consensus-mechanisms/pos/gasper/)
- [ترقية إيثريوم](https://eth2book.info/)
