---
title: مكافآت وعقوبات إثبات الحصة
description: تعرف على الحوافز داخل البروتوكول في إثبات الحصة في Ethereum.
lang: ar
---

يتم تأمين الإيثريوم باستخدام العملة المشفرة الأصلية، الأثير (ETH). يقوم مشغلو العقد الذين يرغبون في المشاركة في التحقق من صحة الكتل وتحديد رأس السلسلة بإيداع الإيثر في [عقد الإيداع](/staking/deposit-contract/) على Ethereum. يتم بعد ذلك دفع أموال لهم بالأثير لتشغيل برنامج التحقق الذي يتحقق من صحة الكتل الجديدة التي تم تلقيها عبر شبكة الند للند وتطبيق خوارزمية اختيار الشوكة لتحديد رأس السلسلة.

هناك دوران أساسيان للمحقق: 1) التحقق من الكتل الجديدة و"الإثبات" لها إذا كانت صالحة، 2) اقتراح كتل جديدة عند اختيارها عشوائيًا من إجمالي مجموعة المحققين. إذا فشل المحقق في القيام بأي من هذه المهام عند مطالبته بذلك، فإنه يفقد دفعة الأثير. كما يتم تكليف المحققين في بعض الأحيان بتجميع التوقيعات والمشاركة في لجان المزامنة.

هناك أيضًا بعض الإجراءات التي من الصعب جدًا القيام بها عن طريق الخطأ وتنذر ببعض النوايا الخبيثة، مثل اقتراح كتل متعددة لنفس الفتحة أو إثبات وجود كتل متعددة لنفس الفتحة. هذه هي السلوكيات "القابلة للتقطيع" التي تؤدي إلى حرق بعض كمية الأثير (ما يصل إلى 1 ETH) للمحقق قبل إزالته من الشبكة، الأمر الذي يستغرق 36 يومًا. يتم استنزاف الأثير الخاص بالمحقق المقطوع ببطء عبر فترة الخروج، ولكن في اليوم الثامن عشر، يتلقون "عقوبة ارتباط" تكون أكبر عندما يتم قطع المزيد من المحققين في نفس الوقت تقريبًا. وبناءً على ذلك، فإن هيكل الحوافز في آلية الإجماع يدفع ثمن النزاهة ويعاقب الجهات السيئة.

يتم تطبيق جميع المكافآت والعقوبات مرة واحدة في كل عصر.

اقرأ المزيد من التفاصيل...

## المكافآت والعقوبات {#rewards}

### المكافآت {#rewards}

يتلقى المحققون مكافآت عندما يقومون بالتصويت بما يتوافق مع غالبية المحققين الآخرين، وعندما يقترحون الكتل، وعندما يشاركون في لجان المزامنة. يتم حساب قيمة المكافآت في كل حقبة من `base_reward`. هذه هي الوحدة الأساسية التي يتم حساب المكافآت الأخرى منها. يمثل `base_reward` متوسط المكافأة التي يتلقاها المدقق في ظل الظروف المثلى لكل حقبة. يتم حساب ذلك من الرصيد الفعال للمحقق والعدد الإجمالي للمحققين النشطين على النحو التالي:

```
base_reward = effective_balance * (base_reward_factor / (base_rewards_per_epoch * sqrt(sum(active_balance))))
```

حيث `base_reward_factor` يساوي 64، و`base_rewards_per_epoch` يساوي 4، و`sum(active balance)` هو إجمالي الإيثر المكدّس عبر جميع المدققين النشطين.

وهذا يعني أن المكافأة الأساسية تتناسب طرديًا مع الرصيد الفعال للمحقق وتتناسب عكسيًا مع عدد المحققين على الشبكة. كلما زاد عدد المدققين، زاد الإصدار الإجمالي (مثل `sqrt(N)`)، ولكن قلّ `base_reward` لكل مدقق (مثل `1/sqrt(N)`). تؤثر هذه العوامل على معدل النسبة السنوية المئوية لعقدة الرهان. اقرأ الأساس المنطقي لهذا في [ملاحظات فيتاليك](https://notes.ethereum.org/@vbuterin/rkhCgQteN?type=view#Base-rewards).

يتم بعد ذلك حساب المكافأة الإجمالية كمجموع خمس مكونات، ولكل منها وزن يحدد مقدار ما يضيفه كل مكون إلى المكافأة الإجمالية. المكونات هي:

```
1. تصويت المصدر: قام المدقق بتصويت في الوقت المناسب لنقطة التحقق المصدر الصحيحة
2. تصويت الهدف: قام المدقق بتصويت في الوقت المناسب لنقطة التحقق الهدف الصحيحة
3. تصويت الرأس: قام المدقق بتصويت في الوقت المناسب لكتلة الرأس الصحيحة
4. مكافأة لجنة المزامنة: شارك المدقق في لجنة المزامنة
5. مكافأة المُقترِح: اقترح المدقق كتلة في الخانة الصحيحة
```

الأوزان لكل مكون هي كما يلي:

```
TIMELY_SOURCE_WEIGHT	uint64(14)
TIMELY_TARGET_WEIGHT	uint64(26)
TIMELY_HEAD_WEIGHT	uint64(14)
SYNC_REWARD_WEIGHT	uint64(2)
PROPOSER_WEIGHT	uint64(8)
```

مجموع هذه الأوزان يساوي 64. يتم حساب المكافأة على أنها مجموع الأوزان المطبقة مقسومًا على 64. المدقق الذي أجرى تصويتات المصدر والهدف والرأس في الوقت المناسب، واقترح كتلة وشارك في لجنة مزامنة يمكنه أن يتلقى `64/64 * base_reward == base_reward`. ومع ذلك، لا يكون المدقق عادةً مُقترِح كتلة، لذا فإن أقصى مكافأة له هي `64-8 /64 * base_reward == 7/8 * base_reward`. يمكن للمدققين الذين ليسوا مُقترِحي كتل ولا في لجنة مزامنة تلقي `64-8-2 / 64 * base_reward == 6.75/8 * base_reward`.

تمت إضافة مكافأة إضافية لتشجيع الإدلاء بشهادات سريعة. هذه هي `inclusion_delay_reward`. هذه لها قيمة تساوي `base_reward` مضروبة في `1/delay` حيث `delay` هو عدد الخانات التي تفصل بين اقتراح الكتلة والمصادقة. على سبيل المثال، إذا تم تقديم المصادقة في غضون خانة واحدة من اقتراح الكتلة، فإن المُصادِق يتلقى `base_reward * 1/1 == base_reward`. إذا وصلت المصادقة في الخانة التالية، يتلقى المُصادِق `base_reward * 1/2` وهكذا.

يتلقى مُقترِحو الكتل `8 / 64 * base_reward` مقابل **كل مصادقة صالحة** مدرجة في الكتلة، لذا فإن القيمة الفعلية للمكافأة تتناسب مع عدد المدققين المُصادِقين. يمكن لمقترحي الكتلة أيضًا زيادة مكافأتهم من خلال تضمين دليل على سوء السلوك من قبل المحققين الآخرين في الكتلة المقترحة الخاصة بهم. تعتبر هذه المكافآت بمثابة "الجزر" التي تشجع على صدق المحقق. ستتم مكافأة مُقترِح الكتلة الذي يتضمن الشطب بـ `slashed_validators_effective_balance / 512`.

### العقوبات {#penalties}

حتى الآن قمنا بدراسة المحققين الذين يتصرفون بشكل جيد تمامًا، ولكن ماذا عن المحققين الذين لا يقومون بالتصويت في الوقت المناسب على الرأس والمصدر والهدف أو يفعلون ذلك ببطء؟

إن العقوبات المترتبة على عدم تقديم الأصوات المستهدفة والمصدرية تساوي المكافآت التي كان من الممكن أن يتلقاها المصدق لو قدمها. وهذا يعني أنه بدلاً من إضافة المكافأة إلى رصيدهم، سيتم إزالة قيمة مساوية من رصيدهم. لا توجد عقوبة على تفويت تصويت الرأس (أي أن تصويتات الرأس تتم مكافأتها فقط، ولا يعاقب عليها أبداً). لا توجد عقوبة مرتبطة بـ `inclusion_delay` - المكافأة ببساطة لن تضاف إلى رصيد المدقق. ولا توجد أيضًا عقوبة في حالة الفشل في اقتراح الحظر.

اقرأ المزيد عن المكافآت والعقوبات في [مواصفات الإجماع](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/beacon-chain.md). تم تعديل المكافآت والعقوبات في ترقية Bellatrix - شاهد داني رايان وفيتاليك يناقشان هذا في [فيديو Peep an EIP](https://www.youtube.com/watch?v=iaAEGs1DMgQ).

## الشطب {#slashing}

التقطيع هو إجراء أكثر شدة يؤدي إلى الإزالة القسرية للمحقق من الشبكة والخسارة المرتبطة بالأثير الذي راهن عليه. هناك ثلاث طرق يمكن من خلالها تشويه المحقق، وكلها تؤدي إلى اقتراح أو إثبات غير صادق للكتل:

- هناك ثلاث طرق يمكن من خلالها تشويه المحقق، وكلها تؤدي إلى اقتراح أو إثبات غير صادق للكتل
- هذا يعني أنه يتم حرق 0.0078125 على الفور لمحقق 32 ETH (مقياس خطيًا مع الرصيد النشط)، ثم تبدأ فترة إزالة مدتها 36 يومًا.
- من خلال إثبات وجود كتلة "تحيط" بكتلة أخرى تغيير التاريخ فعليًا

من خلال "التصويت المزدوج" من خلال التصديق على مرشحين اثنين لنفس الكتلة. هذا يعني أنه يتم حرق 0.0078125 على الفور لمحقق 32 ETH (مقياس خطيًا مع الرصيد النشط)، ثم تبدأ فترة إزالة مدتها 36 يومًا. أثناء فترة الإزالة هذه، يتلاشى نصيب المحقق تدريجيًا. في نقطة المنتصف (اليوم 18) يتم تطبيق عقوبة إضافية يتناسب حجمها مع إجمالي الأثير الذي راهن به جميع المحققين المقطوعين في الأيام 36 السابقة لحدث القطع. الحد الأقصى للتخفيض هو الرصيد الفعال الكامل لجميع المحققين الذين تم تخفيضهم (أي إذا كان هناك الكثير من المحققين الذين يتم تخفيضهم فقد يخسرون حصتهم بالكامل). الحد الأقصى للشطب هو الرصيد الفعال الكامل لجميع المدققين المشطوبين (أي، إذا تم شطب الكثير من المدققين، فقد يفقدون حصتهم بالكامل). تُسمى عقوبة نقطة المنتصف هذه التي تتناسب مع عدد المحققين المقطوعين "عقوبة الارتباط". تُسمى عقوبة نقطة المنتصف هذه التي تتناسب مع عدد المحققين المقطوعين "عقوبة الارتباط".

## تسرب الخمول {#inactivity-leak}

الهدف النهائي من تسرب الخمول هو خلق الظروف المطلوبة للسلسلة لاستعادة نهائيتها. كما تم شرحه أعلاه، تتطلب النهائية أغلبية 2/3 من إجمالي الأثير المرصود للاتفاق على نقاط تفتيش المصدر والهدف. كما تم شرحه أعلاه، تتطلب النهائية أغلبية 2/3 من إجمالي الأثير المرصود للاتفاق على نقاط تفتيش المصدر والهدف. إذا انقطع الاتصال بين المحققين الذين يمثلون أكثر من ثلث إجمالي المحققين أو فشلوا في إرسال الشهادات الصحيحة، فلن يكون من الممكن لأغلبية 2/3 إكمال نقاط التفتيش. يؤدي تسرب عدم النشاط إلى استنزاف الحصة التي تنتمي إلى المحققين غير النشطين تدريجيًا حتى يسيطروا على أقل من ثلث الحصة الإجمالية، مما يسمح للمحققين النشطين المتبقين بإكمال السلسلة. بغض النظر عن حجم مجموعة المحققين غير النشطين، فإن المحققين النشطين المتبقين سوف يسيطرون في النهاية على >2/3 من الحصة. تم مواجهة سيناريو تسرب الخمول على شبكة اختبار Medalla عندما تمكن أقل من 66% من المحققين النشطين من التوصل إلى إجماع بشأن الرأس الحالي لسلسلة الكتل. تم مواجهة سيناريو تسرب الخمول على شبكة اختبار Medalla عندما تمكن أقل من 66% من المحققين النشطين من التوصل إلى إجماع بشأن الرأس الحالي لسلسلة الكتل. تم تفعيل تسرب الخمول وتم استعادة النهائية في النهاية!

إن تصميم المكافأة والعقوبة والتخفيض لآلية الإجماع يشجع المحققين الأفراد على التصرف بشكل صحيح. ومع ذلك، من خلال هذه الاختيارات التصميمية ينشأ نظام يشجع بقوة التوزيع المتساوي للمحققين عبر عملاء متعددين، وينبغي أن يعمل بقوة على تثبيط هيمنة العميل الفردي.

## قراءة إضافية{#further-reading}

- [ترقية Ethereum: طبقة الحوافز](https://eth2book.info/altair/part2/incentives)
- [الحوافز في بروتوكول Casper الهجين الخاص بـ Ethereum](https://arxiv.org/pdf/1903.04205.pdf)
- [مواصفات فيتاليك المشروحة](https://github.com/ethereum/annotated-spec/blob/master/phase0/beacon-chain.md#rewards-and-penalties-1)
- [نصائح لمنع الشطب في Eth2](https://medium.com/prysmatic-labs/eth2-slashing-prevention-tips-f6faa5025f50)
- [تحليل عقوبات الشطب بموجب EIP-7251](https://ethresear.ch/t/slashing-penalty-analysis-eip-7251/16509)

_المصادر_

- _[https://benjaminion.xyz/eth2-annotated-spec/phase0/beacon-chain/](https://benjaminion.xyz/eth2-annotated-spec/phase0/beacon-chain/)_
