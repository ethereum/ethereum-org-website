---
title: "قائمة التحقق لدمج الرموز المميزة"
description: "قائمة تحقق بالأشياء التي يجب مراعاتها عند التفاعل مع الرموز المميزة."
author: "طريق البتات"
lang: ar
tags: [ "الصلابة", "العقود الذكيه ", "الأمن", "tokens" ]
skill: intermediate
published: 2020-08-13
source: "عقود البناء الآمنة"
sourceUrl: https://github.com/crytic/building-secure-contracts/blob/master/development-guidelines/token_integration.md
---

اتبع قائمة التحقق هذه عند التفاعل مع الرموز المميزة العشوائية. تأكد من فهم المخاطر المرتبطة بكل عنصر، وتبرير أي استثناءات لهذه القواعد.

للراحة، يمكن تشغيل جميع أدوات [Slither](https://github.com/crytic/slither#tools) المساعدة مباشرة على عنوان رمزي، مثل:

[دليل استخدام Slither التعليمي](/developers/tutorials/how-to-use-slither-to-find-smart-contract-bugs/)

```bash
slither-check-erc 0xdac17f958d2ee523a2206206994597c13d831ec7 TetherToken
```

لاتباع قائمة التحقق هذه، ستحتاج إلى الحصول على هذا الإخراج من Slither للرمز المميز:

```bash
- slither-check-erc [target] [contractName] [اختياري: --erc ERC_NUMBER]
- slither [target] --print human-summary
- slither [target] --print contract-summary
- slither-prop . --contract ContractName # يتطلب الإعداد، واستخدام Echidna و Manticore
```

## اعتبارات عامة {#general-considerations}

- **يخضع العقد لمراجعة أمنية.** تجنب التفاعل مع العقود التي تفتقر إلى مراجعة أمنية. تحقق من طول التقييم (المعروف أيضًا باسم "مستوى الجهد")، وسمعة شركة الأمن، وعدد وخطورة النتائج التي تم التوصل إليها.
- **لقد تواصلت مع المطورين.** قد تحتاج إلى تنبيه فريقهم في حالة وقوع حادث. ابحث عن جهات الاتصال المناسبة على [blockchain-security-contacts](https://github.com/crytic/blockchain-security-contacts).
- **لديهم قائمة بريدية أمنية للإعلانات الهامة.** يجب على فريقهم إبلاغ المستخدمين (مثلك!) عند العثور على مشكلات حرجة أو عند حدوث ترقيات.

## التوافق مع ERC {#erc-conformity}

يتضمن Slither أداة مساعدة، [slither-check-erc](https://github.com/crytic/slither/wiki/ERC-Conformance)، التي تراجع توافق الرمز المميز مع العديد من معايير ERC ذات الصلة. استخدم slither-check-erc للمراجعة ما يلي:

- **دالتا Transfer و transferFrom تُرجعان قيمة منطقية (boolean).** العديد من الرموز المميزة لا تُرجع قيمة منطقية في هاتين الدالتين. ونتيجة لذلك، قد تفشل استدعاءاتهما في العقد.
- **دوال name و decimals و symbol موجودة إذا تم استخدامها.** هذه الدوال اختيارية في معيار ERC20 وقد لا تكون موجودة.
- **دالة Decimals تُرجع قيمة uint8.** العديد من الرموز المميزة تُرجع قيمة uint256 بشكل غير صحيح. إذا كان الأمر كذلك، فتأكد من أن القيمة المُرجَعة أقل من 255.
- **يخفف الرمز المميز من [حالة التسابق المعروفة في ERC20](https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729).** يحتوي معيار ERC20 على حالة تسابق معروفة يجب التخفيف منها لمنع المهاجمين من سرقة الرموز المميزة.
- **الرمز المميز ليس رمزًا مميزًا من نوع ERC777 وليس له استدعاء دالة خارجي في transfer و transferFrom.** يمكن أن تؤدي الاستدعاءات الخارجية في دوال التحويل إلى عمليات إعادة الدخول.

يتضمن Slither أداة مساعدة، [slither-prop](https://github.com/crytic/slither/wiki/Property-generation)، التي تنشئ اختبارات وحدة وخصائص أمان يمكنها اكتشاف العديد من عيوب ERC الشائعة. استخدم slither-prop لمراجعة ما يلي:

- **يجتاز العقد جميع اختبارات الوحدة وخصائص الأمان من slither-prop.** قم بتشغيل اختبارات الوحدة التي تم إنشاؤها، ثم تحقق من الخصائص باستخدام [Echidna](https://github.com/crytic/echidna) و [Manticore](https://manticore.readthedocs.io/en/latest/verifier.html).

أخيرًا، هناك خصائص معينة يصعب تحديدها تلقائيًا. راجع هذه الشروط يدويًا:

- **يجب ألا تفرض دالتا Transfer و transferFrom رسومًا.** يمكن أن تؤدي الرموز المميزة الانكماشية إلى سلوك غير متوقع.
- **تؤخذ الفائدة المحتملة المكتسبة من الرمز المميز في الحسبان.** توزع بعض الرموز المميزة الفائدة على حاملي الرموز المميزة. قد تكون هذه الفائدة محتجزة في العقد إذا لم تؤخذ في الحسبان.

## تكوين العقد {#contract-composition}

- **يتجنب العقد التعقيد غير الضروري.** يجب أن يكون الرمز المميز عقدًا بسيطًا؛ فالرمز المميز الذي يحتوي على نص برمجي معقد يتطلب مستوى أعلى من المراجعة. استخدم [طابعة الملخص البشري (human-summary printer)](https://github.com/crytic/slither/wiki/Printer-documentation#human-summary) من Slither لتحديد النص البرمجي المعقد.
- **يستخدم العقد SafeMath.** تتطلب العقود التي لا تستخدم SafeMath مستوى أعلى من المراجعة. افحص العقد يدويًا للتحقق من استخدام SafeMath.
- **يحتوي العقد على عدد قليل فقط من الدوال غير المتعلقة بالرموز المميزة.** تزيد الدوال غير المتعلقة بالرموز المميزة من احتمالية وجود مشكلة في العقد. استخدم [طابعة ملخص العقد (contract-summary printer)](https://github.com/crytic/slither/wiki/Printer-documentation#contract-summary) من Slither لمراجعة النص البرمجي المستخدم في العقد بشكل عام.
- **للرمز المميز عنوان واحد فقط.** يمكن للرموز المميزة ذات نقاط الدخول المتعددة لتحديثات الرصيد أن تعطل مسك الدفاتر الداخلي بناءً على العنوان (على سبيل المثال، قد لا يعكس `balances[token_address][msg.sender]` الرصيد الفعلي).

## امتيازات المالك {#owner-privileges}

- **الرمز المميز غير قابل للترقية.** قد تغير العقود القابلة للترقية قواعدها بمرور الوقت. استخدم [طابعة الملخص البشري (human-summary printer)](https://github.com/crytic/slither/wiki/Printer-documentation#contract-summary) من Slither لتحديد ما إذا كان العقد قابلاً للترقية.
- **للمالك إمكانيات سك محدودة.** يمكن للمالكين الخبثاء أو المخترَقين إساءة استخدام إمكانيات السك. استخدم [طابعة الملخص البشري (human-summary printer)](https://github.com/crytic/slither/wiki/Printer-documentation#contract-summary) من Slither لمراجعة إمكانيات السك، وفكر في مراجعة النص البرمجي يدويًا.
- **الرمز المميز غير قابل للإيقاف المؤقت.** يمكن للمالكين الخبثاء أو المخترَقين احتجاز العقود التي تعتمد على الرموز المميزة القابلة للإيقاف المؤقت. حدد النص البرمجي القابل للإيقاف المؤقت يدويًا.
- **لا يمكن للمالك إدراج العقد في القائمة السوداء.** يمكن للمالكين الخبثاء أو المخترَقين احتجاز العقود التي تعتمد على الرموز المميزة التي تحتوي على قائمة سوداء. حدد ميزات القائمة السوداء يدويًا.
- **الفريق الذي يقف وراء الرمز المميز معروف ويمكن تحميله المسؤولية عن أي إساءة استخدام.** يجب أن تتطلب العقود التي لديها فرق تطوير مجهولة، أو التي تقع في ملاذات قانونية، مستوى أعلى من المراجعة.

## ندرة الرمز المميز {#token-scarcity}

تتطلب مراجعة مشكلات ندرة الرموز المميزة مراجعة يدوية. تحقق من هذه الشروط:

- **لا يمتلك أي مستخدم معظم المعروض.** إذا امتلك عدد قليل من المستخدمين معظم الرموز المميزة، فيمكنهم التأثير على العمليات بناءً على إعادة توزيع الرمز المميز.
- **إجمالي المعروض كافٍ.** يمكن التلاعب بالرموز المميزة ذات المعروض الإجمالي المنخفض بسهولة.
- **توجد الرموز المميزة في أكثر من بضع منصات تداول.** إذا كانت جميع الرموز المميزة في منصة تداول واحدة، فإن اختراق منصة التداول يمكن أن يعرض العقد الذي يعتمد على الرمز المميز للخطر.
- **يفهم المستخدمون المخاطر المرتبطة بالأموال الكبيرة أو القروض السريعة.** يجب أن تأخذ العقود التي تعتمد على رصيد الرمز المميز في الاعتبار بعناية المهاجمين الذين لديهم أموال كبيرة أو الهجمات من خلال القروض السريعة.
- **الرمز المميز لا يسمح بالسك السريع (flash minting)**. يمكن أن يؤدي السك السريع (flash minting) إلى تقلبات كبيرة في الرصيد وإجمالي المعروض، مما يستلزم إجراء فحوصات تجاوز صارمة وشاملة في تشغيل الرمز المميز.
