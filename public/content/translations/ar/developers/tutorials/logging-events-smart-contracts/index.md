---
title: تسجيل البيانات من العقود الذكية مع الأحداث
description: مقدمة لأحداث العقد الذكي وكيف يمكنك استخدامها لتسجيل البيانات
author: "jdourlens"
tags: [ "العقود الذكيه ", "remix", "الصلابة", "أحداث" ]
skill: intermediate
lang: ar
published: 2020-04-03
source: EthereumDev
sourceUrl: https://ethereumdev.io/logging-data-with-events/
address: "0x19dE91Af973F404EDF5B4c093983a7c6E3EC8ccE"
---

في سوليديتي، [الأحداث](/developers/docs/smart-contracts/anatomy/#events-and-logs) هي إشارات مُرسلة يمكن للعقود الذكية إطلاقها. يمكن للتطبيقات اللامركزية، أو أي شيء متصل بواجهة برمجة تطبيقات Ethereum JSON-RPC، الاستماع إلى هذه الأحداث والتصرف وفقًا لذلك. يمكن أيضًا فهرسة الحدث بحيث يمكن البحث في سجل الأحداث لاحقًا.

## الأحداث{#events}

إن أكثر الأحداث شيوعًا على بلوكتشين إيثريوم في وقت كتابة هذا المقال هو حدث التحويل (Transfer) الذي يصدر عن رموز ERC20 عندما يقوم شخص ما بنقل الرموز.

```solidity
event Transfer(address indexed from, address indexed to, uint256 value);
```

يتم الإعلان عن توقيع الحدث داخل رمز العقد ويمكن إصداره باستخدام الكلمة الأساسية emit. على سبيل المثال، تسجل سجلات حدث التحويل من أرسل التحويل (_from_)، وإلى من (_to_)، وكمية الرموز التي تم تحويلها (_value_).

إذا عدنا إلى عقد العداد الذكي الخاص بنا وقررنا تسجيل كل مرة يتم فيها تغيير القيمة. بما أن هذا العقد ليس مخصصًا للنشر ولكن ليكون بمثابة أساس لبناء عقد آخر عن طريق تمديده: يطلق عليه عقد مجرد. في حالة مثال العداد الخاص بنا، سيبدو الأمر كما يلي:

```solidity
pragma solidity 0.5.17;

contract Counter {

    event ValueChanged(uint oldValue, uint256 newValue);

    // متغير خاص من النوع الصحيح غير المؤشر للاحتفاظ بعدد العدّات
    uint256 private count = 0;

    // وظيفة تزيد العداد الخاص بنا
    function increment() public {
        count += 1;
        emit ValueChanged(count - 1, count);
    }

    // دالة Getter للحصول على قيمة العد
    function getCount() public view returns (uint256) {
        return count;
    }

}
```

لاحظ أن:

- **السطر 5**: نعلن عن حدثنا وما يحتويه، القيمة القديمة والقيمة الجديدة.

- **السطر 13**: عندما نزيد متغير العد لدينا، نصدر الحدث.

إذا قمنا الآن بنشر العقد واستدعاء وظيفة الزيادة، فسنرى أن Remix سيعرضه تلقائيًا إذا قمت بالنقر فوق المعاملة الجديدة داخل مصفوفة تسمى السجلات.

![لقطة شاشة Remix](./remix-screenshot.png)

السجلات مفيدة حقًا لتصحيح أخطاء عقودك الذكية ولكنها مهمة أيضًا إذا كنت تبني تطبيقات يستخدمها أشخاص مختلفون وتسهل إجراء تحليلات لتتبع وفهم كيفية استخدام عقدك الذكي. يتم عرض السجلات التي تم إنشاؤها بواسطة المعاملات في مستكشفات الكتل الشائعة، ويمكنك أيضًا على سبيل المثال استخدامها لإنشاء نصوص برمجية خارج السلسلة للاستماع إلى أحداث معينة واتخاذ إجراء عند وقوعها.
