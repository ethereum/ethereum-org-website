---
title: انعدام الجنسية وانتهاء الدولة وانتهاء التاريخ
description: شرح انتهاء التاريخ وعدم جنسية الايثيريوم
lang: ar
---

# انعدام الحالة، وانتهاء صلاحية الحالة وانتهاء صلاحية السجل {#statelessness}

تعد القدرة على تشغيل عقد Ethereum على أجهزة متواضعة أمرًا بالغ الأهمية لتحقيق اللامركزية الحقيقية. وذلك لأن تشغيل العقدة يمنح المستخدمين القدرة على التحقق من المعلومات عن طريق إجراء عمليات فحص التشفير بشكل مستقل بدلاً من الثقة في طرف ثالث لتزويدهم بالبيانات. يتيح تشغيل العقدة للمستخدمين إرسال المعاملات مباشرة إلى شبكة نظير إلى نظير Ethereum بدلاً من الاضطرار إلى الثقة في الوسيط. إن اللامركزية غير ممكنة إذا كانت هذه الفوائد متاحة فقط للمستخدمين الذين لديهم أجهزة باهظة الثمن بدلاً من ذلك، يجب أن تكون العقد قادرة على العمل بمتطلبات معالجة وذاكرة متواضعة للغاية بحيث يمكن تشغيلها على الهواتف المحمولة أو أجهزة الكمبيوتر الصغيرة أو الكمبيوتر المنزلي.

اليوم، تعد متطلبات مساحة القرص العالية هي العائق الرئيسي الذي يمنع الوصول الشامل إلى العقد. ويرجع ذلك في المقام الأول إلى الحاجة إلى تخزين أجزاء كبيرة من بيانات حالة الإيثريوم. تحتوي بيانات الحالة هذه على معلومات مهمة مطلوبة لمعالجة الكتل والمعاملات الجديدة بشكل صحيح. في وقت كتابة هذا التقرير، يوصى باستخدام SSD سريع بسعة 2 تيرابايت لتشغيل عقدة Ethereum كاملة. بالنسبة للعقدة التي لا تقوم بقص أي بيانات قديمة، فإن متطلبات التخزين تنمو بحوالي 14 جيجابايت/أسبوع، وعقد الأرشيف التي تخزن جميع البيانات منذ التكوين تقترب من 12 تيرابايت (في وقت كتابة هذا التقرير، في فبراير 2023).

يمكن استخدام محركات الأقراص الثابتة الرخيصة لتخزين البيانات القديمة ولكنها بطيئة جدًا بحيث لا يمكنها مواكبة الكتل الواردة. إن الحفاظ على نماذج التخزين الحالية للعملاء مع جعل البيانات أرخص وأسهل في التخزين ليس سوى حل مؤقت وجزئي للمشكلة لأن نمو حالة إيثريوم "غير محدود"، مما يعني أن متطلبات التخزين لا يمكن إلا أن تتزايد باستمرار، وسيتعين دائمًا إجراء التحسينات التكنولوجية مواكبة النمو المستمر للدولة. وبدلاً من ذلك، يجب على العملاء إيجاد طرق جديدة للتحقق من الكتل والمعاملات التي لا تعتمد على البحث عن البيانات من قواعد البيانات المحلية.

## تقليل مساحة التخزين للعُقد {#reducing-storage-for-nodes}

هناك عدة طرق لتقليل كمية البيانات التي يجب على كل عقدة تخزينها، وكل منها يتطلب تحديث البروتوكول الأساسي لإيثريوم إلى حد مختلف:

- **انتهاء صلاحية السجل**: تمكين العُقَد من تجاهل بيانات الحالة الأقدم من X كتلة، لكنه لا يُغيّر كيفية تعامل عملاء إيثريوم مع بيانات الحالة.
- **انتهاء صلاحية الحالة**: السماح لبيانات الحالة التي لا تُستخدم بشكل متكرر بأن تصبح غير نشطة. يمكن للعملاء تجاهل البيانات غير النشطة حتى يتم إحيائها.
- **انعدام الحالة الضعيف**: يحتاج منتجو الكتل فقط إلى الوصول إلى بيانات الحالة الكاملة، ويمكن للعُقَد الأخرى التحقق من الكتل دون قاعدة بيانات حالة محلية.
- **انعدام الحالة القوي**: لا تحتاج أي عُقَد إلى الوصول إلى بيانات الحالة الكاملة.

## انتهاء صلاحية البيانات {#data-expiry}

### انتهاء صلاحية السجل {#history-expiry}

تشير انتهاء صلاحية السجل إلى قيام العملاء بإزالة البيانات القديمة التي من غير المرجح أن يحتاجوا إليها، بحيث يقومون فقط بتخزين كمية صغيرة من البيانات التاريخية، وإسقاط البيانات القديمة عند وصول بيانات جديدة. هناك سببان وراء حاجة العملاء للبيانات التاريخية: مزامنة طلبات البيانات وتقديمها. في الأصل، كان على العملاء المزامنة من كتلة التكوين، والتحقق من صحة كل كتلة متتالية حتى رأس السلسلة. اليوم، يستخدم العملاء "نقاط تفتيش ذاتية ضعيفة" لشق طريقهم إلى رأس السلسلة نقاط التفتيش هذه هي نقاط بداية موثوقة، مثل وجود كتلة تكوين قريبة من الحاضر بدلاً من بداية الايثيريوم. وهذا يعني أنه يمكن للعملاء إسقاط جميع المعلومات قبل نقطة التفتيش الذاتية الضعيفة الأخيرة دون فقدان القدرة على المزامنة مع رأس السلسلة. يخدم العملاء حاليًا الطلبات (التي تصل عبر JSON-RPC) للبيانات التاريخية عن طريق الحصول عليها من قواعد بياناتهم المحلية. ومع ذلك، مع انتهاء صلاحية السجل، لن يكون هذا ممكنًا إذا تم تقليم البيانات المطلوبة. إن تقديم هذه البيانات التاريخية هو المكان الذي يتطلب بعض الحلول المبتكرة.

أحد الخيارات هو أن يطلب العملاء بيانات تاريخية من أقرانهم باستخدام حل مثل شبكة البوابة. شبكة البوابة عبارة عن شبكة نظير إلى نظير قيد التطوير لخدمة البيانات التاريخية حيث تقوم كل عقدة بتخزين جزء صغير من تاريخ Ethereum بحيث يكون السجل بأكمله موزعًا عبر الشبكة. يتم تقديم الطلبات من خلال البحث عن أقران يقومون بتخزين البيانات ذات الصلة وطلبها منهم. وبدلاً من ذلك، نظرًا لأن التطبيقات بشكل عام هي التي تتطلب الوصول إلى البيانات التاريخية، فيمكن أن تصبح مسؤوليتها تخزينها. قد يكون هناك أيضًا عدد كافٍ من الجهات الفاعلة الإيثارية في مساحة الإيثريوم التي قد تكون على استعداد للاحتفاظ بالأرشيفات التاريخية. يمكن أن يكون DAO الذي يدور لإدارة تخزين البيانات التاريخية، أو من الناحية المثالية سيكون مزيجًا من كل هذه الخيارات. يمكن لهؤلاء المزودين خدمة البيانات بعدة طرق، مثل التورنت أو FTP أو Filecoin أو IPFS.

يعد انتهاء التاريخ مثيرًا للجدل إلى حد ما لأنه حتى الآن ضمنت Ethereum دائمًا ضمنيًا توفر أي بيانات تاريخية. لقد كانت المزامنة الكاملة منذ التكوين ممكنة دائمًا بشكل قياسي، حتى لو كانت تعتمد على إعادة بناء بعض البيانات القديمة من اللقطات. يؤدي انتهاء التاريخ إلى نقل مسؤولية توفير هذا الضمان خارج بروتوكول Ethereum الأساسي. وقد يؤدي هذا إلى مخاطر رقابية جديدة إذا كانت المنظمات المركزية هي التي تتدخل في نهاية المطاف لتوفير البيانات التاريخية.

EIP-4444 ليس جاهزًا للشحن بعد، ولكنه قيد المناقشة النشطة. ومن المثير للاهتمام أن التحديات التي تواجه EIP-4444 ليست تقنية بقدر ما هي في الغالب إدارة المجتمع. ولكي يتم شحن هذا، يجب أن يكون هناك موافقة مجتمعية لا تتضمن الاتفاقية فحسب، بل أيضًا الالتزامات بتخزين البيانات التاريخية وخدمتها من كيانات جديرة بالثقة.

لا تغير هذه الترقية بشكل أساسي كيفية تعامل عقد إيثريوم مع بيانات الحالة، ولكنها تغير فقط كيفية الوصول إلى البيانات التاريخية.

### انتهاء صلاحية الحالة {#state-expiry}

يشير انتهاء الحالة إلى إزالة الحالة من العقد الفردية إذا لم يتم الوصول إليها مؤخرًا. وهناك عدة طرق يمكن تنفيذ ذلك منها:

- **انتهاء الصلاحية بالإيجار**: فرض "إيجار" على الحسابات وانتهاء صلاحيتها عندما يصل إيجارها إلى الصفر
- **انتهاء الصلاحية بالوقت**: جعل الحسابات غير نشطة إذا لم تكن هناك عمليات قراءة/كتابة لذلك الحساب لفترة من الوقت

يمكن أن يكون انتهاء الإيجار عبارة عن إيجار مباشر يتم تحميله على الحسابات لإبقائها في قاعدة بيانات الحالة النشطة. يمكن أن يكون انتهاء الصلاحية حسب الوقت عن طريق العد التنازلي من آخر تفاعل للحساب، أو قد يكون انتهاء دوري لجميع الحسابات. يمكن أن تكون هناك أيضًا آليات تجمع بين عناصر النماذج القائمة على الوقت والإيجار، على سبيل المثال، تظل الحسابات الفردية في الحالة النشطة إذا دفعت بعض الرسوم البسيطة قبل انتهاء الصلاحية المستند إلى الوقت. مع انتهاء صلاحية الحالة، من المهم ملاحظة أن الحالة غير النشطة **لا تُحذف**، بل تُخزن فقط بشكل منفصل عن الحالة النشطة. يمكن إعادة الحالة غير النشطة إلى الحالة النشطة.

من المحتمل أن تكون الطريقة التي يعمل بها هذا هي الحصول على شجرة حالة لفترات زمنية محددة (ربما سنة واحدة تقريبًا). كلما بدأت فترة جديدة، تبدأ أيضًا شجرة الحالة الجديدة تمامًا. يمكن تعديل شجرة الحالة الحالية فقط، بينما تكون جميع الأشجار الأخرى غير قابلة للتغيير. من المتوقع أن تحتفظ عقد الإيثريوم فقط بشجرة الحالة الحالية والشجرة التالية الأحدث. يتطلب هذا طريقة لختم العنوان بالفترة التي يوجد فيها. هناك [عدة طرق ممكنة](https://ethereum-magicians.org/t/types-of-resurrection-metadata-in-state-expiry/6607) للقيام بذلك، لكن الخيار الرائد يتطلب [إطالة العناوين](https://ethereum-magicians.org/t/increasing-address-size-from-20-to-32-bytes/5485) لاستيعاب المعلومات الإضافية مع فائدة إضافية تتمثل في أن العناوين الأطول أكثر أمانًا بكثير. يُطلق على عنصر خارطة الطريق الذي يقوم بذلك اسم [توسيع مساحة العنوان](https://ethereum-magicians.org/t/increasing-address-size-from-20-to-32-bytes/5485).

على غرار انتهاء التاريخ، بموجب انتهاء صلاحية الدولة، تتم إزالة مسؤولية تخزين بيانات الحالة القديمة من المستخدمين الفرديين ودفعها إلى كيانات أخرى مثل مقدمي الخدمات المركزيين أو أعضاء المجتمع الإيثاري أو الحلول اللامركزية المستقبلية مثل شبكة البوابة.

انتهاء الصلاحية لا يزال في مرحلة البحث وليس جاهزًا للشحن بعد. قد يحدث انتهاء صلاحية الحالة في وقت لاحق من انتهاء صلاحية السجل للعملاء عديمي الجنسية لأن هذه الترقيات تجعل أحجام الحالة الكبيرة قابلة للإدارة بسهولة بالنسبة لغالبية المدققين.

## انعدام الحالة {#statelessness}

إن انعدام الجنسية هي تسمية خاطئة إلى حد ما لأنها لا تعني إلغاء مفهوم "الحالة"، ولكنها تتضمن تغييرات في كيفية تعامل عقد إيثريوم مع بيانات الحالة. إن انعدام الجنسية في حد ذاته يأتي في نكهتين: انعدام الجنسية الضعيف وانعدام الجنسية القوي. يمكّن انعدام الجنسية الضعيف معظم العقد من أن تصبح عديمة الجنسية من خلال إلقاء مسؤولية تخزين الحالة على عدد قليل من العقد. يزيل انعدام الجنسية القوي تمامًا الحاجة إلى أي عقدة لتخزين بيانات الحالة الكاملة. يقدم كل من انعدام الجنسية الضعيف والقوي الفوائد التالية للمدققين العاديين:

- مزامنة فورية تقريبًا
- القدرة على التحقق من صحة الكتل خارج الترتيب
- عُقَد قادرة على العمل بمتطلبات أجهزة منخفضة جدًا (على سبيل المثال، على الهواتف)
- يمكن تشغيل العقد فوق محركات الأقراص الثابتة الرخيصة نظرًا لعدم الحاجة إلى قراءة/كتابة القرص
- متوافق مع الترقيات المستقبلية لتشفير Ethereum

### انعدام الحالة الضعيف {#weak-statelessness}

يتضمن انعدام الجنسية الضعيف تغييرات في الطريقة التي تتحقق بها عقد إيثريوم من تغييرات الحالة، لكنه لا يلغي تمامًا الحاجة إلى تخزين الحالة في جميع العقد على الشبكة. وبدلاً من ذلك، يضع انعدام الجنسية الضعيف مسؤولية تخزين الحالة على عاتق مقدمي الكتل، بينما تتحقق جميع العقد الأخرى على الشبكة من الكتل دون تخزين بيانات الحالة الكاملة.

**في حالات انعدام الجنسية الضعيفة، يتطلب اقتراح الكتل الوصول إلى بيانات الحالة الكاملة ولكن التحقق من الكتل لا يتطلب أي بيانات عن الحالة**

ولكي يحدث هذا، يجب أن تكون [أشجار Verkle](/roadmap/verkle-trees/) قد نُفذت بالفعل في عملاء إيثريوم. تعد أشجار Verkle عبارة عن بنية بيانات بديلة لتخزين بيانات حالة Ethereum التي تسمح بتمرير "شهود" صغير الحجم وثابت للبيانات بين النظراء واستخدامها للتحقق من الكتل بدلاً من التحقق من الكتل مقابل قواعد البيانات المحلية. [الفصل بين المُقترح والباني](/roadmap/pbs/) مطلوب أيضًا لأن هذا يسمح لبناة الكتل بأن يكونوا عُقدًا متخصصة ذات أجهزة أكثر قوة، وهذه هي التي تتطلب الوصول إلى بيانات الحالة الكاملة.

<ExpandableCard title="لمَ يُقبل الاعتماد على عدد أقل من مقترحي الكتل؟" eventCategory="/roadmap/statelessness" eventName="clicked why is it OK to rely on fewer block proposers?">

يعتمد انعدام الجنسية على احتفاظ منشئي الكتل بنسخة من بيانات الحالة الكاملة حتى يتمكنوا من إنشاء شهود يمكن استخدامها للتحقق من الكتلة. لا تحتاج العقد الأخرى إلى الوصول إلى بيانات الحالة، فكل المعلومات المطلوبة للتحقق من الكتلة متوفرة في الشاهد. يؤدي هذا إلى إنشاء موقف يكون فيه اقتراح الكتلة مكلفًا، ولكن التحقق من الكتلة رخيص، مما يعني أن عددًا أقل من المشغلين سوف يقومون بتشغيل عقدة اقتراح الكتلة. ومع ذلك، فإن لامركزية مقترحي الكتل ليست أمرًا بالغ الأهمية طالما أن أكبر عدد ممكن من المشاركين يمكنهم التحقق بشكل مستقل من صحة الكتل التي يقترحونها.

<ButtonLink variant="outline-color" href="https://notes.ethereum.org/WUUUXBKWQXORxpFMlLWy-w#So-why-is-it-ok-to-have-expensive-proposers">اقرأ المزيد في ملاحظات Dankrad</ButtonLink> </ExpandableCard>

يستخدم مقترحو الكتلة بيانات الحالة لإنشاء "شهود" - الحد الأدنى من مجموعة البيانات التي تثبت قيم الحالة التي يتم تغييرها من خلال المعاملات في الكتلة. لا تحتفظ أدوات التحقق الأخرى بالحالة، بل تقوم فقط بتخزين جذر الحالة (تجزئة الحالة بأكملها). يتلقون كتلة وشاهدًا ويستخدمونها لتحديث جذر حالتهم. وهذا يجعل عقدة التحقق خفيفة الوزن للغاية.

إن انعدام الجنسية الضعيفة في حالة متقدمة من البحث، ولكنه يعتمد على الفصل بين مقدم الاقتراح والباني وتنفيذ Verkle Trees بحيث يمكن نقل الشهود الصغار بين الأقران. وهذا يعني أن انعدام الجنسية الضعيف ربما يكون على بعد بضع سنوات من Ethereum Mainnet.

### انعدام الحالة القوي {#strong-statelessness}

يزيل انعدام الجنسية القوي الحاجة إلى أي عقدة لتخزين بيانات الحالة. وبدلاً من ذلك، يتم إرسال المعاملات مع شهود يمكن تجميعهم بواسطة منتجي الكتل. يكون منتجو الكتلة مسؤولين بعد ذلك عن تخزين تلك الحالة اللازمة لإنشاء الشهود للحسابات ذات الصلة فقط. يتم نقل مسؤولية الدولة بالكامل تقريبًا إلى المستخدمين، حيث يرسلون الشهود و"قوائم الوصول" للإعلان عن الحسابات ومفاتيح التخزين التي يتفاعلون معها. وهذا من شأنه أن يتيح عقدًا خفيفة الوزن للغاية، ولكن هناك مقايضات بما في ذلك جعل التعامل مع العقود الذكية أكثر صعوبة.

قام الباحثون بالتحقيق في حالات انعدام الجنسية القوية ولكن من غير المتوقع حاليًا أن تكون جزءًا من خارطة طريق إيثريوم - فمن المرجح أن يكون انعدام الجنسية الضعيف كافيًا لاحتياجات التوسع في إيثريوم.

## التقدم الحالي {#current-progress}

إن حالات انعدام الجنسية الضعيفة وانتهاء التاريخ وانتهاء الدولة كلها في مرحلة البحث ومن المتوقع أن يتم شحنها بعد عدة سنوات من الآن. ليس هناك ما يضمن تنفيذ جميع هذه المقترحات، على سبيل المثال، إذا تم تنفيذ انتهاء الحالة أولاً، فقد لا تكون هناك حاجة أيضًا إلى تنفيذ انتهاء التاريخ. هناك أيضًا عناصر أخرى في خارطة الطريق، مثل [أشجار Verkle](/roadmap/verkle-trees) و[الفصل بين المُقترح والباني](/roadmap/pbs) التي يجب إكمالها أولًا.

## قراءة إضافية{#further-reading}

- [ما هو إيثريوم عديم الحالة؟](https://stateless.fyi/)
- [جلسة "اسألني أي شيء" مع Vitalik حول انعدام الحالة](https://www.reddit.com/r/ethereum/comments/o9s15i/impromptu_technical_ama_on_statelessness_and/)
- [نظرية إدارة حجم الحالة](https://hackmd.io/@vbuterin/state_size_management)
- [تحديد الحالة مع تقليل تعارض الإحياء](https://ethresear.ch/t/resurrection-conflict-minimized-state-bounding-take-2/8739)
- [مسارات إلى انعدام الحالة وانتهاء صلاحية الحالة](https://hackmd.io/@vbuterin/state_expiry_paths)
- [مواصفات EIP-4444](https://eips.ethereum.org/EIPS/eip-4444)
- [أليكس ستوكس يتحدث عن EIP-4444](https://youtu.be/SfDC_qUZaos)
- [لماذا من المهم جدًا الانتقال إلى انعدام الحالة](https://dankradfeist.de/ethereum/2021/02/14/why-stateless.html)
- [الملاحظات الأصلية لمفهوم العميل عديم الحالة](https://ethresear.ch/t/the-stateless-client-concept/172)
- [المزيد حول انتهاء صلاحية الحالة](https://hackmd.io/@vbuterin/state_size_management#A-more-moderate-solution-state-expiry)
- [المزيد والمزيد حول انتهاء صلاحية الحالة](https://hackmd.io/@vbuterin/state_expiry_paths#Option-2-per-epoch-state-expiry)
- [صفحة معلومات إيثريوم عديم الحالة](https://stateless.fyi)
