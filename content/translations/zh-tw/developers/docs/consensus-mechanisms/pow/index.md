---
title: 工作量證明 (PoW)
description: 解釋工作量證明共識協定及其在以太坊中的作用。
lang: zh-tw
---

在以太坊網路的初期，我們使用一種涉及**[工作量證明 (PoW)](/developers/docs/consensus-mechanisms/pow)** 的共識機制。 這個機制讓以太坊網路的節點對所有在以太坊區塊鏈上紀錄的資訊的狀態達成共識，並可防範某些種類的經濟攻擊。 但是，以太坊於 2022 年停止使用工作量證明，並轉為使用[權益證明](/developers/docs/consensus-mechanisms/pos)。

<InfoBanner emoji=":wave:">
    現在，業界普遍都已棄用工作量證明。 以太坊亦不在其共識機制內使用工作量證明。 取而代之的，是權益證明。 閱讀更多關於<a href="/developers/docs/consensus-mechanisms/pos/">權益證明</a>和<a href="/staking/">質押</a>的資訊。
</InfoBanner>

## 基本資訊 {#prerequisites}

為了更好地理解本頁內容，我們推薦你先閱讀[交易](/developers/docs/transactions/)、[區塊](/developers/docs/blocks/)及[共識機制](/developers/docs/consensus-mechanisms/)。

## 什麼是工作量證明 (PoW)？ {#what-is-pow}

中本聰共識採用工作量證明，這是一種機制，一度允許去中心化的以太坊網路對帳戶餘額和交易順序等達成共識（即所有節點都同意）。 這種機制防止使用者「重複支付」他們的代幣，同時確保以太坊區塊鏈極難攻擊或操控。 這些安全特性現在來自權益證明，而不是使用被稱為 [Gasper](/developers/docs/consensus-mechanisms/pos/gasper/) 的共識機制。

## 工作量證明 (PoW) 與挖礦 {#pow-and-mining}

工作量證明是一種基礎演算法，它為礦工在工作量證明區塊鏈上進行的工作設定難度和規則。 挖礦即為「工作」本身。 此行為指新增合法區塊於區塊鏈。 這很重要，因為鏈的長度有助於網路跟隨區塊鏈的正確分叉。 達成的「工作」越多，區塊鏈越長，而隨著區塊數量增加，當前網路狀態之確定性也隨之提高。

[更多挖礦相關訊息](/developers/docs/consensus-mechanisms/pow/mining/)

## 以太坊的工作量證明 (PoW) 如何運作？ {#how-it-works}

以太坊交易被處理至區塊中。 在現已棄用的工作量證明以太坊中，每個區塊包含：

- 區塊難度 -– 例如: 3,324,092,183,262,715
- mixHash（混合雜湊）– 例如： `0x44bca881b07a6a09f83b130798072441705d9a665c5ac8bdf2f39a3cdf3bee29`
- 隨機數 – 例如：`0xd3ee432b4fb3d26b`

該區塊資料與工作量證明直接相關。

### 工作量證明機制 {#the-work}

工作量證明協定 Ethash 要求礦工經過激烈的試錯競賽，找出一個區塊的隨機數。 只有具備有效隨機數的區塊才能新增到鏈中。

當礦工爭相建立區塊時，會透過數學函式重複放置一個資料集，該資料集只能如曠工那般透過下載並執行整個區塊鏈來獲得。 此資料集用於產生一個低於目標（由區塊難度決定）的 mixHash。 而這樣做的最佳方式是透過試錯。

難度決定了雜湊值的目標。 目標越小，有效雜湊值集合就越小。 一旦生成雜湊值，其他礦工和用戶端就能非常輕鬆地驗證。 即使一筆交易發生變化，雜湊值也會變得完全不同，顯示存在詐欺行為。

雜湊使​​詐欺行為更容易被發現。 此外，工作量證明過程也大大遏制了對區塊鏈的攻擊。

### 工作量證明和安全性 {#security}

曠工會因為在以太坊主鏈上進行這項工作而得到獎勵。 對部分礦工而言，令他們去建立自己的新鏈的動機微乎其微，因為這會損害主鏈系統。 區塊鏈信賴基於單一狀態，並以此作為真實性來源。

工作量證明的目標是延伸區塊鏈。 最長的鏈是最可信的有效鏈，因為產生它所需的計算工作最多。 在以太坊的工作量證明系統中，幾乎不可能建立可擦除交易的新區塊、建立虛假交易或維護第二條鏈。 那是因為，惡意礦工必須總能比其他所有人更快解出區塊隨機數。

為持續建立惡意但有效的區塊，惡意礦工必須擁有超過 51% 的網路挖礦算力才能擊敗其他所有人。 如此巨大的「工作量」需要大量昂貴的算力，而消耗的能源甚至可能超過攻擊所得的收益。

### 工作量證明的經濟模型 {#economics}

工作量證明還負責發行新貨幣至系統中，獎勵礦工參與挖礦工作。

自[君士坦丁堡升級](/history/#constantinople)以來，成功建立區塊的礦工將獲得兩枚新鑄造的以太幣及部分交易費作為獎勵。 Ommer 區塊也會補償 1.75 枚以太幣。 Ommer 區塊是由一個礦工與另一個建立了規範區塊的曠工幾乎同時建立的有效區塊，規範區塊最終取決於首先在其上建置的鏈。 Ommer 區塊通常是因網路延遲而發生。

## 最終確定性 {#finality}

當一筆交易成為無法改變的區塊的一部分時，它便在以太坊上擁有了「最終確定性」。

由於礦工是以去中心化的方式工作，所以有可能同時生成兩個有效的區塊。 這會建立一個暫時性的分叉。 最終，後繼區塊挖掘出來並新增至其中一條鏈，這使得它變得更長，並成為被採用的鏈。

但更複雜的是，臨時分叉上被拒絕的交易可能尚未包含在被採用的鏈上。 此代表其交易結果可能被逆轉。 因此，最終確定性是指在認定交易完全不可逆前需要等待的時間。 在先前的工作量證明以太坊下，於特定區塊 `N` 上開采的區塊越多，`N` 中交易成功且不會被逆轉的置信度就越高。 現在，透過權益證明機制，最終確定性成為區塊的顯式屬性，而非機率屬性。

## 工作量證明的能源用量 {#energy}

工作量證明面臨的一個重大非議在於，為保障網路安全所需要的巨大能源消耗量。 為了維持安全性和去中心化，採用工作量證明的以太坊每年都要消耗大量能源。 在過渡到權益證明的前夕，以太坊礦工每年總共消耗約 70 太瓦時的能源（大約與捷克共和國的能源消耗相當 - 資料來自 2022 年 7 月 18 日的 [digiconomist](https://digiconomist.net/)）。

## 優勢及劣勢 {#pros-and-cons}

| 優勢                                                                                                               | 劣勢                                        |
| ---------------------------------------------------------------------------------------------------------------- | ----------------------------------------- |
| 工作量證明為中性。 無須任何以太幣就能參與，而區塊獎勵可讓你從 0 以太幣積累正餘額。 相反，於[權益證明](/developers/docs/consensus-mechanisms/pos/)系統，你需要以太幣才能參與。 | 工作量證明消耗巨量能源，對環境造成傷害。                      |
| 工作量證明採用試錯型共識機制，已長年確保比特幣及以太坊之安全和去中心化。                                                                             | 若要參與挖礦，需要大筆先期投資，購買專業挖礦設備。                 |
| 相較於權益證明，工作量證明更易於實作。                                                                                              | 因算力需求增加，挖礦工作可能被少數有權勢的挖礦池所霸佔，引發去中心化及安全性風險。 |

## 相較於權益證明 {#compared-to-pos}

於高層面來看，權益證明與工作量證明具同一目標：協助去中心化網路達成共識並確保其安全。 但其過程和人員有所不同：

- 權益證明以質押的以太幣取代算力之重要性。
- 權益證明以驗證者取代礦工。 驗證者透過質押以太幣來啟動建立新區塊的能力。
- 驗證者無須相互競爭以建立區塊，相反，他們將由演算法隨機選擇。
- 最終確定性更加明瞭：於特定檢查點，若三分之二的驗證者同意此區塊狀態，則視其為最終確定。 驗證者須賭上全部質押，所以當他們試圖串通一氣時，將會損失全部質押。

[更多詳情關於質押證明(PoS)](/developers/docs/consensus-mechanisms/pos/)

## 想透過實際視覺學習? {#visual-learner}

<YouTube id="3EUAcxhuoU4" />

## 衍生閱讀 {#further-reading}

- [多數攻擊](https://en.bitcoin.it/wiki/Majority_attack)
- [決議最終確定性](https://blog.ethereum.org/2016/05/09/on-settlement-finality/)

### 影片 {#videos}

- [關於工作量證明協定的技術說明](https://youtu.be/9V1bipPkCTU)

## 相關主題 {#related-topics}

- [挖礦](/developers/docs/consensus-mechanisms/pow/mining/)
- [持有量證明（又稱：權益證明）](/developers/docs/consensus-mechanisms/pos/)
- [權威證明](/developers/docs/consensus-mechanisms/poa/)
