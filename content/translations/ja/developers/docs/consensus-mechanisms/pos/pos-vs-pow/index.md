---
title: プルーフ・オブ・ステークとプルーフ・オブ・ワークの比較
description: イーサリアムのプルーフ・オブ・ステークとプルーフ・オブ・ワークベースの合意メカニズムの比較
lang: ja
---

イーサリアムが開始された当初、プルーフ・オブ・ステークがイーサリアムの安全性を保証できるようになるまでには、まだ多くの研究開発が必要でした。 プルーフ・オブ・ワークは、ビットコインによってすでに実証済みの、より単純なメカニズムです。そのため、イーサリアムの立ち上げ時に、コア開発者すぐに実装することができました。 プルーフ・オブ・ステークを実装できるレベルまで開発するには、さらに8年もの歳月が必要でした。

このページでは、イーサリアムがプルーフ・オブ・ワークからプルーフ・オブ・ステークに切り替えた背後にある理論的根拠と、それに伴うトレードオフについて説明します。

## セキュリティ {#security}

イーサリアムの研究者は、プルーフ・オブ・ステークの方がプルーフ・オブ・ワークよりも安全であると考えています。 しかし、イーサリアムメインネットにプルーフ・オブ・ステークが実装されたのはつい最近であり、プルーフ・オブ・ワークと比較して、歴史的な安全性の証明がまだできません。 次のセクションでは、プルーフ・オブ・ワークと比較したプルーフ・オブ・ステークのセキュリティモデルの長所と短所について説明します。

### 攻撃コスト {#cost-to-attack}

プルーフ・オブ・ステークでは、バリデータはスマートコントラクトに少なくとも32ETHをエスクロー(ステーク)する必要があります。 イーサリアムは、不正行為を行ったバリデータを罰するために、ステークされたイーサを破壊することができます。 合意に達するには、ステークされたイーサ全体の少なくとも66%が特定のブロックのセットに賛成票を投じる必要があります。 ステークの66％の投票を受けたブロックは「ファイナライズ」となり、削除や再編成ができなくなります。

ネットワークを攻撃するということは、チェーンのファイナライズを妨げたり、何らかの形で攻撃者に利益をもたらすように正規チェーン内のブロックの特定の構成を確保したりすることを意味する場合があります。 そのためには、攻撃者が大量のイーサを蓄積して直接投票するか、正直なバリデータをだまして特定の方法で投票させることにより、誠実なコンセンサスの道を妨害する必要があります。 正直なバリデータをだます洗練された低確率の攻撃は別として、イーサリアムを攻撃するコストは、攻撃者が自分たちに有利なコンセンサスに影響を与えるために蓄積しなければならないステークのコストです。

攻撃の最低コストは総ステークの33%以上です。 攻撃者が総ステークの33%以上を保有している場合、オフラインになるだけでファイナリティ遅延が発生する可能性があります。 オンライン過半数がステークの66%を占め、再びチェーンを完成させることができるまで、オフラインのバリデータからステークを漏洩させる「非アクティブリーク」として知られるメカニズムがあるため、これはネットワークにとって比較的小さな問題です。 また理論的には、攻撃者がブロック生成者になるよう求められたときにブロックを 1つではなく2つ作成し、バリデータ全員に二重投票することで、総ステークの33%強でダブルファイナリティを引き起こすことも可能です。 各フォークでは、残りの誠実なバリデータの50%が各ブロックを最初に確認するだけでよいため、メッセージのタイミングを適切に調整できれば、両方のフォークを完了できる可能性があります。 これが成功する可能性は低いですが、攻撃者が二重ファイナリティを引き起こすことができた場合、イーサリアムコミュニティは、一方のフォークに従うことを決定する必要があります。その場合、攻撃者のバリデータは、必然的にもう一方のフォークでスラッシュされることになります。

総ステークの33%以上を使用すると、攻撃者はイーサリアムネットワークに軽微な影響(ファイナリティ遅延)またはより深刻な影響 (二重ファイナリティ) を与える可能性があります。 ネットワーク上に14,000,000 ETH以上がステークされており、代表的な価格が1000 ドル/ETHであるため、これらの攻撃を仕掛ける最小コストは、`1000 x 14,000,000 x 0.33 = 46億2,000,000ドル`となります。 攻撃者はスラッシュによってこのお金を失い、ネットワークから排除されてしまいます。 再度攻撃するには、ステークの33%以上を再び蓄積し、バーンする必要があります。 ネットワークへの攻撃を試みるたびに、46億ドル以上の費用がかかります(1,000ドル/ETHで1,400万ETHをステークした場合)。 攻撃者はスラッシュされるとネットワークからも排除され、再参加するにはアクティベーションキューに参加する必要があります。 これは、攻撃者が合計ステークの33%以上を蓄積できる割合に対してだけでなく、すべてのバリデータをネットワークにオンボードするのにかかる時間にも、反復攻撃の割合が制限されることを意味します。 攻撃者が攻撃するたびに、攻撃者はさらに貧乏になり、結果として生じる供給ショックのおかげで、他のコミュニティメンバーはさらに裕福になります。

51%攻撃や総ステークの66%によるファイナリティ復帰などの他の攻撃では、必要なETHの量が大幅に増加するため、攻撃者にとってははるかにコストがかかります。

これをプルーフ・オブ・ワークと比較してください。 プルーフ・オブ・ワークのイーサリアムに対する攻撃を開始するためには、総ネットワークハッシュレートの50%を継続的に所有するコストが必要でした。 このコストは、他のマイナーと競合して、プルーフ・オブ・ワーク・ソリューションを一貫して計算するために必要な、十分な計算能力を備えたハードウェアとランニングコストに相当します。 イーサリアムは主にASICではなくGPUでマイニングされていたため、コストを抑えることができていました(ただし、イーサリアムがプルーフ・オブ・ワークのままであった場合、ASICマイニングがさらに普及していた可能性もあります)。 攻撃者は、プルーフ・オブ・ワークのイーサリアムネットワークを攻撃するために、大量のハードウェアを購入し、それを稼働させるための電気代を支払う必要があります。しかし、その総コストは、攻撃を開始するのに十分なETHを蓄積するのに必要なコストよりも低くなります。 51%攻撃は、プルーフ・オブ・ワークの場合、プルーフ・オブ・ステークの20分の1以下の費用で実行できます。 攻撃が検出され、変更を削除するためにチェーンがハードフォークされた場合、攻撃者は同じハードウェアを繰り返し使用して新しいフォークを攻撃する可能性があります。

### 複雑性 {#complexity}

プルーフ・オブ・ステークはプルーフ・オブ・ワークよりもはるかに複雑です。 単純なプロトコルは、誤ったバグや意図しない影響が入り込みにくいため、プルーフ・オブ・ワークの安全性に有利になる可能性があります。 しかし、その複雑性は、長年にわたる研究開発、シミュレーション、テストネットの実装によって軽減されてきました。 プルーフ・オブ・ステークのプロトコルは、5つのプログラミング言語で、実行レイヤーとコンセンサスレイヤーのそれぞれを担当する5つの個別のチームによって独立して実装されており、クライアントのバグに対する回復力を提供します。

イーサリアムがプルーフ・オブ・ステークをメインネットに実装する2年前、コンセンサスロジックを安全に開発、テストするために、ビーコンチェーンが開始されました。 ビーコンチェーンは、プルーフ・オブ・ステークのコンセンサスのロジックを実装するライブブロックチェーンであるため、プルーフ・オブ・ステークのテストを行うためのサンドボックスとして機能しました。しかし、実際のイーサリアムのトランザクションには関与せず、実際は、ビーコンチェーン内でのみコンセンサスを形成するだけでした。 ビーコンチェーンは、十分な期間にわたって状態が安定し、バグがなくなると、イーサリアムメインネットに「マージ」されました。 これらの取り組みによって、プルーフ・オブ・ステークの複雑性を軽減し、予期せぬ結果やクライアントのバグが発生するリスクを大幅に低減することができました。

### 攻撃対象領域 {#attack-surface}

プルーフ・オブ・ステークはプルーフ・オブ・ワークよりも複雑です。そのため、処理すべき潜在的な攻撃ベクトルもより多く存在します。 クライアントを接続する1つのピアツーピアネットワークの代わりに、2つのピアツーピアネットワークがあり、それぞれが別のプロトコルを実装しています。 各スロットでブロックを提案する特定のバリデータ1つを事前に選択すると、大量のネットワークトラフィックによってそのバリデータがオフラインになり、サービス妨害の可能性が生じます。

攻撃者がブロックやアテステーションのリリースのタイミングを慎重に調整することで、それらが誠実なネットワークの一定割合で受信され、特定の方法で投票するように影響を与えることができます。 また、攻撃者は単純に十分なETHを蓄積してステーキングし、合意メカニズムを支配することもできます。 これらの攻撃ベクトルにはそれぞれ防御手段がありますが、プルーフ・オブ・ワークの下では十分な防御とはなりません。

## 分散化 {#decentralization}

プルーフ・オブ・ステークは、プルーフ・オブ・ワークよりも分散化されています。マイニングに要するハードウェア激しい競争により、個人や小さな組織が価格の面で排除される傾向があるためです。 技術的には、誰でも一般的なハードウェアでマイニングを開始することができます。しかし、機関によるマイニング事業と比較すると、報酬を受け取る可能性は極めて低くなります。 プルーフ・オブ・ステークでは、ステーキングのコストとリターンは、誰もが平等です。 現在では、バリデータを運用するためには32ETHが必要です。

一方で、リキッドステーキングデリバティブの開発によって、集中化の懸念が生じています。少数の大規模なプロバイダーが、大量のステーキングされたETHを管理するためです。 この問題は、できる限り早く是正する必要がありますが、別の観点もあります。 集中化しているステーキングプロバイダーは、バリデータの管理の面では必ずしも集中化しているわけではありません。これは、多くの場合、ETHをまとめてプールするための方法であり、多くの独立したノードオペレータは、参加者の誰もが必要な32ETHの所有額を要せずステーキングできるためです。

バリデータが自宅のコンピュータ上でローカルに実行し、分散化を最大限に高めることが、イーサリアムにとって最善の選択肢です。 そのため、イーサリアムは、ノードおよびバリデータを実行するためのハードウェア要件の増加に対する変更に反対しています。

## サステナビリティ {#sustainability}

プルーフ・オブ・ステークは、プルーフ・オブ・ワークに比べて、ブロックチェーンを保護するために必要な炭素排出量が少なくなっています。 プルーフ・オブ・ワークでは、ブロックをマイニングする権利をめぐり競争が繰り広げられています。 マイナーは、計算を速く実行できれば、成功する可能性が高くなるので、ハードウェアやエネルギー消費に投資する傾向があります。 この現象は、イーサリアムがプルーフ・オブ・ステークに移行する前に見られました。 プルーフ・オブ・ステークに移行する直前、イーサリアムの年間消費電力量は約78TWに達し、小国一国分の電力に匹敵していました。 しかし、移行後はエネルギー消費は約99.98%削減され、 イーサリアムはエネルギー効率の高い低炭素プラットフォームへと生まれ変わりました。

[イーサリアムのエネルギー消費の詳細](/energy-consumption)

## 発行 {#issuance}

プルーフ・オブ・ステークのイーサリアムでは、バリデータが高額な電気代を支払う必要がないため、プルーフ・オブ・ワークのイーサリアムよりもはるかに少量のコインの発行でセキュリティを確保できます。 その結果、大量のETHがバーンされると、ETHのインフレ率が低下するか、デフレになる可能性もあります。 低いインフレ率は、イーサリアムのセキュリティがプルーフ・オブ・ワークを使っていた時よりも安価であることを意味しています。

## 映像で学びたい場合 {#visual-learner}

Justin Drakが、プルーフ・オブ・ワークよりも優れたプルーフ・オブ・ステークの利点について説明します。

<YouTube id="1m12zgJ42dI" />

## 参考文献 {#further-reading}

- [ヴィタリックによるプルーフ・オブ・ステークの設計哲学](https://medium.com/@VitalikButerin/a-proof-of-stake-design-philosophy-506585978d51)
- [ヴィタリックによるプルーフ・オブ・ステークのFAQ](https://vitalik.eth.limo/general/2017/12/31/pos_faq.html#what-is-proof-of-stake)
- [シンプルにPoSとPoWの比較を説明したビデオ](https://www.youtube.com/watch?v=M3EFi_POhps)
