---
title: Механизмы консенсуса
description: Объяснение протоколов консенсуса в распределенных системах и роль, которую они играют в Ethereum.
lang: ru
incomplete: true
---

Когда дело доходит до блокчейнов, таких как Ethereum, которые по сути являются распределенными базами данных, то узлы сети должны быть готовы достичь согласия относительно текущего состояния системы. Это достигается благодаря использованию механизмов консенсуса.

Хотя механизмы консенсуса не связаны напрямую с созданием децентрализованного приложения, их понимание проливает свет на концепции, относящиеся к вашему опыту и опыту ваших пользователей, такие как цены на газ и время транзакции.

## Прежде чем начать {#prerequisites}

Для лучшего понимания этой страницы мы рекомендуем сначала прочитать [введение в Ethereum](/developers/docs/intro-to-ethereum/).

## Что такое консенсус? {#what-is-consensus}

Под консенсусом мы подразумеваем достижение общего согласия. Рассмотрим группу людей, идущих в кино. Если нет разногласий по выбранному фильму, то достигается консенсус. В противном случае эта группа разойдется.

Что касается блокчейна, достижение консенсуса означает, что по крайней мере 51 % узлов в сети согласны со следующим глобальным состоянием сети.

## Что такое механизм консенсуса? {#what-is-a-consensus-mechanism}

Механизмы консенсуса (также известные как консенсусные протоколы или алгоритмы консенсуса) позволяют распределенным системам (сетям компьютеров) работать вместе и оставаться в безопасности.

На протяжении десятилетий эти механизмы используются для достижения консенсуса между узлами баз данных, серверами прикладных программ и другими инфраструктурами предприятий. В последние годы были изобретены новые механизмы консенсуса, позволяющие криптоэкономическим системам, таким как Ethereum, согласовывать состояние сети.

Консенсусный механизм в криптоэкономической системе также помогает предотвратить определенные экономические атаки. Теоретически нападающий может скомпрометировать консенсус, контролируя 51 % сети. Механизмы консенсуса призваны сделать такую «атаку 51 %» нецелесообразной. Для решения этой проблемы безопасности разработаны различные механизмы.

<YouTube id="dylgwcPH4EA" />

## Виды алгоритмов консенсуса {#types-of-consensus-mechanisms}

### Доказательство работы (PoW) {#proof-of-work}

Ethereum, как и Bitcoin, в настоящее время использует протокол консенсуса **«Доказательство работы» (Proof-of-Work, PoW)**.

#### Создание блока {#pow-block-creation}

Доказательство работы выполняется [майнерами](/developers/docs/consensus-mechanisms/pow/mining/), которые конкурируют за создание новых блоков, которые полны обработанными транзакциями. Победитель делится новым блоком с остальной сетью и зарабатывает свежевыпущенные ETH. Гонку выигрывает тот, чей компьютер быстрее всех решает математическую задачу — создает криптографическую связь между текущим блоком и предыдущим. Решение этой задачи — это и есть работа в системе с доказательством работы.

#### Безопасность {#pow-security}

Сеть защищена тем, что вам понадобится 51 % вычислительной мощности сети для компрометации цепочки. Это потребует огромных инвестиций в оборудование и энергию. Вероятно, придется потратить больше, чем удастся получить.

Подробнее о [доказательстве работы](/developers/docs/consensus-mechanisms/pow/)

### Доказательство владения (PoS) {#proof-of-stake}

Ethereum планируется перевести на консенсусный протокол **«Доказательство владения» (Proof-of-Stake, PoS)**.

#### Создание блока {#pos-block-creation}

Доказательством владения занимаются валидаторы, которые поставили свои ЕТН для участия в системе. Валидатор выбирается случайно, чтобы создавать новые блоки, делиться ими с сетью и получать награды. Вместо выполнения интенсивной вычислительной работы вам просто нужно разместить свои ETH в сети. Именно это стимулирует здоровое поведение в сети.

#### Безопасность {#pos-security}

Система с доказательством владения защищена тем фактом, что вам понадобится 51 % от общего количества ETH для компрометации этой цепочки. И что ваша ставка аннулируется за злонамеренное поведение.

Подробнее о [доказательстве владения](/developers/docs/consensus-mechanisms/pos/)

### Визуальное руководство {#types-of-consensus-video}

Узнайте больше о различных типах механизмов консенсуса, используемых в Ethereum:

<YouTube id="ojxfbN78WFQ" />

### Устойчивость к атаке Сибиллы и выбор цепи {#sybil-chain}

Технически доказательство работы и доказательство владения сами по себе не являются протоколами консенсуса, но их часто называют таковыми для простоты. На самом деле они являются механизмами сопротивления атаке Сибиллы и селекторами авторов блоков. Они позволяют решить, кто является автором последнего блока. Именно этот механизм устойчивости к атаке Сибиллы в сочетании с правилом выбора цепи составляет истинный механизм консенсуса.

**Устойчивость к атакам Сибиллы** показывает, насколько хорошо протокол противостоит [атаке Сибиллы](https://wikipedia.org/wiki/Sybil_attack). Атаки Сибиллы — это попытки одного пользователя или группы выдать себя за множество пользователей. Устойчивость к этому типу атак имеет важное значение для децентрализованного блокчейна и позволяет майнерам и валидаторам получать одинаковое вознаграждение в зависимости от вложенных ресурсов. Доказательство работы и доказательство владения защищают от этого, заставляя пользователей тратить много энергии или вносить большой залог. Эти средства защиты являются экономическим сдерживающим фактором для атак Сибиллы.

**Правило выбора цепи** используется, чтобы решить, какая цепочка является «правильной». Ethereum и Bitcoin в настоящее время используют правило «самой длинной цепи», поэтому самый длинный из блокчейнов оставшиеся узлы и будут принимать за действительный, выбирая его для работы. Для цепей с доказательством работы самая длинная цепочка определяется общей совокупной сложностью выполненной работы.

Комбинация принципа доказательства работы и самой длинной цепочки известна как «консенсус Накамото».

[Сеть Beacon Chain](/roadmap/beacon-chain/) использует механизм консенсуса под названием [Casper the Friendly Finality Gadget](https://arxiv.org/abs/1710.09437), основанный на доказательстве владения.

## Дополнительные ресурсы {#further-reading}

- [Что такое алгоритм консенсуса блокчейна?](https://academy.binance.com/en/articles/what-is-a-blockchain-consensus-algorithm)
- [Что такое консенсус Накамото? Полное руководство для начинающих](https://blockonomi.com/nakamoto-consensus/)
- [Как работает Casper?](https://medium.com/unitychain/intro-to-casper-ffg-9ed944d98b2d)
- [О безопасности и производительности блокчейнов с доказательством работы](https://eprint.iacr.org/2016/555.pdf)

_Знаете ресурс сообщества, который вам пригодился? Измените эту страницу и добавьте его!_

## Похожие темы {#related-topics}

- [Доказательство работы (PoW)](/developers/docs/consensus-mechanisms/pow/)
- [Майнинг](/developers/docs/consensus-mechanisms/pow/mining/)
- [Доказательство владения (PoS)](/developers/docs/consensus-mechanisms/pos/)
